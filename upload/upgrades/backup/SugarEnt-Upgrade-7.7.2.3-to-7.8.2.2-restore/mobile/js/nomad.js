/*
 * Your installation or use of this SugarCRM file is subject to the applicable
 * terms available at
 * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.
 * If you do not agree to all of the applicable terms or do not have the
 * authority to bind the entity as an authorized representative, then do not
 * install or use this SugarCRM file.
 *
 * Copyright (C) SugarCRM Inc. All rights reserved.
 */
(function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={exports:{},id:n,loaded:false};e[n].call(a.exports,a,a.exports,i);a.loaded=true;return a.exports}i.m=e;i.c=t;i.p="";return i(0)})([function(e,t,i){e.exports=i(242)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports=function(){var e=[];e.toString=function t(){var e=[];for(var t=0;t<this.length;t++){var i=this[t];if(i[2]){e.push("@media "+i[2]+"{"+i[1]+"}")}else{e.push(i[1])}}return e.join("")};e.i=function(t,i){if(typeof t==="string")t=[[null,t,""]];var n={};for(var a=0;a<this.length;a++){var o=this[a][0];if(typeof o==="number")n[o]=true}for(a=0;a<t.length;a++){var r=t[a];if(typeof r[0]!=="number"||!n[r[0]]){if(i&&!r[2]){r[2]=i}else if(i){r[2]="("+r[2]+") and ("+i+")"}e.push(r)}}};return e}},function(e,t,i){var n={},a=function(e){var t;return function(){if(typeof t==="undefined")t=e.apply(this,arguments);return t}},o=a(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),r=a(function(){return document.head||document.getElementsByTagName("head")[0]}),s=null,l=0,c=[];e.exports=function(e,t){if(false){if(typeof document!=="object")throw new Error("The style-loader cannot be used in a non-browser environment")}t=t||{};if(typeof t.singleton==="undefined")t.singleton=o();if(typeof t.insertAt==="undefined")t.insertAt="bottom";var i=u(e);d(i,t);return function a(e){var a=[];for(var o=0;o<i.length;o++){var r=i[o];var s=n[r.id];s.refs--;a.push(s)}if(e){var l=u(e);d(l,t)}for(var o=0;o<a.length;o++){var s=a[o];if(s.refs===0){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete n[s.id]}}}};function d(e,t){for(var i=0;i<e.length;i++){var a=e[i];var o=n[a.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++){o.parts[r](a.parts[r])}for(;r<a.parts.length;r++){o.parts.push(m(a.parts[r],t))}}else{var s=[];for(var r=0;r<a.parts.length;r++){s.push(m(a.parts[r],t))}n[a.id]={id:a.id,refs:1,parts:s}}}}function u(e){var t=[];var i={};for(var n=0;n<e.length;n++){var a=e[n];var o=a[0];var r=a[1];var s=a[2];var l=a[3];var c={css:r,media:s,sourceMap:l};if(!i[o])t.push(i[o]={id:o,parts:[c]});else i[o].parts.push(c)}return t}function f(e,t){var i=r();var n=c[c.length-1];if(e.insertAt==="top"){if(!n){i.insertBefore(t,i.firstChild)}else if(n.nextSibling){i.insertBefore(t,n.nextSibling)}else{i.appendChild(t)}c.push(t)}else if(e.insertAt==="bottom"){i.appendChild(t)}else{throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.")}}function h(e){e.parentNode.removeChild(e);var t=c.indexOf(e);if(t>=0){c.splice(t,1)}}function p(e){var t=document.createElement("style");t.type="text/css";f(e,t);return t}function _(e){var t=document.createElement("link");t.rel="stylesheet";f(e,t);return t}function m(e,t){var i,n,a;if(t.singleton){var o=l++;i=s||(s=p(t));n=v.bind(null,i,o,false);a=v.bind(null,i,o,true)}else if(e.sourceMap&&typeof URL==="function"&&typeof URL.createObjectURL==="function"&&typeof URL.revokeObjectURL==="function"&&typeof Blob==="function"&&typeof btoa==="function"){i=_(t);n=x.bind(null,i);a=function(){h(i);if(i.href)URL.revokeObjectURL(i.href)}}else{i=p(t);n=b.bind(null,i);a=function(){h(i)}}n(e);return function r(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else{a()}}}var g=function(){var e=[];return function(t,i){e[t]=i;return e.filter(Boolean).join("\n")}}();function v(e,t,i,n){var a=i?"":n.css;if(e.styleSheet){e.styleSheet.cssText=g(t,a)}else{var o=document.createTextNode(a);var r=e.childNodes;if(r[t])e.removeChild(r[t]);if(r.length){e.insertBefore(o,r[t])}else{e.appendChild(o)}}}function b(e,t){var i=t.css;var n=t.media;var a=t.sourceMap;if(n){e.setAttribute("media",n)}if(e.styleSheet){e.styleSheet.cssText=i}else{while(e.firstChild){e.removeChild(e.firstChild)}e.appendChild(document.createTextNode(i))}}function x(e,t){var i=t.css;var n=t.media;var a=t.sourceMap;if(a){i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"}var o=new Blob([i],{type:"text/css"});var r=e.href;e.href=URL.createObjectURL(o);if(r)URL.revokeObjectURL(r)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){i.p="js/";i(243);SUGAR.App.augment("config",i(251),false);if(true){i(252)}i(253);i(254);i(255);i(256);i(257);i(276);i(277);i(278);i(279);i(280);i(281);i(282);i(284);i(285);i(286);i(265);i(287);i(288);i(289);i(290);i(291);i(292);i(274);i(273);i(293);i(294);i(295);i(296);i(297);i(319);i(320);i(321);i(305);i(322);i(323);i(324);i(325);i(326);i(327);i(328);i(329);i(262);i(309);i(318);i(306);i(330);i(331);i(332);i(333);i(334);i(335);i(336);i(337);i(338);i(339);i(340);i(341);i(342);i(343);i(344);i(345);i(346);i(347);i(308);i(348);i(349);i(350);i(351);i(352);i(355);i(303);i(356);i(357);i(358);i(317);i(359);i(360);i(361);i(362);i(363);i(364);i(365);i(366);i(367);i(368);i(298);i(369);i(354);i(370);i(371);i(372);i(373);i(374);i(353);i(375);i(376);i(377);i(380);i(381);i(382);i(383);i(283);i(384);i(385);i(386);i(387);i(388);i(385);i(389);i(390);i(391);i(392);i(393);i(394);i(395);i(396);i(397);i(398);i(399);i(400);i(401);i(402);i(403);i(404);i(405);i(313);i(406);i(407);i(408);i(409);i(410);i(411);i(412);if(true){i(260);i(413);i(275);i(414)}else{require("%app.js%/native/nomad");require("%app.js%/native/local-security.es6");require("%app.js%/native/keychain");require("%app.js%/native/translation");require("%app.js%/native/login-manager")}if(["e2e","debug","qa"].indexOf("store")!==-1){i(415)}if(false){require("%app%/entries/custom")}if(false){e.hot.accept("%app%/less/bootstrap-mobile.less")}if(false){require("%app.js%/utils/offline-storage-benchmark.js")}},function(e,t,i){var n=i(244);if(typeof n==="string")n=[[e.id,n,""]];var a=i(181)(n,{});if(n.locals)e.exports=n.locals;if(false){if(!n.locals){e.hot.accept("!!./../../node_modules/css-loader/index.js!./../../node_modules/less-loader/index.js?noIeCompat!./bootstrap-mobile.less",function(){var t=require("!!./../../node_modules/css-loader/index.js!./../../node_modules/less-loader/index.js?noIeCompat!./bootstrap-mobile.less");if(typeof t==="string")t=[[e.id,t,""]];a(t)})}e.hot.dispose(function(){a()})}},function(e,t,i){t=e.exports=i(180)();t.push([e.id,'/*!\n * Bootstrap v2.0.1\n *\n * Copyright 2012 Twitter, Inc\n * Licensed under the Apache License v2.0\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Designed and built with all the love in the world @twitter by @mdo and @fat.\n *//*!\n// https://github.com/FortAwesome/Font-Awesome\n// MIT License\n\nThis Font Software is licensed under the SIL Open Font License, Version 1.1.\nThis license is copied below, and is also available with a FAQ at:\nhttp://scripts.sil.org/OFL\n\n\n-----------------------------------------------------------\nSIL OPEN FONT LICENSE Version 1.1 - 26 February 2007\n-----------------------------------------------------------\n\nPREAMBLE\nThe goals of the Open Font License (OFL) are to stimulate worldwide\ndevelopment of collaborative font projects, to support the font creation\nefforts of academic and linguistic communities, and to provide a free and\nopen framework in which fonts may be shared and improved in partnership\nwith others.\n\nThe OFL allows the licensed fonts to be used, studied, modified and\nredistributed freely as long as they are not sold by themselves. The\nfonts, including any derivative works, can be bundled, embedded,\nredistributed and/or sold with any software provided that any reserved\nnames are not used by derivative works. The fonts and derivatives,\nhowever, cannot be released under any other type of license. The\nrequirement for fonts to remain under this license does not apply\nto any document created using the fonts or their derivatives.\n\nDEFINITIONS\n"Font Software" refers to the set of files released by the Copyright\nHolder(s) under this license and clearly marked as such. This may\ninclude source files, build scripts and documentation.\n\n"Reserved Font Name" refers to any names specified as such after the\ncopyright statement(s).\n\n"Original Version" refers to the collection of Font Software components as\ndistributed by the Copyright Holder(s).\n\n"Modified Version" refers to any derivative made by adding to, deleting,\nor substituting -- in part or in whole -- any of the components of the\nOriginal Version, by changing formats or by porting the Font Software to a\nnew environment.\n\n"Author" refers to any designer, engineer, programmer, technical\nwriter or other person who contributed to the Font Software.\n\nPERMISSION & CONDITIONS\nPermission is hereby granted, free of charge, to any person obtaining\na copy of the Font Software, to use, study, copy, merge, embed, modify,\nredistribute, and sell modified and unmodified copies of the Font\nSoftware, subject to the following conditions:\n\n1) Neither the Font Software nor any of its individual components,\nin Original or Modified Versions, may be sold by itself.\n\n2) Original or Modified Versions of the Font Software may be bundled,\nredistributed and/or sold with any software, provided that each copy\ncontains the above copyright notice and this license. These can be\nincluded either as stand-alone text files, human-readable headers or\nin the appropriate machine-readable metadata fields within text or\nbinary files as long as those fields can be easily viewed by the user.\n\n3) No Modified Version of the Font Software may use the Reserved Font\nName(s) unless explicit written permission is granted by the corresponding\nCopyright Holder. This restriction only applies to the primary font name as\npresented to the users.\n\n4) The name(s) of the Copyright Holder(s) or the Author(s) of the Font\nSoftware shall not be used to promote, endorse or advertise any\nModified Version, except to acknowledge the contribution(s) of the\nCopyright Holder(s) and the Author(s) or with their explicit written\npermission.\n\n5) The Font Software, modified or unmodified, in part or in whole,\nmust be distributed entirely under this license, and must not be\ndistributed under any other license. The requirement for fonts to\nremain under this license does not apply to any document created\nusing the Font Software.\n\nTERMINATION\nThis license becomes null and void if any of the above conditions are\nnot met.\n\nDISCLAIMER\nTHE FONT SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT\nOF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL THE\nCOPYRIGHT HOLDER BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nINCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL\nDAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM\nOTHER DEALINGS IN THE FONT SOFTWARE.\n*//*!\n * Your installation or use of this SugarCRM file is subject to the applicable\n * terms available at\n * http://support.sugarcrm.com/Resources/Master_Subscription_Agreements/.\n * If you do not agree to all of the applicable terms or do not have the\n * authority to bind the entity as an authorized representative, then do not\n * install or use this SugarCRM file.\n *\n * Copyright (C) SugarCRM Inc. All rights reserved.\n */body,svg{-webkit-touch-callout:none}#me,.box__header .header__inner .btn,.box__menu .menu__item .menu-item__link,.dashlets__title{text-overflow:ellipsis;white-space:nowrap}@keyframes triggerRepaint{0%,100%{width:100%}50%{width:100.001%}}@-webkit-keyframes triggerRepaint{0%,100%{width:100%}50%{width:100.001%}}@-webkit-keyframes rotate{from{-webkit-transform:rotate(0)}to{-webkit-transform:rotate(360deg)}}.rotation{-webkit-animation-name:rotate;-webkit-animation-duration:2s;-webkit-animation-iteration-count:infinite;-webkit-animation-timing-function:linear}@font-face{font-family:\'Open Sans\';font-style:normal;font-weight:600;src:url('+i(245)+") format('truetype')}@font-face{font-family:'Open Sans';font-style:normal;font-weight:400;src:url("+i(246)+') format(\'truetype\')}svg{-webkit-user-select:none;user-select:none;display:block;width:100%;height:100%;max-height:500px}.taggable-shadow,body{-webkit-user-select:none}svg text{font:400 13px "Helvetica Neue",Helvetica,Arial,sans-serif;fill:#555;stroke:none;cursor:default}svg .title{font:700 13px + 2 "Helvetica Neue",Helvetica,Arial,sans-serif}.nv-axis .nv-axisMaxMin text,.nv-labels text,.nv-noData{font-weight:700}.nv-axislabel,em{font-style:italic}.nv-background{fill:#fff}.nv-chart{min-width:300px;min-height:100px;position:relative}#nomad,.tooltip,.tooltip-arrow{position:absolute}.nv-chart svg{max-height:none}.nv-noData{font-size:17px}.nv-label-value text,.nv-title,text.nv-label-value{font-size:15px}.nv-labels text{fill:#666}.nv-label-box{fill:transparent}.nvtooltip{pointer-events:none}.nvtooltip-pending-removal{position:absolute;pointer-events:none}.nv-legend .nv-series{cursor:pointer;font-size:13px}.nv-legend .nv-series line{fill:none}.nv-legend .nv-series text{cursor:pointer}.nv-legend .disabled circle{fill:#fff}.nv-legend-background{fill:rgba(255,255,255,.9);stroke:rgba(161,160,160,.75);stroke-width:1px}.nv-legend-link{cursor:pointer;fill:#0679c8}.nv-legend-link:hover{fill:#055b96;text-decoration:underline}.tooltip-inner,a{text-decoration:none}.nv-lineLegend .nv-series,.nv-lineLegend .nv-series text{cursor:default}.nv-axis line,.nv-axis path,.nv-axis polyline{fill:none;stroke:#CDCCCB;stroke-width:2px;shape-rendering:crispEdges;pointer-events:none}.nv-axis line,.nv-axis polyline{stroke-opacity:.3}.nv-axis line.zero,.nv-axis path{stroke-opacity:.75}.nv-axis path.domain{stroke-width:2px;stroke:#bbb}.nv-x.nv-axis text{font-size:13px}.nv-axislabel{font-weight:900}.nv-multibar .nv-group rect{stroke-opacity:1;stroke-width:2px;stroke:#fff}.nv-multibar .nv-group.hover rect{fill-opacity:.75}.nv-texture{fill-opacity:0!important;pointer-events:none}.texture-line{stroke-width:1px}.nv-active .nv-texture{fill-opacity:1!important}.nv-active .nv-label-box{fill:inherit}.nv-inactive .nv-texture{fill-opacity:0!important}.calc-text-strings,.nv-multibar .nv-groups text{fill:#000;stroke:transparent;pointer-events:none}.nv-pie .nv-slice.hover path{fill-opacity:.75}.nv-pie .nv-slice polyline{stroke-width:1px;pointer-events:none}.nv-holeWrap text{text-anchor:middle}text.nv-pie-hole-value{font-size:32px;font-weight:700}text.nv-pie-hole-label{font-size:11px}.nv-groups path.nv-line{fill:none;stroke-width:2.5px;stroke-linecap:round;shape-rendering:geometricPrecision}.nv-groups path.nv-area{stroke:none;stroke-linecap:round;shape-rendering:geometricPrecision}.nv-line.hover path{stroke-width:6px}.nv-line .nv-scatter .nv-groups .nv-point{fill-opacity:1;stroke-opacity:1;stroke:#fff}.nv-scatter.nv-single-point .nv-groups .nv-point{stroke-width:2px}.nv-groups .nv-point.hover,.nv-scatter .nv-groups .nv-point.hover{stroke-width:16px;stroke-opacity:.5!important;stroke:inherit}.nv-point-paths path{stroke:transparent;stroke-opacity:0;fill:transparent;fill-opacity:0}.nv-indexLine{cursor:ew-resize}.nv-card .nv-expcoll,.nv-treemap .nv-children .nv-parent,.nv-treemap .nv-grandparent rect{cursor:pointer}.nv-distribution,.nv-groups .nv-point{pointer-events:none}.nv-groups .nv-point.hover{stroke-width:20px;stroke-opacity:.5}.nv-scatter .nv-point.hover{fill-opacity:1}.nv-stackedarea path.nv-area{fill-opacity:.7;stroke-opacity:0}.nv-stackedarea path.nv-area.hover{fill-opacity:.9}.nv-stackedarea .nv-groups .nv-point{stroke-opacity:0;fill-opacity:0}.nv-stackedarea .nv-groups .nv-point.hover{stroke-width:20px;stroke-opacity:.75;fill-opacity:1}.nv-odomText{font-weight:700;fill:#000}.nv-arc-group{fill:#4682b4}.nv-pointer{fill:#888;stroke:#fff}.nv-funnelChart .nv-slice.hover polygon{fill-opacity:.75}.nv-funnelChart .nv-y path{stroke:none}.nv-funnelChart .nv-label-value text.nv-label{font-size:13px}.nv-funnelChart .nv-label-value text.nv-value{font-size:15px}.nv-bubbleChart .nv-scatter.nv-single-point .nv-groups .nv-point{fill-opacity:1;stroke-opacity:1}.nv-multiBarWithLegend .nv-line .nv-scatter .nv-groups .nv-point{fill-opacity:1;stroke-opacity:1;stroke-width:2px}.nv-pareto .nv-quotaWrap line{opacity:.8;stroke:#444;stroke-width:4px;fill:none}.nv-pareto .nv-quotaWrap line.nv-quotaLineTarget{stroke:#777}.nv-pareto .nv-quotaWrap line.nv-quotaLineBackground{opacity:0;stroke-width:12px}.nv-pareto .nv-y.nv-axis .domain{display:none}.nv-pareto .nv-y.nv-axis text.nv-quotaValue,.nv-pareto .nv-y.nv-axis text.nv-targetQuotaValue{font-weight:700}.nv-pareto .nv-line .nv-groups path{stroke-width:4px}.nv-pareto .nv-linesWrap1 .nv-line .nv-groups path{stroke-width:6px}.nv-pareto .nv-linesWrap2 .nv-scatter .nv-groups circle,.nv-treemap rect{stroke:#fff}.nv-treemap{background-color:#fff}.nv-treemap text{pointer-events:none;fill:#fff}.nv-treemap .nv-depth text{fill:#fff}.nv-treemap .nv-grandparent text{font-weight:700;fill:#58595B}.nv-treemap .nv-children.hover .nv-parent{fill:#fff;opacity:.3}.nv-treemap .nv-grandparent rect,.nv-treemap .nv-parent{stroke-width:3px}.nv-treemap .nv-child{stroke-width:1px}.nv-treemap .nv-parent{fill:none;font-weight:400;pointer-events:all}.nv-treemap .nv-grandparent rect{fill:#fff}.nv-card{fill:#E9EFEF;stroke:#AAA;stroke-width:.5px}.nv-card .nv-circ-front{stroke-width:0}.nv-card line{stroke-width:2}.nv-tree path.link{fill:none;stroke:#ccc;stroke-width:1.5px}.nv-fill-green{fill:#33800d;background-color:#33800d}.nv-fill-red{fill:#e61718;background-color:#e61718}.nv-fill-blue{fill:#176de5;background-color:#176de5}.nv-fill00{fill:#e61718;background-color:#e61718}.nv-fill01{fill:#cc3314;background-color:#cc3314}.nv-fill02{fill:#e5a117;background-color:#e5a117}.nv-fill03{fill:#6a800d;background-color:#6a800d}.nv-fill04{fill:#33800d;background-color:#33800d}.nv-fill05{fill:#0d8046;background-color:#0d8046}.nv-fill06{fill:#0d806c;background-color:#0d806c}.nv-fill07{fill:#0f7799;background-color:#0f7799}.nv-fill08{fill:#1378bf;background-color:#1378bf}.nv-fill09{fill:#176de5;background-color:#176de5}.nv-fill10{fill:#1f12b3;background-color:#1f12b3}.nv-fill11{fill:#6d17e5;background-color:#6d17e5}.nv-fill12{fill:#e5176d;background-color:#e5176d}.nv-fill13{fill:#ff6fcf;background-color:#ff6fcf}.nv-legend .nv-fill00{stroke:#e61718}.nv-legend .nv-fill01{stroke:#cc3314}.nv-legend .nv-fill02{stroke:#e5a117}.nv-legend .nv-fill03{stroke:#6a800d}.nv-legend .nv-fill04{stroke:#33800d}.nv-legend .nv-fill05{stroke:#0d8046}.nv-legend .nv-fill06{stroke:#0d806c}.nv-legend .nv-fill07{stroke:#0f7799}.nv-legend .nv-fill08{stroke:#1378bf}.nv-legend .nv-fill09{stroke:#176de5}.nv-legend .nv-fill10{stroke:#1f12b3}.nv-legend .nv-fill11{stroke:#6d17e5}.nv-legend .nv-fill12{stroke:#e5176d}.nv-legend .nv-fill13{stroke:#ff6fcf}.nv-stroke00{stroke:#e61718;color:#e61718}.nv-stroke01{stroke:#cc3314;color:#cc3314}.nv-stroke02{stroke:#e5a117;color:#e5a117}.nv-stroke03{stroke:#6a800d;color:#6a800d}.nv-stroke04{stroke:#33800d;color:#33800d}.nv-stroke05{stroke:#0d8046;color:#0d8046}.nv-stroke06{stroke:#0d806c;color:#0d806c}.nv-stroke07{stroke:#0f7799;color:#0f7799}.nv-stroke08{stroke:#1378bf;color:#1378bf}.nv-stroke09{stroke:#58595B;color:#58595B}.nv-stroke10{stroke:#1f12b3;color:#1f12b3}.nv-stroke11{stroke:#6d17e5;color:#6d17e5}.nv-stroke12{stroke:#e5176d;color:#e5176d}.nv-stroke13{stroke:#ff6fcf;color:#ff6fcf}@media screen and (max-width:767px){.nv-funnelChart .nv-label-value text.nv-label,.nv-legend .nv-series,.nv-x.nv-axis text,svg text{font-size:11px}.nv-funnelChart .nv-label-value text.nv-value{font-size:14px}}.tooltip{display:block;visibility:visible;padding:5px;font-size:11px;opacity:0;z-index:1020;text-shadow:none;font-weight:400;word-wrap:break-word;pointer-events:none}.table th,strong{font-weight:700}.tooltip.top{margin-top:-3px}.tooltip.right{margin-left:3px}.tooltip.left{margin-left:-3px}.tooltip-inner{max-width:200px;padding:3px 8px;color:#fff;text-align:center;background-color:#000;border-radius:3px;white-space:pre-wrap;word-wrap:break-word}.tooltip-inner p b{unicode-bidi:bidi-override}.tooltip-arrow{width:0;height:0;border-color:transparent;border-style:solid}body,html{position:relative;overflow:hidden;height:100%}.tooltip.top .tooltip-arrow{bottom:0;left:50%;margin-left:-5px;border-width:5px 5px 0;border-top-color:#000}.tooltip.right .tooltip-arrow{top:50%;left:0;margin-top:-5px;border-width:5px 5px 5px 0;border-right-color:#000}.tooltip.left .tooltip-arrow{top:50%;right:0;margin-top:-5px;border-width:5px 0 5px 5px;border-left-color:#000}.tooltip.bottom .tooltip-arrow{top:0;left:50%;margin-left:-5px;border-width:0 5px 5px;border-bottom-color:#000}.tooltip.bottom{margin-top:8px}.tooltip.in{opacity:1}.tooltip a,.tooltip div,.tooltip span{color:#fff}.tooltip-inner>div{text-align:left}.tooltip-inner>p{margin:0}.tooltip-inner h3{font-size:13px;color:#CDCCCB;line-height:normal;margin:3px 0}html{width:100%;font-size:14px;direction:ltr}body{margin:0;padding:0;background:#fff;-webkit-tap-highlight-color:transparent;-webkit-focus-ring-color:transparent;-webkit-text-size-adjust:none;-webkit-highlight:none;tap-highlight-color:transparent;focus-ring-color:transparent;touch-callout:none;text-size-adjust:none;user-select:none;highlight:none;font-family:"Open Sans",sans-serif;font-size:1em;line-height:1.286em;color:#555}fieldset,form,img,input,label,select,ul{margin:0;padding:0;border:0;outline:0}button,div,span{outline:0}#nomad{top:0;right:0;bottom:0;left:0}.control-group,.icon-ul>li{position:relative}.icondefault{font-size:16px;vertical-align:middle}a{color:#0679c8;-webkit-touch-callout:none;outline:0;-webkit-tap-highlight-color:transparent;-webkit-focus-ring-color:transparent}p{margin:0 0 .643em}p small{font-size:.857em;color:#CDCCCB}h1,h3{margin:0;color:#58595B;text-rendering:optimizelegibility}h1{line-height:36px}h3{line-height:27px;font-size:18px}h3 small{font-size:14px}.line-through{text-decoration:line-through}.actionsheet-select,.placeholder,input,select,textarea{background-color:transparent;border:none;font-size:1.214rem;font-family:"Open Sans",sans-serif;color:#111}textarea{height:auto}.checkbox.inline,.radio.inline{display:inline-block;padding-top:5px;margin-bottom:0;vertical-align:middle}.checkbox.inline+.checkbox.inline,.radio.inline+.radio.inline{margin-left:10px}input[disabled],input[readonly],select[disabled],select[readonly],textarea[disabled],textarea[readonly]{cursor:not-allowed;background-color:#f5f5f5;border-color:#ddd}.control-group.warning .help-block,.control-group.warning .help-inline,.control-group.warning input,.control-group.warning select,.control-group.warning textarea,.control-group.warning>label{color:#6e5e0c}.control-group.warning .input-append .add-on,.control-group.warning .input-prepend .add-on{color:#6e5e0c;background-color:#fcf8e3}.control-group.error .help-block,.control-group.error .help-inline,.control-group.error input,.control-group.error select,.control-group.error textarea,.control-group.error>label{color:#4d1e1e}.control-group.error .input-append .add-on,.control-group.error .input-prepend .add-on{color:#4d1e1e;background-color:#f2dede}.control-group.success .help-block,.control-group.success .help-inline,.control-group.success input,.control-group.success select,.control-group.success textarea,.control-group.success>label{color:#28471c}.control-group.success .input-append .add-on,.control-group.success .input-prepend .add-on{color:#28471c;background-color:#dff0d8}::-webkit-input-placeholder{color:#9aa5ad}.control-group{clear:both;padding:6px 0 0}.control-group:after{display:table;clear:both}.control-group.selected-item{background-color:#ededed}.control-group .control-label{display:block;padding-top:4px;padding-bottom:2px;font-size:.857rem;line-height:1em;color:#7e878d}.control-group .controls{padding-bottom:5px;border-bottom:1px solid #ebedef;transition:border-bottom .3s ease-out 0s}.control-group .placeholder{display:block;color:#9aa5ad;line-height:1.858rem}.control-group .placeholder.hide{display:none!important}.btn,.btn-filter,.icon,.icon-stack{display:inline-block}.control-group.error .control-label{color:#e61718}.control-group.error .controls{border-color:#e61718}.control-group.field_onfocus .controls{border-color:#0679c8}.control-group .field__error-message{padding-top:2px;clear:both;border-color:#e61718;font-size:1rem;color:#e61718}.email-body-content{padding:4px}.control__btn_remove{font-size:1rem}table{max-width:100%;background-color:transparent;border-collapse:collapse;border-spacing:0}.btn,.btn.active,button.close{background:0 0}.table{width:100%;margin-bottom:18px}.table td,.table th{padding:8px;line-height:18px;text-align:left;vertical-align:top;border-bottom:1px solid #e8e8e8}.table thead th{vertical-align:bottom}.table caption+thead tr:first-child td,.table caption+thead tr:first-child th,.table colgroup+thead tr:first-child td,.table colgroup+thead tr:first-child th,.table thead:first-child tr:first-child td,.table thead:first-child tr:first-child th{border-top:0}.table tbody+tbody{border-top:2px solid #e8e8e8}/*!\n *  Font Awesome 4.2.0 by @davegandy - http://fontawesome.io - @fontawesome\n *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)\n */@font-face{font-family:FontAwesome;src:url('+i(247)+') format(\'truetype\');font-weight:400;font-style:normal}.icon{font-family:FontAwesome;font-style:normal;font-weight:400;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1,h2,h3,h4,h5,h6,svg text{font-family:"Open Sans",sans-serif}.icon-lg{font-size:1.33333333em;line-height:.75em;vertical-align:-15%}.icon-2x{font-size:2em}.icon-3x{font-size:3em}.icon-4x{font-size:4em}.icon-5x{font-size:5em}.icon-fw{width:1.28571429em;text-align:center}.icon-ul{padding-left:0;margin-left:2.14285714em;list-style-type:none}.icon-li{position:absolute;left:-2.14285714em;width:2.14285714em;top:.14285714em;text-align:center}.icon-li.icon-lg{left:-1.85714286em}.icon-border{padding:.2em .25em .15em;border:.08em solid #eee;border-radius:.1em}.icon.pull-left{margin-right:.3em}.icon.pull-right{margin-left:.3em}.icon-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.icon-rotate-90{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=1);-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg)}.icon-rotate-180{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2);-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.icon-rotate-270{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3);-webkit-transform:rotate(270deg);-ms-transform:rotate(270deg);transform:rotate(270deg)}.icon-flip-horizontal{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1);-webkit-transform:scale(-1,1);-ms-transform:scale(-1,1);transform:scale(-1,1)}.icon-flip-vertical{filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1);-webkit-transform:scale(1,-1);-ms-transform:scale(1,-1);transform:scale(1,-1)}.icon-stack{position:relative;width:2em;height:2em;line-height:2em;vertical-align:middle}.icon-stack-1x,.icon-stack-2x{position:absolute;left:0;width:100%;text-align:center}.icon-stack-1x{line-height:inherit}.icon-stack-2x{font-size:2em}.icon-inverse{color:#fff}.icon-circle-thin:before{content:"\\f1db"}.icon-glass:before{content:"\\f000"}.icon-music:before{content:"\\f001"}.icon-search:before{content:"\\f002"}.icon-envelope-o:before{content:"\\f003"}.icon-heart:before{content:"\\f004"}.icon-star:before{content:"\\f005"}.icon-star-o:before{content:"\\f006"}.icon-user:before{content:"\\f007"}.icon-film:before{content:"\\f008"}.icon-th-large:before{content:"\\f009"}.icon-th:before{content:"\\f00a"}.icon-th-list:before{content:"\\f00b"}.icon-check:before{content:"\\f00c"}.icon-close:before,.icon-remove:before,.icon-times:before{content:"\\f00d"}.icon-search-plus:before{content:"\\f00e"}.icon-search-minus:before{content:"\\f010"}.icon-power-off:before{content:"\\f011"}.icon-signal:before{content:"\\f012"}.icon-cog:before,.icon-gear:before{content:"\\f013"}.icon-trash-o:before{content:"\\f014"}.icon-home:before{content:"\\f015"}.icon-file-o:before{content:"\\f016"}.icon-clock-o:before{content:"\\f017"}.icon-road:before{content:"\\f018"}.icon-download:before{content:"\\f019"}.icon-arrow-circle-o-down:before{content:"\\f01a"}.icon-arrow-circle-o-up:before{content:"\\f01b"}.icon-inbox:before{content:"\\f01c"}.icon-play-circle-o:before{content:"\\f01d"}.icon-repeat:before,.icon-rotate-right:before{content:"\\f01e"}.icon-refresh:before{content:"\\f021"}.icon-list-alt:before{content:"\\f022"}.icon-lock:before{content:"\\f023"}.icon-flag:before{content:"\\f024"}.icon-headphones:before{content:"\\f025"}.icon-volume-off:before{content:"\\f026"}.icon-volume-down:before{content:"\\f027"}.icon-volume-up:before{content:"\\f028"}.icon-qrcode:before{content:"\\f029"}.icon-barcode:before{content:"\\f02a"}.icon-tag:before{content:"\\f02b"}.icon-tags:before{content:"\\f02c"}.icon-book:before{content:"\\f02d"}.icon-bookmark:before{content:"\\f02e"}.icon-print:before{content:"\\f02f"}.icon-camera:before{content:"\\f030"}.icon-font:before{content:"\\f031"}.icon-bold:before{content:"\\f032"}.icon-italic:before{content:"\\f033"}.icon-text-height:before{content:"\\f034"}.icon-text-width:before{content:"\\f035"}.icon-align-left:before{content:"\\f036"}.icon-align-center:before{content:"\\f037"}.icon-align-right:before{content:"\\f038"}.icon-align-justify:before{content:"\\f039"}.icon-list:before{content:"\\f03a"}.icon-dedent:before,.icon-outdent:before{content:"\\f03b"}.icon-indent:before{content:"\\f03c"}.icon-video-camera:before{content:"\\f03d"}.icon-image:before,.icon-photo:before,.icon-picture-o:before{content:"\\f03e"}.icon-pencil:before{content:"\\f040"}.icon-map-marker:before{content:"\\f041"}.icon-adjust:before{content:"\\f042"}.icon-tint:before{content:"\\f043"}.icon-edit:before,.icon-pencil-square-o:before{content:"\\f044"}.icon-share-square-o:before{content:"\\f045"}.icon-check-square-o:before{content:"\\f046"}.icon-arrows:before{content:"\\f047"}.icon-step-backward:before{content:"\\f048"}.icon-fast-backward:before{content:"\\f049"}.icon-backward:before{content:"\\f04a"}.icon-play:before{content:"\\f04b"}.icon-pause:before{content:"\\f04c"}.icon-stop:before{content:"\\f04d"}.icon-forward:before{content:"\\f04e"}.icon-fast-forward:before{content:"\\f050"}.icon-step-forward:before{content:"\\f051"}.icon-eject:before{content:"\\f052"}.icon-chevron-left:before{content:"\\f053"}.icon-chevron-right:before{content:"\\f054"}.icon-plus-circle:before{content:"\\f055"}.icon-minus-circle:before{content:"\\f056"}.icon-times-circle:before{content:"\\f057"}.icon-check-circle:before{content:"\\f058"}.icon-question-circle:before{content:"\\f059"}.icon-info-circle:before{content:"\\f05a"}.icon-crosshairs:before{content:"\\f05b"}.icon-times-circle-o:before{content:"\\f05c"}.icon-check-circle-o:before{content:"\\f05d"}.icon-ban:before{content:"\\f05e"}.icon-arrow-left:before{content:"\\f060"}.icon-arrow-right:before{content:"\\f061"}.icon-arrow-up:before{content:"\\f062"}.icon-arrow-down:before{content:"\\f063"}.icon-mail-forward:before,.icon-share:before{content:"\\f064"}.icon-expand:before{content:"\\f065"}.icon-compress:before{content:"\\f066"}.icon-plus:before{content:"\\f067"}.icon-minus:before{content:"\\f068"}.icon-asterisk:before{content:"\\f069"}.icon-exclamation-circle:before{content:"\\f06a"}.icon-gift:before{content:"\\f06b"}.icon-leaf:before{content:"\\f06c"}.icon-fire:before{content:"\\f06d"}.icon-eye:before{content:"\\f06e"}.icon-eye-slash:before{content:"\\f070"}.icon-exclamation-triangle:before,.icon-warning:before{content:"\\f071"}.icon-plane:before{content:"\\f072"}.icon-calendar:before{content:"\\f073"}.icon-random:before{content:"\\f074"}.icon-comment:before{content:"\\f075"}.icon-magnet:before{content:"\\f076"}.icon-chevron-up:before{content:"\\f077"}.icon-chevron-down:before{content:"\\f078"}.icon-retweet:before{content:"\\f079"}.icon-shopping-cart:before{content:"\\f07a"}.icon-folder:before{content:"\\f07b"}.icon-folder-open:before{content:"\\f07c"}.icon-arrows-v:before{content:"\\f07d"}.icon-arrows-h:before{content:"\\f07e"}.icon-bar-chart-o:before,.icon-bar-chart:before{content:"\\f080"}.icon-twitter-square:before{content:"\\f081"}.icon-facebook-square:before{content:"\\f082"}.icon-camera-retro:before{content:"\\f083"}.icon-key:before{content:"\\f084"}.icon-cogs:before,.icon-gears:before{content:"\\f085"}.icon-comments:before{content:"\\f086"}.icon-thumbs-o-up:before{content:"\\f087"}.icon-thumbs-o-down:before{content:"\\f088"}.icon-star-half:before{content:"\\f089"}.icon-heart-o:before{content:"\\f08a"}.icon-sign-out:before{content:"\\f08b"}.icon-linkedin-square:before{content:"\\f08c"}.icon-thumb-tack:before{content:"\\f08d"}.icon-external-link:before{content:"\\f08e"}.icon-sign-in:before{content:"\\f090"}.icon-trophy:before{content:"\\f091"}.icon-github-square:before{content:"\\f092"}.icon-upload:before{content:"\\f093"}.icon-lemon-o:before{content:"\\f094"}.icon-phone:before{content:"\\f095"}.icon-square-o:before{content:"\\f096"}.icon-bookmark-o:before{content:"\\f097"}.icon-phone-square:before{content:"\\f098"}.icon-twitter:before{content:"\\f099"}.icon-facebook:before{content:"\\f09a"}.icon-github:before{content:"\\f09b"}.icon-unlock:before{content:"\\f09c"}.icon-credit-card:before{content:"\\f09d"}.icon-rss:before{content:"\\f09e"}.icon-hdd-o:before{content:"\\f0a0"}.icon-bullhorn:before{content:"\\f0a1"}.icon-bell:before{content:"\\f0f3"}.icon-certificate:before{content:"\\f0a3"}.icon-hand-o-right:before{content:"\\f0a4"}.icon-hand-o-left:before{content:"\\f0a5"}.icon-hand-o-up:before{content:"\\f0a6"}.icon-hand-o-down:before{content:"\\f0a7"}.icon-arrow-circle-left:before{content:"\\f0a8"}.icon-arrow-circle-right:before{content:"\\f0a9"}.icon-arrow-circle-up:before{content:"\\f0aa"}.icon-arrow-circle-down:before{content:"\\f0ab"}.icon-globe:before{content:"\\f0ac"}.icon-wrench:before{content:"\\f0ad"}.icon-tasks:before{content:"\\f0ae"}.icon-filter:before{content:"\\f0b0"}.icon-briefcase:before{content:"\\f0b1"}.icon-arrows-alt:before{content:"\\f0b2"}.icon-group:before,.icon-users:before{content:"\\f0c0"}.icon-chain:before,.icon-link:before{content:"\\f0c1"}.icon-cloud:before{content:"\\f0c2"}.icon-flask:before{content:"\\f0c3"}.icon-cut:before,.icon-scissors:before{content:"\\f0c4"}.icon-copy:before,.icon-files-o:before{content:"\\f0c5"}.icon-paperclip:before{content:"\\f0c6"}.icon-floppy-o:before,.icon-save:before{content:"\\f0c7"}.icon-square:before{content:"\\f0c8"}.icon-bars:before,.icon-navicon:before,.icon-reorder:before{content:"\\f0c9"}.icon-list-ul:before{content:"\\f0ca"}.icon-list-ol:before{content:"\\f0cb"}.icon-strikethrough:before{content:"\\f0cc"}.icon-underline:before{content:"\\f0cd"}.icon-table:before{content:"\\f0ce"}.icon-magic:before{content:"\\f0d0"}.icon-truck:before{content:"\\f0d1"}.icon-pinterest:before{content:"\\f0d2"}.icon-pinterest-square:before{content:"\\f0d3"}.icon-google-plus-square:before{content:"\\f0d4"}.icon-google-plus:before{content:"\\f0d5"}.icon-money:before{content:"\\f0d6"}.icon-caret-down:before{content:"\\f0d7"}.icon-caret-up:before{content:"\\f0d8"}.icon-caret-left:before{content:"\\f0d9"}.icon-caret-right:before{content:"\\f0da"}.icon-columns:before{content:"\\f0db"}.icon-sort:before,.icon-unsorted:before{content:"\\f0dc"}.icon-sort-desc:before,.icon-sort-down:before{content:"\\f0dd"}.icon-sort-asc:before,.icon-sort-up:before{content:"\\f0de"}.icon-envelope:before{content:"\\f0e0"}.icon-linkedin:before{content:"\\f0e1"}.icon-rotate-left:before,.icon-undo:before{content:"\\f0e2"}.icon-gavel:before,.icon-legal:before{content:"\\f0e3"}.icon-dashboard:before,.icon-tachometer:before{content:"\\f0e4"}.icon-comment-o:before{content:"\\f0e5"}.icon-comments-o:before{content:"\\f0e6"}.icon-bolt:before,.icon-flash:before{content:"\\f0e7"}.icon-sitemap:before{content:"\\f0e8"}.icon-umbrella:before{content:"\\f0e9"}.icon-clipboard:before,.icon-paste:before{content:"\\f0ea"}.icon-lightbulb-o:before{content:"\\f0eb"}.icon-exchange:before{content:"\\f0ec"}.icon-cloud-download:before{content:"\\f0ed"}.icon-cloud-upload:before{content:"\\f0ee"}.icon-user-md:before{content:"\\f0f0"}.icon-stethoscope:before{content:"\\f0f1"}.icon-suitcase:before{content:"\\f0f2"}.icon-bell-o:before{content:"\\f0a2"}.icon-coffee:before{content:"\\f0f4"}.icon-cutlery:before{content:"\\f0f5"}.icon-file-text-o:before{content:"\\f0f6"}.icon-building-o:before{content:"\\f0f7"}.icon-hospital-o:before{content:"\\f0f8"}.icon-ambulance:before{content:"\\f0f9"}.icon-medkit:before{content:"\\f0fa"}.icon-fighter-jet:before{content:"\\f0fb"}.icon-beer:before{content:"\\f0fc"}.icon-h-square:before{content:"\\f0fd"}.icon-plus-square:before{content:"\\f0fe"}.icon-angle-double-left:before{content:"\\f100"}.icon-angle-double-right:before{content:"\\f101"}.icon-angle-double-up:before{content:"\\f102"}.icon-angle-double-down:before{content:"\\f103"}.icon-angle-left:before{content:"\\f104"}.icon-angle-right:before{content:"\\f105"}.icon-angle-up:before{content:"\\f106"}.icon-angle-down:before{content:"\\f107"}.icon-desktop:before{content:"\\f108"}.icon-laptop:before{content:"\\f109"}.icon-tablet:before{content:"\\f10a"}.icon-mobile-phone:before,.icon-mobile:before{content:"\\f10b"}.icon-circle-o:before{content:"\\f10c"}.icon-quote-left:before{content:"\\f10d"}.icon-quote-right:before{content:"\\f10e"}.icon-spinner:before{content:"\\f110"}.icon-circle:before{content:"\\f111"}.icon-mail-reply:before,.icon-reply:before{content:"\\f112"}.icon-github-alt:before{content:"\\f113"}.icon-folder-o:before{content:"\\f114"}.icon-folder-open-o:before{content:"\\f115"}.icon-smile-o:before{content:"\\f118"}.icon-frown-o:before{content:"\\f119"}.icon-meh-o:before{content:"\\f11a"}.icon-gamepad:before{content:"\\f11b"}.icon-keyboard-o:before{content:"\\f11c"}.icon-flag-o:before{content:"\\f11d"}.icon-flag-checkered:before{content:"\\f11e"}.icon-terminal:before{content:"\\f120"}.icon-code:before{content:"\\f121"}.icon-mail-reply-all:before,.icon-reply-all:before{content:"\\f122"}.icon-star-half-empty:before,.icon-star-half-full:before,.icon-star-half-o:before{content:"\\f123"}.icon-location-arrow:before{content:"\\f124"}.icon-crop:before{content:"\\f125"}.icon-code-fork:before{content:"\\f126"}.icon-chain-broken:before,.icon-unlink:before{content:"\\f127"}.icon-question:before{content:"\\f128"}.icon-info:before{content:"\\f129"}.icon-exclamation:before{content:"\\f12a"}.icon-superscript:before{content:"\\f12b"}.icon-subscript:before{content:"\\f12c"}.icon-eraser:before{content:"\\f12d"}.icon-puzzle-piece:before{content:"\\f12e"}.icon-microphone:before{content:"\\f130"}.icon-microphone-slash:before{content:"\\f131"}.icon-shield:before{content:"\\f132"}.icon-calendar-o:before{content:"\\f133"}.icon-fire-extinguisher:before{content:"\\f134"}.icon-rocket:before{content:"\\f135"}.icon-maxcdn:before{content:"\\f136"}.icon-chevron-circle-left:before{content:"\\f137"}.icon-chevron-circle-right:before{content:"\\f138"}.icon-chevron-circle-up:before{content:"\\f139"}.icon-chevron-circle-down:before{content:"\\f13a"}.icon-html5:before{content:"\\f13b"}.icon-css3:before{content:"\\f13c"}.icon-anchor:before{content:"\\f13d"}.icon-unlock-alt:before{content:"\\f13e"}.icon-bullseye:before{content:"\\f140"}.icon-ellipsis-h:before{content:"\\f141"}.icon-ellipsis-v:before{content:"\\f142"}.icon-rss-square:before{content:"\\f143"}.icon-play-circle:before{content:"\\f144"}.icon-ticket:before{content:"\\f145"}.icon-minus-square:before{content:"\\f146"}.icon-minus-square-o:before{content:"\\f147"}.icon-level-up:before{content:"\\f148"}.icon-level-down:before{content:"\\f149"}.icon-check-square:before{content:"\\f14a"}.icon-pencil-square:before{content:"\\f14b"}.icon-external-link-square:before{content:"\\f14c"}.icon-share-square:before{content:"\\f14d"}.icon-compass:before{content:"\\f14e"}.icon-caret-square-o-down:before,.icon-toggle-down:before{content:"\\f150"}.icon-caret-square-o-up:before,.icon-toggle-up:before{content:"\\f151"}.icon-caret-square-o-right:before,.icon-toggle-right:before{content:"\\f152"}.icon-eur:before,.icon-euro:before{content:"\\f153"}.icon-gbp:before{content:"\\f154"}.icon-dollar:before,.icon-usd:before{content:"\\f155"}.icon-inr:before,.icon-rupee:before{content:"\\f156"}.icon-cny:before,.icon-jpy:before,.icon-rmb:before,.icon-yen:before{content:"\\f157"}.icon-rouble:before,.icon-rub:before,.icon-ruble:before{content:"\\f158"}.icon-krw:before,.icon-won:before{content:"\\f159"}.icon-bitcoin:before,.icon-btc:before{content:"\\f15a"}.icon-file:before{content:"\\f15b"}.icon-file-text:before{content:"\\f15c"}.icon-sort-alpha-asc:before{content:"\\f15d"}.icon-sort-alpha-desc:before{content:"\\f15e"}.icon-sort-amount-asc:before{content:"\\f160"}.icon-sort-amount-desc:before{content:"\\f161"}.icon-sort-numeric-asc:before{content:"\\f162"}.icon-sort-numeric-desc:before{content:"\\f163"}.icon-thumbs-up:before{content:"\\f164"}.icon-thumbs-down:before{content:"\\f165"}.icon-youtube-square:before{content:"\\f166"}.icon-youtube:before{content:"\\f167"}.icon-xing:before{content:"\\f168"}.icon-xing-square:before{content:"\\f169"}.icon-youtube-play:before{content:"\\f16a"}.icon-dropbox:before{content:"\\f16b"}.icon-stack-overflow:before{content:"\\f16c"}.icon-instagram:before{content:"\\f16d"}.icon-flickr:before{content:"\\f16e"}.icon-adn:before{content:"\\f170"}.icon-bitbucket:before{content:"\\f171"}.icon-bitbucket-square:before{content:"\\f172"}.icon-tumblr:before{content:"\\f173"}.icon-tumblr-square:before{content:"\\f174"}.icon-long-arrow-down:before{content:"\\f175"}.icon-long-arrow-up:before{content:"\\f176"}.icon-long-arrow-left:before{content:"\\f177"}.icon-long-arrow-right:before{content:"\\f178"}.icon-apple:before{content:"\\f179"}.icon-windows:before{content:"\\f17a"}.icon-android:before{content:"\\f17b"}.icon-linux:before{content:"\\f17c"}.icon-dribbble:before{content:"\\f17d"}.icon-skype:before{content:"\\f17e"}.icon-foursquare:before{content:"\\f180"}.icon-trello:before{content:"\\f181"}.icon-female:before{content:"\\f182"}.icon-male:before{content:"\\f183"}.icon-gittip:before{content:"\\f184"}.icon-sun-o:before{content:"\\f185"}.icon-moon-o:before{content:"\\f186"}.icon-archive:before{content:"\\f187"}.icon-bug:before{content:"\\f188"}.icon-vk:before{content:"\\f189"}.icon-weibo:before{content:"\\f18a"}.icon-renren:before{content:"\\f18b"}.icon-pagelines:before{content:"\\f18c"}.icon-stack-exchange:before{content:"\\f18d"}.icon-arrow-circle-o-right:before{content:"\\f18e"}.icon-arrow-circle-o-left:before{content:"\\f190"}.icon-caret-square-o-left:before,.icon-toggle-left:before{content:"\\f191"}.icon-dot-circle-o:before{content:"\\f192"}.icon-wheelchair:before{content:"\\f193"}.icon-vimeo-square:before{content:"\\f194"}.icon-try:before,.icon-turkish-lira:before{content:"\\f195"}.icon-plus-square-o:before{content:"\\f196"}.icon-space-shuttle:before{content:"\\f197"}.icon-slack:before{content:"\\f198"}.icon-envelope-square:before{content:"\\f199"}.icon-wordpress:before{content:"\\f19a"}.icon-openid:before{content:"\\f19b"}.icon-bank:before,.icon-institution:before,.icon-university:before{content:"\\f19c"}.icon-graduation-cap:before,.icon-mortar-board:before{content:"\\f19d"}.icon-yahoo:before{content:"\\f19e"}.icon-google:before{content:"\\f1a0"}.icon-reddit:before{content:"\\f1a1"}.icon-reddit-square:before{content:"\\f1a2"}.icon-stumbleupon-circle:before{content:"\\f1a3"}.icon-stumbleupon:before{content:"\\f1a4"}.icon-delicious:before{content:"\\f1a5"}.icon-digg:before{content:"\\f1a6"}.icon-pied-piper:before{content:"\\f1a7"}.icon-pied-piper-alt:before{content:"\\f1a8"}.icon-drupal:before{content:"\\f1a9"}.icon-joomla:before{content:"\\f1aa"}.icon-language:before{content:"\\f1ab"}.icon-fax:before{content:"\\f1ac"}.icon-building:before{content:"\\f1ad"}.icon-child:before{content:"\\f1ae"}.icon-paw:before{content:"\\f1b0"}.icon-spoon:before{content:"\\f1b1"}.icon-cube:before{content:"\\f1b2"}.icon-cubes:before{content:"\\f1b3"}.icon-behance:before{content:"\\f1b4"}.icon-behance-square:before{content:"\\f1b5"}.icon-steam:before{content:"\\f1b6"}.icon-steam-square:before{content:"\\f1b7"}.icon-recycle:before{content:"\\f1b8"}.icon-automobile:before,.icon-car:before{content:"\\f1b9"}.icon-cab:before,.icon-taxi:before{content:"\\f1ba"}.icon-tree:before{content:"\\f1bb"}.icon-spotify:before{content:"\\f1bc"}.icon-deviantart:before{content:"\\f1bd"}.icon-soundcloud:before{content:"\\f1be"}.icon-database:before{content:"\\f1c0"}.icon-file-pdf-o:before{content:"\\f1c1"}.icon-file-word-o:before{content:"\\f1c2"}.icon-file-excel-o:before{content:"\\f1c3"}.icon-file-powerpoint-o:before{content:"\\f1c4"}.icon-file-image-o:before,.icon-file-photo-o:before,.icon-file-picture-o:before{content:"\\f1c5"}.icon-file-archive-o:before,.icon-file-zip-o:before{content:"\\f1c6"}.icon-file-audio-o:before,.icon-file-sound-o:before{content:"\\f1c7"}.icon-file-movie-o:before,.icon-file-video-o:before{content:"\\f1c8"}.icon-file-code-o:before{content:"\\f1c9"}.icon-vine:before{content:"\\f1ca"}.icon-codepen:before{content:"\\f1cb"}.icon-jsfiddle:before{content:"\\f1cc"}.icon-life-bouy:before,.icon-life-buoy:before,.icon-life-ring:before,.icon-life-saver:before,.icon-support:before{content:"\\f1cd"}.icon-circle-o-notch:before{content:"\\f1ce"}.icon-ra:before,.icon-rebel:before{content:"\\f1d0"}.icon-empire:before,.icon-ge:before{content:"\\f1d1"}.icon-git-square:before{content:"\\f1d2"}.icon-git:before{content:"\\f1d3"}.icon-hacker-news:before{content:"\\f1d4"}.icon-tencent-weibo:before{content:"\\f1d5"}.icon-qq:before{content:"\\f1d6"}.icon-wechat:before,.icon-weixin:before{content:"\\f1d7"}.icon-paper-plane:before,.icon-send:before{content:"\\f1d8"}.icon-paper-plane-o:before,.icon-send-o:before{content:"\\f1d9"}.icon-history:before{content:"\\f1da"}.icon-header:before{content:"\\f1dc"}.icon-paragraph:before{content:"\\f1dd"}.icon-sliders:before{content:"\\f1de"}.icon-share-alt:before{content:"\\f1e0"}.icon-share-alt-square:before{content:"\\f1e1"}.icon-bomb:before{content:"\\f1e2"}.icon-futbol-o:before,.icon-soccer-ball-o:before{content:"\\f1e3"}.icon-tty:before{content:"\\f1e4"}.icon-binoculars:before{content:"\\f1e5"}.icon-plug:before{content:"\\f1e6"}.icon-slideshare:before{content:"\\f1e7"}.icon-twitch:before{content:"\\f1e8"}.icon-yelp:before{content:"\\f1e9"}.icon-newspaper-o:before{content:"\\f1ea"}.icon-wifi:before{content:"\\f1eb"}.icon-calculator:before{content:"\\f1ec"}.icon-paypal:before{content:"\\f1ed"}.icon-google-wallet:before{content:"\\f1ee"}.icon-cc-visa:before{content:"\\f1f0"}.icon-cc-mastercard:before{content:"\\f1f1"}.icon-cc-discover:before{content:"\\f1f2"}.icon-cc-amex:before{content:"\\f1f3"}.icon-cc-paypal:before{content:"\\f1f4"}.icon-cc-stripe:before{content:"\\f1f5"}.icon-bell-slash:before{content:"\\f1f6"}.icon-bell-slash-o:before{content:"\\f1f7"}.icon-trash:before{content:"\\f1f8"}.icon-copyright:before{content:"\\f1f9"}.icon-at:before{content:"\\f1fa"}.icon-eyedropper:before{content:"\\f1fb"}.icon-paint-brush:before{content:"\\f1fc"}.icon-birthday-cake:before{content:"\\f1fd"}.icon-area-chart:before{content:"\\f1fe"}.icon-pie-chart:before{content:"\\f200"}.icon-line-chart:before{content:"\\f201"}.icon-lastfm:before{content:"\\f202"}.icon-lastfm-square:before{content:"\\f203"}.icon-toggle-off:before{content:"\\f204"}.icon-toggle-on:before{content:"\\f205"}.icon-bicycle:before{content:"\\f206"}.icon-bus:before{content:"\\f207"}.icon-ioxhost:before{content:"\\f208"}.icon-angellist:before{content:"\\f209"}.icon-cc:before{content:"\\f20a"}.icon-ils:before,.icon-shekel:before,.icon-sheqel:before{content:"\\f20b"}.icon-meanpath:before{content:"\\f20c"}.close{float:right;font-size:20px;font-weight:700;line-height:18px;color:#000;text-shadow:0 1px 0 #fff;opacity:.2}.close:active{color:#000;text-decoration:none;cursor:pointer;opacity:.4}button.close{padding:0;cursor:pointer;border:0;-webkit-appearance:none}.btn{padding:4px 10px;margin:0;font-size:1em;line-height:1.286em;color:#b9bec6;font-weight:500;text-align:center;vertical-align:middle;cursor:pointer;border-radius:3px;border:none;outline:0}.btn.active{color:#0679c8!important;outline:0}.btn.disabled,.btn[disabled]{background-color:#e6e6e6;background-image:none}.btn.btn-inverse.disabled,.btn.btn-inverse[disabled]{background-color:#202020;color:#2c2c2c!important}.btn-large{padding:9px 14px;font-size:16px;line-height:normal;border-radius:5px}.btn-large .icondefault{margin-top:1px}.btn-small{padding:5px 9px;font-size:12px;line-height:16px}.btn-small .icondefault{margin-top:-1px}.btn-mini{padding:2px 6px;font-size:12px;line-height:14px}.btn-danger,.btn-info,.btn-inverse,.btn-primary,.btn-success,.btn-warning{color:#fff}.btn-danger.active,.btn-info.active,.btn-inverse.active,.btn-primary.active,.btn-success.active,.btn-warning.active{color:rgba(255,255,255,.75)}.btn{background-color:transparent}.btn.selected-item{background-color:#000}.btn-primary{border:1px solid #0a75b2;background-color:#0c89d1}.btn-area-more.selected-item .btn-primary,.btn-primary.disabled,.btn-primary.selected-item{border-color:#ccd6dc;background-color:#f8fafd;color:#000}.btn-warning{background-color:#cc3314}.btn-danger{background-color:#e61718}.btn-success{background-color:#33800d}.btn-info{background-color:#71a6f1}.btn-inverse{background-color:#000}.btn-inverse.selected-item{background-color:#202020}.btn-transparent{background-color:transparent;border:1px solid #717171}.btn-filter{min-width:20px;height:30px;line-height:30px;padding:0 5px;text-align:center;color:#000;font-size:1rem;font-weight:700}.btn-filter.active,.btn-filter.selected-item{background:#d4d4d4}.btn-group{position:relative}.btn-group:after{display:table;clear:both}.btn-group+.btn-group{margin-left:5px}.btn-group .btn{position:relative;float:left;padding-top:3px;padding-bottom:3px}.btn-group .btn:last-child{padding-right:0}.btn-group .btn.active,.btn-group .btn:active{z-index:2}.layout__Login{overflow:auto;top:0!important}.tablet .layout__Login{left:-54px!important}.tablet .layout__SetupBuddy,.tablet .no-main-menu{left:-54px}.view__login{position:relative;min-height:100%;width:100%;overflow:auto;background:#fff;text-align:center;opacity:0}.view__login .page__login{position:relative;min-height:100%;top:0;left:0;right:0}.view__login .login__header{padding:5px 0}.view__login .login__body{width:300px;margin:auto}.view__login .login__footer{border:none;padding:0 0 5rem;margin-top:30px;text-align:center}.view__login .login__footer.login__footer_show-attribution{padding-bottom:10rem}.view__login .control-group{padding-top:10px}.view__login .input-wrapper input{width:100%;height:2rem;line-height:2em;font-size:1.143rem;color:#000}.view__login .input-wrapper input::-webkit-input-placeholder{opacity:.3;color:#000}.view__login .control-ssl{position:relative;padding-top:4px;margin-bottom:10px;font-size:.857rem;color:#000;text-transform:lowercase}.view__login .control-ssl .checkbox_custom{height:30px}.view__login .btn{display:block;width:300px;padding:5px 0;margin:20px auto;line-height:2rem;background:#0c89d1;border:1px solid #0a75b2;color:#fff}.view__login .btn[disabled]{background:#f8fafd;border:1px solid #ccd6dc;color:#000}.view__login .btn[disabled] .icon-spinner .icon-spinner-path{fill:#000}.view__login .btn .icon-spinner{display:inline-block;width:16px;height:16px;margin-top:-1px;margin-right:4px;vertical-align:middle}.view__login .btn .icon-spinner .icon-spinner-path{fill:#fff}.copyright__logo .copyright-logo__svg-color,.view__login .box__copyright .copyright-logo__svg-color{fill:#000}.view__login .control-group.error{position:relative;color:red}.view__login .control-group.error .icondefault{position:absolute;top:50%;right:-1.25em;margin-top:-.5em}.view__login .control-group.error .field__error-message{display:none}.view__login .login__links{position:absolute;bottom:25px;left:0;width:100%;font-size:.857rem;color:#000;text-align:center}.view__login .login__links .version{padding-bottom:15px;opacity:.3}.view__login .login__links .separator{position:relative;top:-1px;display:inline-block;width:1px;height:11px;font-size:0;line-height:0;vertical-align:middle}.view__login .login__links .login-links__link{padding:0 8px}.view__login .box__copyright{color:#000}.box__copyright{text-align:center;color:#000;opacity:.3}.copyright__text{display:block;padding-bottom:3px;font-size:.857rem;line-height:1}.copyright__logo{display:block;width:125px;height:14px;margin:5px auto 6px}.copyright__version{position:relative;display:block;width:100px;margin:4px auto 25px;text-align:center}.box__preloader{position:absolute;width:100%;height:100%;top:0;left:0;z-index:9998;background:#fff}.box__preloader .preloader__header{position:absolute;top:50%;width:100%;margin-top:-100px;text-align:center}.box__preloader .preloader__message{text-align:center;font-size:.842em;font-size:1.143rem;color:#000}.box__preloader .preloader__message .icon-spinner-path{fill:#000!important}.page__about .pad{position:relative}.page__about .control-group>label{font-size:.857em}.page__about .show-attribution{padding-bottom:5rem}.page__about .box__copyright{position:absolute;bottom:15px;width:100%}.page__about .about__legal{display:block;clear:both;font-size:.786em}.page__offline .bucket-header{border-bottom:solid 1px #e8e8e8}.page__offline .bucket-header .bh__timestamp{float:right;font-size:.93em;font-weight:400;color:#6d6d72}.page__offline .control-group+.bucket-header{padding-top:40px}.page__offline .table{table-layout:fixed;margin-bottom:-1px}.page__offline .table tr td:first-child{padding-left:10px}.page__offline .offline-row{padding:10px;line-height:19px}.page__offline .offline-row .icondefault{float:left;margin-right:5px;font-size:10px}.page__offline .icon-spinner{width:19px;height:19px;float:right;margin:0;display:none}.page__offline .icon-spinner .icon-spinner-path{fill:#666}.page__offline .text-container{padding:8px 10px 0;margin-bottom:18px}.page__offline .text-container .icon-spinner{margin-top:2px}.page__offline .text-container .loading-status{text-align:right;clear:both;padding-top:15px;display:none}.page__offline .btn-container{padding:0 10px;margin-bottom:18px}.page__offline .listing .content{margin:0 0 10px 10px}.page__offline .listing .content:before{content:\'\';display:block;clear:both}.page__offline .listing h4{margin:8px 0 0 10px;font-weight:700}.page__offline .listing select{width:92%;height:auto;margin:2px 0 10px 10px;padding:4px 10px;border:1px solid #999}.page__offline .listing .emulation-item{overflow:hidden}.page__offline .listing .emulation-item .error-emulation-check{float:left}.page__offline .listing .emulation-item .error-emulation-select{float:right;width:40%;margin:8px 10px 0 0}.page__offline .error-emulation-check .checkbox_default,.page__offline .offline-property .checkbox_default{height:35px;width:35px;margin:8px 10px 8px 0;vertical-align:middle}.page__offline .more{font-size:14px}.page__offline .modal-footer{padding-left:10px;text-align:left}.page__offline .btn-danger,.page__offline .btn-primary{line-height:1.575em}.page__offline #preload_records_button{font-size:.9em;float:right;line-height:1.3em;margin-left:10px}.page__offline #preload_records_button.active{background:#0679c8;color:#fff!important}.page__offline .td-count{text-align:right;vertical-align:middle}.page__offline .td-count .lbl-count{float:right;padding-top:2px}.page__offline .td-count .icons{width:20px;float:right;min-height:1px;padding-left:5px}.page__offline .td-count .icon-check-circle,.page__offline .td-count .icon-times-circle{font-size:1.6em;float:right;color:green;display:none}.page__offline .td-count .icon-times-circle{color:#bf2020}.page__offline .control-group{overflow:visible}.page__offline .control-group .control-label{width:56%;text-align:left;font-weight:400;font-size:1em}.page__offline .control-group .controls{width:10%;margin-left:90%;position:relative}.page__offline .control-group .controls .checkbox_custom{width:100%}.page__offline .control-group .controls .checkbox_custom+.checkbox-icon{margin:0;position:absolute;top:5px;right:0}.page__offline .control-group small{position:absolute;left:10px;bottom:-26px;font-size:.93em;color:#6d6d72}.box__offline-list{margin:0;padding:0}.box__offline-list li{list-style:none}.box__offline-list .offline-list__item{display:block;padding:0 10px;line-height:41px;border-bottom:1px solid #d8d8d8;min-height:42px;position:relative}.box__offline-list .offline-list__item.selected-item{background-color:#ededed}.box__offline-list .offline-list__item .more{position:absolute;top:0;right:10px;line-height:inherit}.box__header{position:absolute;left:0;top:0;height:100%;width:100%}.box__header .header__inner{background:#fff;border-bottom:1px solid #d3dbe1;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;left:0;top:0;width:100%;height:50px;z-index:9000}.box__header .header__inner .header__title{position:absolute;left:76px;right:76px;top:50%;max-height:1.9em;padding:2px 0;-webkit-transform:translateY(-50%);transform:translateY(-50%);text-align:center;color:#000;font-size:1.143em;font-weight:700;line-height:1;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;letter-spacing:-.4px;-webkit-line-clamp:2;-webkit-box-orient:vertical;z-index:-1}.box__header .header__inner .backBtn+.header__title,.box__header .header__inner .dashHomeBtn+.header__title{left:90px}#menu-left,.box__menu,.menuBtn::after,.mobile .right-menu{left:0;top:0;position:absolute}.box__header .header__inner .header-subtitle{display:inline;position:relative;top:-4px;font-size:.785rem;font-weight:400}.box__header .header__inner .header-subtitle:empty{display:none}.box__header .header__inner .header-subtitle:after{content:"\\A";white-space:pre}.menuBtn::after,.user-icon.withPicture:before{content:""}.box__header .header__inner .btn{max-width:50px;margin:0;line-height:22px;display:block;overflow:hidden;z-index:9002}.box__header .header__inner .btn-area-more{float:left;padding:9px 10px}.box__header .header__inner .btn-area-more.selected-item{background:#f5f5f5}.box__header .header__inner .btn-area-more .btn{color:#000}.box__header .header__inner .btn-area-more .btn.disabled{background:0 0;opacity:.7}.box__header .header__inner .btn-area-more.cancelBtn .btn{padding-left:0;color:#0c89d1;font-size:1.143rem}.box__header .header__inner .btn-area-more.saveBtn{padding-right:0}.box__header .header__inner .btn-area-more.saveBtn .btn{color:#0c89d1;font-size:1.143rem}.box__header .header__inner .btn-area-more.saveBtn.combined{right:32px;padding-right:0}.box__header .header__inner .btn-area-more.saveBtn.combined a{border-bottom-right-radius:0;border-top-right-radius:0}.box__header .header__inner .btn-area-more.caretBtn{width:22px;padding-left:0}.box__header .header__inner .btn-area-more.caretBtn .btn{color:#0c89d1;font-size:1.143rem;text-align:right;padding-right:0}.box__header .header__inner .btn-area-more.caretBtn>a{border-bottom-left-radius:0;border-top-left-radius:0}.box__header .header__inner .btn-area-more.caretBtn .saveArrow-icon{margin-top:-2px}.box__header .header__inner .save-container{float:right}.box__header .header__inner .offline-status.status-success{display:none}.box__header.btns-long .btn{max-width:100px}.box__header.has-edit-button.has-search .header__title{right:110px}.backBtn,.createBtn,.dashHomeBtn,.menuBtn,.offline-status,.searchBtn{float:left;height:49px;width:44px;line-height:50px;color:#000;text-align:center;z-index:2000}.backBtn.selected-item,.createBtn.selected-item,.dashHomeBtn.selected-item,.menuBtn.selected-item,.offline-status.selected-item,.searchBtn.selected-item{background:#f5f5f5}.menuBtn{position:relative;text-decoration:none}.menuBtn::after{bottom:0;right:0}.offline-icon{display:inline-block;width:8px;height:8px;background:0 0;line-height:0;font-size:0;vertical-align:middle;border-radius:50%}.offline-icon.status-default{background:#000}.offline-icon.status-success{background:#368f01}.offline-icon.status-warning{background:#ffa800}.offline-icon.status-error{background:#c72516}.offline-status{width:12px}.createBtn,.searchBtn{float:right}.createBtn.active,.searchBtn.active{background:rgba(0,0,0,.5)}#menu-left,.box__menu{height:100%;width:100%}.box__menu .menu__inner{overflow:hidden;width:100%;height:100%;list-style:none;background:#d3dbe1;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch}.box__menu .menu__item{background:#d3dbe1;border-bottom:solid 1px transparented}.box__menu .menu__item:first-child{min-height:49px}.box__menu .menu__item:first-child .menu-item__link{padding-top:15px}.box__menu .menu__item.selected-item{background:#9aa5ad}.box__menu .menu__item.current .menu-item__link{color:#fff;background:#9aa5ad}.box__menu .menu__item .menu-item__link{padding:13px 12% 13px 15px;color:#000;line-height:1.357rem;display:block;overflow:hidden}.box__menu .menu__item .menu-item__icon{display:inline-block;width:24px;text-align:center}.box__menu .menu__item .menu-item__icon .offline-icon{width:20px;height:20px}.box__menu .menu__item .menu-item__icon .icondefault{font-size:24px;color:#6b7479}.box__menu .menu__item .label-module-sm,.box__menu .menu__item .menu-item__icon,.box__menu .menu__item .user-icon{margin:-6px 7px -6px 0}.box__menu .menu__divider{display:block;height:1px;background-color:#9aa5ad}.right-menu .icon{margin:0 8px 0 -2px;line-height:1;vertical-align:inherit;color:#6b7479}.mobile .right-menu{right:0;bottom:-50px;-webkit-transform:translate3d(100%,0,0)}.tablet .right-menu{width:300px;position:absolute;top:46px;right:0;z-index:9999;max-height:100%;overflow-y:auto;display:none}.tablet .right-menu .box__menu{position:static;top:140px}.tablet .right-menu .menu__inner{width:auto;border-color:#fff;border-style:solid;border-width:2px 2px 1px;border-radius:4px 0 4px 4px}.tablet .overlay__right-menu{position:absolute;top:-50px;left:0;right:0;bottom:-50px;z-index:9998;overflow:scroll;-webkit-overflow-scrolling:touch;visibility:hidden;opacity:0;transition:visibility 0s .2s,opacity .2s linear}.tablet .overlay__right-menu.show{visibility:visible;opacity:1;transition:opacity .2s linear}.tablet #content .overlay__right-menu{left:-56px}#tutorial,#tutorial__view{left:0;top:0;z-index:999981;position:absolute}i.user-icon{width:26px;height:26px;line-height:26px;padding:0;border:none;border-radius:50%;font-size:13px;color:#454545}.user-icon.withPicture{background-size:100%;background-position:50% 50%}#me{display:block;overflow:hidden;font-weight:700}#createList,#moduleList{position:absolute;height:100%;width:100%;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;-webkit-transform:translate3d(-100%,0,0)}#tutorial__view{right:0;bottom:0;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);opacity:0;-webkit-transition:opacity .3s linear;transition:opacity .3s linear}#tutorial,.tablet #wrapper{-webkit-transform:translate3d(0,0,0)}#tutorial{max-height:inherit;transform:translate3d(0,0,0)}#tutorial-content .text{position:absolute;width:160px;padding:4px 10px 0;font-size:1rem;font-weight:700;line-height:1.25;color:#fff;z-index:999982}#tutorial-content .text-container{top:15%;position:absolute;left:50%;width:186px}#tutorial-content .text-container .text{position:relative;left:-50%;font-size:1.071em;font-weight:400;text-align:center;width:100%;border-radius:10px;border:2px solid #000;background-color:#313130;opacity:.8;padding:10px;margin-left:-12px}.dashboard,.dashlets__slider-area{position:absolute;overflow:hidden;top:0;right:0}.badge,.label{font-size:11.84px;line-height:14px;color:#fff;vertical-align:baseline;white-space:nowrap;background-color:#CDCCCB}.label{padding:1px 4px 2px;border-radius:3px}.badge{padding:1px 9px 2px;border-radius:9px}a.badge:hover,a.label:hover{color:#fff;text-decoration:none;cursor:pointer}.c-,.dashlet__item{background-color:#9F9F9F}.c-active-tasks{background-color:#73AC56}.c-planned-activities{background-color:#01d1ff}.c-inactive-tasks{background-color:#9C5BDD}.c-bubblechart{background-color:#CE595A}.c-history{background-color:#f2c500}.c-saved-reports-chart{background-color:#E35EA7}.c-activitystream-dashlet{background-color:#F5744C}.c-forecast-pipeline{background-color:#6CB86F}.c-forecastdetails{background-color:#5EA0D4}.c-webpage{background-color:#F96666}.c-dashablelist{background-color:#DAB652}.c-forecast-pareto{background-color:#CD7CDE}.c-twitter{background-color:#599EFF}.c-opportunity-metrics{background-color:#cc6cd9}.c-casessummary{background-color:#e61718}.dashlets__list,.dashlets__slider .dashlet__b:empty,.pagination__bar,.tabs__bar{background:#fff}.layout__Dashboards .backBtn{display:none}.layout__Dashboards.show-paginator .backBtn{display:block}.dashboard{left:0;bottom:0}.dashboard .dashlets__slider-area{visibility:hidden}.dashboard+.pagination__bar{display:none}.show-paginator .dashboard{bottom:51px}.show-paginator .dashboard+.pagination__bar{display:block}.show-dashlets .dashboard .dashlets__list{display:none}.show-dashlets .dashboard .dashlets__slider-area{visibility:visible}.actionsheet-overlay .invisible,.hide-tab,.invisible{visibility:hidden}.show-dashlets .dashboard .dashlets__slider{display:-webkit-box;display:-webkit-flex;display:flex}.dashlets__slider-area{z-index:1;left:0;bottom:0}.dashlets__list{position:relative;z-index:2;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%;padding:10px;-webkit-box-sizing:border-box;box-sizing:border-box}.dashlets__list:after{display:table;clear:both}.dashlets__list .dashlet__item{overflow:hidden;min-height:90px;border-radius:6px;-webkit-box-sizing:border-box;box-sizing:border-box;font-size:1rem;text-align:center;color:#fff}.dashlets__list .dashlet__item .dashlet__title{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:15px 10px 12px;text-transform:uppercase}.dashlets__list .dashlet__item .dashlet__icon{height:45px}.dashlets__list .dashlet__item .icondefault{font-size:30px;line-height:1em}.dashlets__list .dashlet__item.selected-item{opacity:.9}.dashlets__list__col{float:left;padding:5px;width:50%;-webkit-box-sizing:border-box;box-sizing:border-box}.layout__detail .dashlets__list__col{width:50%}@media screen and (min-width:700px){.dashlets__list__col{width:33.33333333%}}@media screen and (min-width:768px){.dashlets__list__col{width:25%}}@media screen and (min-width:1024px){.dashlets__list__col{width:20%}.layout__detail .dashlets__list__col{width:33.33333333%}}.dashlets__title{position:relative;width:100%;height:44px;line-height:44px;overflow:hidden;text-align:center;background:#fff;font-size:1.143rem;font-weight:700;display:none;z-index:1}.dashlets__title.show+.dashlets__slider-area{top:44px}.dashlets__slider{position:relative;width:100%;height:100%;z-index:1;display:-webkit-box;display:-webkit-flex;display:flex;box-shadow:content-box;-webkit-transform-style:preserve-3d;transform-style:preserve-3d;-webkit-transition-property:-webkit-transform;transition-property:transform}.dashlets__slider .dashlet__b,.tabs__bar{display:-webkit-box;display:-webkit-flex}.dashlets__slider .dashlet__b{height:100%;position:relative;display:flex;transform-style:preserve-3d;-webkit-flex-shrink:0;flex-shrink:0}.pagination__bar{position:absolute;bottom:0;left:0;right:0;height:50px;line-height:50px;border-top:solid 1px #e5e5e5;text-align:center;color:#676767}.pagination__bar .icondefault{height:50px;line-height:50px;padding:0 2px;margin:0 2px;font-size:10px}.panel__addpost .btn,.panel__addpost .placeholder{white-space:nowrap;line-height:1.571rem;overflow:hidden;text-overflow:ellipsis}.pagination__bar .icondefault.disabled{color:#ccc}.pagination__bar .next,.pagination__bar .prev{padding:0 12px;font-size:20px}.pagination__bar .prev{float:left}.pagination__bar .next{float:right}.pagination__bar .icon-circle-thin{color:#a8a8a8}.hide-tab{position:absolute;display:block}.tabbed__dashlet{position:absolute;top:0;right:0;bottom:0;left:0}.tabbed__dashlet .tabs__bar{position:absolute;z-index:2}.tabbed__dashlet.has-dashlet-options .easy-scroller-parent{top:40px}.tabs__bar{position:absolute;width:100%;height:54px;display:flex;flex-flow:wrap;border-bottom:solid 1px #d8d8d8;z-index:2}.tabs__bar .tab{position:relative;-webkit-box-flex:1;-webkit-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-flex-align:center;-webkit-align-items:center;align-items:center;border-bottom:4px solid transparent;list-style:none}.tabs__bar .tab:after{position:absolute;top:100%;left:0;right:0;height:17px;background:0 0;content:\' \'}.tabs__bar .tab.selected-item{background:#f6f6f6}.tabs__bar .tab .tab__title{overflow:hidden;display:block;width:100%;max-height:54px;font-size:.857rem;font-weight:700;text-align:center;text-transform:uppercase;color:#000}.tabs__bar .tab .title{display:-webkit-box;overflow:hidden;-webkit-line-clamp:1;-webkit-box-orient:vertical}.dropdown li .name,.line-clamp{-webkit-line-clamp:2;-webkit-box-orient:vertical}.tabs__bar .tab .count{display:inline-block;font-size:.857rem;min-width:22px;width:auto;padding:3px;background-color:#e61718;border-color:transparent;border-radius:3px;margin:2px 0;color:#fff}.tabs__bar .active-tab{border-color:#e61718;color:#000}.tabs__bar--dd{height:55px;padding:0 10px;-webkit-box-align:center;-webkit-flex-align:center;-webkit-align-items:center;align-items:center;border-bottom:1px solid;background:#f6f6f6}.tabs__container{position:absolute;top:0;right:0;bottom:0;left:0;overflow:hidden}.tabs__container .easy-scroller-holder{background:#fff}.tabs__bar+.tabs__container{top:55px}.activitystream-item{padding:0!important}.panel__addpost{display:-webkit-box;display:-webkit-flex;display:flex;padding:8px 10px}.panel__addpost .btn{display:block;font-weight:700}.panel__addpost .placeholder{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:block;padding:4px 10px;margin-right:10px;border:1px solid #ccc;border-radius:2px;background:#f8f8f8;color:#b9bec6}.as__detail{position:relative;min-height:46px;padding:8px 32px 8px 46px}.as__detail .as__icon,.as__detail .label-module-sm{float:left;margin:4px 0 0 -36px}.as__detail .user-icon{border:2px solid #999}.as__detail .as__title{padding-bottom:2px}.as__detail .as__info{font-size:.785rem;color:#717171}.comments-container{margin-left:46px}.comment__item{overflow:hidden;border-top:1px dotted #d8d8d8;padding:6px 10px 6px 38px;font-size:.857rem}.comment__item .user-icon{float:left;margin:4px 0 0 -38px;border:2px solid #999}.comment__item .comment__info{padding-top:3px;font-size:.785rem;color:#717171}.comments-more-btn{display:block;padding:10px 0;border-top:1px dotted #d8d8d8}.sugar_tag{display:inline-block;padding:2px 4px 1px;border-radius:2px;color:#fff;background:#000}.tb__detail{padding-top:4px}.tb__detail .tb__icon{float:left;padding:2px 5px 0 0}.tb__detail .tb__info{color:#717171}.tb__detail .user-icon{border:2px solid #999}.view__taggable{position:relative;height:100%;background:#fff}.taggable,.taggable-shadow{position:absolute;top:0;height:100%;width:100%;padding:10px;white-space:pre-wrap;word-wrap:break-word;text-indent:0;display:block;resize:none;-webkit-box-sizing:border-box;-webkit-line-break:after-white-space;-webkit-appearance:none;overflow-x:hidden;overflow-y:scroll;font-size:1.214rem;line-height:1.286em;outline:0}.taggable{-webkit-overflow-scrolling:auto;background-color:transparent;z-index:4;-webkit-box-shadow:0;letter-spacing:0}.ios .taggable{-webkit-transform:translate3d(-4px,0,0);transform:translate3d(-4px,0,0);left:0;right:-10px;width:auto}.taggable-shadow{background:#fff;border-color:transparent;color:transparent;left:0;right:0;top:0;bottom:0;pointer:none;word-spacing:0;letter-spacing:normal}.taggable-shadow .sugar_tag{display:inline;position:relative;z-index:5;padding:0;color:#fff}.chart-wrapper,.taggable-dropdown{position:absolute;background:#fff;left:0}.taggable-dropdown{top:100px;bottom:0;right:0;overflow-y:scroll;border-top:solid 1px #2d2d2d;border-bottom:solid 1px #2d2d2d;z-index:5}.taggable-dropdown .taggable-listItem{padding:0 10px;line-height:2.5rem;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.taggable-dropdown .taggable-listItem.disabled{color:#717275}.taggable-dropdown .taggable-status{float:right;font-style:italic}.taggable-dropdown .label-module-sm{margin:0 10px 0 0;vertical-align:middle}.show-dropdown .taggable,.show-dropdown .taggable-shadow{height:60px}.show-dropdown .taggable-dropdown{top:60px}.nv-chart{height:100%}.chart-wrapper{width:100%;min-height:100%;top:0;overflow-y:auto}.chart-wrapper.has-scroll{position:static}.chart-wrapper .chart{position:absolute;top:0;left:0;right:0;bottom:0}.chart-wrapper.has-dashlet-options .chart{top:40px}.chart-wrapper .warning-message{padding:20px 0}.forecast-details .fd__b{padding:20px}.forecast-details .fd__b .row-fluid{padding:10px;border-bottom:1px solid #e9e9e9;box-sizing:border-box}.forecast-details .fd__b .row-fluid:after{clear:both;display:table;content:"";line-height:0}.forecast-details .fd__b .row-fluid.deficitRow{border-top:1px solid #e9e9e9;font-weight:600}.forecast-details .fd__b .row-fluid.deficitRow.font-green{color:#33800d}.forecast-details .fd__b .row-fluid.deficitRow.font-red{color:#e61718}.forecast-details .fd__b .row-fluid.details-cols{padding:10px 0;border-bottom:none}.forecast-details .fd__b .row-fluid .span1{float:left;width:100%}.forecast-details .fd__b .row-fluid .span2{float:left;width:48.9%;margin-left:2.2%}.forecast-details .fd__b .row-fluid .span2:first-child{margin-left:0}.forecast-details .fd__b .row-fluid .span3{float:left;width:32%;margin-left:2%}.forecast-details .fd__b .row-fluid .span3:first-child{margin-left:0}.forecast-details .fd__b .row-fluid .ellipsis_inline{display:block!important;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.forecast-details .fd__b .row-fluid .ellipsis_inline.green{background:#33800d}.forecast-details .fd__b .row-fluid .ellipsis_inline.grayLight{background:#717171}.forecast-details .fd__b .row-fluid .ellipsis_inline.red{background:#e61718}.forecast-details .fd__b .row-fluid .ellipsis_inline .forecast_details_amount,.forecast-details .fd__b .row-fluid .ellipsis_inline .forecast_details_feedback,.forecast-details .fd__b .row-fluid .ellipsis_inline .forecast_details_label{display:block}.forecast-details .fd__b .row-fluid:last-child div[class*=span]>.forecast_details_default_feedback{font-size:11px;line-height:16px;color:#fff;border-radius:3px;padding:8px;margin-top:4px}.forecast-details .fd__b .row-fluid .forecast_details_no_access{padding:3px 6px;color:#fff;background:#666;border-radius:4px;font-size:11px;display:inline-block;margin-top:3px}.forecast-details .warning-message{padding:20px}@media screen and (max-height:360px){.landscape .forecast-details .fd__b{padding:5px 20px 20px}.landscape .forecast-details .fd__b .row-fluid{padding:5px}.landscape .forecast-details .fd__b .row-fluid .ellipsis_inline .forecast_details_amount,.landscape .forecast-details .fd__b .row-fluid .ellipsis_inline .forecast_details_amount .fdf_ln1,.landscape .forecast-details .fd__b .row-fluid .ellipsis_inline .forecast_details_feedback,.landscape .forecast-details .fd__b .row-fluid .ellipsis_inline .forecast_details_feedback .fdf_ln1,.landscape .forecast-details .fd__b .row-fluid .ellipsis_inline .forecast_details_label,.landscape .forecast-details .fd__b .row-fluid .ellipsis_inline .forecast_details_label .fdf_ln1{display:inline}}.filters-wrap{display:-webkit-box;display:-webkit-flex;display:flex;padding:5px 5px 5px 10px}.filters-wrap .controls{border-bottom:none}.filter{white-space:nowrap;padding-right:20px}.filter .control-label,.filter .placeholder{display:none}.filter .actionsheet-select,.filter select{position:relative;padding-right:16px;-webkit-appearance:none;z-index:1}.dashlet-options{position:relative;height:40px;background:#fff;border-bottom:1px solid #e5e5e5;z-index:2;display:-webkit-box;display:-webkit-flex;display:flex}.dashlet-options .dashlet-options_bigbar{-webkit-box-flex:1;-webkit-flex:1;flex:1}.dashlet-options .visibility-switcher{min-height:28px;padding:5px 10px}.dashlet-options .my-items-btn{width:32px;height:36px;line-height:36px;padding:0;border:none;font-size:16px;text-align:center;color:#555;position:absolute;top:0;right:5px}.dashlet-options .my-items-btn.active{background-color:transparent;color:inherit!important}.dashlet-options .my-items-btn.active .user-icon:before{content:"\\f007"}.twitter-wrapper .tw__user_icon{border:none!important;border-radius:5px!important;background-color:#fff;width:26px;height:26px;background-size:100%;background-position:50% 50%}.twitter-wrapper .tw__as__title{padding-top:2px}.twitter-wrapper .tw__as_profile_link{color:#585858}.twitter-wrapper .tw__as_content_url{word-wrap:break-word;width:100%}.dashlet-webpage{height:100%;width:100%;background:#fff}.dashlet-webpage .wp__wrapper{position:absolute;top:40%;left:0;right:0;text-align:center}.dashlet-webpage .wp__container{display:inline-block;min-width:60%;max-width:70%;border:1px solid #ddd;padding:5px;-webkit-border-radius:3px;background-color:#f5f5f5}.dashlet-webpage .wp__favlogo{position:absolute;float:left;top:38%;padding-left:10px;color:#666}.dashlet-webpage .wp__content{overflow:hidden;text-align:left;padding-left:35px}.dashlet-webpage .wp__title{right:auto;padding:2px;color:#000}.dashlet-webpage .wp__url{font-size:.885rem;right:auto;padding:2px;word-wrap:break-word}.donut-chart{position:absolute;width:100%;height:100%;left:0;top:0}.donut-chart .nv-chart{position:absolute;width:100%;height:auto;min-height:50px;min-width:100px;top:0;bottom:0}.donut-chart .donut-chart-metric-container{position:absolute;width:100%;height:auto;bottom:0;left:0}.donut-chart .chart-metric{text-align:center;width:33%;position:relative;border-top:1px solid #e8e8e8;border-right:1px solid #e8e8e8;float:left;padding:14px 0 4px;-webkit-box-sizing:border-box;box-sizing:border-box;bottom:0}.donut-chart .chart-metric:last-child{border-right:none}.donut-chart .chart-metric span.label{width:26px;height:26px;padding:3px;position:absolute;top:-22px;left:50%;margin-left:-12px;border:none;font-size:1rem;line-height:1.786rem}.donut-chart .chart-metric div.metric-description span{float:none;display:inline-block;font-weight:700;font-size:10px;text-align:center;text-shadow:0 1px 0 #636363;margin-right:3px!important}.altview,.background{display:none}.donut-chart .chart-metric div.metric-amount{font-weight:700;-webkit-box-sizing:border-box;box-sizing:border-box}.opportunity-metrics-wrapper{position:absolute;height:100%;width:100%}.opportunity-metrics-wrapper .nv-chart{bottom:70px}.opportunity-metrics-wrapper .nv-chart .active{fill:#176de5}.opportunity-metrics-wrapper .nv-chart .won{fill:#33800d}.opportunity-metrics-wrapper .nv-chart .lost{fill:#e61718}#overlay .icon-spinner-path,#overlay.tint .icon-spinner-path{fill:#000}.opportunity-metrics-wrapper .chart-metric span.label.won{background-color:#33800d}.opportunity-metrics-wrapper .chart-metric span.label.lost{background-color:#e61718}.opportunity-metrics-wrapper .chart-metric span.label.active{background-color:#176de5}.opportunity-metrics-wrapper .chart-metric div.metric-amount.won{color:#33800d}.opportunity-metrics-wrapper .chart-metric div.metric-amount.lost{color:#e61718}.opportunity-metrics-wrapper .chart-metric div.metric-amount.active{color:#176de5}.background{position:absolute!important;top:50px;left:0;right:0;bottom:0;background:#fff;z-index:9999!important}.checkbox-icon,.checkbox_custom{position:relative;vertical-align:middle}.fno{float:none!important}.fleft{float:left!important}.fright{float:right!important}.vis_action_hidden{display:none!important}h1,h2,h3,h4,h5,h6{font-weight:400}h1{font-size:26px}.ellipsis{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.line-clamp{display:-webkit-box;overflow:hidden}.checkbox_default{-webkit-appearance:none;width:1.286rem;height:1.286rem;border-width:1px;border-style:solid;border-color:#999;border-radius:3px}.checkbox_default:checked:after{content:"\\2713";font-size:130%;line-height:16px}.checkbox_custom{width:1.286rem;height:1.571rem;-webkit-appearance:none;border:none;background:0 0;box-shadow:none;z-index:2}.checkbox_custom+.checkbox-icon{width:1.286rem;margin-left:-1.286rem;z-index:1}.checkbox-icon{display:inline-block;font-size:1.357rem;line-height:1;color:#111;text-align:left;z-index:1}.modal{position:absolute;top:10px;left:10px;right:10px;width:auto;margin:0}#overlay,.overlay-view,.overlay-view .message{position:absolute;left:0;width:100%}.modal.fade.in{top:auto}.modal .modal-header .close{padding:10px;margin:-10px}.overlay-view{top:0;height:100%;background-color:rgba(0,0,0,.7);z-index:1001}.overlay-view .message{top:45%;text-align:center;opacity:.8;color:#fff}#overlay{top:0;height:100%;z-index:999990;font-size:1.357rem;font-weight:700;text-align:center}#overlay #overlay-spinner{height:32px;width:32px;margin-top:20px;display:none}#overlay .current,#overlay.spinner #overlay-spinner,.label-module-sm{display:inline-block}#overlay #overlay-spinner .icon-spinner{width:32px;height:32px}#overlay .current{padding-bottom:10px}#overlay .completed{font-size:.632em;color:#CDCCCB}#overlay.spinner #overlay-message,#overlay.spinner #overlay-spinner{position:relative;top:40%}#overlay.tint{background:#fff;color:#000}#overlay .icon-spinner{display:inline-block;vertical-align:top;width:18px;height:18px;margin-right:3px}.dropdown li.filters-preloader .icon-spinner .icon-spinner-path,.listing .show-more-btn .loading-holder .icon-spinner .icon-spinner-path,.view__search .icon-spinner .icon-spinner-path{fill:#c2c2c2}.label-module-sm{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;height:24px;width:24px;font-weight:400;font-size:12px;line-height:24px;border-radius:50%;background:#9aa5ad;white-space:nowrap;text-align:center;color:#fff}.label-module-sm .icondefault{font-size:18px;width:18px;height:18px;line-height:18px;text-align:center;color:#58595b}.label-module-sm.has-icon-inside .label-module-sm_title{position:absolute;top:4px;left:4px}.label-module-sm .icon-th{margin-top:1px;color:#2b2b2b}.label-Bugs{background-color:#e61718}.label-Cases{background-color:#e85479}.label-ProspectLists,.label-Prospects,.label-TargetLists,.label-Targets{background-color:#6a800d}.label-CampaignLog,.label-Campaigns{background-color:#445208}.label-Opportunities{background-color:#a05cff}.label-RevenueLineItems{background-color:#00cbf3}.label-Products{background-color:#5dc8f8}.label-Forecasts{background-color:#0d8046}.label-Quotes{background-color:#0eba61}.label-Accounts{background-color:#51cd15}.label-Contacts{background-color:#cc6cd9}.label-Leads{background-color:#7651fc}.label-Reports{background-color:#ff973e}.label-Files{background-color:#6f1c0b}.label-Documents{background-color:#626bf5}.label-KBContents,.label-KBDocuments{background-color:#6f1c0b}.label-Calendar{background-color:#0d806c}.label-Meetings{background-color:#2ee0cd}.label-Calls{background-color:#01d1ff}.label-Emails{background-color:#1257b7}.label-Tasks{background-color:#ff5a9c}.label-Notes{background-color:#28bdf0}.label-Workflow{background-color:#1378bf}.label-Users{background-color:#111}.label-Employees{background-color:#2c97de}.view__search,.view__search .search-query{background:#fff;-webkit-box-sizing:border-box}.label-empty{background:#fff;border:1px solid #555;color:#555}.view__filters.filters-hidden{display:none}.box__filter{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:flex;height:44px;padding:6px 7px;background:#f7f8f9;white-space:nowrap}.box__filter .filter__item{padding-left:4px}.box__filter .filter__item:first-child{padding-left:0}.box__filter .filter__seporate{-webkit-box-flex:1;-webkit-flex:1;flex:1;padding-left:0}.box__filter .filter__item-by{max-width:160px}.box__filter .filter__item-sort{width:32px}.box__filter .btn-filter{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.view__search{display:none;position:absolute;top:-50px;left:0;width:100%;box-sizing:border-box;-webkit-transition:all .6s linear;transition:all .6s linear;height:46px;padding:6px 5px;z-index:9002;opacity:0}.view__search.show-search{display:-webkit-box;display:-webkit-flex;display:flex}.view__search .box__search-query{position:relative;-webkit-box-flex:1;-webkit-flex:1;flex:1}.view__search .box__search-icon{position:absolute;top:8px;left:10px;color:#c2c2c2}.view__search .icon-spinner{display:none;position:absolute;top:9px;left:9px;width:16px;height:16px}.view__search .search-query{box-sizing:border-box;width:100%;height:34px;padding:4px 35px 4px 32px;border-radius:2px}.view__search .clear-button{display:none;position:absolute;top:0;right:0;padding:6px 6px 5px 12px;margin:0;font-size:1rem;line-height:24px;color:#c2c2c2}.view__search .not-empty .clear-button{display:block}.view__search .searchCancelBtn{height:30px;padding:10px;margin:-7px -10px -6px 0;float:none}.view__search .searchCancelBtn.selected-item{background:#f5f5f5}.view__search .searchCancelBtn .btn{padding-top:6px;color:#0c89d1}.view__search-box.in-progress .box__search-icon{display:none}.view__search-box.in-progress .icon-spinner{display:block}.dropdown,.overlay-dropdown{position:absolute;top:44px;z-index:2;display:none}.overlay-dropdown{left:0;width:100%;height:1500px;background:#000;opacity:.55}.dropdown{overflow-y:auto;border-radius:0 0 2px 2px;background:#fff;max-height:50%}.dropdown.dropdown__filter{left:7px;width:190px}.dropdown.dropdown__sortBy{right:7px;width:183px}.dropdown li{display:block;border-top:1px solid #e8e8e8}.dropdown li:first-child{border:none}.dropdown li.filters-preloader{display:none}.dropdown li.filters-preloader .icon-spinner{display:inline-block;width:16px;height:16px;margin-right:8px;vertical-align:top}.dropdown li.filters-preloader.show{display:block}.dropdown li.selected-item{background:#f6f6f6}.dropdown li.filters-fetching-error{display:none;padding:8px 10px;text-align:center}.dropdown li a.active .check-icon,.dropdown li.filters-fetching-error.show{display:block}.dropdown li.filters-fetching-error .filters-try-again{color:#0679c8;text-decoration:underline}.dropdown li a{position:relative;display:block;height:2.857rem;color:#323232}.dropdown li a.active{color:#0679c8}.dropdown li .name{position:absolute;top:50%;left:22px;right:7px;-webkit-transform:translateY(-50%);transform:translateY(-50%);max-height:2.857rem;overflow:hidden;text-overflow:ellipsis;display:-webkit-box}.dropdown li .check-icon{display:none;position:absolute;top:50%;left:6px;margin-top:-9px;font-size:13px}.listing .no-records-found p,.listing article p:last-child{margin:0}.dropdown li .loading-error{height:auto;padding:12px 0;text-align:center}.dropdown li .loading-error .message{display:block;padding-bottom:6px}.dropdown li .loading-error .link{color:#0679c8;text-decoration:underline}.mobile.show-content-child #content{display:none}.mobile.show-content-child #content-child{display:block}.tablet.android #menu-left{width:300px}.tablet #menu-left{overflow:hidden;width:54px}.tablet #menu-left .menu-item__label{opacity:0;-webkit-transition-duration:.3s;transition-duration:.3s}.tablet #menu-left .menu__inner.menu__item .menu-item__link{padding-right:15px}.tablet.show-menu-left #menu-left{width:300px}.tablet.show-menu-left #menu-left .menu-item__label{opacity:1}.tablet #wrapper{transform:translate3d(0,0,0);left:54px;background:#fff}.tablet.show-content-child #content{display:block;width:340px}.tablet.show-content-child #content-child{display:block;box-shadow:-2px 0 7px rgba(0,0,0,.1)}.tablet #moduleList{-webkit-transform:translate3d(0,0,0)}.tablet .layout__detail .bizcard{min-height:305px}.tablet .layout__detail .view__detail-tabs{top:305px}#content,#content-child,#wrapper{top:0;left:0;position:absolute;bottom:0;right:0}#content,#content-child{z-index:2002}#content-child{display:none}.layout__def{position:absolute;top:50px;bottom:0;left:0;right:0;z-index:1}.layout__def .box__header{top:-50px}.layout__def .box__edit{top:50px}#content-overlay{position:absolute;width:100%;left:0;top:50px;bottom:0;z-index:2003;-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0);overflow:scroll;-webkit-overflow-scrolling:touch}#content-overlay.full,.show-menu-left #content-overlay{top:0}.easy-scroller-parent{position:absolute;top:0;right:0;bottom:0;left:0}.view__filters~.easy-scroller-parent{top:44px}.filters-hidden .easy-scroller-parent{top:0}.easy-scroller-holder{position:absolute;top:0;min-height:100%;left:0;right:0;z-index:1}.layout__Dashboards .easy-scroller-holder,.layout__list .easy-scroller-holder{background:#fff}.actionsheet-overlay{top:0;background-color:rgba(0,0,0,.7);z-index:9999;width:100%;bottom:0;position:absolute;display:none}.actionsheet-overlay .popup{-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);min-width:250px;max-width:90%;font-weight:700;background-color:#fff;color:#000;font-size:16px;position:absolute}.actionsheet-overlay .popup .footer .cancel.selected-item,.actionsheet-overlay .popup .items .item.selected-item{background:#666}.actionsheet-overlay .popup .header{border-bottom:3px solid #d3dbe1;padding:16px 0;text-align:center}.actionsheet-overlay .popup .items{max-height:120px;overflow:auto;overflow-x:hidden}.actionsheet-overlay .popup .items .item{height:40px!important;line-height:40px;width:auto;padding-left:20px;padding-right:20px;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.actionsheet-overlay .popup.compact .footer .cancel,.actionsheet-overlay .popup.compact .header{padding:10px!important}.actionsheet-overlay .popup.compact .items{max-height:80px!important}.actionsheet-overlay .popup .footer{border-top:2px solid #d3dbe1}.actionsheet-overlay .popup .footer .cancel{display:block;color:#000;text-align:center;padding:16px}.items article,.scroll>.pad>span .control-group,.view__summary .scroll>ul>li{position:relative}.ios .items article,.ios .scroll>.pad>span .control-group,.ios .view__summary .scroll>ul>li{-webkit-transform:translatez(0)}.listing{background:#fff;min-height:100%;width:100%;padding-bottom:1px;overflow:hidden;z-index:2}.listing .no-records-found{display:none;color:grey;background-color:#f4f4f4;padding:18px 15px 20px}.listing .bucket-header,.listing article{padding:8px 8px 8px 12px;border-top:1px solid #d8d8d8}.listing #activity-stream .no-records-found{background:#fff}.listing .bucket-header{min-height:15px;background:#f5f5f5;border-bottom:solid 1px #e8e8e8;font-weight:700}.listing article{display:block;background:#fff;min-height:52px}.listing article p{display:block}.listing article.item-checkbox_checked,.listing article.selected-item{background:#ededed!important}.listing article.current{background:#9aa5ad;border-color:#dcdcdc;color:#fff}.listing article.current .fields .value,.listing article.current .item-label,.listing article.current .item-name,.listing article.current .module-name,.listing article.current .module-name-comma,.listing article.current .tb__info,.listing article.current a,.listing article.current div.search-result{color:#fff!important}.listing article.deleted{opacity:0}.listing .list-item .txt{margin-top:6px;min-height:2.7em}.listing .list-item .txt .clip{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.listing .list-item .txt .clip a em{font-style:normal;color:#555}.listing .list-item .txt .item-name,.listing .list-item .txt>.clip:first-child{font-size:1.143rem;line-height:1.3em}.listing .list-item .txt .module-name{float:left;max-width:50%;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-style:normal;color:#000;font-size:1.143rem;line-height:1.3em}.listing .list-item .txt .module-name-comma{float:left;font-size:1.143rem;line-height:1.3em;padding-right:4px;color:#000}.listing .list-item .txt .highlight{font-weight:700;color:inherit}.listing .list-item .txt div.search-result{color:#000;font-size:1rem}.listing .list-item .txt div.search-result .highlight{padding:0 2px;background:#dfdfdf;color:#000;font-weight:400}.listing .list-item .txt div.search-result .relate-link{color:#000}.listing .list-item .search{height:auto}.listing .list-item .additional{padding-top:.3em;padding-bottom:.3em;font-size:.929rem}.listing .list-item .additional div.search-result{display:block}.listing .list-item .txt.has-access .item-name{color:#0679c8}.listing .list-item .fields{padding-top:2px}.listing .list-item .fields .value{color:#000}.listing .list-item .fields .field{overflow:hidden}.listing .list-item .fields .item-label{float:left;width:46%;padding-right:10px;font-weight:500;color:#000}.listing .list-item.error{color:#fff;background:#e61718;border-top:none;border-bottom:solid 3px #8a1a0f}.listing .list-item.error .module-name,.listing .list-item.error .module-name-comma{color:#fff}.listing .list-item.warning{color:#fff;background:#ffa800;border-top:none;border-bottom:solid 3px #b27500}.listing .list-item.warning .module-name,.listing .list-item.warning .module-name-comma{color:#fff}.listing .list-item.tx-item{font-size:1.143rem;color:#0679c8}.listing article.has-grip{padding-right:32px}.listing article.item-checkbox{position:relative;padding-right:32px}.listing article.item-checkbox .asscacct,.listing article.item-checkbox .checkbox-icon{position:absolute;top:50%;right:0;width:31px;margin-top:-.5em}.listing .show-more-btn{background:#f5f5f5;border-top:1px solid #d8d8d8;padding:0 14px;margin-bottom:0;min-height:42px;line-height:42px}.listing .show-more-btn.show-more-top-btn{z-index:1}.listing .show-more-btn:first-child,.listing .show-more-btn:nth-child(2),.listing .show-more-btn:nth-child(3){border-bottom:1px solid #d8d8d8;margin-bottom:-1px}.listing .show-more-btn .loading-holder .icon-spinner{display:inline-block;margin-right:5px;vertical-align:text-top}.picker-list-row{line-height:52px;font-size:1.143rem}.picker-list-row .label-module-sm{margin:-2px 9px 0 0}.picker-list-row a{color:#555}.menu-container-grip{position:absolute;top:0;right:0;height:100%;width:20px;padding:0 0 0 15px;font-size:14px;font-style:normal;line-height:68px}.menu-container{position:absolute;top:0;bottom:0;left:100%;width:100%;background:#f4f5f6;text-align:center}.menu-container.on{left:0}.menu-container a{display:inline-block;padding:18px 0 300px;height:26px;width:62px;color:#262626;text-align:center;font-size:11px;line-height:18px}.menu-container a .icondefault{font-size:20px;color:#262626}.menu-container a.selected-item .icondefault{color:#262626}.menu-container a .icon-spinner{display:inline-block;width:14px;height:14px}.menu-container a .icon-spinner .icon-spinner-path{fill:#262626}.menu-container .grip{position:absolute;top:0;left:0;height:100%;line-height:68px;width:16px;padding:0 2px 0 10px;font-size:14px;color:#262626}.menu-container .box__context-menu{display:-webkit-box;display:-webkit-flex;display:flex;justify-content:center}.menu-container .box__context-menu .disabled{opacity:.2}.menu-container .action-label{display:block}.ios .menu-container{-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);-webkit-transition-duration:.15s;transition-duration:.15s}.ios .menu-container.on{left:100%;-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}.error-box{padding:18px 15px 20px;background-color:#e61718;font-weight:700;color:#fff}.view__detail-tabs{position:absolute;top:195px;bottom:0;left:0;right:0}.box__related-actions{margin:0;padding:0}.box__related-actions .related-action__item{list-style:none;padding:0 0 0 10px;line-height:41px;border-bottom:1px solid #d8d8d8;min-height:42px;position:relative}.box__related-actions .related-action__item.selected-item{background-color:#ededed}.box__related-actions .related-action__item .related-action-item__link{position:relative;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-right:44px;color:#555;text-decoration:none}.box__related-actions .related-action__item .label-module-sm{margin:0 9px -6px 0}.box__related-actions .related-action__item .more{position:absolute;top:0;right:10px;line-height:inherit}.box__related-actions .related-action__item .related-action-item__add{position:absolute;right:0;top:0;width:44px;padding:0;text-align:center;color:#555}.box__related-actions .related-action__item.related-action__item_empty .related-action-item__link{color:#b2b2b2}.bizcard{position:absolute;left:0;top:0;width:100%;z-index:1000;min-height:195px;background:#033d64;color:#fff;font-size:1.071rem}.bizcard .avatar,.bizcard .label-module-sm{top:10px;left:10px;position:absolute;text-align:center}.bizcard .avatar{overflow:hidden;height:68px;width:68px;border-radius:36px;border:1px solid #9aa5ad;background-repeat:no-repeat;background-position:50% 50%;background-size:100%}.bizcard .avatar .icondefault{width:1em;height:1em;line-height:70px;font-size:38px;color:#fff}.bizcard .label-module-sm{width:68px;height:68px;line-height:68px;font-size:26px}.bizcard .label-module-sm .label-module-sm_title{top:13px;left:10px}.bizcard .label-module-sm .icondefault{font-size:50px;line-height:1em}.bizcard .input_upload{position:absolute;top:0;left:0;width:90px;height:90px;opacity:0;z-index:5}.bizcard .card{position:absolute;top:0;bottom:36px;left:0;right:0;padding:10px 42px 0 10px;line-height:2em;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch}.bizcard .card .title{display:block;color:#fff;font-size:1.429rem;line-height:1.714rem}.bizcard .card .title.selected-item{color:#d3dbe1}.bizcard .card a{color:#fff}.bizcard .card .row-field{line-height:1.3em;padding-bottom:.857rem}.bizcard .card .row-field .value-label{display:none}.bizcard .card .row-field.textarea .value{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;white-space:normal}.bizcard .card .row-field .value,.bizcard .more .follow-label i,.bizcard-more .bizcard .card .value-label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.bizcard .card .row-field .value{display:block}.bizcard .card .row-field .value .subvalue{font-size:.857rem}.bizcard .card .row-field .value .value-label{color:#d3dbe1}.bizcard .card .row-field .value .relate-link{padding:10px 0;color:#fff}.bizcard .card .row-field .value .relate-link.selected-item{color:#d3dbe1}.bizcard .card .row-field .horizontal-fieldset .row-field,.bizcard .card .row-field .horizontal-fieldset .value{display:inline}.bizcard .card .additionalFields{display:none}.bizcard .favorite-icon{position:absolute;bottom:0;right:3px;padding:10px 8px 12px 10px;font-size:1.286rem;line-height:1em;color:#fff;z-index:10}.bizcard .favorite-icon.color-disabled{color:#d3dbe1}.bizcard .followable .favorite-icon{right:82px}.bizcard .more{position:absolute;top:0;bottom:52px;left:0;right:0;color:#d3dbe1}.bizcard .more .follow-label{position:absolute;bottom:0;right:0;padding:10px 10px 10px 5px;font-size:12px;color:#d3dbe1;z-index:5}.bizcard .more .follow-label i{max-width:54px;display:block;padding:0 5px;border:2px solid #d3dbe1;border-radius:4px;font-style:normal;font-weight:400}.bizcard .more .show-more .icon__hide-more,.bizcard.noactions .box__record-action{display:none}.bizcard .more .follow-label.followed i{background:#fff;border-color:#fff;color:#033d64}.bizcard .more .goedit-icon{position:absolute;top:0;right:0;padding:15px 16px 10px;color:#d3dbe1}.bizcard .more .goedit-icon .icondefault{font-size:1.143rem}.bizcard .more .goedit-icon.selected-item{color:#fff}.bizcard .more .show-more{position:absolute;left:0;bottom:0;height:40px;line-height:40px;padding:0 15px 2px 10px;color:#d3dbe1;z-index:2}.bizcard #accountDescription{margin:10px 0 0}.bizcard .box__record-action{position:absolute;left:0;bottom:0;right:0;height:52px}.box__edit,.scroll,.textarea .scroll .pad{height:100%}.bizcard.noactions .more{bottom:0}.bizcard.icon-inside .card{padding-left:90px}.bizcard.icon-inside .show-more{left:80px}.bizcard-more .bizcard{min-height:100%!important}.bizcard-more .bizcard .avatar,.bizcard-more .bizcard .label-module-sm{opacity:.3}.bizcard-more .bizcard .card .row-field{margin-bottom:.2rem}.bizcard-more .bizcard .card .value-label{display:block;padding-bottom:3px;font-size:.857rem;line-height:1.2em;color:#d3dbe1}.bizcard-more .bizcard .card .value{white-space:normal}.bizcard-more .bizcard .card .textarea .value{-webkit-line-clamp:initial}.bizcard-more .bizcard .card .horizontal-fieldset .value-label{display:none}.bizcard-more .bizcard .card .horizontal-fieldset .value{display:inline}.bizcard-more .bizcard .card .additionalFields{display:block}.bizcard-more .bizcard .show-more .icon__show-more{display:none}.bizcard-more .bizcard .show-more .icon__hide-more{display:inline-block}.landscape .bizcard{min-height:190px}.landscape .view__summary .scroll{top:190px}.brand{background:url('+i(248)+") 50% 50% no-repeat;background-size:contain;text-indent:-7000px;overflow:hidden;margin:10px auto}.scroll{position:absolute;width:100%;left:0;top:0;overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch}.scroll .pad{padding-bottom:1px;min-height:100%;width:100%;background:#fff}.textarea .scroll .pad>textarea{-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;height:100%;padding:10px}.box__edit{display:block;margin:0}.box__edit .actionsheet-select,.box__edit .uneditable-input,.box__edit input:not([type=checkbox]),.box__edit select,.box__edit textarea{float:left;position:relative;height:3.286rem;line-height:1.858rem;width:85%;padding:.714rem 15% .714rem 0;margin:-.714rem 0;z-index:2}.box__edit .actionsheet-select{height:auto;min-height:20px}.box__edit .selector .actionsheet-select{width:auto}.box__edit select{width:100%;-webkit-appearance:none}.box__edit .parent input,.box__edit .relate input{padding-right:0;width:75%}.box__edit textarea{padding-top:5px;height:48px;line-height:17px}.box__edit .textarea-div{overflow-y:auto;padding-top:.357rem;min-height:48px;max-height:86px;line-height:1.214em;white-space:pre-wrap;color:#000}.box__edit .input-wrapper input{width:100%;padding-right:0}.box__edit .enum-list{width:100%;min-height:21px;padding-top:5px;cursor:pointer}.box__edit .enum-list .label{display:inline-block;position:relative;padding:8px 25px 8px 8px;margin-bottom:6px;background:#ebebeb;color:#696969;font-size:.929rem;line-height:1;white-space:normal}.box__edit .enum-list .label i{position:absolute;top:0;right:0;height:100%;padding:0 8px 0 10px;font-size:.857rem;color:#828282}.box__edit .enum-list .label i.selected-item{color:#1c1c1c}.box__edit .enum-list .label i:before{position:relative;top:8px}.box__edit .clip{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.box__edit .controls-flex{display:-webkit-box;display:-webkit-flex;display:flex}.box__edit .controls-flex .input-wrapper,.box__edit .controls-flex .picture-wrap{display:block;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-flex:1;-webkit-flex:1;flex:1}.box__edit .controls-flex .txt-value{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;height:1.858rem;line-height:1.858rem;font-size:1.214rem;color:#111}.box__edit .controls-flex .btn-group{display:-webkit-box}.box__edit .error .controls-flex{display:block}.box__edit .email.error .controls-flex{display:-webkit-box;display:-webkit-flex;display:flex}.box__edit .controls-flex+.controls-flex{margin-top:6px}.box__edit .email .controls-flex .input-wrapper{display:-webkit-box;display:-webkit-flex;display:flex}.box__edit .control-group .controls .span2 .enum-item,.box__edit_readonly.box__edit .control-group .controls.readonly-item .value{display:block}.box__edit .email .controls-flex .input-wrapper .input-email{height:1.858rem;margin-top:0;padding-top:0;margin-bottom:0;padding-bottom:0;line-height:1}.box__edit .email .controls-flex .input-wrapper .clear-button{margin-right:5px}.box__edit .email .controls-flex.error{position:relative}.box__edit .email .controls-flex.error .input-wrapper{margin-right:15px}.box__edit .email .controls-flex.error .input-wrapper .input-email{color:red}.box__edit .email .primary-address .input-email,.box__edit .email .primary-address .txt-value{font-weight:700}.box__edit .email .invalid-email .input-email,.box__edit .email.readonly .invalid-email .txt-value{text-decoration:line-through;font-weight:400}.box__edit .email .opt-out .input-email{color:#58595B;font-weight:400}.box__edit .email.readonly .opt-out .txt-value{color:#b5b5b5;font-weight:400}.box__edit .email .btn{min-width:35px;color:#262626}.box__edit .email .f-email__add{position:relative;padding-top:7px;font-size:1rem;color:#0679c8;z-index:2}.box__edit .uneditable-link{padding-top:4px;height:1.857em;display:block;vertical-align:middle}.box__edit .avatar{height:32px;width:32px;background-position:50% 50%;background-repeat:no-repeat}.box__edit .control-group{margin-left:10px;margin-right:10px}.box__edit .control-group.error .error-icon{position:absolute;top:1.1rem;right:15px;line-height:1em;color:red}#nomad .box__edit .control-group.readonly .textarea-div,#nomad .box__edit .control-group.readonly input,#nomad .box__edit .control-group.readonly label,#nomad .box__edit .control-group.readonly select{color:#b5b5b5}#nomad .box__edit_readonly.box__edit .control-group.readonly input,#nomad .box__edit_readonly.box__edit .control-group.readonly label,#nomad .box__edit_readonly.box__edit .control-group.readonly select{color:#7e878d}#nomad .box__edit_readonly.box__edit .control-group.readonly .subvalue{color:#111}.box__edit .control-group .controls{-webkit-box-sizing:border-box;box-sizing:border-box;min-height:32px;font-size:1.143rem}.box__edit .control-group .controls .line-through{text-decoration:line-through}.box__edit .control-group .controls.clip{width:auto;margin-left:0}.box__edit .control-group .controls .span2{width:100%;margin:0;line-height:27px}.box__edit .control-group .controls .span2+.span2{clear:both;margin-top:5px}.box__edit .control-group .controls .checkbox_custom{width:65%;height:34px;margin-top:-5px;margin-bottom:-5px}.box__edit .control-group .controls .checkbox_custom+.checkbox-icon{margin:5px 0 0 -65%}.box__edit .control-group .controls.readonly-item{word-wrap:break-word;padding-top:.286rem;color:#b5b5b5}.box__edit .control-group .readonly-item.color-def,.box__edit_readonly.box__edit .control-group .controls.readonly-item{color:#111}.box__edit .control-group.radio .btn{min-height:24px;padding-top:2px;padding-bottom:2px;margin-top:2px;margin-bottom:2px}.box__edit .control-group .btn.fright{min-width:20px;padding-left:2px;padding-right:2px;margin-left:5px}.box__edit .control-group .btn.fright:last-child{margin-left:0}.box__edit .control-group.file .controls{min-height:40px}.box__edit .control-group.file .picture-wrap{height:28px;float:left}.box__edit .control-group.file .picture-wrap img{position:absolute;top:0;left:0;max-width:none}.box__edit .control-group.file .picture-wrap img.hide{display:none}.box__edit .control-group.file .picture-wrap .picture-icon .icondefault{line-height:26px;font-size:24px;color:#ccc}.box__edit .control-group.file .picture-wrap .input_upload{position:absolute;top:0;bottom:0;left:0;width:100%;padding:0;margin:0;opacity:0}.box__edit .control-group.file .picture-wrap .value{-webkit-box-flex:1;-webkit-flex:1;flex:1;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;height:1.858rem;line-height:1.858rem;color:#111}.box__edit .control-group.file .picture-wrap .picture-icon+.placeholder{display:inline-block}.box__edit .control-group.file .picture-wrap .picture-icon.hide+.placeholder+.value,.box__edit .control-group.file .picture-wrap .picture-icon.hide+.value{display:block}.box__edit .control-group.file .file-remove{z-index:2}.box__edit .control-group.file .clear-button{float:right;height:28px;padding:.33em 5px 5px;margin:-.33em -5px -5px 0;font-size:1rem;line-height:28px;color:#c2c2c2}.box__edit .control-group.field__datetime .controls.has-btn-group{padding-right:1.5rem}.box__edit .control-group.field__datetime .date{float:left;overflow:hidden;width:8rem;height:2.5rem;margin:-.357rem 0}.box__edit .control-group.field__datetime .date input{display:table;padding:0;margin:0;width:100%;height:2.571rem;line-height:2.571rem}.box__edit .control-group.field__datetime .time{float:left;overflow:hidden;width:7rem;margin:-.357rem 0;border-left:solid 1px #f2f2f2}.box__edit .control-group.field__datetime .time input{width:auto;height:2.571rem;padding-left:10px}.box__edit .control-group.field__datetime input{float:none;-webkit-appearance:none;background:0 0;opacity:1;white-space:nowrap}.box__edit .control-group.field__date input.empty,.box__edit .control-group.field__datetime input.empty{opacity:0}.box__edit .control-group.field__datetime input::-webkit-calendar-picker-indicator,.box__edit .control-group.field__datetime input::-webkit-clear-button,.box__edit .control-group.field__datetime input::-webkit-inner-spin-button,.box__edit .control-group.field__datetime input::-webkit-outer-spin-button{display:none;-webkit-appearance:none}.box__edit .control-group.field__datetime input[disabled]{-webkit-text-fill-color:#111}.box__edit .control-group.field__datetime .btn-group{float:right}.box__edit .control-group.field__date input{-webkit-appearance:listitem;background:0 0}.box__edit .control-group.field__date input::-webkit-calendar-picker-indicator,.box__edit .control-group.field__date input::-webkit-clear-button,.box__edit .control-group.field__date input::-webkit-inner-spin-button,.box__edit .control-group.field__date input::-webkit-outer-spin-button{display:none;-webkit-appearance:none}.box__edit .control-group.field__date input[disabled]{-webkit-text-fill-color:#111;opacity:1}.box__edit .field__date .placeholder,.box__edit .field__datetime .placeholder,.box__edit .field__enum .placeholder{height:1.858rem;line-height:1.858rem;margin-bottom:-1.858rem}.box__edit .field__radio .controls{overflow:hidden}.box__edit .field__radio .controls .btn{position:relative;left:-5px;min-height:1.786rem;line-height:1.786rem;min-width:30px;padding:0 5px!important;margin:0 0 5px 5px;border:1px solid #9aa5ad;border-radius:1rem;font-size:1rem;font-weight:300;color:#9aa5ad}.box__edit .field__radio .controls .btn.active{color:#fff!important;background:#0679c8;border-color:#0679c8}.box__edit .horizontal-fieldset{display:-webkit-box}.box__edit .horizontal-fieldset>span{display:block;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-flex:1;-webkit-flex:1;flex:1}.box__edit .horizontal-fieldset .control-group{padding:0;margin:0}.box__edit .horizontal-fieldset .control-group .controls{border-bottom:none}.box__edit .horizontal-fieldset label{display:none}.box__edit .horizontal-fieldset select+.icondefault{float:left}.box__edit .horizontal-fieldset .checkbox_custom{min-width:25px}.box__edit .horizontal-fieldset .checkbox_custom+.checkbox-icon{width:18px}.box__edit .edit__footer{padding:18px 10px 30px;text-align:center}#nomad .box__edit.box__edit_readonly .control-group.readonly .textarea-div{color:#111}.input-wrapper{display:-webkit-box;display:-webkit-flex;display:flex}.input-wrapper input{display:block;width:100%;padding-right:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-flex:1;-webkit-flex:1;flex:1;line-height:1}.input-wrapper input:focus{outline:0;outline-offset:0}.input-wrapper .clear-button{position:relative;display:none;height:50px;line-height:50px;align-self:flex-end;padding:10px 10px 8px 30px;margin:-25px -10px -25px 0;font-size:1rem;cursor:pointer;color:#c2c2c2;z-index:99}.input-wrapper.not-empty input:focus+.clear-button{display:-webkit-box;display:-webkit-flex;display:flex}.delete{display:block;max-width:400px;margin:0 auto;line-height:1.575em;background-color:#e61718;color:#fff;font-size:1.214rem}.modal-footer{padding:20px 0 10px;border-top:1px solid #e8e8e8;text-align:center}.currency_edit .wrapper{padding-left:70px}.currency_edit .wrapper .selector{position:relative;float:left;width:65px;margin-left:-70px}.currency_edit .wrapper .selector .selectArrow{font-size:1rem;float:left!important;margin-top:4px}.currency_edit .wrapper .selector select{width:100%;position:absolute;top:0;left:0;padding:0 0 0 15px;line-height:1}.btn .icondefault{margin-top:3px}.actionsheet-select+.icondefault,select+.icondefault{display:inline-block;width:16px;margin:0 0 0 -18px;font-size:1rem;text-align:right}.icon-size-md{font-size:20px}.box__record-action{display:-webkit-box;display:-webkit-flex;display:flex;text-align:center;background:#f7f8f9;border-bottom:solid 1px #ebedef;height:52px}.box__record-action .context-menu__item{display:block;-webkit-box-flex:1;-webkit-flex:1;flex:1;position:relative;height:52px;text-align:center;color:#011523}.box__record-action .context-menu__item:active{opacity:.7}.box__record-action .context-menu__item .icondefault{margin-top:13px;line-height:18px;font-size:20px}.box__record-action .context-menu__item.disabled{opacity:.3}.box__record-action .context-menu__item .action-label{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;position:absolute;left:0;right:0;font-size:11px;color:#6b7479}.box__record-action .context-menu__item .action-label:first-letter{text-transform:uppercase}.box__record-action .context-menu__item .icon-spinner{display:inline-block;width:18px;height:18px}.ios .alert{-webkit-transform:translateZ(0)}.alert{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-flex-align:center;-webkit-align-items:center;align-items:center;min-height:42px;overflow:hidden;padding:0 10px;margin:0;z-index:2002;opacity:.94;font-size:1.071rem;background:#f5f5f5;color:#5b5b5b}.alert.closeable{padding-right:25px}.alert .icondefault{position:absolute;top:14px;right:10px;font-size:14px;line-height:1;opacity:.8}.alert .icon-spinner{display:inline-block;position:absolute;top:14px;left:10px;right:auto;width:14px;height:14px}.alert .icon-spinner .icon-spinner-path{fill:#c2c2c2}.alert .icon-spinner+.message{padding-left:22px}.alert .message{padding:4px 0;line-height:15px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;font-weight:lighter}#alerts{position:absolute;bottom:0;left:0;height:auto;width:100%;overflow:hidden;z-index:9999}.syncApp #alerts{z-index:999999}#alerts .alert{position:relative}.b-vc-w,.data-unavailable-label{position:absolute;right:0;text-align:center}.has-pagination #alerts{bottom:50px}.legal:not(a){color:#696969}.alert-info,.alert-info .close-icon,.alert-success,.alert-success .close-icon,.alert-warning .close-icon{color:#262626}.tablet #alerts{left:50%;width:400px;margin-left:-200px}.tablet #alerts .alert{margin-bottom:2px;border-top:0}.data-unavailable-label{display:none;top:50%;left:0;margin-top:-20px}.alert-warning{background:#fbc02d;border-top:#fde4bd;color:#262626}.alert-info{background:#095e94;border-top:1px solid #6a99b3}.alert-success{background:#54cb14;border-top:1px solid #447826}.alert-error{background:#e61718;border-top:1px solid #efbfb9;color:#fff}.alert-error .close-icon,.alert-load .close-icon{color:#262626}.alert-load{background:#f5f5f5;border-top:1px solid #fcfcfc}.alert[id^=demo-]{display:none}.alert:target{display:inline-block!important}.layout__Error{background:#000}.portrait .tablet #content .menuBtn,.portrait .tablet .layout__list .menuBtn{display:block}.landscape .tablet #content-child .menuBtn,.landscape .tablet #content-child .offline-status,.portrait .tablet #content-child .menuBtn,.portrait .tablet #content-child .offline-status{display:none}.portrait .tablet #content-child{left:340px}.portrait .tablet #content-child .backBtn{left:0}.landscape .tablet #content-child{left:340px}.b-vc,.b-vc-w:before{display:inline-block;vertical-align:middle}.page__settings .modal-footer{border-top:none}.b-vc-w{top:0;bottom:0;left:0}.b-vc-w:before{content:'';height:100%;margin-right:-.25em}.b-vc{width:90%}.error-message{color:red;font-size:18px}.sugar-back-link{color:#000;font-weight:700;padding:30px;text-align:center}.android .background{opacity:0}.android .controls-flex .input-wrapper{overflow:hidden}.bodyScroll,.bodyScroll body{overflow:visible}.bodyScroll body{background:#fff}.bodyScroll.loginView body{min-height:100%;height:auto;background:#fff}.bodyScroll.loginView body .view__login{position:static;background:0 0}.bodyScroll.loginView body #content,.bodyScroll.loginView body #wrapper{-webkit-transform:none!important}.bodyScroll #menu-left{overflow:hidden;position:absolute}.bodyScroll .menu__inner{background:0 0}.bodyScroll #menu-left:not(.hide)+#content{padding-top:50px}.bodyScroll .header-actions{top:50px}.bodyScroll #content,.bodyScroll #content .layout__def,.bodyScroll #content-child,.bodyScroll #content-child .layout__def,.bodyScroll #nomad,.bodyScroll #wrapper,.bodyScroll .box__header,.bodyScroll .box__menu,.bodyScroll .easy-scroller-holder,.bodyScroll .easy-scroller-parent,.bodyScroll .header__inner,.bodyScroll .scroll{position:static}.bodyScroll .header__inner{height:50px}.bodyScroll .scroll{overflow:visible}.bodyScroll #alerts{position:fixed}.bodyScroll .rotate #alerts{position:absolute}.bodyScroll #nomad{-webkit-animation:triggerRepaint .4s 1;animation:triggerRepaint .4s 1}.bodyScroll .dw-modal{position:absolute;top:0;right:0;bottom:0;left:0}.bodyScroll .actionsheet-overlay{position:fixed}.bodyScroll .mobile #wrapper{box-shadow:none}.bodyScroll #smartbanner{position:relative!important}.ellipsis .label-module-sm{margin-right:7px}@media screen and (max-width:767px){.portrait .tablet.show-content-child #content{width:44%}.portrait .tablet #content-child{left:44%}}.portrait .tablet.narrow-tablet-mode #moduleList{width:100%}.portrait .tablet.narrow-tablet-mode #content{right:0}.portrait .tablet.narrow-tablet-mode #content-child .menuBtn,.portrait .tablet.narrow-tablet-mode #content-child .offline-status{display:block}.portrait .tablet.narrow-tablet-mode #content-child .status-success,.portrait .tablet.narrow-tablet-mode.show-content-child #content{display:none}.portrait .tablet.narrow-tablet-mode.show-content-child #content-child{left:0;display:block}.btn .icondefault,.nav-tabs .icondefault{line-height:.9em;vertical-align:baseline}.icon-pipeline{width:1em;height:1em;background:url("+i(249)+") 50% 50% no-repeat;background-size:contain}.rotate{opacity:.99}.rotate #moduleList{overflow:hidden}.desktop .taggable{width:100%!important}.layout-detail .tag-item{display:inline-block;padding:2px 13px 1px;margin:5px 4px 5px 0;background-color:#fff;border-radius:11px;font-size:.86rem;color:#222}.view__login .control-ssl .icondefault,.view__login .login__links .login-links__link{color:#0679c8}.setupbuddy__wrapper{background-color:#fff}.setupbuddy__wrapper .sb__text__container{position:absolute;top:10%;left:50%;width:316px}.setupbuddy__wrapper .sb__text__container .sb__text{position:relative;width:100%;left:-50%;padding:10px;margin-left:-12px;text-align:center}.setupbuddy__wrapper .sb__text__container .sb__header{font-size:1.143rem;font-weight:700;margin:10px 0 20px}.setupbuddy__wrapper .sb__text__container .sb__icon{position:relative;text-align:center;left:50%;margin-bottom:40px}.setupbuddy__wrapper .sb__text__container .icon-touch-id{position:relative;width:70px;height:70px;left:-35px;background:url("+i(250)+") no-repeat;background-size:contain}.setupbuddy__wrapper .sb__text__container .sb__description{margin-top:10px}.setupbuddy__wrapper .sb__text__container .sb__controls{padding:40px 10px 0;position:relative}.setupbuddy__wrapper .sb__text__container .sb__controls .sb__control{padding:9px 10px;color:#0679c8}.setupbuddy__wrapper .sb__text__container .sb__controls .left{float:left}.pull-right,.rtl .backBtn,.rtl .dashHomeBtn,.rtl .menuBtn,.rtl .offline-status,.setupbuddy__wrapper .sb__text__container .sb__controls .right{float:right}.setupbuddy__wrapper .sb__footer{position:absolute;bottom:30px;left:0;width:100%;text-align:center;font-size:.857rem;padding:5px 10px}.pull-left{float:left}.hide{display:none}.show{display:block}.tcenter{text-align:center!important}.tleft{text-align:left!important}.tright{text-align:right!important}.brake-lines{white-space:pre-line!important}.rotate1{-webkit-animation:rotation1 .15s 1 linear;-webkit-transform:rotate(180deg)}@-webkit-keyframes rotation1{from{-webkit-transform:rotate(0)}to{-webkit-transform:rotate(180deg)}}.rotate2{-webkit-animation:rotation2 .15s 1 linear;-webkit-transform:rotate(0)}@-webkit-keyframes rotation2{from{-webkit-transform:rotate(180deg)}to{-webkit-transform:rotate(0)}}.rotate360{-webkit-animation:spin .7s infinite linear}@-webkit-keyframes spin{from{-webkit-transform:rotate(0)}to{-webkit-transform:rotate(359deg)}}.pull-to-refresh{z-index:-1;position:absolute;top:0;left:0;width:100%;background:#f5f5f5;height:50%;min-height:50%;padding-top:10px;text-align:center}.pull-to-refresh .icon-wrap{display:inline-block;width:1em;height:1em;padding:.1em;border-radius:1.1em;font-size:27px;line-height:1em;background-color:#e0e0e0;background-image:-webkit-gradient(linear,0 0,0 100%,from(#d3d3d3),to(#f4f4f4));background-image:-webkit-linear-gradient(top,#d3d3d3,#f4f4f4);background-image:linear-gradient(top,#d3d3d3,#f4f4f4);background-repeat:repeat-x;border-color:#f4f4f4 #f4f4f4 #cecece;border-color:rgba(0,0,0,.1) rgba(0,0,0,.1) rgba(0,0,0,.25);box-shadow:inset 0 2px 2px 0 #c4c4c4;text-align:center;opacity:.4;-webkit-transition:opacity .6s}.rtl .box__header .cancelBtn .btn,.rtl .box__menu .cancelBtn .btn,.rtl .checkbox-icon,.rtl .table td,.rtl .table th{text-align:right}.pull-to-refresh .icon-wrap.color,.view__login .control-ssl{opacity:1}.pull-to-refresh .spinner{display:block;font-size:21px;line-height:inherit}#pull-to-refresh-div{position:relative!important;height:0;display:block!important}.rtl{direction:rtl}.rtl .box__header .save-container,.rtl .box__header .save-container .caretBtn,.rtl .box__header .save-container .saveBtn,.rtl .box__menu .save-container,.rtl .box__menu .save-container .caretBtn,.rtl .box__menu .save-container .saveBtn,.rtl .createBtn{float:left}.rtl .backBtn{-webkit-transform:scale(-1);transform:scale(-1)}.rtl .label-module-sm.has-icon-inside .label-module-sm_title{right:4px}.rtl .box__header .btn-area-more,.rtl .box__menu .btn-area-more{float:right}.rtl .box__header .cancelBtn,.rtl .box__menu .cancelBtn{padding-right:0}.rtl .box__header .saveBtn,.rtl .box__menu .saveBtn{padding-left:0}.rtl .box__header .right-menu .icondefault,.rtl .box__menu .right-menu .icondefault{margin:0 -2px 0 8px}.rtl .box__header .menu__item .menu-item__link,.rtl .box__menu .menu__item .menu-item__link{padding:13px 15px 13px 12%}.rtl .box__header .menu__item .label-module-sm,.rtl .box__header .menu__item .menu-item__icon,.rtl .box__header .menu__item .user-icon,.rtl .box__menu .menu__item .label-module-sm,.rtl .box__menu .menu__item .menu-item__icon,.rtl .box__menu .menu__item .user-icon{margin:-6px 0 -6px 7px}.rtl .box__header .header__inner .backBtn+.header__title,.rtl .box__header .header__inner .dashHomeBtn+.header__title,.rtl .box__menu .header__inner .backBtn+.header__title,.rtl .box__menu .header__inner .dashHomeBtn+.header__title{right:90px}.rtl #menu-left .menu__inner .menu__item .menu-item__link .user-icon{margin-left:5px;margin-right:0}.rtl .view__search-box .topelbar{padding:5px 5px 5px 121px}.rtl .view__search-box .search-query{padding:4px 32px 4px 35px}.rtl .view__search-box .view__search-box__actions{left:10px;right:auto}.rtl .view__search-box .clear-button{right:auto;left:0;padding-right:12px;padding-left:6px}.rtl .view__search-box .box__search-icon{right:10px;left:auto}.rtl .view__search-box .icon-spinner{right:9px;left:auto}.rtl .view__search-box .favoriteable{padding-left:134px}.rtl .view__search-box .favoriteable .search-query{padding-left:95px}.rtl .view__search-box .favoriteable .clear-button{left:70px;right:auto}.rtl .view__search-box .hidden-my-items{padding-left:74px}.rtl .view__search-box .view__search .searchCancelBtn{margin-right:0;margin-left:-10px}.rtl .taggable-dropdown .label-module-sm{margin:0 0 0 10px}.rtl .dropdown.dropdown__filter{left:auto;right:7px}.rtl .dropdown.dropdown__sortBy{left:7px;right:auto}.rtl .box__filter .filter__item{padding-left:0;padding-right:4px}.rtl .box__filter .filter__item:first-child{padding-right:0}.rtl .filters-wrap{padding-right:10px;padding-left:5px}.rtl .filter{padding-right:0;padding-left:20px}.rtl .filter .actionsheet-select,.rtl .filter select{padding-right:0;padding-left:16px}.rtl .listing .show-more-btn{padding:0 14px}.rtl .listing .show-more-btn .loading-holder .icon-spinner{margin-left:5px;margin-right:0}.rtl .listing article{padding:8px 12px 8px 8px}.rtl .listing article.has-grip,.rtl .listing article.item-checkbox{padding-left:32px}.rtl .menu-container-grip{left:0;right:auto;padding:0 15px 0 0}.rtl .menu-container .grip{right:0;left:auto;padding:0 10px 0 2px}.rtl .menu-container a{padding-right:5%;padding-left:0}.rtl .listing .list-item .module-name,.rtl .listing .list-item .module-name-comma,.rtl .listing .list-view-item .module-name,.rtl .listing .list-view-item .module-name-comma,.rtl .listing .parent-item .module-name,.rtl .listing .parent-item .module-name-comma{float:right}.rtl .listing article.item-checkbox .asscacct,.rtl .listing article.item-checkbox .checkbox-icon{left:0;right:auto}.rtl .picker-list-row .label-module-sm{margin:-2px 0 0 9px}.rtl .bizcard .avatar{left:auto;right:10px}.rtl .bizcard .input_upload{left:auto;right:0}.rtl .bizcard .label-module-sm{left:auto;right:10px;padding:13px 10px 0 0}.rtl .bizcard .card{padding:10px 42px 0 10px}.rtl .bizcard.icon-inside .card{padding:10px 90px 0 44px}.rtl .bizcard .more .goedit-icon{left:0;right:auto}.rtl .bizcard .more .show-more{left:auto;right:80px}.rtl .bizcard .more .follow-label{left:0;right:auto}.rtl .bizcard .favorite-icon{left:3px;right:auto}.rtl .bizcard .followable .favorite-icon{left:82px}.rtl .box__related-actions .related-action__item{padding-left:0;padding-right:10px}.rtl .box__related-actions .related-action__item .related-action-item__link{padding-left:44px;padding-right:0}.rtl .box__edit .control-group.field__datetime .time input,.rtl .btn-group .btn:last-child{padding-left:0;padding-right:10px}.rtl .box__related-actions .related-action__item .label-module-sm{margin-right:0;margin-left:9px}.rtl .box__related-actions .related-action__item .records-count{display:inline-block}.rtl .box__related-actions .related-action__item .related-action-item__add{left:0;right:auto}.rtl .box__related-actions .related-action__item .more{-webkit-transform:scale(-1);transform:scale(-1);left:10px;right:auto}.rtl .btn-group .btn{float:right;border-radius:0}.rtl .box__edit .control-group .controls .checkbox_custom+.checkbox-icon{margin:4px -65% 0 0}.rtl .box__edit .control-group.field__datetime .date{float:right;margin-right:0;margin-left:10px;border-right:none}.rtl .box__edit .control-group.field__datetime .date input{padding-left:0}.rtl .box__edit .control-group.field__datetime .time{float:right;border-right:solid 1px #f2f2f2;border-left:none}.rtl .box__edit .control-group.field__datetime .controls.has-btn-group{padding-left:1.5rem;padding-right:0}.rtl .box__edit .control-group.field__datetime .btn-group{float:left}.rtl .box__edit .control-group.file .picture-wrap{float:right}.rtl .box__edit .control-group.file .picture-wrap .picture-icon+.placeholder{margin-left:0;margin-right:35px}.rtl .box__edit .uneditable-input,.rtl .box__edit input:not([type=checkbox]),.rtl .box__edit select,.rtl .box__edit textarea{float:right;padding-right:0;padding-left:15%;text-align:right}.rtl .box__edit .horizontal-fieldset .control-group .controls{float:none;margin:0}.rtl .field__radio .controls .btn{left:0}.rtl .currency_edit .wrapper{padding-left:0;padding-right:70px}.rtl .currency_edit .wrapper .selector{float:right;margin-left:0;margin-right:-70px}.rtl .currency_edit .wrapper .selector select{padding:0 15px 0 0}.rtl .dashboard,.rtl .pagination__bar{direction:ltr}.rtl .dashlet__b,.rtl .dashlets__list{direction:rtl}.rtl #tutorial,.rtl .chart{direction:ltr}.rtl .panel__addpost .placeholder{margin-left:10px;margin-right:0}.rtl .panel__addpost .btn{float:left}.rtl .as__detail{padding:8px 46px 8px 32px}.rtl .as__detail .as__icon .icondefault{margin-right:0}.rtl .as__detail .as__icon,.rtl .as__detail .label-module-sm{float:right;margin:4px -36px 0 0}.rtl .comments-container{margin-left:0;margin-right:46px}.rtl .comment__item{padding:6px 38px 6px 10px}.rtl .comment__item .user-icon{float:right;margin:4px -38px 0 0}.rtl .tb__detail .tb__icon{float:right;padding:2px 0 0 5px}.rtl .learning-resources .resource-list .resource .resource-info{margin-right:44px;margin-left:0}.rtl .alert.closeable{padding:4px 10px 4px 25px}.rtl .alert .icondefault{right:auto;left:10px}.rtl .alert .icon-spinner{right:10px;left:auto}.rtl .alert .icon-spinner+.message{padding:0 20px 0 0}.rtl .menu-container{left:auto;right:100%}.rtl .menu-container.on{right:0}.rtl .ios .menu-container{right:auto;-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0);-webkit-transition-duration:.15s;transition-duration:.15s}.rtl .ios .menu-container.on{left:0;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}.rtl .view__login .input-wrapper .clear-button{margin-left:0}.rtl .view__login .icon-spinner{margin-right:0;margin-left:2px}.rtl .page__offline .offline-row .icon{float:right;margin-left:5px;margin-right:0}.rtl .page__offline .offline-list__item .more{left:10px;right:auto;-webkit-transform:scale(-1);transform:scale(-1)}.rtl .mobile .right-menu{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0);left:-3px;right:0}.rtl .tablet .right-menu{left:0;right:auto}.rtl .tablet #menu-left{left:auto;right:0}.rtl .tablet #wrapper{right:56px;left:0;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}.rtl .tablet #content .overlay__right-menu,.rtl .tablet .layout__Login,.rtl .tablet .layout__def.no-main-menu{left:0;right:-56px}.rtl.portrait .tablet.narrow-tablet-mode.show-content-child #content-child{right:0}.rtl.portrait .tablet #moduleList{-webkit-transform:translate(100%,0,0);transform:translate(100%,0,0)}.rtl.portrait .tablet #content-child{left:0;right:340px}.rtl.portrait .tablet #content-child .backBtn{left:0;right:0}.rtl.landscape .tablet #content-child{left:0;right:340px}.rtl select+.icondefault{margin:4px -18px 0 0}.rtl .pull-right{float:left}.rtl .pull-left{float:right}.rtl .input-wrapper .clear-button{padding-right:30px;padding-left:10px;margin-right:0;margin-left:-10px}@media screen and (max-width:767px){.rtl.portrait .tablet #content-child{right:44%;left:0}}.brand{width:224px;height:60px}.view__login .login__links .separator{opacity:1;background:#91969f}",""]);

},function(e,t,i){e.exports=i.p+"../font/OpenSans-Semibold.ttf"},function(e,t,i){e.exports=i.p+"../font/OpenSans-Regular.ttf"},function(e,t,i){e.exports=i.p+"../font/fontawesome-webfont.ttf"},function(e,t,i){e.exports=i.p+"../img/logo-login.svg"},function(e,t,i){e.exports=i.p+"../img/icon-pipeline.svg"},function(e,t,i){e.exports=i.p+"../img/icon-touchid.svg"},function(e,t){e.exports={appId:"nomad",env:"prod",clientID:"sugar",restVersion:"10",platform:"mobile",debugSugarApi:false,logger:{level:"WARN",consoleWriter:"ConsoleWriter",formatter:"SimpleFormatter"},authStore:"cache",minServerVersion:"6.7.1",supportedServerFlavors:["PRO","CORP","ENT","ULT"],siteUrl:"..",serverTimeout:30,alertAutoCloseDelay:6e3,maxQueryResult:20,cacheMeta:true,metadataTypes:["server_info","labels","ordered_labels","modules","relationships","currencies","_override_values","config","modules_info","views","editable_dropdown_filters"],additionalComponents:{"main-menu":{target:"#menu-left"}},syncConfig:false,sugarLogic:{enabled:true,minServerVersion:"7.2",isDynamic:false},appName:"nomad",keychainService:"SugarCRM",productName:"SugarCRM",brandName:"SugarCRM",appVersion:"4.0.1",appBuild:"81",sdkVersion:"4.0.1.363 alpha15",buildTag:"",deepLinkingSchemePrefix:"sugarcrm",trialUntil:"",showLogLevelSetting:false,deviceMode:{type:"auto",landscape:false,portrait:false},fastClickEnabled:true,layoutCacheSize:10,maxAlertsPerLayout:2,disableLayoutCache:["associate","pickerlist"],refreshOnResumeTimeout:3e4,keyValueStore:"sqlKeyValueStore",keyValueStoreEncryptionEnabled:true,hideLoginUrl:false,logoutTimeout:3e3,searchDelay:600,configUrlWhiteList:[],nativeRedirectEnabled:true,useHttps:true,externalLoginEnabled:true,loginSettingsLimit:5,maxHttpCacheAge:10,fetchLimit:{activities:10,activityItemsPerModule:3,bulkQueryRelatedRecords:10,maxPageSize:60,recents:20,filters:100},alwaysShowMyItems:false,configurableFontSize:true,knownModules:["Settings","About","TxLog","Error","Forecasts","Users","Accounts","Contacts","Documents","Leads","Opportunities","RevenueLineItems","Meetings","Calls","Tasks","Notes","Reports","Cases","Quotes","Employees","Bugs","Campaigns","Contracts","KBDocuments","Products","Project","Prospects","Targets","Emails"],unsupportedModules:["Bugs","Campaigns","Contracts","KBDocuments","Products","Project","Prospects","Targets","Emails"],modulesWithFiles:["Documents"],modulesWithPDFs:["Reports"],modulesWithAvatars:["Contacts","Leads","Employees","Users"],nonDuplicatableModules:["Users","Documents","Employees","KBDocuments","Reports","Quotes","Emails"],nonCreatableModules:["TxLog","Users","Documents","Employees","KBDocuments","Reports","Quotes","Emails"],nonEditableModules:["KBDocuments","Quotes","Employees","Reports","Emails"],nonDeletableModules:["Users","Employees"],nonDeletableSalesStages:["Closed Won","Closed Lost"],nonLinkableModules:[],followableModules:["Accounts","Contacts","Leads","Opportunities","Cases","RevenueLineItems","Tasks","Notes","Products"],readonlyModules:["Teams","ProductTypes","ProductCategories","ProductTemplates","Manufacturers"],nonAclModules:["Error","Login","About"],hiddenModules:["Forecasts","Filters","Comments"],constantlyVisibleViews:["offlineSettings","offlineStats","TxLog","Activities","Teams","Users"],numberOfAdditionalListFields:1,displayListFieldLabel:false,forceListReload:false,about:{privacy:"http://sugarcrm.com/mobile_privacy",tos:"http://support.sugarcrm.com/06_Customer_Center/10_Master_Subscription_Agreements",trademark:"http://www.sugarcrm.com/about/trademark-information",displayTrademarks:false,support:"http://support.sugarcrm.com",supportEmail:"support@sugarcrm.com",showSdkVersion:false,thirdPartySoftware:"http://www.sugarcrm.com/third-party-software",showAttribution:false,supportEmailVisible:"concealed",copyrightText:"Copyright © 2004-2016 SugarCRM Inc. All Rights Reserved.",trademarkText:"Sugar and SugarCRM are trademarks owned by SugarCRM Inc. All other trademarks are the property of their respective owners.",trademark2Text:"SugarCRM ®, Sugar Enterprise™ and Sugar™ are trademarks of SugarCRM Inc."},analytics:{enabled:true,id:{web:"UA-33012372-6","native":"UA-33012372-5"},appName:"SugarCRM",optOut:false,debug:false,dryRun:false,dispatchInterval:120,sampleRate:100,anonymize:false,useHttps:true,instanceTracking:true,serverUrlWhiteList:["sugarinternal.sugarondemand.com",".*\\.sugarondemand.com"],instanceUrlTracking:false},canvasTestModeOnUpload:false,resizeImagesOnUpload:600,imageResizeTimeout:8e3,iosCanvasSizeLimit:5,jpegEncoderQuality:80,defaultViewScheme:"Search",fileSizeLimit:10,transMap:null,allowBrowserContextMenu:false,skipStringCleanup:false,skipTutorial:false,skipSetupBuddy:false,maxPreloaderPanelMessages:4,UI:{supportedRTL:true,defaultFontSize:"normal",fontSizes:{tiny:10,small:12,normal:14,large:16,larger:18,huge:20,extra_huge:22},displayInitials:true,icons:{modules:{},menu:{user:"icon icon-user",search:"icon icon-search",activities:"icon icon-clock-o",about:"icon icon-info-circle",settings:"icon icon-cog",desktop:"icon icon-desktop",errorEmulation:"icon icon-support",logout:"icon icon-sign-out",duplicate:"icon icon-copy",createRelated:"icon icon-plus-circle",linkRelated:"icon icon-link",share:"icon icon-share-square-o",create:"icon icon-plus"},header:{menu:"icon icon-bars",dashboard:"icon icon-th",back:"icon icon-chevron-left",forward:"icon icon-chevron-right",search:"icon icon-search",overflow:"icon icon-ellipsis-v",saveBtnArrow:"icon icon-caret-down",clear:"icon icon-times-circle"},actions:{view:"icon icon-eye",edit:"icon icon-pencil",favorite:"icon icon-star",unfavorite:"icon icon-star-o",follow:"icon icon-check-circle",unfollow:"icon icon-check-circle-o",email:"icon icon-envelope",emailbody:"icon icon-font",unlink:"icon icon-minus-circle","delete":"icon icon-trash-o",close:"icon icon-times",call:"icon icon-phone",sms:"icon icon-comment",map:"icon icon-map-marker",url:"icon icon-external-link",file:"icon icon-file",comment:"icon icon-comment",reply:"icon icon-reply",retweet:"icon icon-retweet"},sorting:{asc:"icon icon-caret-up",desc:"icon icon-caret-down",checked:"icon icon-check",myItemsOnly:"icon icon-user",teamItems:"icon icon-users"},alert:{close:"icon icon-remove"},ptr:{spinner:"icon icon-refresh"},list:{grip:"icon icon-ellipsis-v"},detail:{goEdit:"icon icon-pencil",createRelated:"icon icon-plus",showMore:"icon icon-chevron-down",hideMore:"icon icon-chevron-up"},edit:{clear:"icon icon-times-circle",checkboxOff:"icon icon-square-o",checkboxOn:"icon icon-check-square",selectArrow:"icon icon-caret-down",error:"icon icon-exclamation-circle",remove:"icon icon-times-circle",star:"icon icon-star",lock:"icon icon-lock",unlock:"icon icon-unlock-alt",picture:"icon icon-picture-o",email:{actionsBtn:"icon icon-ellipsis-v",addBtn:"icon icon-plus"},multiselect:{remove:"icon icon-remove"}},swiper:{prev:"icon icon-arrow-left",next:"icon icon-arrow-right",bullet:"icon icon-circle-thin",bulletActive:"icon-circle"},dashlets:{"default":"icon icon-th-large",dashablelist:"icon icon-table","tabbed-dashlet":{"active-tasks":"icon icon-check-square-o","planned-activities":"icon icon-calendar-o","inactive-tasks":"icon icon-check",history:"icon icon-history"},"forecast-pareto":"icon icon-bar-chart",bubblechart:"icon icon-trophy","forecast-pipeline":"icon icon-pipeline","activitystream-dashlet":"icon icon-clock-o","saved-reports-chart":"icon icon-area-chart",forecastdetails:"icon icon-th-list",twitter:"icon icon-twitter",webpage:"icon icon-list-alt","opportunity-metrics":"icon icon-circle-o",casessummary:"icon icon-folder-open"}}},localSecurity:{enabled:false,minServerVersion:"7.2",maxAllowedPasswordAttempt:3,touchIdForLoginEnabled:true,passkeyEnabled:false,touchIdForPasskeyEnabled:false},teamBasedAcl:{enabled:true,minServerVersion:"7.8.0.0RC1",unsupportedModules:[]},offline:{enabled:true,storageProvider:"sql",storageAdapter:"native",storageSize:5,dbEncryptionEnabled:true,debug:{ignoreEnabled:false,render:false,forceMigrate:false,online:true,syncManagerEnabled:true,monitorStatus:true,outOfSpace:false},minServerVersion:"7.1.5RC1",httpThrottlingEnabled:false,httpThrottleTimeout:1e4,httpThrottleCacheSize:10,exclude:["About","Settings","Search","Login","Offline","Error","ErrorEmulation","Recents","Forecasts","BubbleChart","Dashboards","Activities","Filters","Comments","Home","SetupBuddy","TxLog"],customOfflineModules:["TxLog","Recents"],prefetch:{enabled:true,staticModules:{Users:20,Teams:20,ProductCategories:20,ProductTypes:40,ProductTemplates:20,Manufacturers:20},maxThreshold:100,pageSize:20,relationships:{pageSize:20,maxThreshold:100}},syncManager:{enabled:true,syncTimeout:10,executors:{wins:{enabled:true,interval:180,priority:1,preSyncMaxRecords:100,syncPageSize:20,preSyncPageSize:20},txLog:{enabled:true,interval:20,priority:0}}},defaultPurgeInterval:7,maxMixedCollectionQueryResult:30,monitorTimeout:5e3,cleanupConfirmationInterval:6e4,saveRecordsBatchSize:10},dashboards:{enabled:true,minServerVersion:"7.2",recordDashboardsEnabled:true,dashlets:{dashablelist:{enabled:true,minServerVersion:"7.2"},"tabbed-dashlet":{enabled:true,minServerVersion:"7.2"},"forecast-pareto":{enabled:true,minServerVersion:"7.6.0.0RC3"},bubblechart:{enabled:true,minServerVersion:"7.2"},"forecast-pipeline":{enabled:true,minServerVersion:"7.6.0.0RC3"},"sales-pipeline":{enabled:true,minServerVersion:"7.8.0.0RC2",icon:"icon-trophy"},"activitystream-dashlet":{enabled:true,minServerVersion:"7.2"},"saved-reports-chart":{enabled:true,minServerVersion:"7.2"},forecastdetails:{enabled:true,minServerVersion:"7.6.0.0RC3"},twitter:{enabled:true,minServerVersion:"7.5.0.0"},webpage:{enabled:true,minServerVersion:"7.5.0.0"},"opportunity-metrics":{enabled:true,minServerVersion:"7.6.0.0RC3"},casessummary:{enabled:true,minServerVersion:"7.5.0.0"}}},raven:{enabled:true,env:"store",url:"https://0c866dad58bb4a29b88e405491cfc6a6@app.getsentry.com/22007",enhancedErrorReporting:true,maxLogSize:30},errorEmulation:{enabled:false,user:"Max"},scheme:"store"}},function(e,t){"use strict";var i=SUGAR.App.config;i.analytics.enabled=false;if(!i.siteUrl){i.siteUrl="../../../sugarcrm"}if(i.scheme!=="e2e"){i.offline.enabled=false}i.keyValueStoreEncryptionEnabled=false;i.offline.dbEncryptionEnabled=false},function(e,t){var n=SUGAR.App;SUGAR.expressions.FormatedNameExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.FormatedNameExpression,SUGAR.expressions.StringExpression,{className:"FormatedNameExpression",evaluate:function(){var e=this.getParameters();var t={s:e[0].evaluate(),f:e[1].evaluate(),l:e[2].evaluate(),t:e[3].evaluate()};var n="";for(i=0;i<name_format.length;i++){if(t[name_format.substr(i,1)]!=undefined){n+=t[name_format.substr(i,1)]}else{n+=name_format.substr(i,1)}}return n},getParamCount:function(){return 4}});SUGAR.expressions.SugarTranslateExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.SugarTranslateExpression,SUGAR.expressions.StringExpression,{className:"SugarTranslateExpression",evaluate:function(){var e=this.getParameters();var t=e[1].evaluate();if(t=="")t="app_strings";var i=e[0].evaluate();return SUGAR.language.get(t,i)},getParamCount:function(){return 2}});SUGAR.expressions.DefineStringExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.DefineStringExpression,SUGAR.expressions.StringExpression,{className:"DefineStringExpression",evaluate:function(){var e=this.getParameters().evaluate(),t;if(e instanceof Date){var i=e.type=="date";t=n.date(e).formatUser(i)}else{t=e+""}return t},getParamCount:function(){return 1},getParameterTypes:function(){return["generic"]}});SUGAR.expressions.SugarDropDownValueExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.SugarDropDownValueExpression,SUGAR.expressions.StringExpression,{className:"SugarDropDownValueExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var i=e[1].evaluate();var n=this.context.getAppListStrings(t);if(n=="undefined")return"";for(var a in n){if(typeof a=="string"&&a==i)return n[a]}return""},getParamCount:function(){return 2}});SUGAR.expressions.ContainsExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.ContainsExpression,SUGAR.expressions.BooleanExpression,{className:"ContainsExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate()+"";var i=e[1].evaluate();return t.indexOf(i)>-1?SUGAR.expressions.Expression.TRUE:SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 2},getParameterTypes:function(){return"string"}});SUGAR.expressions.CharacterAtExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.CharacterAtExpression,SUGAR.expressions.StringExpression,{className:"CharacterAtExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate()+"";var i=e[1].evaluate();return t.charAt(i)},getParamCount:function(){return 2},getParameterTypes:function(){return["string","number"]}});SUGAR.expressions.StrToUpperExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.StrToUpperExpression,SUGAR.expressions.StringExpression,{className:"StrToUpperExpression",evaluate:function(){var e=this.getParameters().evaluate()+"";return e.toUpperCase()},getParamCount:function(){return 1}});SUGAR.expressions.StrToLowerExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.StrToLowerExpression,SUGAR.expressions.StringExpression,{className:"StrToLowerExpression",evaluate:function(){var e=this.getParameters().evaluate()+"";return e.toLowerCase()},getParamCount:function(){return 1}});SUGAR.expressions.ConcatenateExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.ConcatenateExpression,SUGAR.expressions.StringExpression,{className:"ConcatenateExpression",evaluate:function(){var e="";var t=this.getParameters();for(var i=0;i<t.length;i++){e+=t[i].evaluate()}return e}});SUGAR.expressions.SubStrExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.SubStrExpression,SUGAR.expressions.StringExpression,{className:"SubStrExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate()+"";var i=e[1].evaluate();var n=e[2].evaluate();return t.substr(i,n)},getParamCount:function(){return 3},getParameterTypes:function(){return["string","number","number"]}});SUGAR.expressions.ForecastCommitStageExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.ForecastCommitStageExpression,SUGAR.expressions.EnumExpression,{className:"ForecastCommitStageExpression",evaluate:function(){var e=this.getParameters().evaluate();if(n===undefined){return""}var t=n.metadata.getModule("Forecasts","config");if(t.forecast_setup===0){return""}var i=t[t.forecast_ranges+"_ranges"],a="";_.find(i,function(t,i){if(e>=t.min&&e<=t.max){a=i;return true}return false});return a},getParamCount:function(){return 1},getParameterTypes:function(){return["number"]}});SUGAR.expressions.DayOfWeekExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.DayOfWeekExpression,SUGAR.expressions.NumericExpression,{className:"DayOfWeekExpression",evaluate:function(){var e,t=this.getParameters().evaluate();if(_.isString(t)&&_.isEmpty(t)){return""}if(this.context.view){e=n.date(t).format("d").toString()}else{e=new Date(t).getDay()}return e},getParamCount:function(){return 1},getParameterTypes:function(){return["date"]}});SUGAR.expressions.MaxRelatedDateExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.MaxRelatedDateExpression,SUGAR.expressions.DateExpression,{className:"MaxRelatedDateExpression",evaluate:function(){},getParameterTypes:function(){return["relate","string"]}});SUGAR.expressions.HoursUntilExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.HoursUntilExpression,SUGAR.expressions.NumericExpression,{className:"HoursUntilExpression",evaluate:function(){var e=this.getParameters().evaluate();var t=SUGAR.util.DateUtils.parse(e);if(!t&&t!==0)return false;var i=new Date;if(typeof e=="string"&&e.indexOf(" ")==-1&&e.indexOf("T")==-1){i.setHours(0,0,0,0)}var n=t-i;return~~(n/36e5)},getParamCount:function(){return 1},getParameterTypes:function(){return["date"]}});SUGAR.expressions.DefineDateExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.DefineDateExpression,SUGAR.expressions.DateExpression,{className:"DefineDateExpression",evaluate:function(){var e=this.getParameters().evaluate();var t=SUGAR.util.DateUtils.parse(e,"user");if(t==false)throw"Incorrect date format";return t},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.TodayExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.TodayExpression,SUGAR.expressions.DateExpression,{className:"TodayExpression",evaluate:function(){var e=new Date;e.setHours(0);e.setMinutes(0);e.setSeconds(0);if(this.context.view){e=n.date.format(e,"Y-m-d")}return e},getParamCount:function(){return 0}});SUGAR.expressions.AddDaysExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.AddDaysExpression,SUGAR.expressions.DateExpression,{className:"AddDaysExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();if(!t){return""}var i=parseInt(e[1].evaluate(),10);if(_.isNaN(i)){return""}var a=SUGAR.util.DateUtils.parse(t,"user");var o=new Date(a);o.setDate(o.getDate()+i);if(this.context.view){o=n.date.format(o,"Y-m-d")}return o},getParamCount:function(){return 2},getParameterTypes:function(){return["date","number"]}});SUGAR.expressions.DaysUntilExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.DaysUntilExpression,SUGAR.expressions.NumericExpression,{className:"DaysUntilExpression",evaluate:function(){var e=SUGAR.util.DateUtils.parse(this.getParameters().evaluate(),"user");var t=new Date;e.setHours(0);e.setMinutes(0);e.setSeconds(0);var i=e-t;var n=Math.ceil(i/864e5);return n},getParamCount:function(){return 1},getParameterTypes:function(){return["date"]}});SUGAR.expressions.NowExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.NowExpression,SUGAR.expressions.DateExpression,{className:"NowExpression",evaluate:function(){var e=SUGAR.util.DateUtils.getUserTime();e.setSeconds(0);if(this.context.view){e=n.date.format(e,"Y-m-d H:i:s")}return e},getParamCount:function(){return 0}});SUGAR.expressions.MonthOfYearExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.MonthOfYearExpression,SUGAR.expressions.NumericExpression,{className:"MonthOfYearExpression",evaluate:function(){var e=this.getParameters().evaluate();return new Date(e).getMonth()+1},getParamCount:function(){return 1},getParameterTypes:function(){return["date"]}});SUGAR.expressions.TimestampExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.TimestampExpression,SUGAR.expressions.DateExpression,{className:"TimestampExpression",evaluate:function(){var e=this.getParameters().evaluate(),t,i=[],n=this.context.parseDate(e);return Math.round(+n.getTime()/1e3)},getParamCount:function(){return 1}});SUGAR.expressions.DefineTimeExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.DefineTimeExpression,SUGAR.expressions.TimeExpression,{className:"DefineTimeExpression",evaluate:function(){var e=this.getParameters().evaluate();var t=Date.parse(e);if(isNaN(t))throw"Incorrect time format";return t},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.HourOfDayExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.HourOfDayExpression,SUGAR.expressions.TimeExpression,{className:"HourOfDayExpression",evaluate:function(){var e=this.getParameters().evaluate();return new Date(e).getHours()},getParamCount:function(){return 1}});SUGAR.expressions.CurrencyRateExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.CurrencyRateExpression,SUGAR.expressions.GenericExpression,{className:"CurrencyRateExpression",evaluate:function(){if(n===undefined){return SUGAR.expressions.Expression.FALSE}var e=this.getParameters().evaluate();return n.metadata.getCurrency(e).conversion_rate},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.RelatedFieldExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.RelatedFieldExpression,SUGAR.expressions.GenericExpression,{className:"RelatedFieldExpression",evaluate:function(){var e=this.getParameters(),t=e[0].evaluate(),i=e[1].evaluate();if(typeof t=="string"&&t!=""){return this.context.getRelatedField(t,"related",i)}else if(typeof rel=="object"){}return""},getParamCount:function(){return 2},getParameterTypes:function(){return["relate","string"]}});SUGAR.expressions.IndexValueExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IndexValueExpression,SUGAR.expressions.GenericExpression,{className:"IndexValueExpression",evaluate:function(){var e=this.getParameters();var t=e[1].evaluate();var i=e[0].evaluate();if(typeof i=="string"&&!isNaN(i))i=Number(i);if(i>=t.length||i<0)throw"value_at: Attempt to access an index out of bounds";return t[i]},getParamCount:function(){return 2},getParameterTypes:function(){return["number","enum"]}});SUGAR.expressions.SugarFieldExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.SugarFieldExpression,SUGAR.expressions.GenericExpression,{className:"SugarFieldExpression",evaluate:function(){var e=this.getParameters().evaluate();return SUGAR.forms.AssignmentHandler.getValue(e)},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.ConditionExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.ConditionExpression,SUGAR.expressions.GenericExpression,{className:"ConditionExpression",evaluate:function(){var e=SUGAR.expressions.Expression,t=this.getParameters(),i=t[0].evaluate();if(e.isTruthy(i)){return t[1].evaluate()}else{return t[2].evaluate()}},getParamCount:function(){return 3},getParameterTypes:function(){return["boolean","generic","generic"]}});SUGAR.expressions.AndExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.AndExpression,SUGAR.expressions.BooleanExpression,{className:"AndExpression",evaluate:function(){var e=this.getParameters();if(!(e instanceof Array))e=[e];for(var t=0;t<e.length;t++){if(e[t].evaluate()!=SUGAR.expressions.Expression.TRUE)return SUGAR.expressions.Expression.FALSE}return SUGAR.expressions.Expression.TRUE}});SUGAR.expressions.IsForecastClosedWonExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsForecastClosedWonExpression,SUGAR.expressions.BooleanExpression,{className:"IsForecastClosedWonExpression",evaluate:function(){var e=this.getParameters().evaluate();if(n===undefined){return SUGAR.expressions.Expression.FALSE}var t=n.metadata.getModule("Forecasts","config")||{},i=t.sales_stage_won||["Closed Won"];if(i.indexOf(e)===-1){return SUGAR.expressions.Expression.FALSE}return SUGAR.expressions.Expression.TRUE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.IsRequiredCollectionExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsRequiredCollectionExpression,SUGAR.expressions.BooleanExpression,{className:"IsRequiredCollectionExpression",evaluate:function(){var e=this.getParameters().evaluate();table=document.getElementById(e);children=YAHOO.util.Dom.getElementsByClassName("sqsEnabled","input",table);for(id in children){if(trim(children[id].value)!=""){return SUGAR.expressions.Expression.TRUE}}return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.IsInEnumExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsInEnumExpression,SUGAR.expressions.BooleanExpression,{className:"IsInEnumExpression",evaluate:function(){var e=this.getParameters();var t=e[1].evaluate();var i=e[0].evaluate();for(var n=0;n<t.length;n++){var a=t[n];if(a instanceof SUGAR.expressions.Expression)a=a.evaluate();if(a==i)return SUGAR.expressions.Expression.TRUE}return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 2},getParameterTypes:function(){return["generic","enum"]}});SUGAR.expressions.GreaterThanExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.GreaterThanExpression,SUGAR.expressions.BooleanExpression,{className:"GreaterThanExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var i=e[1].evaluate();if(t>i)return SUGAR.expressions.Expression.TRUE;return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 2},getParameterTypes:function(){return["number","number"]}});SUGAR.expressions.IsInRangeExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsInRangeExpression,SUGAR.expressions.BooleanExpression,{className:"IsInRangeExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var i=e[1].evaluate();var n=e[2].evaluate();if(t>=i&&t<=n)return SUGAR.expressions.Expression.TRUE;return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 3},getParameterTypes:function(){return["number","number","number"]}});SUGAR.expressions.IsValidTimeExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsValidTimeExpression,SUGAR.expressions.BooleanExpression,{className:"IsValidTimeExpression",evaluate:function(){var e=this.getParameters().evaluate();var t=/^(\d{1,2}):(\d\d)\s*([ap]m)?$/i;if(e.length==0)return SUGAR.expressions.Expression.TRUE;myregexp=new RegExp(t);if(!myregexp.test(e))return SUGAR.expressions.Expression.FALSE;var i=e.match(t);if(i[1]>23||i[2]>59){return SUGAR.expressions.Expression.FALSE}if(i[3]&&(i[1]>12||i[1]==0)){return SUGAR.expressions.Expression.FALSE}return SUGAR.expressions.Expression.TRUE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.NotExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.NotExpression,SUGAR.expressions.BooleanExpression,{className:"NotExpression",evaluate:function(){if(this.getParameters().evaluate()==SUGAR.expressions.Expression.FALSE)return SUGAR.expressions.Expression.TRUE;else return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 1}});SUGAR.expressions.IsValidDBNameExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsValidDBNameExpression,SUGAR.expressions.BooleanExpression,{className:"IsValidDBNameExpression",evaluate:function(){var e=this.getParameters().evaluate();if(e.length==0){return true}if(!/^[a-zA-Z][a-zA-Z\_0-9]+$/.test(e))return SUGAR.expressions.Expression.FALSE;return SUGAR.expressions.Expression.TRUE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.OrExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.OrExpression,SUGAR.expressions.BooleanExpression,{className:"OrExpression",evaluate:function(){var e=this.getParameters();for(var t=0;t<e.length;t++){if(e[t].evaluate()==SUGAR.expressions.Expression.TRUE)return SUGAR.expressions.Expression.TRUE}return SUGAR.expressions.Expression.FALSE}});SUGAR.expressions.IsValidDateExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsValidDateExpression,SUGAR.expressions.BooleanExpression,{className:"IsValidDateExpression",evaluate:function(){var e=this.getParameters().evaluate();if(typeof e!="string"||e=="")return SUGAR.expressions.Expression.FALSE;var t="Y-m-d";if(SUGAR.expressions.userPrefs)t=SUGAR.expressions.userPrefs.datef;var i=SUGAR.util.DateUtils.parse(e,t);if(i!=false&&i!="Invalid Date")return SUGAR.expressions.Expression.TRUE;return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.isAfterExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.isAfterExpression,SUGAR.expressions.BooleanExpression,{className:"isAfterExpression",evaluate:function(){var e=this.getParameters();var t=SUGAR.util.DateUtils.parse(e[0].evaluate());var i=SUGAR.util.DateUtils.parse(e[1].evaluate());if(!t||!i||isNaN(t)||isNaN(i)){return SUGAR.expressions.Expression.FALSE}if(t>i)return SUGAR.expressions.Expression.TRUE;return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 2},getParameterTypes:function(){return["date","date"]}});SUGAR.expressions.IsForecastClosedLostExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsForecastClosedLostExpression,SUGAR.expressions.BooleanExpression,{className:"IsForecastClosedLostExpression",evaluate:function(){var e=this.getParameters().evaluate();if(n===undefined){return SUGAR.expressions.Expression.FALSE}var t=n.metadata.getModule("Forecasts","config")||{},i=t.sales_stage_lost||["Closed Lost"];if(i.indexOf(e)===-1){return SUGAR.expressions.Expression.FALSE}return SUGAR.expressions.Expression.TRUE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.BinaryDependencyExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.BinaryDependencyExpression,SUGAR.expressions.BooleanExpression,{className:"BinaryDependencyExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var i=e[1].evaluate();if(t!=null&&i!=null&&t!=""&&i!="")return SUGAR.expressions.Expression.TRUE;return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 2},getParameterTypes:function(){return["string","string"]}});SUGAR.expressions.IsValidPhoneExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsValidPhoneExpression,SUGAR.expressions.BooleanExpression,{className:"IsValidPhoneExpression",evaluate:function(){var e=this.getParameters().evaluate();if(e.length==0)return SUGAR.expressions.Expression.TRUE;if(!/^\+?[0-9\-\(\)\s]+$/.test(e))return SUGAR.expressions.Expression.FALSE;return SUGAR.expressions.Expression.TRUE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.IsAlphaNumericExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsAlphaNumericExpression,SUGAR.expressions.BooleanExpression,{className:"IsAlphaNumericExpression",evaluate:function(){var e=this.getParameters().evaluate();if(/^[a-zA-Z0-9]+$/.test(e))return SUGAR.expressions.Expression.TRUE;return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.isBeforeExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.isBeforeExpression,SUGAR.expressions.BooleanExpression,{className:"isBeforeExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var i=e[1].evaluate();if(!t||!i||isNaN(t)||isNaN(i)){return SUGAR.expressions.Expression.FALSE}if(t<i)return SUGAR.expressions.Expression.TRUE;return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 2},getParameterTypes:function(){return["date","date"]}});SUGAR.expressions.IsNumericExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsNumericExpression,SUGAR.expressions.BooleanExpression,{className:"IsNumericExpression",
evaluate:function(){var e=this.getParameters().evaluate();if(e===""||e===null){return SUGAR.expressions.Expression.FALSE}if(isFinite(e)&&!isNaN(parseFloat(e))){return SUGAR.expressions.Expression.TRUE}return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.IsForecastClosedExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsForecastClosedExpression,SUGAR.expressions.BooleanExpression,{className:"IsForecastClosedExpression",evaluate:function(){var e=this.getParameters().evaluate();if(n===undefined){return SUGAR.expressions.Expression.FALSE}var t=n.metadata.getModule("Forecasts","config"),i=["Closed Won","Closed Lost"];if(!_.isUndefined(t)){i=_.union(t.sales_stage_won,t.sales_stage_lost)}if(i.indexOf(e)===-1){return SUGAR.expressions.Expression.FALSE}return SUGAR.expressions.Expression.TRUE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.IsAlphaExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsAlphaExpression,SUGAR.expressions.BooleanExpression,{className:"IsAlphaExpression",evaluate:function(){var e=this.getParameters().evaluate();if(/^[a-zA-Z]+$/.test(e))return SUGAR.expressions.Expression.TRUE;return SUGAR.expressions.Expression.FALSE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.IsValidEmailExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IsValidEmailExpression,SUGAR.expressions.BooleanExpression,{className:"IsValidEmailExpression",evaluate:function(){var e=this.getParameters().evaluate();if(typeof e!="string")return SUGAR.expressions.Expression.FALSE;if(e=="")return SUGAR.expressions.Expression.TRUE;var t=e.charAt(e.length-1);if(!t.match(/[^\.]/i))return SUGAR.expressions.Expression.FALSE;var i=e.split(/[,;]/);for(var n=0;n<i.length;n++){var a=i[n];a=a.replace(/^\s+|\s+$/g,"");if(a!=""&&!/^.+@.+$/gi.test(a)){return SUGAR.expressions.Expression.FALSE}}return SUGAR.expressions.Expression.TRUE},getParamCount:function(){return 1},getParameterTypes:function(){return["string"]}});SUGAR.expressions.EqualExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.EqualExpression,SUGAR.expressions.BooleanExpression,{className:"EqualExpression",evaluate:function(){var e=SUGAR.expressions.Expression,t=this.getParameters(),i=t[0].evaluate(),n=t[1].evaluate(),a=t[0]instanceof SUGAR.expressions.BooleanExpression||t[1]instanceof SUGAR.expressions.BooleanExpression;if(i==n||a&&(e.isTruthy(i)&&e.isTruthy(n)||!e.isTruthy(i)&&!e.isTruthy(n))){return e.TRUE}return e.FALSE},getParamCount:function(){return 2},getParameterTypes:function(){return["generic","generic"]}});SUGAR.expressions.SugarListWhereExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.SugarListWhereExpression,SUGAR.expressions.EnumExpression,{className:"SugarListWhereExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var i=e[1].evaluate();var n=[];for(var a=0;a<i.length;a++){if(i[a].length>0){if(i[a][0]==t){n=i[a][1];break}}}return n=="undefined"?[]:n},getParamCount:function(){return 2},getParameterTypes:function(){return["string","enum"]}});SUGAR.expressions.ForecastSalesStageExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.ForecastSalesStageExpression,SUGAR.expressions.EnumExpression,{className:"ForecastSalesStageExpression",evaluate:function(){if(n===undefined){return SUGAR.language.get("app_list_strings","sales_stage_dom")}var e=SUGAR.expressions.Expression,t=n.metadata.getModule("Forecasts","config"),i=this.getParameters(),a=i[0].evaluate(),o=i[1].evaluate(),r=n.lang.getAppListStrings("sales_stage_dom"),s=[];if(!e.isTruthy(a)){s=_.union(s,t.sales_stage_won)}if(!e.isTruthy(o)){s=_.union(s,t.sales_stage_lost)}return _.without(r,s)},getParamCount:function(){return 2},getParameterTypes:function(){return["boolean","boolean"]}});SUGAR.expressions.SugarTranslatedDropDownExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.SugarTranslatedDropDownExpression,SUGAR.expressions.EnumExpression,{className:"SugarTranslatedDropDownExpression",evaluate:function(){var e=this.getParameters().evaluate(),t,i=[];if(n){t=n.lang.getAppListStrings(e)}else{t=SUGAR.language.get("app_list_strings",e)}if(t&&t!="undefined"){for(var a in t){if(typeof a=="string")i[i.length]=t[a]}}return i},getParamCount:function(){return 1},getParameterTypes:function(){return"string"}});SUGAR.expressions.DefineEnumExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.DefineEnumExpression,SUGAR.expressions.EnumExpression,{className:"DefineEnumExpression",evaluate:function(){var e=this.getParameters();var t=[];if(typeof e.length!="undefined"){for(var i=0;i<e.length;i++){t[t.length]=e[i].evaluate()}}else{return[e.evaluate()]}return t},getParameterTypes:function(){return"generic"}});SUGAR.expressions.SugarDropDownExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.SugarDropDownExpression,SUGAR.expressions.EnumExpression,{className:"SugarDropDownExpression",evaluate:function(){var e=this.getParameters().evaluate(),t,i=[];if(n){t=n.lang.getAppListStrings(e)}else{t=SUGAR.language.get("app_list_strings",e)}if(t&&t!="undefined"){for(var a in t){if(typeof a=="string")i[i.length]=a}}return i},getParamCount:function(){return 1},getParameterTypes:function(){return"string"}});SUGAR.expressions.ForecastIncludedCommitStagesExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.ForecastIncludedCommitStagesExpression,SUGAR.expressions.EnumExpression,{className:"ForecastIncludedCommitStagesExpression",evaluate:function(){if(n===undefined){return SUGAR.language.get("app_list_strings","sales_stage_dom")}var e=n.metadata.getModule("Forecasts","config");return e.commit_stages_included},getParamCount:function(){return 0},getParameterTypes:function(){return[]}});SUGAR.expressions.StringLengthExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.StringLengthExpression,SUGAR.expressions.NumericExpression,{className:"StringLengthExpression",evaluate:function(){var e=this.getParameters().evaluate()+"";return e.length},getParamCount:function(){return 1},getParameterTypes:function(){return"string"}});SUGAR.expressions.NaturalLogExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.NaturalLogExpression,SUGAR.expressions.NumericExpression,{className:"NaturalLogExpression",evaluate:function(){return Math.log(this.getParameters().evaluate())},getParamCount:function(){return 1}});SUGAR.expressions.SubtractExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.SubtractExpression,SUGAR.expressions.NumericExpression,{className:"SubtractExpression",evaluate:function(){var e=this.getParameters(),t=e[0].evaluate();for(var i=1;i<e.length;i++){t=this.context.subtract(t,e[i].evaluate())}return t}});SUGAR.expressions.MaxRelatedExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.MaxRelatedExpression,SUGAR.expressions.NumericExpression,{className:"MaxRelatedExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var i=e[1].evaluate();if(typeof t=="string"&&t!=""){var n=this.context.getRelatedField(t,"rollupMax",i);if(typeof n=="object"){n=""}return n}else if(typeof rel=="object"){}return""},getParamCount:function(){return 2},getParameterTypes:function(){return["relate","string"]}});SUGAR.expressions.MinimumExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.MinimumExpression,SUGAR.expressions.NumericExpression,{className:"MinimumExpression",evaluate:function(){var e=this.getParameters();var t=null;for(var i=0;i<e.length;i++){var n=e[i].evaluate();if(t==null||n<t)t=n}return t}});SUGAR.expressions.LogExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.LogExpression,SUGAR.expressions.NumericExpression,{className:"LogExpression",evaluate:function(){var e=this.getParameters();var t=e[1].evaluate();var i=e[0].evaluate();return this.context.divide(Math.log(i),Math.log(t))},getParamCount:function(){return 2}});SUGAR.expressions.AverageExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.AverageExpression,SUGAR.expressions.NumericExpression,{className:"AverageExpression",evaluate:function(){var e=0;var t=0;var i=this.getParameters();for(var n=0;n<i.length;n++){e=this.context.add(e,i[n].evaluate());t++}return this.context.divide(e,t)}});SUGAR.expressions.CountRelatedExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.CountRelatedExpression,SUGAR.expressions.NumericExpression,{className:"CountRelatedExpression",evaluate:function(){var e=this.getParameters().evaluate();if(typeof e=="string"&&e!=""){return this.context.getRelatedField(e,"count")}return""},getParamCount:function(){return 1},getParameterTypes:function(){return["relate"]}});SUGAR.expressions.AbsoluteValueExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.AbsoluteValueExpression,SUGAR.expressions.NumericExpression,{className:"AbsoluteValueExpression",evaluate:function(){return Math.abs(this.getParameters().evaluate())},getParamCount:function(){return 1}});SUGAR.expressions.AverageRelatedExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.AverageRelatedExpression,SUGAR.expressions.NumericExpression,{className:"AverageRelatedExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var i=e[1].evaluate();if(typeof t=="string"&&t!=""){return SUGAR.forms.AssignmentHandler.getRelatedField(t,"rollupAve",i)}else if(typeof rel=="object"){}return""},getParamCount:function(){return 2},getParameterTypes:function(){return["relate","string"]}});SUGAR.expressions.RoundExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.RoundExpression,SUGAR.expressions.NumericExpression,{className:"RoundExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var i=e[1].evaluate();return this.context.round(t,i)},getParamCount:function(){return 2}});SUGAR.expressions.AddExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.AddExpression,SUGAR.expressions.NumericExpression,{className:"AddExpression",evaluate:function(){var e=this.getParameters(),t=0;for(var i=0;i<e.length;i++){t=this.context.add(t,e[i].evaluate())}return t}});SUGAR.expressions.FloorExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.FloorExpression,SUGAR.expressions.NumericExpression,{className:"FloorExpression",evaluate:function(){return Math.floor(this.getParameters().evaluate())},getParamCount:function(){return 1}});SUGAR.expressions.ValueOfExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.ValueOfExpression,SUGAR.expressions.NumericExpression,{className:"ValueOfExpression",evaluate:function(){var e=this.getParameters().evaluate()+"";e=e.replace(/,/g,"");var t=0;if(e.indexOf(".")!=-1)t=parseFloat(e);else t=parseInt(e);if(isNaN(t))throw"Error: '"+e+"' is not a number";return t},getParamCount:function(){return 1},getParameterTypes:function(){return"generic"}});SUGAR.expressions.MaximumExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.MaximumExpression,SUGAR.expressions.NumericExpression,{className:"MaximumExpression",evaluate:function(){var e=this.getParameters();var t=null;for(var i=0;i<e.length;i++){var n=e[i].evaluate();if(t==null||n>t)t=n}return t}});SUGAR.expressions.MinRelatedExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.MinRelatedExpression,SUGAR.expressions.NumericExpression,{className:"MinRelatedExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var i=e[1].evaluate();if(typeof t=="string"&&t!=""){return this.context.getRelatedField(t,"rollupMin",i)}else if(typeof rel=="object"){}return""},getParamCount:function(){return 2},getParameterTypes:function(){return["relate","string"]}});SUGAR.expressions.MedianExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.MedianExpression,SUGAR.expressions.NumericExpression,{className:"MedianExpression",evaluate:function(){var e=this.getParameters();var t=new Array;for(var i=0;i<e.length;i++)t[t.length]=parseFloat(e[i].evaluate());t.sort(function(e,t){return e-t});if(t.length%2==0){return(t[t.length/2]+t[t.length/2-1])/2}return t[Math.round(t.length/2)-1]}});SUGAR.expressions.MultiplyExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.MultiplyExpression,SUGAR.expressions.NumericExpression,{className:"MultiplyExpression",evaluate:function(){var e=this.getParameters(),t="1";for(var i=0;i<e.length;i++){t=this.context.multiply(t,e[i].evaluate())}return t}});SUGAR.expressions.CeilingExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.CeilingExpression,SUGAR.expressions.NumericExpression,{className:"CeilingExpression",evaluate:function(){return Math.ceil(this.getParameters().evaluate())},getParamCount:function(){return 1}});SUGAR.expressions.NegateExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.NegateExpression,SUGAR.expressions.NumericExpression,{className:"NegateExpression",evaluate:function(){return this.context.multiply("-1",this.getParameters().evaluate())},getParamCount:function(){return 1}});SUGAR.expressions.SumRelatedExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.SumRelatedExpression,SUGAR.expressions.NumericExpression,{className:"SumRelatedExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var i=e[1].evaluate();if(typeof t=="string"&&t!=""){return this.context.getRelatedField(t,"rollupSum",i)}else if(typeof rel=="object"){}return""},getParamCount:function(){return 2},getParameterTypes:function(){return["relate","string"]}});SUGAR.expressions.DivideExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.DivideExpression,SUGAR.expressions.NumericExpression,{className:"DivideExpression",evaluate:function(){var e=this.getParameters(),t=e[0].evaluate();denominator=e[1].evaluate();if(denominator==0){throw"Division by 0 error"}return this.context.divide(t,denominator)},getParamCount:function(){return 2}});SUGAR.expressions.StandardDeviationExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.StandardDeviationExpression,SUGAR.expressions.NumericExpression,{className:"StandardDeviationExpression",evaluate:function(){var e=this.getParameters();var t=new Array;var i=0;var n=e.length;for(var a=0;a<e.length;a++){value=e[a].evaluate();t[t.length]=value;i=this.context.add(i,value)}var o=this.context.divide(i,n);var r=0;for(var a=0;a<t.length;a++)r+=Math.pow(this.context.subtract(t[a],o),2);var s=this.context.multiply(this.context.divide(1,n),r);return Math.sqrt(s)}});SUGAR.expressions.PowerExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.PowerExpression,SUGAR.expressions.NumericExpression,{className:"PowerExpression",evaluate:function(){var e=this.getParameters();var t=e[0].evaluate();var i=e[1].evaluate();return Math.pow(t,i)},getParamCount:function(){return 2}});SUGAR.expressions.IndexOfExpression=function(e,t){this.context=t;this.init(e)};SUGAR.util.extend(SUGAR.expressions.IndexOfExpression,SUGAR.expressions.NumericExpression,{className:"IndexOfExpression",evaluate:function(){var e=this.getParameters();var t=e[1].evaluate();var i=e[0].evaluate();for(var n=0;n<t.length;n++){if(t[n]==i){return n}}return-1},getParamCount:function(){return 2},getParameterTypes:function(){return["generic","enum"]}});SUGAR.forms.SetPanelVisibilityAction=function(e,t){this.afterRender=true;if(_.isObject(e)){t=e.value;e=e.target}if(_.isString(e)&&_.isUndefined(SUGAR.App)){var i=$("#"+e).parents("div");if(i.length){e=i.attr("id")}}this.target=e;this.expr="cond("+t+', "", "none")'};SUGAR.util.extend(SUGAR.forms.SetPanelVisibilityAction,SUGAR.forms.AbstractAction,{hideChildren:function(){if(typeof SUGAR.forms.SetPanelVisibilityAction.hiddenFields=="undefined"){this.createFieldBin()}var e=document.getElementById(this.target);var t=e.getElementsByTagName("table")[0];if(t!=null){t.id=this.target+"_tbl";SUGAR.forms.SetPanelVisibilityAction.hiddenFields.appendChild(t)}},showChildren:function(){var e=document.getElementById(this.target);var t=document.getElementById(this.target+"_tbl");if(t!=null)e.appendChild(t)},createFieldBin:function(){var e=document.createElement("div");e.id="panelHiddenFields";e.style.display="none";document.body.appendChild(e);SUGAR.forms.SetPanelVisibilityAction.hiddenFields=e},exec:function(e){if(typeof e=="undefined")e=this.context;if(e.view)return this.sidecarExec(e);try{var t=this.evalExpression(this.expr,e);var i=document.getElementById(this.target);if(i!=null){if(i.style.display!="none")SUGAR.forms.animation.sizes[this.target]=i.clientHeight;if(SUGAR.forms.AssignmentHandler.ANIMATE){if(t=="none"&&i.style.display!="none"){SUGAR.forms.animation.Collapse(this.target,this.hideChildren,this);return}else if(t!="none"&&i.style.display=="none"){this.showChildren();SUGAR.forms.animation.Expand(this.target);return}}if(t=="none")this.hideChildren();else this.showChildren();i.style.display=t}}catch(n){if(console&&console.log)console.log(n)}},sidecarExec:function(e){var t=this.evalExpression(this.expr,e)==="none",i=e.view.$(".tab."+this.target),n=e.view.$("div.record-panel[data-panelname='"+this.target+"']"),a=i&&i.hasClass("active");if(!i||!i.length){if(n.length>0){if(t){n.hide()}else{n.show()}this.triggerFieldsVisibility(e,this.target,t)}else{console.log("unable to find panel "+this.target)}}else{if(t){i.hide();if(a){var o=e.view.$("li.tab:visible");if(o.length>0&&e.view.setActiveTab){e.view.setActiveTab({currentTarget:o[0].children[0]});e.view.handleActiveTab()}}}else{i.show()}this.triggerFieldsVisibility(e,this.target,t)}},triggerFieldsVisibility:function(e,t,i){_.each(this.getPanelFieldNames(e,t),function(t){var n=e.view.getField(t);if(n&&_.isUndefined(n.wasRequired)){n.wasRequired=n.def.required}e.setFieldDisabled(t,i);if(n.wasRequired===true)e.setFieldRequired(t,!i)})},getPanelFieldNames:function(e,t){var i=_.find(e.view.meta.panels,function(e){return e.name===t});return _.pluck(i.fields,"name")}});SUGAR.forms.animation.sizes={};SUGAR.forms.animation.Collapse=function(e,t,i){var n=document.getElementById(e);if(n==null)return;SUGAR.forms.animation.sizes[e]=n.clientHeight;n.style.overflow="hidden";var a=new YAHOO.util.Anim(e,{height:{to:0}},.5,YAHOO.util.Easing.easeBoth);a.onComplete.subscribe(function(){n.style.display="none";t.call(i)});a.animate()};SUGAR.forms.animation.Expand=function(e){var t=document.getElementById(e);if(t==null)return;t.style.overflow="hidden";t.style.height="0px";t.style.display="";var i=new YAHOO.util.Anim(e,{height:{to:SUGAR.forms.animation.sizes[e]}},.5,YAHOO.util.Easing.easeBoth);i.onComplete.subscribe(function(){t.style.height="auto"});i.animate()};SUGAR.forms.SetRequiredAction=function(e,t,i){if(_.isObject(e)){t=e.value;i=e.label;e=e.target}this.variable=e;this.expr=t;this.label=i;this._el_lbl=document.getElementById(this.label);if(this._el_lbl)this.msg=this._el_lbl.innerText};SUGAR.util.extend(SUGAR.forms.SetRequiredAction,SUGAR.forms.AbstractAction,{exec:function(e){if(typeof e=="undefined")e=this.context;this.required=this.evalExpression(this.expr,e);if(e.view){if(_.isEmpty(e.view.fields)){e.view.once("render",function(){this.exec(e)},this);return}e.setFieldRequired(this.variable,this.required)}else{this.bwcExec(e,this.required)}},bwcExec:function(e,t){var i=SUGAR.forms.AssignmentHandler.getElement(this.variable);if(typeof SUGAR.forms.FormValidator!="undefined")SUGAR.forms.FormValidator.setRequired(i.form.name,i.name,this.required);if(this._el_lbl!=null&&i!=null){var n=this._el_lbl,a=YAHOO.util.Dom.getElementsBy(function(e){return e.className=="req"},"span",n),o=false,r=i.name;if(a!=null&&a[0]!=null)o=a[0];if(this.required==true||this.required=="true"){if(!o){var s=document.createElement("span");s.innerHTML="<font color='red'>*</font>";s.className="req";this._el_lbl.appendChild(s);var l=this.findInValidate(e.formName,r);if(l>-1)validate[e.formName][l][2]=true;else addToValidate(e.formName,r,"text",true,this.msg)}}else{if(n!=null&&o!=false){o.parentNode.removeChild(o)}var l=this.findInValidate(e.formName,r);if(l>-1)validate[e.formName][l][2]=false}}},findInValidate:function(e,t){if(validate&&validate[e]){for(var i in validate[e]){if(typeof validate[e][i]=="object"&&validate[e][i][0]==t)return i}}return-1}});SUGAR.forms.StyleAction=function(e,t){this.target=e;this.attrs=t};SUGAR.util.extend(SUGAR.forms.StyleAction,SUGAR.forms.AbstractAction,{exec:function(e){if(SUGAR.App)return;if(typeof e=="undefined")e=this.context;try{var t={};for(var i in this.attrs){t[i]=this.evalExpression(this.attrs[i],e)}e.setStyle(this.target,t)}catch(n){return}}});SUGAR.forms.AssignToAction=function(e){if(_.isObject(e)){e=e.value}this.expr=e;this.target="assigned_user_name";if(_.isUndefined(SUGAR.App)){this.dataSource=new YAHOO.util.DataSource("index.php?",{responseType:YAHOO.util.XHRDataSource.TYPE_JSON,responseSchema:{resultsList:"fields",total:"totalCount",metaNode:"fields",metaFields:{total:"totalCount",fields:"fields"}},connMethodPost:true})}};SUGAR.util.extend(SUGAR.forms.AssignToAction,SUGAR.forms.AbstractAction,{exec:function(e){if(typeof e=="undefined"){e=this.context}this.userName=this.evalExpression(this.expr,e);if(e.view){if(_.isEmpty(e.view.fields)){e.view.once("render",function(){this.exec(e)},this);return}e.setAssignedUserName(this.target,this.userName)}else{this.bwcExec(e)}},bwcExec:function(e){if(typeof e=="undefined"){e=this.context}var t=SUGAR.util.paramsToUrl({to_pdf:"true",module:"Home",action:"quicksearchQuery",data:YAHOO.lang.JSON.stringify(sqs_objects["EditView_"+this.target]),query:this.userName});this.sqs=sqs_objects["EditView_"+this.target];this.dataSource.sendRequest(t,{success:function(e,t){if(t.results.length>0){var i=t.results[0];for(var n=0;n<this.sqs.field_list.length;n++){SUGAR.forms.AssignmentHandler.assign(this.sqs.populate_list[n],i[this.sqs.field_list[n]])}}},scope:this})},targetUrl:"index.php?module=Home&action=TaxRate&to_pdf=1"});var n=n||null;SUGAR.forms.SetVisibilityAction=function(e,t,i){this.afterRender=true;if(_.isObject(e)){t=e.value;e=e.target}this.target=e;this.expr="cond("+t+', "", "none")';this.view=i;if(!SUGAR.forms.SetVisibilityAction.initialized){var n=document.getElementsByTagName("head")[0];var a="span.vis_action_hidden, .vis_action_hidden * { visibility:hidden}";var o=document.createElement("style");o.setAttribute("type","text/css");if(o.styleSheet)o.styleSheet.cssText=a;else o.innerHTML=a;n.appendChild(o);SUGAR.forms.SetVisibilityAction.initialized=true}};SUGAR.util.extend(SUGAR.forms.SetVisibilityAction,SUGAR.forms.AbstractAction,{exec:function(e){if(typeof e=="undefined")e=this.context;try{var t=e&&e.getElement&&e.getElement(this.target)||null;if(t==null){return}var i=this.evalExpression(this.expr,e);var n=i=="none"||i=="hidden";if(SUGAR.App){this.sidecarExec(e,t,n)}else{this.legacyExec(e,t,n)}}catch(a){if(console&&console.log)console.log(a)}},sidecarExec:function(e,t,i){var n="vis_action_hidden",a=$(t).hasClass(n),o=e.view.getField(this.target),r=$(t).parents(".panel_body")[0];if(o&&_.isUndefined(o.wasRequired)){o.wasRequired=o.def.required}if(i){e.addClass(this.target,n,true);e.setFieldDisabled(this.target,true);if(o.wasRequired===true){e.setFieldRequired(this.target,false)}}else{e.removeClass(this.target,n,true);if(!o.def.calculated||!o.def.enforced){e.setFieldDisabled(this.target,false)}if(a){SUGAR.forms.FlashField(t,null,this.target)}if(o.wasRequired===true){e.setFieldRequired(this.target,true)}}if(r){this.checkRowSidecar(r,n)}},legacyExec:function(e,t,i){var n=YAHOO.util.Dom,a="vis_action_hidden",o=n.getAncestorByTagName(t,"TD"),r=n.getPreviousSiblingBy(o,function(e){return e.tagName=="TD"});this.wrapContent(r);this.wrapContent(o);var s=n.hasClass(r,a);if(i){n.addClass(r,a);n.addClass(o,a)}else{n.removeClass(r,a);n.removeClass(o,a);if(s&&this.view=="EditView"){SUGAR.forms.FlashField(t)}}this.checkRow(n.getAncestorByTagName(o,"TR"),a)},wrapContent:function(e){if(e&&this.containsPlainText(e)){var t=document.createElement("SPAN");var i=[];for(var n=0;n<e.childNodes.length;n++){i[n]=e.childNodes[n]}for(var n=0;n<i.length;n++){t.appendChild(i[n])}e.appendChild(t)}},containsPlainText:function(e){for(var t=0;t<e.childNodes.length;t++){var i=e.childNodes[t];if(i.nodeName=="#text"&&YAHOO.lang.trim(i.textContent)!=""){return true}}return false},checkRow:function(e,t){var i=true;for(var n=0;n<e.children.length;n++){var a=e.children[n];if(a.tagName.toLowerCase()=="td"&&!YAHOO.util.Dom.hasClass(a,t)){i=false;break}}e.style.display=i?"none":""},checkRowSidecar:function(e,t){if(!e||e.children){return}var i=true;for(var n=0;n<e.children.length;n++){var a=e.children[n];if(a.tagName.toLowerCase()=="div"&&!$(a).hasClass(t)&&$(a).children().length>1){i=false;break}}e.style.display=i?"none":""}});SUGAR.forms.SetValueAction=function(e,t){if(_.isObject(e)){this.expr=e.value;this.target=e.target;this.errorValue=!_.isUndefined(e.errorValue)?e.errorValue:null}else{this.expr=t;this.target=e}};SUGAR.util.extend(SUGAR.forms.SetValueAction,SUGAR.forms.AbstractAction,{exec:function(e){if(typeof e=="undefined"){e=this.context}try{var t=this.evalExpression(this.expr,e),i=e.getValue(this.target).evaluate();if(!_.isUndefined(t)&&t!==i&&this.canSetValue(e)){e.setValue(this.target,t)}}catch(n){if(!_.isUndefined(this.errorValue)&&!_.isNull(this.errorValue)){e.setValue(this.target,this.errorValue)}}}});SUGAR.forms.SetOptionsAction=function(e,t,i){this.afterRender=true;if(_.isObject(e)){i=e.labels;t=e.keys;e=e.target}this.keyExpr=t;this.labelExpr=i;this.target=e};SUGAR.util.extend(SUGAR.forms.SetOptionsAction,SUGAR.forms.AbstractAction,{exec:function(e){if(typeof e=="undefined")e=this.context;var t=this.evalExpression(this.keyExpr,e),i=this.evalExpression(this.labelExpr,e),a,o="";if(e.view){var r=e.getField(this.target);if(!r){return}o=[].concat(r.model.get(this.target));if(!this.canSetValue(e)){t=t.concat(o)}a=(_.size(t)===0||_.size(t)===1)&&(t[0]==undefined||t[0]==="");if(_.isString(i))r.items=_.pick(n.lang.getAppListStrings(i),t);else r.items=_.object(t,i);slContext=e;r.model.fields[this.target].options=r.items;var s=new SUGAR.forms.SetVisibilityAction(this.target,a?"false":"true","");s.setContext(e);s.exec();o=_.filter(o,function(e){return _.contains(t,e)});if((o.length==0||o.length==1&&o[0]=="")&&r.model.fields[r.name].type!="multienum"){o=[a?"":t[0]]}e.setValue(this.target,o)}else{var r=e.getElement(this.target);if(r==null)return null;if(t instanceof Array&&r.options!=null){var l=r.options;o=[];for(var c=0;c<l.length;c++){if(l[c].selected)o=o.concat(l[c].value)}while(l.length>0){r.remove(l[0])}if(typeof i=="string"){var d=SUGAR.language.get("app_list_strings",i);i=[];for(var c in t){i[c]=d[t[c]]}}var u;for(var c in t){if(i instanceof Array){if(typeof t[c]=="string"){if(typeof i[c]=="string"){u=l[l.length]=new Option(i[c],t[c],t[c]==o)}else{u=l[l.length]=new Option(t[c],t[c],t[c]==o)}}}else{if(typeof t[0]=="undefined"){if(typeof t[c]=="string"){u=l[l.length]=new Option(t[c],c)}}else{if(typeof value[c]=="string"){u=l[l.length]=new Option(t[c],t[c])}}}if(_.indexOf(o,t[c])>-1){u.selected=true}}if(!r.multiple&&r.value!=o){SUGAR.forms.AssignmentHandler.assign(this.target,r.value)}var a=r.multiple&&r.options.length==0||!r.multiple&&r.options.length<=1&&r.value=="";var s=new SUGAR.forms.SetVisibilityAction(this.target,a?"false":"true","");s.setContext(e);s.exec();if(SUGAR.forms.AssignmentHandler.ANIMATE&&!a)SUGAR.forms.FlashField(r)}else if(t instanceof Array&&(t.length==0||t.length==1&&t[0]=="")){var f=new SUGAR.forms.SetVisibilityAction(this.target,"false","");f.exec(e)}}}});SUGAR.forms.ReadOnlyAction=function(e,t){this.afterRender=true;if(_.isObject(e)){t=e.value;e=e.target}this.target=e;this.expr=t};SUGAR.util.extend(SUGAR.forms.ReadOnlyAction,SUGAR.forms.AbstractAction,{exec:function(e){if(typeof e=="undefined")e=this.context;var t=this.evalExpression(this.expr,e),i=t==SUGAR.expressions.Expression.TRUE;if(e.view){if(_.isEmpty(e.view.fields)){e.view.once("render",function(){this.exec(e)},this);return}e.setFieldDisabled(this.target,i)}else{this.bwcExec(e,i)}},bwcExec:function(e,t){var i=SUGAR.forms.AssignmentHandler.getElement(this.target);if(!i){return}this.setReadOnly(i,t);this.setDateField(i,t)},setReadOnly:function(e,t){var i=YAHOO.util.Dom;var n=e.type=="checkbox"||"select"?"disabled":"readonly";e[n]=t;if(t){i.setStyle(e,"background-color","#EEE");if(!SUGAR.isIE)i.setStyle(e,"color","#22")}else{i.setStyle(e,"background-color","");if(!SUGAR.isIE)i.setStyle(e,"color","")}},setDateField:function(e,t){var i=YAHOO.util.Dom,n=e.id,a=i.get(n+"_trigger");if(!a)return;var o=[i.get(n+"_date"),i.get(n+"_minutes"),i.get(n+"_meridiem"),i.get(n+"_hours")];for(var r in o)if(o[r]&&o[r].id)this.setReadOnly(o[r],t);if(t)i.setStyle(a,"display","none");else i.setStyle(a,"display","")}});SUGAR.FunctionMap={formatName:SUGAR.expressions.FormatedNameExpression,translateLabel:SUGAR.expressions.SugarTranslateExpression,translate:SUGAR.expressions.SugarTranslateExpression,toString:SUGAR.expressions.DefineStringExpression,string:SUGAR.expressions.DefineStringExpression,getDropdownValue:SUGAR.expressions.SugarDropDownValueExpression,getDDValue:SUGAR.expressions.SugarDropDownValueExpression,contains:SUGAR.expressions.ContainsExpression,charAt:SUGAR.expressions.CharacterAtExpression,strToUpper:SUGAR.expressions.StrToUpperExpression,strToLower:SUGAR.expressions.StrToLowerExpression,concat:SUGAR.expressions.ConcatenateExpression,subStr:SUGAR.expressions.SubStrExpression,forecastCommitStage:SUGAR.expressions.ForecastCommitStageExpression,dayofweek:SUGAR.expressions.DayOfWeekExpression,maxRelatedDate:SUGAR.expressions.MaxRelatedDateExpression,hoursUntil:SUGAR.expressions.HoursUntilExpression,date:SUGAR.expressions.DefineDateExpression,today:SUGAR.expressions.TodayExpression,addDays:SUGAR.expressions.AddDaysExpression,daysUntil:SUGAR.expressions.DaysUntilExpression,now:SUGAR.expressions.NowExpression,monthofyear:SUGAR.expressions.MonthOfYearExpression,timestamp:SUGAR.expressions.TimestampExpression,time:SUGAR.expressions.DefineTimeExpression,hourOfDay:SUGAR.expressions.HourOfDayExpression,currencyRate:SUGAR.expressions.CurrencyRateExpression,related:SUGAR.expressions.RelatedFieldExpression,valueAt:SUGAR.expressions.IndexValueExpression,sugarField:SUGAR.expressions.SugarFieldExpression,ifElse:SUGAR.expressions.ConditionExpression,cond:SUGAR.expressions.ConditionExpression,and:SUGAR.expressions.AndExpression,isForecastClosedWon:SUGAR.expressions.IsForecastClosedWonExpression,isRequiredCollection:SUGAR.expressions.IsRequiredCollectionExpression,isInList:SUGAR.expressions.IsInEnumExpression,isInEnum:SUGAR.expressions.IsInEnumExpression,greaterThan:SUGAR.expressions.GreaterThanExpression,isWithinRange:SUGAR.expressions.IsInRangeExpression,isValidTime:SUGAR.expressions.IsValidTimeExpression,not:SUGAR.expressions.NotExpression,isValidDBName:SUGAR.expressions.IsValidDBNameExpression,or:SUGAR.expressions.OrExpression,isValidDate:SUGAR.expressions.IsValidDateExpression,isAfter:SUGAR.expressions.isAfterExpression,isForecastClosedLost:SUGAR.expressions.IsForecastClosedLostExpression,doBothExist:SUGAR.expressions.BinaryDependencyExpression,
isValidPhone:SUGAR.expressions.IsValidPhoneExpression,isAlphaNumeric:SUGAR.expressions.IsAlphaNumericExpression,isBefore:SUGAR.expressions.isBeforeExpression,isNumeric:SUGAR.expressions.IsNumericExpression,isForecastClosed:SUGAR.expressions.IsForecastClosedExpression,isAlpha:SUGAR.expressions.IsAlphaExpression,isValidEmail:SUGAR.expressions.IsValidEmailExpression,equal:SUGAR.expressions.EqualExpression,getListWhere:SUGAR.expressions.SugarListWhereExpression,forecastSalesStages:SUGAR.expressions.ForecastSalesStageExpression,getDropdownValueSet:SUGAR.expressions.SugarTranslatedDropDownExpression,getTransDD:SUGAR.expressions.SugarTranslatedDropDownExpression,createList:SUGAR.expressions.DefineEnumExpression,"enum":SUGAR.expressions.DefineEnumExpression,getDropdownKeySet:SUGAR.expressions.SugarDropDownExpression,getDD:SUGAR.expressions.SugarDropDownExpression,forecastIncludedCommitStages:SUGAR.expressions.ForecastIncludedCommitStagesExpression,strlen:SUGAR.expressions.StringLengthExpression,ln:SUGAR.expressions.NaturalLogExpression,subtract:SUGAR.expressions.SubtractExpression,currencySubtract:SUGAR.expressions.SubtractExpression,sub:SUGAR.expressions.SubtractExpression,rollupMax:SUGAR.expressions.MaxRelatedExpression,min:SUGAR.expressions.MinimumExpression,log:SUGAR.expressions.LogExpression,average:SUGAR.expressions.AverageExpression,avg:SUGAR.expressions.AverageExpression,count:SUGAR.expressions.CountRelatedExpression,abs:SUGAR.expressions.AbsoluteValueExpression,rollupAve:SUGAR.expressions.AverageRelatedExpression,rollupAvg:SUGAR.expressions.AverageRelatedExpression,countConditional:SUGAR.expressions.CountConditionalRelatedExpression,round:SUGAR.expressions.RoundExpression,add:SUGAR.expressions.AddExpression,currencyAdd:SUGAR.expressions.AddExpression,floor:SUGAR.expressions.FloorExpression,number:SUGAR.expressions.ValueOfExpression,max:SUGAR.expressions.MaximumExpression,rollupMin:SUGAR.expressions.MinRelatedExpression,median:SUGAR.expressions.MedianExpression,multiply:SUGAR.expressions.MultiplyExpression,currencyMultiply:SUGAR.expressions.MultiplyExpression,mul:SUGAR.expressions.MultiplyExpression,ceil:SUGAR.expressions.CeilingExpression,ceiling:SUGAR.expressions.CeilingExpression,negate:SUGAR.expressions.NegateExpression,rollupSum:SUGAR.expressions.SumRelatedExpression,rollupCurrencySum:SUGAR.expressions.SumRelatedExpression,divide:SUGAR.expressions.DivideExpression,currencyDivide:SUGAR.expressions.DivideExpression,div:SUGAR.expressions.DivideExpression,rollupConditionalSum:SUGAR.expressions.SumConditionalRelatedExpression,stddev:SUGAR.expressions.StandardDeviationExpression,pow:SUGAR.expressions.PowerExpression,indexOf:SUGAR.expressions.IndexOfExpression};SUGAR.NumericConstants={pi:3.1415926535898,e:2.718281828459}},function(e,t){(function(e){e.raven={initialize:function(){},ravenDataCallback:function(t){t.tags=_.extend(t.tags||{},{"native":e.isNative,osVersion:_.getNested(e,"clientInfo.device.osVersion"),uuid:_.getNested(e,"clientInfo.device.uuid"),device:_.getNested(e,"clientInfo.device.model"),offline:e.config.offline&&e.config.offline.enabled});t.extra=_.extend(t.extra||{},{model:_.getNested(e,"clientInfo.device.model"),modelName:_.getNested(e,"clientInfo.device.modelName"),bundleId:_.getNested(e,"clientInfo.app.bundleId"),serverUrl:e.nomad?e.nomad.getServerUrl():undefined,serverVersion:e.nomad?e.nomad.getServerVersion():undefined,extendedLog:e.enhancedErrorReporter.getLog()});return t},ravenShouldSendCallback:function(){return e.config.raven.enabled},ravenReported:function(t){if(e.error){var i=t.data||{};e.error.logFatalError(i.message,i)}},setUser:function(e){Raven.setUser(e?{id:e}:null)}};if(e.config.raven&&e.config.raven.enabled&&!_.isEmpty(e.config.raven.url)){document.addEventListener("ravenSuccess",e.raven.ravenReported,false);document.addEventListener("ravenFailure",e.raven.ravenReported,false);Raven.config(e.config.raven.url,{tags:{version:e.config.appVersion,build:e.config.appBuild,env:e.config.raven.env},dataCallback:e.raven.ravenDataCallback,shouldSendCallback:e.raven.ravenShouldSendCallback}).install();e.events.on("app:start",function(){e.raven.setUser(e.api.isAuthenticated()?"authenticated":null)}).on("app:login:success",function(){e.raven.setUser("authenticated")}).on("app:logout",function(){e.raven.setUser()})}})(SUGAR.App)},function(e,t){(function(e){var t=window.store;function i(e){this._async=!!e.async;this._bucketName=e.name+":"}_.extend(i.prototype,{version:1,_syncApi:{get:function n(e){return t.get(this._bucketName+e)},getAll:function a(){var e=this._bucketName;var i=e.length;var n={};_.each(t.getAll(),function(t,a){var o=a.indexOf(e);if(o===0){n[a.substr(i)]=t}});return n},has:function o(e){return t.has(this._bucketName+e)},set:function r(e,i){t.set(this._bucketName+e,i)},cut:function s(e){t.cut(this._bucketName+e)},cutAll:function l(){var e=this._bucketName;_.each(_.keys(this._syncApi.getAll.call(this)),function(i){t.cut(e+i)})}},_asyncApi:{get:function c(e,t){t.call(this,null,this._syncApi.get.call(this,e))},getAll:function d(e){e.call(this,null,this._syncApi.getAll.call(this))},has:function u(e,t){t.call(this,null,this._syncApi.has.call(this,e))},set:function f(e,t,i){this._syncApi.set.call(this,e,t);i&&i.call(this,null)},cut:function h(e,t){this._syncApi.cut.call(this,e);t&&t.call(this,null)},cutAll:function p(e){this._syncApi.cutAll.call(this);e&&e.call(this,null)}},init:function m(e){_.extend(this,this._async?this._asyncApi:this._syncApi);e&&e.call(this,null,this)}});e.localStorageKeyValueStore={open:function g(){},initBucket:function v(e,t){var n=new i(e);n.init(t)}}})(SUGAR.App)},function(e,t){(function(e){var t=function(){};var i={db:null,openDb:function a(t){this.db=e.nomad.openDb(t);if(!this.db){throw new Error("Can't open SQL database "+t.name)}},query:function o(e,t,i){var n=this;this.db.transaction(function a(o){o.executeSql(e,t||[],function r(e,t){i&&i.call(n,null,t)},function s(e,t){i&&i.call(n,t)})})},createDataTable:function r(e,t){var i=this;this.query("CREATE TABLE IF NOT EXISTS "+e+" (key STRING PRIMARY KEY, value TEXT)",[],function n(e,a){t&&t.apply(i,arguments)})},get:function s(e,t,i){var n=this;this.query("SELECT value FROM "+e+" WHERE key = ? LIMIT 1",[t],function a(e,t){if(e){i&&i.call(n,e);return}var a;if(t.rows.length){a=t.rows.item(0).value==="undefined"?undefined:JSON.parse(t.rows.item(0).value)}i&&i.call(n,null,a)})},getAll:function l(e,t){var i=this;this.query("SELECT key, value FROM "+e,[],function n(e,a){var o;var r={};var s;if(e){t&&t.call(i,e);return}for(s=a.rows.length,o=0;o<s;o++){var l=a.rows.item(o);r[l.key]=l.value==="undefined"?undefined:JSON.parse(l.value)}t&&t.call(i,null,r)})},has:function c(e,t,i){var n=this;this.query("SELECT key FROM "+e+" WHERE key = ? LIMIT 1",[t],function a(e,t){if(e){i&&i.call(n,e);return}i&&i.call(n,null,!!t.rows.length)})},set:function d(e,t,i,n){var a=this;this.query("REPLACE INTO "+e+" (key, value) values (?, ?)",[t,JSON.stringify(i)],function o(e,t){n&&n.apply(a,arguments)})},cut:function u(e,t,i){var n=this;this.query("DELETE FROM "+e+" WHERE key = ?",[t],function a(e,t){i&&i.apply(n,arguments)})},cutAll:function f(e,t){var i=this;this.query("DELETE FROM "+e,[],function n(e,a){t&&t.apply(i,arguments)})}};function n(e){this._async=!!e.async;if(!this._async){this._cache={}}this._bucketName=e.name}_.extend(n.prototype,{version:1,_syncApi:{get:function h(t){return _.isObject(this._cache[t])?e.utils.deepCopy(this._cache[t]):this._cache[t]},getAll:function p(){return e.utils.deepCopy(this._cache)},has:function m(e){return _.has(this._cache,e)},set:function g(t,n){i.set(this._bucketName,t,n);this._cache[t]=_.isObject(n)?e.utils.deepCopy(n):n},cut:function v(e){i.cut(this._bucketName,e);delete this._cache[e]},cutAll:function b(){i.cutAll(this._bucketName);this._cache={}}},_asyncApi:{get:function x(e,t){i.get(this._bucketName,e,_.bind(t,this))},getAll:function y(e){i.getAll(this._bucketName,_.bind(e,this))},has:function E(e,t){i.has(this._bucketName,e,_.bind(t,this))},set:function L(e,n,a){i.set(this._bucketName,e,n,a?_.bind(a,this):t)},cut:function S(e,n){i.cut(this._bucketName,e,n?_.bind(n,this):t)},cutAll:function w(e){i.cutAll(this._bucketName,e?_.bind(e,this):t)}},init:function A(e){var t=this;i.createDataTable(this._bucketName,function n(a){if(a){e&&e.call(t,a);return}if(t._async){_.extend(t,t._asyncApi);e&&e.call(t,null,t)}else{i.getAll(t._bucketName,function o(i,n){if(i){e&&e.call(t,i);return}t._cache=n;_.extend(t,t._syncApi);e&&e.call(t,null,t)})}})}});e.sqlKeyValueStore={open:function R(e){i.openDb(e)},initBucket:function C(e,t){var i=new n(e);i.init(t)}}})(SUGAR.App)},function(e,t,i){var n=SUGAR.App;var a;var o;var r;var s;var l;var c;var d=document.getElementById("viewport-meta");var u={"default":d?d.getAttribute("content"):null};var f;var h;n.lang.DIRECTION_RTL="rtl";n.lang.DIRECTION_LTR="ltr";var p=function g(e,t,i,n,a){var o=[];a=_.isFunction(a)?a:function(){};var r=function s(t,i){return function(){var n=this._super;var a;this._super=function o(i){var n=Array.prototype.slice.call(arguments);if(i===t){n=n[1]}return e.prototype[t].apply(this,n)}.bind(this);a=i.apply(this,arguments);this._super=n;n=null;return a}};if(_.isFunction(e.getOverridableMethods)){o=e.getOverridableMethods()}_.each(i,function(t,n){if(_.isFunction(t)&&_.isFunction(e.prototype[n])){i[n]=r(n,t)}if(_.isFunction(e.prototype[n])&&!_.contains(o,n)){a(n)}});return e.extend(i,n)};var m=e.exports={timePaused:0,globalEvents:["app:orientation:changed","nativeMessage","app:rightmenu:show","app:dashboards:changed"],SETTINGS_CACHE_KEY:"settings",LAST_STATE_CACHE_KEY:"lastState",DEFAULT_ROUTE:"Search",_requireDependencies:function(){a=i(258);o=i(266);r=i(267);s=i(263);l=i(268);f=i(273)},_getComponentName:function v(e,t){var i;if(_.isObject(e)){i=n.utils.capitalize(e.type);if(_.contains(["Field","View","Layout"],t)){i="Mobile"+(e.module||"")+i}}else{i=n.utils.capitalize(e)}t=n.utils.capitalize(t);var a=new RegExp(t+"$");if(!a.test(e)){i+=t}return i},extendLayout:function b(e,t,i,a,o){var r=this._getComponentName(t,"Layout");var s=n.view.layouts[r]=p(e,t,i,a,o);return s},extendView:function x(e,t,i,a,o){var r=this._getComponentName(t,"View");var s=n.view.views[r]=p(e,t,i,a,o);return s},extendField:function y(e,t,i,a,o){var r=this._getComponentName(t,"Field");var s=n.view.fields[r]=p(e,t,i,a,o);return s},_syncedAppStart:function(){n.nomad.setHTMLDirection();if(n.supportedFeatures.dashboards&&!n.nomad.dashboards.isStarted()){n.nomad.dashboards.start();n.nomad.dashboards.fetchDashboards({notifyIfChanged:true})}f.show(function(){n.nomad.startApp()})},startApp:function(){if(!n.started){n.start()}else{n.navigation.history.clear();n.router.refresh()}_.each(n.additionalComponents,function(e){e.bindGlobalEvents()});n.nomad.mainMenu.start()},deviceReady:function(){this._requireDependencies();var e=this;window.App=SUGAR.App;n.isNative=!_.isUndefined(window.cordova);n.isTouchCapable="ontouchstart"in window;n.nomad.utils.augmentZeptoDetect(n.isNative);this.initNavigation();if(!this._isPlatformSupported()){n.error.handleNotSupportedPlatform();return}if(n.config.nativeRedirectEnabled){s.redirectToNativeApp()}this._computeMode();n.clientInfo={app:{name:n.config.appId,rebrandName:n.config.appName,version:n.config.sdkVersion,isNative:n.isNative},device:null,browser:_.extend($.browser,{userAgent:navigator.userAgent})};n.nomad.initSupportedFeatures();n.events.on("nomad:sync:complete",this._syncedAppStart);async.waterfall([function(e){var t={name:"store-"+n.config.appId+"-"+n.config.env,"native":n.isNative,encrypt:n.config.keyValueStoreEncryptionEnabled,forceEncryption:n.config.keyValueStoreEncryptionEnabled};var i={name:"ac",async:false};var a=n.config.keyValueStore==="sqlKeyValueStore"?"localStorageKeyValueStore":"sqlKeyValueStore";n.nomad.stores={};n.keyValueStore=n[n.config.keyValueStore];n.keyValueStore.open(t);n[a].open(t);async.parallel([function o(e){async.parallel({oldBucket:function t(e){n[a].initBucket(i,e)},newBucket:function o(e){n.keyValueStore.initBucket(i,e)}},function(t,i){if(!t){n.nomad.utils.migrateKeyValueStore(i.newBucket,i.oldBucket);n.cache.store=i.newBucket}e(t)})},function r(e){n.keyValueStore.initBucket({name:"dashlet_data",async:true},function(t,i){if(!t){n.nomad.stores.dashlets=i}e(t)})},function s(e){n.keyValueStore.initBucket({name:"filters",async:false},function t(i,a){if(!i){n.nomad.stores.filters=a}e(i)})}],function(t){e(t)})},function(t){e.preInit(n.clientInfo,t)},function(t){e.start()}],function(e){if(e){n.logger.fatal("Failed to init the app: "+e);a.showAlert(n.lang.get("ERR_INTERNAL_ERR_MSG"),{title:n.lang.get("ERR_GENERIC_TITLE")})}});if(!n.isNative&&$.os.android&&$.smartbanner){$.smartbanner({layer:true})}},_computeMode:function(){n.isTablet=n.config.deviceMode.type==="tablet"||n.config.deviceMode.type==="auto"&&(document.body.clientWidth>=768||document.body.clientHeight>=768);n.isNarrowTabletMode=n.isTablet&&(document.body.clientWidth<601||document.body.clientHeight<601);if(n.isTablet){$(document.body).removeClass("mobile");$(document.body).addClass("tablet");if(n.isNarrowTabletMode)$(document.body).addClass("narrow-tablet-mode")}else{$(document.body).removeClass("tablet narrow-tablet-mode");$(document.body).addClass("mobile")}if($.os.desktop){$(document.body).addClass("desktop")}},_checkTrial:function(){if(!n.config.trialUntil||new Date<new Date(n.config.trialUntil)){return}var e=function(e){var t=[n.lang.get("LBL_TRIAL_PERIOD_EXPIRED")];if(e){t.push({callback:e})}a.showAlert.apply(a,t)};var t=_.bind(e,null,null);n.view.views.LoginView.prototype.login=t;n.view.views.LoginView.prototype.externalLogin=t;this._checkTrial=_.noop;e(function(){var e=n.controller.layoutManager.getRootLayout();var t=e&&e.name==="login";if(!t){n.router.logout(true)}})},start:function(){this.computeOrientation();n.logger.debug("Client: "+JSON.stringify(n.clientInfo));$.__swipeHelper.init();if(n.config.keyValueStore==="localStorageKeyValueStore"){try{var e=n.config.env+":"+n.config.appId+":settings";var t=window.localStorage.getItem(e);if(t&&t[1]==="'"){window.localStorage.setItem(e,t.replace(/'/g,'"'))}}catch(i){}}n.init({el:"#nomad"});n.loginManager.handleAuthTokens();n.api.debug=n.config.debugSugarApi;n.api.setRefreshTokenSuccessCallback(function(e){e()});n.telephony.clearCallLog();this.setFontSize(n.loginManager.getSetting("fontSize"));_.each(this.globalEvents,function(e){n.events.register(e,n)});n.logger.debug("App started in "+(n.isNative?"native shell":"browser"));document.addEventListener("pause",_.bind(this.onPause,this),false);document.addEventListener("resume",_.bind(this.onResume,this),false);document.addEventListener("memoryWarning",_.bind(this.onMemoryWarning,this),false);document.addEventListener("backbutton",_.bind(this.onBackButtonClicked,this),false);window.addEventListener("orientationchange",_.bind(this.onOrientationChange,this),false);if(n.isSynced){this._syncedAppStart()}else{n.start()}this._checkTrial()},initSupportedFeatures:function(){n.supportedFeatures={fileUpload:function e(){var e=$.os.version;if($.os&&$.os.version){if($.os.ios){return n.utils.versionCompare(e,"6",">=")}else if($.os.android){return n.utils.versionCompare(e,"4.0.3",">=")}}return true}(),menuAnimation:function t(){if($.os&&$.os.version){return!($.os.android&&n.utils.versionCompare($.os.version,"4.0.3","<"))}return true}(),canvasJpegEncoding:function i(){var e=document.createElement("canvas");var t=e.toDataURL("image/jpeg");return t.indexOf("image/jpeg")!==-1}(),bulkApi:false,recents:false,offline:false,fileUploadForDocs:false,fts:false,followingPreloaderFilter:false,productsModule:false,dashboards:false,configurableSavedReportsChart:false,settingsDefaultView:false,enumViaActionSheet:false,filters:false,populateList:false,localSecurityServerSupport:false}},updateSupportedFeatures:function(e){var t=!_.isEmpty(n.metadata.getServerInfo())?n.metadata.getServerInfo():e?e.server_info:{};n.supportedFeatures.offline=n.offline&&n.offline.isSupported(t);n.supportedFeatures.fts=t.fts&&t.fts.enabled;n.supportedFeatures.productsModule=n.nomad.isSevenUp(t);n.supportedFeatures.dashboards=n.config.dashboards.enabled&&n.utils.versionCompare(t.version,n.config.dashboards.minServerVersion,">=");var i=n.config.dashboards.dashlets["activitystream-dashlet"];n.supportedFeatures.activities=!!i&&i.enabled&&n.utils.versionCompare(t.version,i.minServerVersion,">=");if(n.utils.versionCompare(t.version,"7.1.5",">=")){n.supportedFeatures.settingsDefaultView=true}if(n.utils.versionCompare(t.version,"7.2",">=")){n.supportedFeatures.recents=true;n.supportedFeatures.followingPreloaderFilter=true;n.supportedFeatures.filters=true;n.supportedFeatures.populateList=true}if(n.utils.versionCompare(t.version,"7.2.1",">=")){n.supportedFeatures.bulkApi=true;n.supportedFeatures.fileUploadForDocs=true}if(n.utils.versionCompare(t.version,"7.6.0.0RC1",">=")){n.supportedFeatures.configurableSavedReportsChart=true}if(n.isNative&&$.os.tablet&&($.os.ipad&&n.utils.versionCompare($.os.version,"8",">="))){n.supportedFeatures.enumViaActionSheet=true}if(n.utils.versionCompare(t.version,n.config.localSecurity.minServerVersion,">=")){n.supportedFeatures.localSecurityServerSupport=true}if(n.utils.versionCompare(t.version,n.config.teamBasedAcl.minServerVersion,">=")){n.supportedFeatures.teamBasedAclServerSupport=true}this._patchConfig()},updateServerInfo:function(){n.serverInfo=n.metadata.getServerInfo();this.updateSupportedFeatures()},_patchConfig:function(){if(n.supportedFeatures.productsModule){n.config.unsupportedModules=_.without(n.config.unsupportedModules,"Products")}else if(!_.contains(n.config.unsupportedModules,"Products")){n.config.unsupportedModules.push("Products")}if(n.supportedFeatures.fileUploadForDocs){n.config.nonCreatableModules=_.without(n.config.nonCreatableModules,"Documents")}else if(!_.contains(n.config.nonCreatableModules,"Documents")){n.config.nonCreatableModules.push("Documents")}},isSevenUp:function(e){return e?n.utils.versionCompare(e.version,"7.0RC",">="):false},resetMeta:function(e,t){var i=n.cache.get("app:build")!==n.config.appBuild;var a=e||!n.config.cacheMeta||i;var o=n.metadata.getHash();if(a){n.logger.debug("Resetting meta");n.metadata.clearCache();n.cache.cut("user");var r=JSON.parse(JSON.stringify(n.baseMetadata));if(!e&&o&&!i)r._hash=o;n.metadata.set(r,false,true);n.cache.set("app:build",n.config.appBuild);n.loginManager.handleAppUpgrade()}if(a||t){n.cache.set("app:synced","0")}n.isSynced=!t&&!a&&n.config.cacheMeta&&n.cache.get("app:synced")==="1";n.logger.debug("App is synced: "+n.isSynced)},resetAuth:function(){n[n.config.authStore].cut("AuthAccessToken");n[n.config.authStore].cut("AuthRefreshToken")},saveUser:function(){n.cache.set("user",n.user.toJSON())},restoreUser:function(){n.user.set(n.cache.get("user")||{})},cleanStores:function E(e){var t=[];e=e||function(){};_.each(n.nomad.stores,function i(e){t.push(_.bind(e.cutAll,e))});async.parallel(t,e)},getSetting:function(e){return this._fetchCacheItem(this.SETTINGS_CACHE_KEY)[e]},setSetting:function(e,t){this._setCacheItem(this.SETTINGS_CACHE_KEY,e,t)},removeSetting:function(e){if(e){this._removeCacheItem(this.SETTINGS_CACHE_KEY,e)}},getLastState:function(e){return this._fetchCacheItem(this.LAST_STATE_CACHE_KEY)[e]},setLastState:function(e,t){this._setCacheItem(this.LAST_STATE_CACHE_KEY,e,t)},removeLastState:function(e){this._removeCacheItem(this.LAST_STATE_CACHE_KEY,e)},_fetchCacheItem:function(e){return n.cache.get(e)?n.cache.get(e):{}},_saveCacheItem:function(e,t){n.cache.set(e,t)},_setCacheItem:function(e,t,i){var n=this._fetchCacheItem(e);if(_.isObject(t)){n=_.extend(n,t)}else{n[t]=i}this._saveCacheItem(e,n)},_removeCacheItem:function(e,t){if(t){var i=this._fetchCacheItem(e);delete i[t];this._saveCacheItem(e,i)}else{n.cache.cut(e)}},enableOffline:function(e){n.offline.userEnabled=_.isUndefined(n.nomad.getSetting("offlineEnabled"))?true:!e&&Boolean(n.nomad.getSetting("offlineEnabled"))},getRelationshipLink:function(e,t){var i=n.metadata.getModule(e);var a=_.find(i.fields,function(e){if(e.type==="link"){var i=n.metadata.getRelationship(e.relationship);return i&&(i.lhs_module===t||i.rhs_module===t)}});return a?a.name:null},getRelationship:function(e,t){var i=n.metadata.getModule(e);var a=i.fields[t].relationship;return n.metadata.getRelationship(a)},onPause:function(e){n.logger.debug("App was paused");n.logger.debug(e);this.timePaused=(new Date).getTime();_.each(n.modules,function(e){if(_.isFunction(e.onAppPause)){e.onAppPause()}});n.controller.layoutManager.onAppPause()},onResume:function(e){var t=((new Date).getTime()-(this.timePaused||0))/1e3;n.logger.debug("App resumed: "+t);n.logger.debug(e);_.each(n.modules,function(e){if(_.isFunction(e.onAppResume)){e.onAppResume()}});n.controller.layoutManager.onAppResume();_.delay(function(){var e=c;if(e!==n.nomad.computeOrientation()){n.trigger("app:orientation:changed",window.orientation)}},1e3);this._checkTrial()},onMemoryWarning:function(){n.controller.clean();n.logger.warn("App received memory warning");n.analytics.trackEvent("device","low-memory")},onBackButtonClicked:function(){n.analytics.trackEvent("device","back");if(n.overlay.isActive()){return}n.nomad.dismissAlerts();if(document.activeElement){document.activeElement.blur()}n.controller.handleBackButton()},onOrientationChange:function(){var e=this;var t=$("body");if(n.isTablet&&document.activeElement)document.activeElement.blur();t.addClass("rotate");_.delay(function(){t.removeClass("rotate");if($.os.ios&&n.utils.versionCompare($.os.version,"7",">=")){window.scrollTo(0,window.scrollY)}e.computeOrientation();n.analytics.trackEvent("orientation",window.orientation);n.trigger("app:orientation:changed",window.orientation)},1e3)},computeOrientation:function(){if(n.isTablet&&(n.config.deviceMode.landscape||n.config.deviceMode.portrait)){if(n.config.deviceMode.landscape){c="landscape"}if(n.config.deviceMode.portrait){c="portrait"}}else{if($.os.ios){c=window.orientation===90||window.orientation===-90?"landscape":"portrait"}else{c=document.body.clientWidth>document.body.clientHeight?"landscape":"portrait"}}var e=$.os.ios?c==="portrait"?screen.height-window.innerHeight:screen.width-window.innerHeight:0;u.landscape=", height="+(screen.width-e);u.portrait=", height="+(screen.height-e);if(c==="landscape"){if($.os.ios&&n.isTablet){d.setAttribute("content",u.default+u.landscape)}$("html").removeClass("portrait").addClass("landscape")}else{if($.os.ios&&n.isTablet){d.setAttribute("content",u.default+u.portrait)}$("html").removeClass("landscape").addClass("portrait")}return c},getOrientation:function(){return c},dismissAlerts:function(){n.alert.dismissAll("success");n.alert.dismissAll("error")},supportsFavs:function(e){var t=n.metadata.getModule(e);return t?t.favoritesEnabled:false},supportsMyItems:function(e){var t=n.metadata.getModule(e);return t?!_.isUndefined(t.fields.assigned_user_id):false},buildLinkRoute:function(e,t,i,n,a){var o=_.isString(e)?e:e.get("module");o+="/"+t+"/link/"+i;if(n){o+="/"+n}if(a){o+="/"+a}return o},contextMetaViews:{list:{numberOfItems:2},detail:{numberOfItems:999},all:{numberOfItems:999,customModsOnly:true,useVarDef:true}},contextMeta:{},initializeContextMeta:function(){var e=this;_.each(e.contextMetaViews,function(t,i){e.contextMeta[i]=e.contextMeta[i]||{};var a=t.type||i;var o=_.keys(n.metadata.getModules());if(t.customModsOnly){o=_.reject(o,function(e){return n.nomad.isStandardModule(e)})}_.each(o,function(t){if(n.metadata.getModule(t)){var o=n.data.createBean(t);e.contextMeta[i][t]=e.calculateContextMeta(o,t,a)}})})},calculateContextMeta:function(e,t,i){var a=this.contextMetaViews[i].numberOfItems||999;var o=n.metadata.getView(t,i);var r=[];var s;if(this.contextMetaViews[i].useVarDef){r=[n.metadata.getModule(t)]}else if(o){r=o.panels}_.each(r,function(t,i){s=e.getContextMetaData(t.fields,a)});return s},getContextMeta:function(e,t){var i=this.contextMeta[e]||{};return t?i[t]:i},isStandardModule:function(e){return _.contains(n.config.knownModules,e)},initSubpanels:function(){var e=n.metadata.getModuleNames({filter:"visible"});e.push("Users");_.each(e,function(t){var i=n.metadata.getModule(t,"layouts");var a=i?i.subpanels:null;if(!a||!a.meta||!_.isArray(a.meta.components))return;var o=[];_.each(a.meta.components,function(i,a){var r;var s;try{r=n.data.getRelatedModule(t,i.context.link);s=n.nomad.getRelationship(t,i.context.link)}catch(l){r=null;s=null}if(!_.contains(e,r))r=null;if(r&&s){i.module=r;i.creatable=(_.isUndefined(i.canCreate)&&_.isUndefined(i.creatable)?true:i.canCreate||i.creatable)&&!_.contains(n.config.nonCreatableModules,r);i.linkable=(_.isUndefined(i.canLink)&&_.isUndefined(i.linkable)?true:i.canLink||i.linkable)&&!_.contains(n.config.nonLinkableModules,r)&&!(_.contains(["Meetings","Calls","Notes","Tasks"],r)&&s.via_parent_id);i.unlinkable=_.isUndefined(i.unlinkable)?true:i.unlinkable}else{o.push(a)}});for(var r=0;r<o.length;++r){a.meta.components.splice(o[r]-r,1)}})},hasLinkableSubpanels:function(e){return _.any(e,function(e){return e.linkable&&n.acl.hasAccess("list",e.module)})},hasCreatableSubpanels:function(e){return _.any(e,function(e){return e.creatable&&n.acl.hasAccess("create",e.module)})},getSubpanels:function(e){var t=n.metadata.getModule(e,"layouts").subpanels;return t&&t.meta?t.meta.components:[]},canCreateModule:function(e){var t=n.metadata.getModuleNames({filter:["visible"],access:"create"});return _.contains(t,e)&&!_.include(n.config.nonCreatableModules,e)},hasAccessToReqFields:function(e,t){var i=t||"edit";var a="edit";if(!n.metadata.getView(e,a)){return false}var o=n.metadata.getModule(e).fields;var r=o.assigned_user_name;var s=["team_name"];if(r&&r.type==="relate"){s.push(r.name,r.id_name)}return!_.chain(n.metadata.getView(e,a).panels[0].fields).filter(function(e){if(_.contains(s,e.name)){return false}return o[e.name]&&o[e.name].required}).find(function(t){return!n.acl.hasAccess(i,e,null,t.name)}).value()},canCreateRelated:function(e,t,i){return this.canCreateModule(e)&&this._getSubpanel(t,i).creatable},canLinkRelated:function(e,t){return this._getSubpanel(e,t).linkable},canUnlinkRelated:function(e,t){return this._getSubpanel(e,t).unlinkable},canDisplay:function(e,t){return!(e.context.get("link")&&(t.type==="parent"||t.type==="relate"&&_.include(e.relateFields,t.name)))},_getSubpanel:function(e,t){return _.find(this.getSubpanels(e),function(e){return e.context.link===t})||{}},getSingularModuleName:function(e){return n.lang.getModuleName(e)},getPluralModuleName:function(e){return n.lang.getModuleName(e,{plural:true})},showEmailBody:function(e,t){var i=_.isArray(e)?e[0]:e;var a=t.get(i.name);var o=n.view.fields.EmailbodyField.getPlainTextValue(i.name,t);var r="emailbody-edit";var s=n.context.getContext({create:true});s.prepare();n.controller.loadDynamic({layoutDef:{className:"EmailBodyView",gaTrack:"EmailBodyView",meta:{components:[{view:r,editedFieldName:n.lang.get(i.label,"Emails"),value:a||n.nomad.utils.nl2br(o)}]},context:s}})},isEmptyValue:function(e){return _.isNull(e)||_.isUndefined(e)||!_.isNumber(e)&&_.isEmpty(e)||_.isNumber(e)&&!_.isFinite(e)},redraw:function(e){var t=$(document.body);var i=$("<style> body {opacity: 0.99;}</style>");function n(){t.append(i);_.delay(function(){i.remove()},e)}if(!e){n()}else{_.delay(n,e)}},configure:function(e){var t=e.serverUrl;var i=e.pageUrl;function a(){var e=i.replace("#","")||n.nomad.DEFAULT_ROUTE;n.controller.navigate({url:e,initiator:l.CONFIGURE})}if(n.isNative&&_.isEmpty(t)||_.isEmpty(t)&&!_.isEmpty(i)){a();return}n.loginManager.reconfigure(e,function o(){a()})},updateAuthStore:function(){if(n.isNative){n.keychain.OAUTH["meta:hash"]=n.metadata.getHash();n.keychain.OAUTH["userpref:hash"]=n.user.get("_hash")}},isDownloadTokenSupported:function(){return!_.isEmpty(n.api.getDownloadToken())},getFileOptions:function(){var e=n.nomad.isDownloadTokenSupported();return{htmlJsonFormat:false,iframe:false,passOAuthToken:!e,passDownloadToken:e}},getProductVersion:function(){return n.clientInfo.app.productVersion+"."+n.clientInfo.app.productBuild+(n.config.env!=="prod"?" ("+n.config.env+")":"")+(_.isEmpty(n.config.buildTag)?"":" "+n.config.buildTag)},getServerVersion:function(){return n.serverInfo&&n.api.isAuthenticated()?n.serverInfo.version+" "+n.serverInfo.flavor:"N/A"},getServerUrl:function(){return n.config.siteUrl+"/rest/v"+n.config.restVersion},getDesktopUrl:function(){return n.config.siteUrl+"?mobile=0"},canFollow:function(e){var t=e.module;return n.serverInfo.isSevenUp&&_.contains(n.config.followableModules,t)&&n.acl.hasAccessToModel("view",e)},getModuleRelationships:function(e){var t=n.metadata.getModule(e);if(_.isEmpty(t.layouts.subpanels)){return}var i=t.layouts.subpanels.meta.components;var a=_.map(i,function(e){return e.context.link});var o=_.select(t.fields,function(e){return _.contains(a,e.name)&&e.type==="link"});return _.chain(o).pluck("name").map(function(t){return n.nomad.getRelationship(e,t)}).select(function(e){return!_.isEmpty(e)}).map(function(e,t){e.label=_.find(i,function(e){return e.context.link===o[t].name}).label;return e}).value()},configureSugarLogic:function(){if(n.isSynced){var e=[n.view.views.EditView,n.view.views.DetailView,n.view.views.ListView];_.each(e,function(e){var t=e.prototype.plugins;var i=t.indexOf("SugarLogic");var a=i!==-1;if(n.config.sugarLogic.enabled&&!a){t.push("SugarLogic")}else if(!n.config.sugarLogic.enabled&&a){t.splice(i,1)}})}},setFontSize:function(e){e||(e=n.config.UI.defaultFontSize);document.documentElement.style.fontSize=n.config.UI.fontSizes[e]+"px"},setHTMLDirection:function(){if(!n.config.UI.supportedRTL)return;var e=n.user.getPreference("language")||n.cache.get("lang");var t=["ar_SA","he_IL"];var i=_.contains(t,e)||n.config.UI.rtl||false;$("html").toggleClass("rtl",i);n.lang.direction=i?n.lang.DIRECTION_RTL:n.lang.DIRECTION_LTR},buildBulkRequest:function(e){var t;var i="/v"+n.config.restVersion;e=e||{};t=n.api.buildURL.call({serverUrl:i},e.module,null,e.attributes,e.params);return{url:t,method:e.method||"GET",headers:e.headers,data:e.data}},syncApp:function(){$("html").addClass("syncApp");n.sync({callback:function(e){if(!e){n.nomad.updateServerInfo();var t=[function i(e){n.nomad.startRecordsPreloader(function(t){if(t){n.logger.error("Records preloading failed. Error:"+t)}e()})}];if(n.supportedFeatures.dashboards){n.nomad.dashboards.reset();t.push(function o(e){n.nomad.dashboards.start();n.nomad.dashboards.fetchDashboards({notifyIfChanged:false},function(t){if(t){n.logger.error("Couldn't preload dashboards. Error: "+t);a.showAlert(n.lang.get("ERR_MOBILE_DASHBOARDS_FETCHING"))}e(null)})})}async.parallel(t,function(){n.events.trigger("nomad:sync:complete");$("html").removeClass("syncApp")})}}})},getFtsEnabledModules:function(){if(n.supportedFeatures.fts){var e=[];_.each(n.metadata.getModules(),function(t,i){if(t.ftsEnabled){e.push(i)}},this);return e}else{return null}},redirectToNativeApp:function(){n.nomad._redirectToNativeApp()},initNavigation:function(){n.navigation={manager:r,history:new o};Backbone.history=n.navigation.history;n.navigation.manager.init()},isTeamBasedAclEnabledForModule:function(e){return n.config.teamBasedAcl.enabled&&n.supportedFeatures.teamBasedAclServerSupport&&!_.contains(n.config.teamBasedAcl.unsupportedModules,e)&&n.metadata.getModule(e,"isTBAEnabled")}};n.augment("nomad",m)},function(e,t,i){"use strict";var n=SUGAR.App;var a;a=e.exports={showAlert:function o(e){var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var i=t.title;var a=i===undefined?n.lang.get("LBL_WARNING"):i;var o=t.buttonLabels;var r=o===undefined?n.lang.get("LBL_OK"):o;var s=t.callback;this._showAlert(e,s,a,r)},showConfirm:function r(e){var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var i=t.title;var a=i===undefined?n.lang.get("LBL_CONFIRM"):i;var o=t.buttonLabels;var r=o===undefined?[n.lang.get("LBL_NO"),n.lang.get("LBL_YES")]:o;var s=t.callback;this._showConfirm(e,s,a,r)},showActionSheet:function s(e){var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];

_.defaults(t,{title:""});this._showActionSheet(e,t)},showPrompt:function l(){var e=arguments.length<=0||arguments[0]===undefined?"":arguments[0];var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];_.defaults(t,{title:n.lang.get("LBL_CONFIRM"),defaultText:"",inputStyle:1,buttonLabels:[n.lang.get("LBL_CANCEL_BUTTON_LABEL"),n.lang.get("LBL_OK")],callback:function i(){}});this._showPrompt(e,t)}};if(true){_.extend(a,i(259))}else{_.extend(a,require("%app.js%/native/dialog.es6"))}},function(e,t,i){"use strict";var n=i(260);e.exports={_showAlert:function a(e,t,i,n){alert(e);if(t){t()}},_showConfirm:function o(e,t,i,n){var a=confirm(e)?2:1;t(a)},_showActionSheet:function r(e,t){n.show(t.title,e,t.onSelectCb,t.onCancelCb)},_showPrompt:function s(e,t){var i=window.prompt(e,"");var n={buttonIndex:i!==null?2:1,input1:i};t.callback(n)}}},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(261);e.exports=a.extendView(o,"ActionSheet",{events:{"touchstart .item":"onItemTouchStart","touchmove .item":"onItemTouchMove","click .item":"onSelect","click .cancel":"onCancel"},name:"actionsheet",initialize:function(e){var t=this;$(window).on("orientationchange.actionsheet",function(){$(t.popup).addClass("invisible");_.delay(function(){t.position()},1e3)});this.container=$("#actionsheet-overlay");this.orientationSupport=_.isNumber(window.orientation);_.defaults(e,{title:"",template:"actionsheet",items:[],onSelect:false,onCancel:false,cancelText:n.lang.get("LBL_CANCEL_BUTTON_LABEL")});this._super(e);this.show()},onItemTouchStart:function(e){this._moved=false},onItemTouchMove:function(e){this._moved=true},onSelect:function(e){if(this._moved){this._moved=false;return false}var t=parseInt(e.target.dataset.index,10);var i=this.options.items[t];var n=true;if(this.options.onSelect){n=this.options.onSelect.call(this,i,t)}if(n!==false){this.remove()}},onCancel:function(){this.remove();if(this.options.onCancel){this.options.onCancel.call(this)}},render:function(){var e=this.options.template(this.options);var t=$(e);this.popup=t;this.container.empty();this.$el.empty().append(t).appendTo(this.container);_.delay(_.bind(this.position,this),20)},show:function(){this.render();this.container.show();n.activeComponents.add(this.name,this.onCancel,this)},hide:function(){this.container.hide();if($.os.ios){a.redraw(100)}n.activeComponents.remove(this.name)},position:function(){var e=this.popup;var t=this.orientationSupport&&_.contains([90,-90],window.orientation);e.toggleClass("compact",t);var i=document.documentElement;var n=e.get(0);var a=i.clientWidth;var o=i.clientHeight;var r=n.offsetWidth;var s=n.offsetHeight;var l=o-s;var c=a-r;var d;var u;if(l<=0){d=0}else{d=l/2}if(c<=0){u=0}else{u=c/2}e.css({top:d+"px",left:u+"px"}).removeClass("invisible")},remove:function(){this._super();this.hide();n.activeComponents.remove(this.name);this.container.empty();$(window).off("orientationchange.actionsheet")}},{show:function(e,t,i,a){return new n.view.views.ActionSheetView({title:e,items:t,onSelect:i,onCancel:a})}})},function(e,t,i){"use strict";var n=SUGAR.App;var a=i(257);var o=i(262);var r=a.extendView(o,"Static",{loadData:function s(e,t){}},{getOverridableMethods:function l(){return _.difference(o.getOverridableMethods(),["loadData"])}});e.exports=r},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(263);var r=i(265);var s=a.extendView(n.view.View,"Nomad",{ACTION_NAME:"component:action",initialize:function(e){e=e||{};if(e.globalEvents){this.globalEvents=e.globalEvents}this.config=n.config;var t=e.template||this.template;if(t){t=_.isString(t)?n.template.get(t):t;e.template=t}this._super(e);this.displayFields=_.getNested(this,"meta.panels.0.fields")||[]},onHeaderClick:function(){},onAppPause:function(){},onAppResume:function(){},loadData:function(e,t){return this._super(e,t)},delegateEvents:function(e){if(!(e||(e=_.result(this,"events"))))return;_.extend(e,{"click a[href]":"handleLinkClick"});this._super(e)},_render:function(){this.onBeforeRender();this._super();this.onAfterRender();this._rendered=true;this.trigger("view:after:render");return this},bindGlobalEvents:function(){var e=this._populateGlobalEvents(this);_.each(e,function(e,t){e=_.isFunction(e)?e:this[e];n.events.on(t,e,this)},this);_.each(this.fields,function(e){_.each(e.globalEvents,function(e,t){e=_.isFunction(e)?e:this[e];n.events.on(t,e,this)},e)})},unbindGlobalEvents:function(){var e=this._populateGlobalEvents(this);_.each(e,function(e,t){n.events.off(t,null,this)},this);_.each(this.fields,function(e){_.each(e.globalEvents,function(e,t){n.events.off(t,null,this)},e)})},_populateGlobalEvents:function(e){var t=[];var i={};var n=function(e,t){if(e){t.push(e.constructor.prototype.globalEvents);n(e.constructor.__super__,t)}};if(this.hasOwnProperty("globalEvents")){t.push(this.globalEvents)}n(e,t);_.each(t.reverse(),function(e){i=_.extend(i,e)});return i},initRelationshipFields:function(e,t){var i=n.data.getRelationshipFields(e,t);if(i&&i.length){this.relationshipFields=_.map(i,function(e){return n.metadata.getModule(this.module).fields[e]},this)}return this.relationshipFields},getFieldNames:function(e){if(!this.module)return[];var t=n.metadata.getModule(this.module,"mergedFields")||[];if(this.model instanceof n.Bean){if(this.model.canHaveAttachments()){t.push("attachment_list")}}if(this.relationshipFields){t=_.union(t,_.pluck(this.relationshipFields,"name"))}if(e){t=_.filter(t,function(e){var t=this._getFieldViewDef(e);if(_.isEmpty(t)){return false}return t.type!=="fieldset"&&a.canDisplay(this,t)},this)}return t},_getFieldViewDef:function(e){var t;_.find(this.meta.panels[0].fields,function(i){if(i.name===e){t=i}else if(!_.isEmpty(i.fields)){t=_.find(i.fields,function(t){return t.name===e})}return t});return t},isEditView:function(){return false},onAfterRender:function(){},onAfterShow:function(){if(this.collection){r.hideSyncAlert()}},onBeforeRender:function(){},handleLinkClick:function(e){if(e.defaultPrevented){return}var t=e.target.tagName.toLowerCase()==="a"?e.target:e.currentTarget;var i=t.getAttribute("href");if(/^#.*/.test(i)){e.preventDefault();e.stopPropagation();n.controller.navigate(i,{initiator:this.navigationName})}else if(a.utils.urlHasProtocolRegExp.test(i)){e.preventDefault();o.openUrl(i)}},abortActiveRequests:function(){return false},onDetach:function(){},propagateComponentAction:function(e){this.trigger(this.ACTION_NAME,e)},handleComponentAction:function(e,t){var i=this[e];if(_.isFunction(i)){i.call(this,t)}}},{getOverridableMethods:function l(){return["initialize","onBeforeRender","onAfterRender","onAfterShow","onAppPause","onAppResume","loadData","getHeaderConfig"]}});e.exports=s},function(e,t,i){"use strict";var n=SUGAR.App;var a=i(257);var o=i(258);var r;r=e.exports={sendEmail:function s(e){var t=this;var i=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var a=i.subject;var r=a===undefined?"":a;var s=i.body;var l=s===undefined?"":s;if(e.length>1){o.showActionSheet(e,{title:n.lang.get("LBL_MOBILE_CHOOSE_RECIPIENT"),onSelectCb:function c(e,i){return t._showEmailComposer(e,r,l)}})}else{this._showEmailComposer(e[0],r,l)}},sendConsoleLog:function l(){var e=this;var t=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var i=t.email;var a=i===undefined?n.config.about.supportEmail:i;var o=t.subject;var r=o===undefined?"":o;var s=t.body;var l=s===undefined?"":s;this._getConsoleLogFilename(function(t){e._showEmailComposer(a,r,l,t)})},shareRecord:function c(e){var t=n.nomad.utils.resolveUrl(n.config.siteUrl,window.location.href)+"#"+n.router.buildRoute(e.get("_module"),e.get("id"));var i={url:t,appId:n.config.brandName,module:a.getSingularModuleName(e.module),name:e.get("name")};i.subject=n.lang.get("TPL_RECORD_SHARE_SUBJECT",null,i);i.body=n.lang.get("TPL_RECORD_SHARE_BODY",null,i);this._share(i)},shareUrl:function d(e){var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];t.url=e;t.shareLabel=n.lang.get("LBL_RECORD_SHARE_BUTTON");this._share(t)},sendSms:function u(e,t){var i=this;if(_.isArray(e)&&e.length>1){var a=n.lang.get("LBL_MOBILE_CHOOSE_PHONE");var r=this._buildNamedList(e);o.showActionSheet(r,{title:a,onSelectCb:function s(n,a){return i._showSmsComposer(i._extractValue(e,a),t)}})}else{this._showSmsComposer(this._extractValue(e),t)}},callPhone:function f(e){var t=this;var i=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];if(i.model){_.extend(i,{module:i.model.module,recordId:i.model.id,recordName:i.model.get("name")})}if(_.isArray(e)&&e.length>1){var a=this._buildNamedList(e);o.showActionSheet(a,{title:n.lang.get("LBL_MOBILE_CHOOSE_PHONE"),onSelectCb:function r(a,o){n.telephony.callPhone(t._extractValue(e,o),i)}})}else{n.telephony.callPhone(this._extractValue(e),i)}},openUrl:function h(e){var t=this;var i=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var r=i.encode;var s=r===undefined?false:r;if(_.isArray(e)&&e.length>1){var l=_.map(e,function(e){_.keys(e)[0]});o.showActionSheet(l,{title:n.lang.get("LBL_MOBILE_CHOOSE_URL"),onSelectCb:function c(i,n){return t._browseUrl(a.utils._normalizeUrl(t._extractValue(e,n),s))}})}else{this._browseUrl(a.utils._normalizeUrl(this._extractValue(e),s))}},openWebPage:function p(e){this._browseWebPage(e)},showDateTimePicker:function m(e){var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var i=t.mode;var n=i===undefined?"showDatePicker":i;var a=t.callback;this._showDateTimePicker(e,n,a)},openDoc:function g(e){var t=this;if(_.isArray(e)&&e.length>1){var i=_.map(e,function(e,t,i){return n.nomad.utils.replaceGuid(_.keys(e)[0],n.lang.get("LBL_MOBILE_DOC")+" "+(t+1))});o.showActionSheet(i,{title:n.lang.get("LBL_MOBILE_CHOOSE_DOC"),onSelectCb:function a(i,n){return t._openDocWorker(e,n)}})}else{this._openDocWorker(e)}},openAddress:function v(){var e=this;var t=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var i=n.clientInfo.device;var a=!i.ios||i.ios&&!n.isNative?"g":"a";var r=t.showDirections;if(t.addresses){if(_.isArray(t.addresses)&&t.addresses.length>1){var s=_.map(t.addresses,function(e){return _.keys(e)[0]});o.showActionSheet(s,{title:n.lang.get("LBL_MOBILE_CHOOSE_LOCATION"),onSelectCb:function l(i,n){e._openMap(e._extractValue(t.addresses,n),a)}})}else{this._openMap(this._extractValue(t.addresses),a,r)}}else{this._openMapWithGeoLocation(t.location,a,r)}},registerForPushNotifications:function b(){this._registerForPushNotifications()},sendLocalNotification:function x(){var e=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];e.title=e.title||n.config.brandName;this._sendLocalNotification(e)},_openDocWorker:function y(e,t){var i=_.clone(this._extractValue(e,t));var o=a.utils._normalizeUrl(i.url);i.url=o.replace("{download_token}",n.api.getDownloadToken()).replace("{oauth_token}",n.api.getOAuthToken());this._flushCacheUrl(i);i.openExternally?this._browseUrl(i.url):this._browseDoc(i)},_flushCacheUrl:function E(e){if(_.has(e,"noCache")&&!e.noCache){return}var t=e.url.split("#")[0];var i=[t,t.indexOf("?")!==-1?"&":"?","__ts=",+new Date];e.noCache=false;e.url=i.join("")},_openMap:function L(e,t,i){var a="";var o=t==="a"?"maps.apple.com":"maps.google.com";if(!e){e=""}else{var r="";if(e.country&&_.isString(e.country)){r=e.country.replace(/\s?\,\s?/g,",");if(/ of$/.test(r)||/ of the$/.test(r)){var s=r.split(",");r=s[s.length-1];for(var l=0;l<s.length-1;l++){r=r.concat(" "+s[l])}}else{r=e.country.replace(/\,/g,"")}}e=_.compact([e.street,e.city,e.state,e.postalcode,r]).join(",")}if(i){a="http://"+o+"/?saddr="+encodeURI("Current Location")+"&daddr="+encodeURI(e)}else{a="http://"+o+"/maps?q="+encodeURI(e)}n.logger.debug("Opening map: "+a);this._browseUrl(a)},_openMapWithGeoLocation:function S(){var e=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var t=arguments.length<=1||arguments[1]===undefined?"":arguments[1];var i=arguments.length<=2||arguments[2]===undefined?false:arguments[2];var a="";var r=t==="a"?"maps.apple.com":"maps.google.com";var s=new RegExp("^[-+]?([1-8]?\\d(.\\d+)?|90(\\.0+)?)$");var l=new RegExp("^[-+]?(180(\\.0+)?|((1[0-7]\\d)|([1-9]?\\d))(\\.\\d+)?)$");if(!s.test(e.latitude)||!l.test(e.longitude)){o.showAlert(n.lang.get("ERR_GEOLOCATION_INVALID_COORDINATES_MSG"));return}e=_.compact([e.latitude,e.longitude]).join(",");if(i){a="http://"+r+"/?saddr="+encodeURI("Current Location")+"&daddr="+encodeURI(e)}else{a="http://"+r+"/maps?q="+encodeURI(e)}n.logger.debug("Opening map: "+a);this._browseUrl(a)},_extractValue:function w(e,t){t=t||0;return _.isString(e)?e:_.values(e[t])[0]||e[t].value||e[t]},_buildNamedList:function A(e){return _.map(e,function(e){return _.keys(e)[0]+" - "+_.values(e)[0]})},redirectToNativeApp:function R(){r._redirectToNativeApp()}};if(true){_.extend(r,i(264))}else{_.extend(r,require("%app.js%/native/device.es6"))}if(window.JASMINE){_.extend(a,r)}},function(e,t,i){"use strict";var n=i(257);var a=i(258);var o=SUGAR.App;e.exports={_showEmailComposer:function r(e,t,i){window.location="mailto:"+e+"?subject="+t+"&body="+i},_getConsoleLogFilename:function s(e){e()},_share:function l(e,t){var i=this;var n=o.lang.get("LBL_RECORD_SHARE_BUTTON");var r=[o.lang.get("LBL_EMAIL_BUTTON"),o.lang.get("LBL_SMS_BUTTON")];a.showActionSheet(r,{title:n,onSelectCb:function s(t,n){var a=encodeURIComponent(e.body+"\r\n\r\n"+e.url);if(n===0){i._showEmailComposer("",e.subject,a)}else{i._showSmsComposer("",a)}}})},_showSmsComposer:function c(e,t){if(t){if($.os.ios){window.location="sms:"+e+"&body="+t}else{window.location="sms:"+e+"?body="+t}}else{window.location="sms:"+e}},_callPhone:function d(e){window.location="tel:"+e},_browseUrl:function u(e){window.open(e)},_browseWebPage:function f(e){window.open(e)},_showDateTimePicker:function h(e,t,i){},_browseDoc:function p(e){if(e.oauth){this._downloadDoc(e)}else{this._browseUrl(e.url)}},_downloadDoc:function _(e){var t=this;var i=new window.XMLHttpRequest;var n="download_doc";i.open("GET",e.url);i.addEventListener("loadend",function(){o.alert.dismiss(n);var a=t._getBlob(i.response,e.file_mime_type);t._makeBlobUrl(a,function(e){window.location=e})},false);i.setRequestHeader("OAuth-Token",o.api.getOAuthToken());i.overrideMimeType("application/octet-stream; charset=x-user-defined");i.responseType="arraybuffer";i.send(null);o.alert.show(n,{level:"info",messages:o.lang.get("LBL_MOBILE_DOWNLOAD_STARTED",null,e.filename),autoClose:true,closeable:false})},_getBlob:function m(e,t){var i;try{i=new Blob([e],{type:t})}catch(n){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(n.name=="TypeError"&&window.BlobBuilder){var a=new BlobBuilder;a.append([e.buffer]);i=a.getBlob(t)}else if(n.name=="InvalidStateError"){i=new Blob([e.buffer],{type:t})}else{throw n}}return i},_makeBlobUrl:function g(e,t){var i=window.URL||window.webkitURL;var n=$.os.ios&&(o.utils.versionCompare($.os.version,7,"<")||$.browser.chromeMobile);if(i&&!n){t(i.createObjectURL(e))}else{a.onloadend=function(){t(a.result)};var a=new window.FileReader;a.readAsDataURL(e)}},_getGeoPlacemarks:function v(e,t){if(t&&t.errorCb){t.errorCb({code:4})}},_redirectToNativeApp:function b(){if($.os.desktop||n.getSetting("redirectDone")){n.setSetting("redirectDone",false);return}var e=window.location.hash.substr(1);var t=new RegExp("^Configure\\?/?");var i=t.test(e)?e:"Configure?page="+encodeURIComponent(e);if($.os.ios){n.setSetting("redirectDone",true);window.setTimeout(function(){window.location.reload()},5e3);window.location=o.config.deepLinkingSchemePrefix+":///"+i}else{var a="intent://"+i+"#Intent;scheme="+o.config.deepLinkingSchemePrefix+";end";$("<iframe />").attr("src",a).attr("style","display:none;").appendTo("body")}},_registerForPushNotifications:function x(){},_sendLocalNotification:function y(e){}}},function(e,t){(function(t){var i={inProgress:{read:"LBL_LOADING",update:"LBL_SAVING",create:"LBL_SAVING","delete":"LBL_DELETING",unlink:"LBL_UNLINKING",backgroundFetch:"LBL_OFFLINE_SERVER_FETCH"},finished:{update:"LBL_SAVED",create:"LBL_SAVED","delete":"LBL_DELETED",unlink:"LBL_UNLINKED"}};var n="DATA_SYNCING";var a={requestsInProgress:null,init:function o(){this._subscribeSyncEvents();t.events.on("data:sync:error data:sync:abort",this.onSyncError,this)},_subscribeSyncEvents:function r(){t.events.on("data:sync:start",this.onSyncStart,this).on("data:sync:success",this.onSyncSuccess,this)},_unsubscribeSyncEvents:function s(){t.events.off("data:sync:start data:sync:success",null,this)},onSyncStart:function l(e,t,i){i=i||{};if(!this._shouldShowAlert(e,t,i)){return}this.showSyncAlert(e,t,i);this.requestsInProgress++},onSyncSuccess:function c(e,t,i){i=i||{};if(!this._shouldShowAlert(e,t,i)){return}if(this.requestsInProgress){this.requestsInProgress--}if(!this.requestsInProgress){i.requestFinished=true;this.showSyncAlert(e,t,i)}},onSyncError:function d(){if(this.requestsInProgress){this.requestsInProgress--}this.hideSyncAlert()},pause:function u(e,t,i){i=i||{};this._unsubscribeSyncEvents();this.onSyncStart(e,t,i)},resume:function f(e,t,i,n){n=n||{};this._subscribeSyncEvents();if(!i){this.onSyncSuccess(e,t,n)}},showSyncAlert:function h(e,n,a){var o=a.requestFinished;var r=o?"finished":"inProgress";var s;if(o){this.hideSyncAlert()}else{if(!this._overlayDisabled(e,n,a)){this.showOverlay()}}if(e==="delete"&&a.relate){e="unlink"}if(a.backgroundFetch){e="backgroundFetch"}s=t.lang.get(i[r][e]);if(s){this._showAlert(s,o)}},_shouldShowAlert:function p(e,t,i){return!(i.backgroundSync||this.isOfflineRead(e,t,i)||this._isSuccessAlertCurrentlyShowing())},_showAlert:function m(e,i){var a=this.getAlertOptions(e,i);t.alert.show(n,a)},getAlertOptions:function g(e,t){var i={level:"success",autoClose:true,messages:e};if(!t){_.extend(i,{level:"load",closeable:false,autoClose:false})}return i},hideSyncAlert:function v(){this.hideOverlay();if(!this._isSuccessAlertCurrentlyShowing()){t.alert.dismiss(n)}},_overlayDisabled:function b(e,i,n){return n.backgroundFetch||e==="read"&&i instanceof t.BeanCollection},showOverlay:function x(){t.overlay.show("data:sync",{spinner:false})},hideOverlay:function y(){t.overlay.hide("data:sync")},isOfflineRead:function E(e,i,n){return t.offlineEnabled&&e==="read"&&!n.backgroundFetch&&!i.offlineReadDisabled},_isSuccessAlertCurrentlyShowing:function L(){var e=t.alert.get(n)||{};return e.level==="success"}};t.augment("syncAlertManager",a);e.exports=a})(SUGAR.App)},function(e,t){"use strict";var i=SUGAR.App;var n=Backbone.History.extend({_initialized:false,start:function a(){var e=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];e.silent=true;Backbone.History.prototype.start.call(i.navigation.history,e);window.removeEventListener("popstate",this.checkUrl,false);window.removeEventListener("hashchange",this.checkUrl,false);if(!this._initialized){$(window).on("popstate",_.bind(this._handleBrowserNavigation,this));this._initialized=true}this.clear();i.controller.navigate(window.location.hash)},stop:function o(){this.clear();Backbone.History.prototype.stop.apply(this,arguments)},navigate:function r(e){var t=void 0;this._previous=this._current;if(e.back){this.pop();t=this._current.url}else{var i=this.getPrevStep();t=e.url;if(this._current&&!e.replaceCurrent){this._steps.push(this._current)}else if(i&&i.url===t){this._steps.pop()}this._current=_.omit(e,"replaceCurrent")}if(!e.updateUrlOnly){this._logRouteChange();this.loadUrl(t)}this._syncBrowserHistory()},getSteps:function s(){return this._steps},getCurrentStep:function l(){return this._current},getPrevStep:function c(){var e=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var t=e.includeSkipped;return t?this._previous:_.last(this._steps)},getCurrentUrl:function d(){return this._current?this._current.url:""},getStepById:function u(e){return _.findWhere(this._steps,{id:e})},clear:function f(){this._steps=[];this._current=this._previous=null},pop:function h(){if(this._steps.length!==0){this._current=this._steps.pop()}return this._current},getLength:function p(){return this._steps.length+1},go:function m(){},_handleBrowserNavigation:function g(e){var t=e.state;var n=window.location.hash;this._syncBrowserHistory();if(t){i.controller.handleBackButton()}else{i.controller.navigate(n)}},_syncBrowserHistory:function v(){var e=window.history;var t=window.location.hash;var i=this._steps;var n=i.length>1?i[i.length-2]:this._current;var a=n?n.url:t;var o=this._current?this._current.url:t;e.pushState({back:true},"",a);e.pushState({back:false},"",o)},_logRouteChange:function b(){var e=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var t=e.stepDef;var n=e.options;var a="";if(t){a+='Route changed to "'+t.name+'"'}if(n){a+=" step options: "+JSON.stringify(n)}if(a){i.logger.debug(a)}}});e.exports=n},function(e,t,i){"use strict";var n=SUGAR.App;var a=i(268);var o=i(269);var r=i(270).stepTypes;var s=true;e.exports={started:false,loadScreenError:{NO_DASHBOARDS_MODULE:1,NO_DASHBOARD:2,NO_DASHLET:3,NO_MODULE:4,NO_CREATE_ACCESS:5,NO_OFFLINE_MODE:6,NEED_LOGIN:7,CONVERT_ROUTE_HAPPENED:8,CONVERT_ROUTE_ERROR:9,NEED_APP_SYNC:10,UNKNOWN_STEP:11},_contextList:null,_contextRec:null,_stepsBlackList:null,_history:null,_seedId:0,init:function l(){o.init();this._history=n.navigation.history;this._stepsBlackList=[];this.started=true},navigate:function c(e){e.url=this._adjustUrl(e.url);if(!e.initiator){e.initiator=a.GENERIC}if(e.initiator===a.CONFIGURE){s=true}if(e.url===null){this._navigateByParams(e)}else{this._navigateByUrl(e)}},refresh:function d(){var e=this._history.getCurrentStep();var t=e?e.url:window.location.hash;n.controller.navigate(t)},forbidStep:function u(e){if(!_.contains(this._stepsBlackList,e.modelId)){this._stepsBlackList.push(e.modelId)}},getRoutes:function f(){return o.getRoutes()},getHistoryLength:function h(){return this._history.getLength()},hasStepChanged:function p(){var e=this._history.getPrevStep({includeSkipped:true});var t=this._history.getCurrentStep();return e&&e.stepDef.name!==t.stepDef.name},_isStepAvailable:function m(e){return!_.any(this._stepsBlackList,function(t){return e.url.indexOf(t)!==-1})},_getUpStepParams:function g(e){var t=e.stepDef;var i=this._history.getCurrentStep();var n=e.initiator;var o=void 0;if(!i){return null}o=e.replaceCurrent?i.upParentId:i.id;this._syncContextRefs(t,e);if(n===a.UP){o=e.upParentId}else if(_.contains([a.LIST,a.DASHLET_LIST],n)){if(this._isDetailOrActionStep(t)){o=this._contextList}}else if(n===a.SAVE){if(this._isDetailOrActionStep(t)&&!this._isQuickCreateRelated(i.stepDef)){o=this._contextList}}else if(n===a.DASHBOARD){if(_.contains(["home-dashboard-dashlet","record-dashboard-dashlet"],i.stepDef.name)){o=this._contextRec}}return{upParentId:o,contextList:this._contextList,contextRec:this._contextRec}},_syncContextRefs:function v(e,t){var i=this._history.getCurrentStep();var n=t.initiator;if(n===a.UP||n===a.BACK){if(t.contextList){this._contextList=t.contextList}if(t.contextRec){this._contextRec=t.contextRec}}else{if(this._isListStep(i.stepDef,n)){this._contextList=i.id}else if(i.stepDef.name==="home-dashboard"||this._isDetailStep(i.stepDef)&&e.name==="record-dashboard-dashlet"){this._contextRec=i.id}}},_isQuickCreateRelated:function b(e){var t=this._history.getPrevStep();return t&&this._isDetailStep(t.stepDef)&&e.name==="relationships-create"},_isListStep:function x(e,t){if(_.contains(["home-dashboard-dashlet","record-dashboard-dashlet","double-dashboard"],e.name)){return t===a.DASHLET_LIST}else{return e.stepType===r.LIST}},_isDetailOrActionStep:function y(e){return this._isDetailStep(e)||this._isActionStep(e)},_isDetailStep:function E(e){return e.stepType===r.DETAIL},_isActionStep:function L(e){return e.stepType===r.ACTION},_getContextUpStep:function S(){return this._history.getStepById(this._history.getCurrentStep().upParentId)},_getDefaultUpStep:function w(e,t){e=e||this._history.getCurrentStep().stepDef;var i=e.getMappedUpOptions(t||n.controller.getScreenContext());var a=e.getUpStep();var o=void 0;if(a){o={url:a.buildUrlFromTemplate(i),stepDef:a,screenOptions:i}}return o},_getUrlInfo:function A(e){var t=e.substr(1);var i=o.findStepByUrl(t);var n=void 0;if(i){var a=i.url.regexp.exec(t).slice(1);n=i.getScreenOptions.apply(this,a)}else{i={unknown:true}}return{url:e,stepDef:i,screenOptions:n}},_navigate:function R(e){var t=_.extend({},e,{id:++this._seedId,replaceCurrent:!this._shouldTrackCurrentStep(e.url)});var i=this._getUpStepParams(t);_.extend(t,i);this._history.navigate(t)},_shouldTrackCurrentStep:function C(e){var t=this._history.getCurrentStep();return t&&!t.updateUrlOnly&&!t.stepDef.skipTrack&&t.url!==e},_navigateByUrl:function T(e){var t=this;_.extend(e,this._getUrlInfo(e.url));var i=this.checkNavigationAllowed(e);if(i.errorType){this.onNavigationAbort(i,e)}else{this.checkNavigationCancelled(e,function(i){if(e.callback){e.callback(i)}if(!i.cancel){t._navigate(e)}})}},onNavigationAbort:function I(e,t){var i=e.errorType===this.loadScreenError.NEED_LOGIN;var o=n.api.isAuthenticated();if(t.callback){t.callback({cancel:true})}if(i||o){this._navigateByParams({error:e,originalParams:t,initiator:a.ERROR_LOAD_SCREEN,stepDef:t.stepDef})}if(i||!o){t.updateUrlOnly=true;this._navigate(t)}},_navigateByParams:function k(e){switch(e.initiator){case a.BACK:this._handleBackNavigation(e);break;case a.UP:this._handleUpNavigation(e);break;case a.HOME:this._handleHomeNavigation();break;case a.SAVE:this._handleSaveNavigation(e);break;case a.RELATE:this._handleRelateNavigation(e);break;case a.DELETE:this._handleDeleteNavigation(e);break;case a.ERROR_LOAD_SCREEN:this._handleLoadScreenError(e);break}},_handleBackNavigation:function O(){var e=this;var t=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var i=void 0;while(!i&&this._history.getLength()!==1){i=this._history.getPrevStep();if(!this._canGoBack(i)){i=null;this._history.pop()}}this.checkNavigationCancelled(t,function(n){if(t.callback){t.callback(n)}if(!n.cancel){if(e._history.getLength()===1){e.exitApp()}else{i.initiator=a.BACK;e._syncContextRefs(i.stepDef,i);e._history.navigate({back:true})}}})},_handleUpNavigation:function D(e){var t=this._history.getSteps();var i=void 0;var o=void 0;var r=void 0;if(this._history.getCurrentStep()){i=this._getContextUpStep()||this._getDefaultUpStep()}while(i&&!o){var s=i&&this._isStepAvailable(i);if(s){o=i}else{r=this._history.getStepById(i.upParentId);if(r){i=r;t.length=_.indexOf(t,i)}else{i=this._getDefaultUpStep(i.stepDef,i.screenOptions)}}}if(o){e=_.extend({},e,o);e.initiator=a.UP;this.navigate(e)}else{n.controller.navigateToDefaultView()}},_handleHomeNavigation:function N(){var e=void 0;var t=void 0;var i=void 0;if(n.supportedFeatures.settingsDefaultView){if(n.supportedFeatures.dashboards){n.nomad.dashboards.verifyDefaultView()}e=n.loginManager.getSetting("default_view")||n.config.defaultViewScheme;t=e.split(":");if(t[0]==="Modules"){if(_.contains(n.metadata.getModuleNames(),t[1])){t.shift()}else{n.nomad.removeSetting("default_view");t=[]}}i=t.join("/")}this.navigate({url:i||n.nomad.DEFAULT_ROUTE})},_handleSaveNavigation:function B(e){var t=e.initiator;var i=e.contextOptions;var a=i.module;var o=i.modelId;var r=i.parentModule;var s=i.parentModelId;var l=i.isCreate;var c=n.controller.getScreenContext().link;var d=n.controller.getScreenContextRoot();var u=void 0;if(l){u=d?d+"/":"";u+=c?n.nomad.buildLinkRoute(r,s,c,o):n.router.buildRoute(a,o);this.navigate({url:u,initiator:t})}else{this._handleUpNavigation()}},_handleRelateNavigation:function F(e){this._handleUpNavigation(e)},_handleDeleteNavigation:function U(e){this._stepsBlackList.push(e.contextOptions.modelId);this._handleUpNavigation()},_handleLoadScreenError:function M(e){var t=this.loadScreenError;switch(e.error.errorType){case t.NO_DASHLET:this._handleUpNavigation();break;case t.UNKNOWN_STEP:case t.NO_MODULE:var i=this._history.getCurrentStep()&&n.api.isAuthenticated()&&e.originalParams.initiator!==a.CONFIGURE;if(i){var o=e.originalParams.url.substring(1);this.showBackToSugarPage(o)}else{n.controller.navigateToDefaultView()}break;case t.NO_CREATE_ACCESS:this._loadErrorScreen({errorCode:403});break;case t.NO_DASHBOARDS_MODULE:case t.NO_DASHBOARD:case t.NO_OFFLINE_MODE:n.controller.navigateToDefaultView();break;case t.CONVERT_ROUTE_HAPPENED:n.controller.navigate({url:e.error.redirectUrl});break;case t.CONVERT_ROUTE_ERROR:this.showBackToSugarPage(e.error.redirectUrl);break;case t.NEED_APP_SYNC:n.nomad.syncApp();break;case t.NEED_LOGIN:n.router.login();break}},checkNavigationAllowed:function P(e){var t={};if(e.stepDef.isUnsecure||_.contains(n.config.unsecureRoutes,e.url)){return t}if(!n.api.isAuthenticated()){t.errorType=this.loadScreenError.NEED_LOGIN;return t}if(s&&!e.stepDef.isCustomStep){t=this._checkUrlOnFirstStart(e.url)}if(t.errorType){return t}if(e.stepDef.unknown){t.errorType=this.loadScreenError.UNKNOWN_STEP;return t}if(n.api.isAuthenticated()&&!n.isSynced){t.errorType=this.loadScreenError.NEED_APP_SYNC;return t}return this._checkCanLoadScreen(e.screenOptions)},_checkUrlOnFirstStart:function G(e){var t={};e=e.replace("#","");s=false;n.logger.debug("PARSING ROUTE ON STARTUP FOR DETECTING SUGAR ROUTE");if(e){var i=n.routing.utils.convertExternalRoute(e);if(i!==e){if(_.isString(i)){t.errorType=this.loadScreenError.CONVERT_ROUTE_HAPPENED;t.redirectUrl=i}else{t.errorType=this.loadScreenError.CONVERT_ROUTE_ERROR;t.redirectUrl=e}}}return t},_checkCanLoadScreen:function V(e){var t=n.data.getRelatedModule(e.parentModule,e.link);var i=e.module||t||e.parentModule;var a=this.loadScreenError;var o=void 0;var r=void 0;if(e.dashboardId||e.root==="Dashboards"){if(!n.supportedFeatures.dashboards){r=a.NO_DASHBOARDS_MODULE}else{o=n.nomad.dashboards.getDashboard(e.dashboardId);if(!o){r=a.NO_DASHBOARD}else if(e.dashletId&&!n.nomad.dashboards.isDashletAvailable(e.dashboardId,e.dashletId)){r=a.NO_DASHLET}}}else if(!this._canLoadModuleScreen(e)){r=a.NO_MODULE}else if(!n.offlineEnabled&&(e.root==="Offline"||e.module==="TxLog")){r=a.NO_OFFLINE_MODE}else if(!_.contains(n.config.nonAclModules,i)){if(e.action==="create"&&!n.nomad.canCreateModule(i)||!n.acl.hasAccess("access",i)){r=a.NO_CREATE_ACCESS}}return{errorType:r}},_canLoadModuleScreen:function $(e){var t=e.module;var i=e.parentModule;var a=e.link;var o=n.metadata.getModuleNames({filter:"visible"});var r=_.union(o,n.config.constantlyVisibleViews);var s=[];if(t){s.push(t)}if(i){s.push(i)}if(i&&a){s.push(n.data.getRelatedModule(i,a))}return _.every(s,function(e){return _.contains(r,e)})},checkNavigationCancelled:function H(e,t){var i=_.compact(_.unique(n.controller.layoutManager.getLayouts()));var a=_.map(i,function(t){return function(i){t.onBeforeLeave({params:e,callback:function n(e){i(e&&e.cancel,e)}})}});async.parallel(a,function(e){t({cancel:e})})},_canGoBack:function z(e){return this._isStepAvailable(e)&&e.url!==this._history.getCurrentStep().url&&!this._checkCanLoadScreen(e.screenOptions).errorType},exitApp:function q(){n.logger.debug("Exiting Application");if(n.isNative&&navigator.app&&navigator.app.exitApp){navigator.app.exitApp()}},_loadErrorScreen:function W(e){n.controller.loadDynamic({layoutDef:{appendTo:"root",fullScreen:true,module:"Error",name:"error",create:true,cacheDisabled:true,backToSugar:true,code:e.errorCode,sugarRoute:e.sugarRoute}})},showBackToSugarPage:function Y(e){this._loadErrorScreen({errorCode:404,sugarRoute:e})},_adjustUrl:function K(e){if(_.isString(e)){if(e[0]!=="#"){e="#"+e}}else{e=null}return e}}},function(e,t){"use strict";var i={GENERIC:{},UP:{},BACK:{},BACK_BUTTON:{},HOME:{},SAVE:{},DELETE:{},RELATE:{},LIST:{},DASHBOARD:{},ACTIVITIES_LIST:{},DASHLET_LIST:{},ERROR_LOAD_SCREEN:{},CONFIGURE:{}};_.each(i,function(e,t){i[t].name=t});e.exports=i},function(e,t,i){"use strict";var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}();function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function");

}}var o=i(270).routes;var r=i(272);var s=SUGAR.App;var l=void 0;var c=function(){function e(t,i){a(this,e);var n=void 0;_.extend(this,_.pick(t,"name","skipTrack","isUnsecure","isCustomStep","stepType"));this.getScreenOptions=i.getScreenOptions;n=this._buildUrlTpl(i);this.url={tpl:n,regexp:Backbone.Router.prototype._routeToRegExp(n)}}n(e,[{key:"buildUrlFromTemplate",value:function t(e){var t=this.url.tpl.replace(/[\(\)]/g,"");_.each(e,function(e,i){t=t.replace(":"+i,e)});return t.replace(/^\/*|\/*$/g,"")}},{key:"checkUrlMatch",value:function i(e){return this.url.regexp.test(e)}},{key:"setUpNavigation",value:function o(e,t){if(e){this.up={name:e,mappedOptions:t}}}},{key:"getUpStep",value:function r(){return this.up?l.stepsHash[this.up.name]:null}},{key:"getMappedUpOptions",value:function s(e){var t=this.up&&this.up.mappedOptions;var i=void 0;if(_.isFunction(t)){i=t(e)}else if(t){i=this._mapParams(e,t)}else{i=e}return i}},{key:"_mapParams",value:function c(e,t){var i={};_.each(t,function(t,n){i[t]=e[n]});return i}},{key:"_buildUrlTpl",value:function d(e){var t="";var i=_.indexOf(e.steps,_.findWhere(e.steps,{name:this.name}));_.each(e.steps,function(e,n){var a=n===0;var o=e.url[0]==="(";if(i===-1||n<=i){t+=o||a?e.url:"/"+e.url}});return t}}]);return e}();l={_ready:false,routes:[],steps:[],stepsHash:{},init:function d(){if(this._ready){return}this.addRoutes(o,{upNavigationMap:r,isInternal:true});this._ready=true},findStepByUrl:function u(e){return _.find(this.steps,function(t){return t.checkUrlMatch(e)})},getRoutes:function f(){return this.routes},addRoutes:function h(e){var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var i=void 0;e=this._unifyRoutes(e);i=this._createRoutes(e,t);this._storeSteps(i.steps);this._storeRoutes(i.routes);this._prepareUpNavigation(t.upNavigationMap)},_unifyRoutes:function p(e){_.each(e,function(e){if(_.isString(e.steps)){e.steps=[{name:e.name,url:e.steps,skipTrack:e.skipTrack,isUnsecure:e.isUnsecure,stepType:e.stepType}];e.skipTrack=null}});return e},_createRoutes:function m(e){var t=this;var i=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var n=[];var a=[];var o=!i.isInternal;var r=function s(){return{}};_.each(e,function(e){if(!e.getScreenOptions){e.getScreenOptions=r}_.each(e.steps,function(t){t.isCustomStep=o;a.push(new c(t,e))});n.push({name:e.name,getScreenOptions:e.getScreenOptions,callback:t._createRouteCallback(e),route:_.last(a).url.tpl})});return{routes:n,steps:a}},_createRouteCallback:function g(e){if(e.handler){return function(){var t=e.getScreenOptions.apply(this,arguments);e.handler(t)}}else{return function(){var t=e.getScreenOptions.apply(this,arguments);s.controller.loadScreen(t)}}},_storeSteps:function v(e){var t=this;this.steps.unshift.apply(this.steps,e);this._validateSteps(this.steps);_.each(e,function(e){t.stepsHash[e.name]=e})},_storeRoutes:function b(e){var t=e.length-1;if(s.router){_.each(e,function(i,n){i=e[t-n];s.router.route(i.route,i.name,i.callback)})}else{this.routes.unshift.apply(this.routes,e);s.routing.setRoutes(this.routes)}},_prepareUpNavigation:function x(e){var t=this;var i=function n(e,i,a){if(i==="mappedOptions"){return}if(i){t.stepsHash[i].setUpNavigation(a,e.mappedOptions)}_.each(e,function(e,t){n(e,t,i)})};i(e,null,null)},_validateSteps:function y(e){var t=_.pluck(e,"name");var i=true;_.each(_.groupBy(t),function(e,t){if(e.length>1){i=false;s.logger.error('duplicate step name "'+t+'"')}});if(!i){throw new Error("Routes config is invalid")}}};e.exports=l},function(e,t,i){"use strict";var n=SUGAR.App;var a=i(271);var o={LIST:"LIST",DETAIL:"DETAIL",ACTION:"ACTION"};var r=[{name:"configure",steps:"Configure(/)(:serverUrl)(/)(:loginName)(/)(:pageUrl)(/)(:ssoOption)(/)(:showUrl)(/)(:useHttps)(/)",getScreenOptions:a.configure,skipTrack:true,isUnsecure:true,handler:function s(e){var t={serverUrl:e.serverUrl?decodeURIComponent(e.serverUrl):"",loginName:e.loginName?decodeURIComponent(e.loginName):"",pageUrl:e.pageUrl?decodeURIComponent(e.pageUrl):"#",ssoOption:e.ssoOption,showUrl:e.showUrl,useHttps:e.useHttps};n.nomad.configure(t)}},{name:"linked-list-dashboard",getScreenOptions:a.linkedListRecordDashboard,steps:":linkParentModule/:linkParentModelId/link/:moduleLink/:parentModelId/Dashboards/:dashboardId/:dashletId"},{name:"double-dashboard",getScreenOptions:a.twinDashboard,steps:"Dashboards/:parentDashboardId/:parentDashletId/:parentModule/:parentModelId/Dashboards/:dashboardId/:dashletId"},{name:"record-dashboard",getScreenOptions:a.recordDashboard,steps:[{name:"record-dashboard-dashlet",url:"(:root/):parentModule/:parentModelId/Dashboards/:dashboardId/:dashletId"},{name:"record-dashboard-detail",url:"(/:module)(/:modelId)",stepType:o.DETAIL},{name:"record-dashboard-action",url:"(/:action)",skipTrack:true}]},{name:"dashboard",getScreenOptions:a.dashboard,steps:[{name:"home-dashboard",url:"Dashboards/:dashboardId"},{name:"home-dashboard-dashlet",url:"(/:dashletId)"},{name:"home-dashboard-detail",url:"(/:module)(/:modelId)",stepType:o.DETAIL},{name:"home-dashboard-action",url:"(/:action)",skipTrack:true,stepType:o.ACTION}]},{name:"about",getScreenOptions:a.about,steps:"About",isUnsecure:true},{name:"settings",getScreenOptions:a.settings,steps:"Settings"},{name:"logout",handler:a.logout,steps:"logout(/?clear=:clear)",skipTrack:true},{name:"error-emulation",getScreenOptions:a.errorEmulation,steps:"ErrorEmulation"},{name:"offline",getScreenOptions:a.offline,steps:[{name:"offline",url:"Offline"},{name:"offline-list",url:"(/:module)"},{name:"offline-detail",url:"(/:modelId)"}]},{name:"record-createCall",getScreenOptions:a.createCall,steps:"createCall?direction=:direction&start_date=:start_date&duration_hours=:duration_hours&duration_minutes=:duration_minutes&status=:status",skipTrack:true},{name:"relationships-createCall",getScreenOptions:a.createRelatedCall,steps:":module/:id/link/:calls_link/createCall?direction=:direction&start_date=:start_date&duration_hours=:duration_hours&duration_minutes=:duration_minutes&status=:status&log_call=:log_call",skipTrack:true},{name:"relationships-list",getScreenOptions:a.relatedList,steps:":parentModule/:parentModelId/link/:link",stepType:o.LIST},{name:"relationships-create",getScreenOptions:a.createRelated,steps:":parentModule/:parentModelId/link/:link/create",skipTrack:true},{name:"relationships-associate",getScreenOptions:a.associate,steps:":parentModule/:parentModelId/link/:link/associate",skipTrack:true},{name:"relationships-action",getScreenOptions:a.relatedRecord,steps:[{name:"relationships-detail",url:":parentModule/:parentModelId/link/:link/:modelId",stepType:o.DETAIL},{name:"relationships-action",url:"(/:action)",skipTrack:true,stepType:o.ACTION}]},{name:"search-list",getScreenOptions:_.partial(a.list,"Search"),steps:"Search",stepType:o.LIST},{name:"search-create",getScreenOptions:_.partial(a.create,"Search"),steps:"Search/:module/create",skipTrack:true},{name:"search-record",getScreenOptions:_.partial(a.record,"Search"),steps:[{name:"search-record-detail",url:"Search/:module/:modelId",stepType:o.DETAIL},{name:"search-record-action",url:"(/:action)",skipTrack:true,stepType:o.ACTION}]},{name:"list",getScreenOptions:_.partial(a.list,""),steps:":module",stepType:o.LIST},{name:"list-create",getScreenOptions:_.partial(a.create,""),steps:":module/create",skipTrack:true},{name:"record",getScreenOptions:_.partial(a.record,""),steps:[{name:"record-detail",url:":module/:modelId",stepType:o.DETAIL},{name:"record-action",url:"(/:action)",skipTrack:true,stepType:o.ACTION}]},{name:"default-view",handler:a.defaultView,steps:"",skipTrack:true}];e.exports={routes:r,stepTypes:o}},function(e,t){"use strict";var i=SUGAR.App;e.exports={dashboard:function n(e,t,i,a,o){return{root:"Dashboards",dashboardId:e,dashletId:t,module:i,modelId:a,action:o}},recordDashboard:function a(e,t,i,n,o,r,s,l){return{root:e||"",parentModule:t,parentModelId:i,dashboardId:n,dashletId:o,module:r,modelId:s,action:l}},linkedListRecordDashboard:function o(e,t,n,a,r,s){return{linkParentModule:e,linkParentModelId:t,moduleLink:n,parentModule:i.data.getRelatedModule(e,n),parentModelId:a,dashboardId:r,dashletId:s}},twinDashboard:function r(e,t,i,n,a,o){return{root:"Dashboards",parentDashboardId:e,parentDashletId:t,parentModule:i,parentModelId:n,dashboardId:a,dashletId:o}},defaultView:function s(){i.controller.navigateToDefaultView()},list:function l(e,t){return{root:e,module:t}},record:function c(e,t,i,n){return{root:e,module:t,modelId:i,action:n}},create:function d(e,t){return{root:e,module:t,action:"create"}},relatedList:function u(e,t,i){return{link:i,parentModule:e,parentModelId:t}},relatedRecord:function f(e,t,i,n,a){return{link:i,parentModule:e,parentModelId:t,modelId:n,action:a}},associate:function h(e,t,i){return{link:i,parentModule:e,parentModelId:t,action:"associate"}},createRelated:function p(e,t,i){return{link:i,parentModule:e,parentModelId:t,action:"create"}},about:function _(){return{root:"About"}},logout:function m(e){i.activeComponents.closeAll();i.overlay.show("logout",{spinner:true,tint:true,label:"LBL_MOBILE_WAIT"});i.loginManager.handleLogoutRoute(e)},settings:function g(){return{root:"Settings"}},offline:function v(e,t){return{root:"Offline",module:e,modelId:t}},errorEmulation:function b(){return{root:"ErrorEmulation"}},createCall:function x(e,t,i,n,a){return{module:"Calls",action:"createCall",callData:{direction:e,startDate:t,durationHours:i,durationMinutes:n,status:a}}},createRelatedCall:function y(e,t,i,n,a,o,r,s,l){return{parentModule:e,parentModelId:t,action:"createCall",link:i,callData:{direction:n,startDate:a,durationHours:o,durationMinutes:r,status:s,logCall:l}}},configure:function E(e,t,i,n,a,o){return{serverUrl:e,loginName:t,pageUrl:i,ssoOption:n,showUrl:a,useHttps:o}}}},function(e,t){"use strict";e.exports={about:{},settings:{},logout:{},"error-emulation":{},offline:{"offline-list":{"offline-detail":{}}},list:{"home-dashboard":{"home-dashboard-dashlet":{"home-dashboard-detail":{"home-dashboard-action":{}}},"double-dashboard":{mappedOptions:{parentDashboardId:"dashboardId",parentDashletId:"dashletId"}}},"list-create":{},"record-detail":{"record-action":{},"relationships-list":{"relationships-create":{},"relationships-detail":{"linked-list-dashboard":{mappedOptions:{linkParentModule:"parentModule",linkParentModelId:"parentModelId",moduleLink:"link",parentModelId:"modelId"}},"relationships-createCall":{},"relationships-action":{}},mappedOptions:{parentModelId:"modelId",parentModule:"module"}},"record-dashboard-dashlet":{"record-dashboard-detail":{"record-dashboard-action":{}},mappedOptions:{parentModule:"module",parentModelId:"modelId"}},"relationships-associate":{mappedOptions:{parentModelId:"modelId",parentModule:"module"}},"record-createCall":{}}},"search-list":{"search-create":{},"search-record-detail":{"search-record-action":{}}},"default-view":{}}},function(e,t,i){var n=SUGAR.App;var a=[];var o={registerBuddySteps:function(){var e=n.context.getContext({create:true}).prepare();a=[{id:"localSecurity",controller:i(274),layoutDef:{name:"touchIdSetup",appendTo:"root",meta:{components:[{view:"TouchIdSetup"}]},context:e}}]},isSetupBuddySupported:function(){return!n.config.skipSetupBuddy},isSetupBuddyItemCompleted:function(e){return this._isStepCompleted(e)},resetPref:function(){n.loginManager.removeSetting("setupBuddy")},show:function(e){this.registerBuddySteps();this._setupBuddyCompleteCallback=e;if(this.isSetupBuddySupported()){this._performSetupBuddy();return}this._setupBuddyCompleteCallback()},_performSetupBuddy:function(){this.currentStepIndex=this.currentStepIndex||0;while(this.currentStepIndex<a.length){var e=a[this.currentStepIndex];if(e&&!this._isStepCompleted(e.id)&&e.controller.isStepNeeded()&&e.controller.canPerformStep()){this._showSetupBuddyView(e);break}if(e&&!e.controller.isStepNeeded()){this._setStepCompleted(e)}this.currentStepIndex++}if(this.currentStepIndex>=a.length){this._setupBuddyCompleteCallback()}},setupStepCompleted:function(){var e=a[this.currentStepIndex];if(e){this._setStepCompleted(e.id)}this.currentStepIndex++;this._performSetupBuddy()},_showSetupBuddyView:function(e){var t=n.controller.layoutManager.getRootLayout();var i=t&&t.name===e.layoutDef.name;if(!i){n.controller.loadDynamic({layoutDef:e.layoutDef})}},_cleanUp:function(){_.each(a,function(e){e.controller.cleanupStep()})},_getPrefs:function(){var e=n.loginManager.getSetting("setupBuddy")||{};e.viewed=e.viewed||{};return e},_isStepCompleted:function(e){var t=this._getPrefs()||{};return t.viewed[e]},_setStepCompleted:function(e){var t=this._getPrefs();t.viewed[e]=true;n.loginManager.setSetting("setupBuddy",t)}};e.exports=o},function(e,t,i){"use strict";var n=SUGAR.App;var a=i(258);var o={kTouchIdForLogin:1,kPasskey:2,kTouchIdForPasskey:4,kTouchIdEnabledKey:"touchIdEnabled",isTouchIdAuthenticationSupported:function r(){var e=n.clientInfo.device;var t=e.touchIdSupported&&n.config.localSecurity.enabled;if(n.isSynced){t=t&&n.config.localSecurity.touchIdForLoginEnabled&&n.supportedFeatures.localSecurityServerSupport&&!n.loginManager.getSetting("isSSO")}return t},isPasskeyAuthenticationSupported:function s(){return n.supportedFeatures.localSecurityServerSupport&&n.isNative&&n.config.localSecurity.enabled&&n.config.localSecurity.passkeyEnabled},isTouchIdForLoginSetup:function l(){return this.isTouchIdAuthenticationSupported()&&Boolean(n.nomad.getSetting(this.kTouchIdEnabledKey))},isTouchIdEnrolled:function c(e){this._isTouchIdEnrolled(e)},storeCredentials:function d(e,t){this._storeCredentials(e,t);n.nomad.setSetting(this.kTouchIdEnabledKey,true)},resetCredentials:function u(){this._resetCredentials();n.nomad.setSetting(this.kTouchIdEnabledKey,false)},toggleTouchIdOnLogin:function f(){var e=arguments.length<=0||arguments[0]===undefined?true:arguments[0];this._touchIdDisabledOnLogin=!e},isTouchIdEnabledOnLogin:function h(){return this.isTouchIdForLoginSetup()&&!this._touchIdDisabledOnLogin},performTouchId:function p(e,t){this._performTouchId(e,t)},isStepNeeded:function m(){return!this.isTouchIdForLoginSetup()},canPerformStep:function g(){return Boolean(this.getTempCredential())},cleanupStep:function v(){this.resetTempCredential()},setTempCredential:function b(e){this._tempTouchIdCredential=e},getTempCredential:function x(){return this._tempTouchIdCredential},resetTempCredential:function y(){this._tempTouchIdCredential=null},moveTempCredentialsToStorage:function E(){var e=n.loginManager.getSetting("loginName");this.storeCredentials(e,this._tempTouchIdCredential);this.resetTempCredential()},processConfig:function L(){var e=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];var t={};if(e.mobile&&n.config.localSecurity.enabled&&n.isNative&&$.os.ios){var i=e.mobile.localSecurityMask;if(_.isNumber(i)){var a=n.config.localSecurity;t.localSecurity=_.extend({},a,{touchIdForLoginEnabled:Boolean(i&this.kTouchIdForLogin),passkeyEnabled:Boolean(i&this.kPasskey),touchIdForPasskeyEnabled:Boolean(i&this.kTouchIdForPasskey)});if(a.touchIdForLoginEnabled!==t.localSecurity.touchIdForLoginEnabled){this.resetCredentials()}}}return t},performTouchIdSetup:function S(e){var t=this;async.series([function(e){t.isTouchIdEnrolled(function(t){if(t){var i=n.lang.get("LBL_TOUCH_ID_DISCLAIMER",null,{brandName:n.config.brandName})+n.lang.get("LBL_TOUCH_ID_ENABLE_CONFIRM_MSG");a.showConfirm(i,{callback:function o(t){e(t!==2)},title:n.lang.get("LBL_ENABLE_TOUCHID")})}else{a.showAlert(n.lang.get("LBL_TOUCH_ID_NOT_ENROLLED_MSG",null,{brandName:n.config.brandName}),{title:n.lang.get("LBL_SETUP_TOUCHID")});e(true)}})},function(e){var i={title:"",buttonLabels:[n.lang.get("LBL_CANCEL_BUTTON_LABEL"),n.lang.get("LBL_ENABLE")],defaultText:n.lang.get("LBL_LOGIN_PASSWORD"),inputStyle:3};var o=void 0;var r="wait_to_verify_password";async.retry(n.config.localSecurity.maxAllowedPasswordAttempt,function(e){var s=(o?n.lang.get("ERR_MOBILE_INVALID_PASSWORD")+"\n\n":"")+n.lang.get("LBL_TOUCH_ID_ENTER_PASSWORD_TITLE",null,{brandName:n.config.brandName});n.overlay.show(r);a.showPrompt(s,_.extend({},i,{callback:function l(i){var a=i.buttonIndex;if(a===2){(function(){var a=i.input1;n.alert.show(r,{level:"info",messages:n.lang.get("LBL_MOBILE_WAIT"),autoClose:false,closable:false});t._verifyPasswordForTouchId(a,function(i,s){o=!i;var l=void 0;var c=!i;if(i){t.setTempCredential(a)}else if(s){c=false;l=true}n.alert.dismiss(r);n.overlay.hide(r);e(c,l)})})()}else{n.overlay.hide(r);e(false,true)}}}))},function(t,i){if(t){n.router.logout(true)}e(t||i)})}],function(t){e(!t)})},_verifyPasswordForTouchId:function w(e,t){n.alert.dismissAll("error");n.api.verifyPassword(e,{error:function i(e){n.error.handleHttpError(e,null,{params:{skipOfflineRead:true}});t(false,e)},success:function a(e){if(e.valid){t(true)}else{n.alert.show("auth_error",{level:"error",messages:n.lang.get("ERR_MOBILE_INVALID_PASSWORD"),autoClose:true});t(false)}}})}};if(true){_.extend(o,i(275))}else{_.extend(o,require("%app.js%/native/local-security.es6"))}e.exports=o},function(e,t){"use strict";e.exports={_isTouchIdEnrolled:function i(e){e(false)},_performTouchId:function n(e,t){},_storeCredentials:function a(e,t){},_resetCredentials:function o(){}}},function(e,t,i){(function(e){var t=i(258);_.extend(e.nomad,{recordsPreloaderPromptKey:"preload_prompted",startRecordsPreloader:function(t){if(e.offlineEnabled&&e.config.offline.prefetch.enabled&&e.offline.storage.getMigrationSummary().storageRebuilt){e.logger.debug("Prefetching static modules");e.offline.syncManager.recordsPreloader.start({callback:function(i){if(i){t(i)}else{e.nomad.promptAndPreloadUserRecords(true,null,t)}}})}else{t()}},promptAndPreloadUserRecords:function(i,n,a){var o=this;var r=e.lang.get(i?"LBL_OFFLINE_PREFETCH_FIRST_PROMPT":"LBL_OFFLINE_PREFETCH_PROMPT");var s;if(i){s=[e.lang.get("LBL_LATER"),e.lang.get("LBL_YES")]}var l=n?"_preloadRelationships":"_preloadRecords";if(i){var c=this.getSetting(this.recordsPreloaderPromptKey);if(c){return a()}}t.showConfirm(r,{callback:function(t){o.setSetting(o.recordsPreloaderPromptKey,true);if(t===2){e.nomad.dismissAlerts();o[l](function(t){e.controller.clean();if(t){e.alert.show("prefetch_failed",{level:"error",messages:e.lang.get("LBL_OFFLINE_PREFETCH_ERROR"),autoClose:true,closable:true})}else{e.alert.show("prefetch_success",{level:"success",messages:e.lang.get("LBL_OFFLINE_PREFETCH_SUCCESS"),autoClose:true,closable:true})}if(a)a(t)})}else{if(a)a()}},buttonLabels:s})},_preloadRecords:function(t){var i=this._getModulesToPreload();var n=this._getPreloaderFilter();e.offline.syncManager.recordsPreloader.start({filter:n,callback:t,modules:i})},_preloadRelationships:function(t){var i=this._getPreloaderFilter();var n=this._getModulesToPreload();var a={};_.each(n,function(t,i){var n=this.getModuleRelationships(i);a[i]={maxThreshold:t,relationships:{}};_.each(n,function(t){if(t.rhs_key!=="id"&&e.offline.storage.getRelationshipType(t.name)!=="many-to-many"){a[i].relationships[t.rhs_module]=t}})},this);e.offline.syncManager.recordsPreloader.start({filter:i,callback:t,relatedModules:a})},_getPreloaderFilter:function(){var t=[{$favorite:"_this"},{$owner:"_this"}];if(e.supportedFeatures.followingPreloaderFilter){t.push({$following:"_this"})}return[{$or:t}]},_getModulesToPreload:function(){var t={};var i=_.filter(e.offline.utils.getOfflineModules(),function(t){return!e.config.offline.prefetch.staticModules[t]});_.each(i,function(i){var n=e.config.offline.prefetch.dynamicModules&&e.config.offline.prefetch.dynamicModules[i]?e.config.offline.prefetch.dynamicModules[i]:e.config.offline.prefetch.maxThreshold;n=n||100;t[i]=n});return t}})})(SUGAR.App)},function(e,t){(function(e){e.view.NomadLayoutManager=_.extend({_dynamicLayout:null,init:function(t){this.rootLayout={el:t.rootHolder,layoutRef:null};this.recordLayout={el:t.recordHolder,layoutRef:null};this.layoutCache=new e.nomad.hashmap;return this},loadStatic:function(t){var i=this._getLayoutDefs(t);this._beforeLoadStatic(t,i);var n=this._buildLayoutsFromDef(i,t);if(e.isTablet&&this.getRecordLayout()&&i.length===1){this._disposeLayout(this.getRecordLayout())}this._afterLoad(t);_.invoke(this.getLayouts(),"onAfterLayout");return n},loadDynamic:function(e){var t;if(e.layout){e.layouts=[e.layout];t=_.extend(this._getLayoutDefs(e)[0],{appendTo:e.appendTo,model:e.model,collection:e.collection,context:e.context})}else{t=e.layoutDef}_.defaults(t,{isDynamic:true,animateRender:true,appendTo:"record"});t.appendTo=t.appendTo==="record"?this._getRecordLayoutContainer():this.rootLayout;var i=this._buildLayoutsFromDef([t])[0];this._updateMainMenuVisibility();this._afterLoad.apply(this,arguments);return i},getLayouts:function(){var t=[];if(this.getRootLayout()){t.push(this.getRootLayout())}if(this.getRecordLayout()){t.push(this.getRecordLayout())}if(e.isTablet){return t}else{return t.length?[_.last(t)]:[]}},onAppPause:function(){e.activeComponents.closeAll();_.invoke(this.getLayouts(),"onAppPause")},onAppResume:function(){var t=(new Date).getTime()-e.nomad.timePaused;_.each(this.getLayouts(),function(i){if(t>e.config.refreshOnResumeTimeout&&i.name!=="edit"){i.context.resetLoadFlag();i.loadData()}i.onAppResume()})},_getRootLayoutDef:function(t){var i;if(_.isEmpty(t.layouts)){switch(t.root){case"Recents":case"Search":i={mixed:true,module:"Search",name:"list"};break;case"Offline":if(t.module==="TxLog"){i={module:"TxLog",name:"list"}}else{i={module:t.root,name:t.module?t.module:"offline",create:true};i.cacheDisabled=true}break;case"About":case"Settings":case"ErrorEmulation":case"Error":case"Login":i={module:t.root,name:t.root.toLowerCase(),create:true,cacheDisabled:true};if(t.root==="Error"){i.code=t.errorCode;i.backToSugar=t.backToSugar;i.sugarRoute=t.sugarRoute}break;default:if(t.root==="Dashboards"||t.dashboardId){i=this._getDashboardLayoutParams(t,true);if(!i){return null}}else if(t.link){i={name:"list",link:t.link,module:e.data.getRelatedModule(t.parentModule,t.link),parentModelId:t.parentModelId,parentModule:t.parentModule,subType:"relationships"}}else{i={module:t.module,name:"list"}}break}}else{i=t.layouts[0]}i.appendTo=this.rootLayout;return i},_getRecordLayoutDef:function(e){var t;var i=e.action;if(_.isEmpty(e.layouts)){if(e.module==="Dashboards"||!(e.modelId||e.dashboardId||i==="create"||i==="associate")){return null}if(e.link){if(i==="create"){t={link:e.link,parentModule:e.parentModule,parentModelId:e.parentModelId,create:true,name:"edit",layoutOptions:e.layoutOptions}}else if(i==="associate"){t={link:e.link,parentModule:e.parentModule,parentModelId:e.parentModelId,skipFetch:true,name:"list-selector",subType:"associate"}}else{t={link:e.link,parentModule:e.parentModule,parentModelId:e.parentModelId,modelId:e.modelId,name:i||"detail"}}}else{if(e.root==="Dashboards"||e.dashboardId){t=this._getDashboardLayoutParams(e,false);if(!t){return null}t.animateRender=false}else if(i==="create"){t={module:e.module,create:true,duplicate:e.dupe,name:"edit"}}else{t={module:e.module,modelId:e.modelId,name:i||"detail"}}}}else{if(e.layouts.length===2){t=e.layouts[1]}else{return null}}t.appendTo=this._getRecordLayoutContainer();if(_.isUndefined(t.animateRender)){t.animateRender=true}return t},_getLayoutDefs:function(t){var i;var n;var a=[];if(!_.isEmpty(t.layouts)){t.layouts=t.layouts.map(function(e){return{type:e,controller:e}})}i=this._getRootLayoutDef(t);if(i){a.push(i)}n=this._getRecordLayoutDef(t);if(n){a.push(n)}if(e.isTablet){return a}else{return[_.last(a)]}},_beforeLoadStatic:function(t,i){this.disposeDynamicLayout({disposeAll:true});e.activeComponents.closeAll();$(document.body).toggleClass("show-content-child",i.length===2);this._updateMainMenuVisibility()},_afterLoad:function(e){this._checkAlerts()},_updateMainMenuVisibility:function(){var t=e.nomad.mainMenu;var i=e.api.isAuthenticated();if(t){t.$el.toggle(i)}},_getLayout:function(t){var i=this._getLayoutCacheId(t);var n=this.layoutCache.get(i);if(!n){var a=t.context||this._getPreparedContext(t);return e.view.createLayout(_.extend(_.omit(t,"appendTo","controller"),{context:a,def:t}))}else{n.options.def=t;return n}},_attachLayout:function(t){var i=this;var n=t.options.def;var a=n.appendTo;var o=n.appendTo.layoutRef;function r(){if(o&&!e.isTablet&&$.os.android){o.$el.hide()}i._handleLayoutFullScreen(t,o);a.layoutRef=t;t.$el.show();$(a.el).append(t.$el);_.each([i.rootLayout,i.recordLayout],function(e){if(e!==t.getDefinition().appendTo&&e.layoutRef===t){e.layoutRef=null}});t.onAfterShow(n)}if(!o||o&&o!==t){if(t.getDefinition().animateRender){t.getOverlay$El().show()}r()}this._renderLayout(t);return o},_renderLayout:function(e){if(e.cached){e.renderFromCache({animation:{enabled:e.getDefinition().animateRender,preAnimationDelay:0,animationLength:200}})}else{e.render({animation:this._getFreshRenderAnimationOptions(e)})}},_getFreshRenderAnimationOptions:function(e){return{enabled:e.getDefinition().animateRender,preAnimationDelay:200,animationLength:200}},_cacheLayout:function(t){var i=t.options.def;var n=this._getLayoutCacheId(i);var a=this.layoutCache.get(n);if(!this._canCache(i)){return}if(a){this.layoutCache.remove(a);this.layoutCache.push(n,a)}else{t.cached=true;this.layoutCache.push(n,t)}if(this.layoutCache.count()>e.config.layoutCacheSize){var o=this.layoutCache.shift();this._disposeLayout(o,{hardDispose:true})}},_canCache:function(t){var i=t.cacheDisabled||t.isDynamic||t.name==="edit"&&t.create===true||_.contains(e.config.disableLayoutCache,t.subType);return!i},_disposeLayout:function(t,i){if(t.disposed===true){e.logger.debug("Trying to dispose already disposed layout "+t.name+".");return}i=i||{};t.onDetach();if(t.getDefinition().appendTo.layoutRef===t){t.getDefinition().appendTo.layoutRef=null}var n=this._dynamicLayout&&this._dynamicLayout.prevLayout===t;if((n||t.cached)&&!i.hardDispose){if(i.detachDelay){var a=this;_.delay(function(){if(!(_.contains(a.getLayouts(),t)||t.disposed)){t.$el.detach()}},i.detachDelay)}else{t.$el.detach()}}else{delete t.prevLayout;t.dispose()}},_getPreparedContext:function(t){var i=e.context.getContext(t);i.prepare();return i},_buildLayoutsFromDef:function(e,t){var i=[];var n=t&&t.propagatingData;_.each(e,function(e){var t=this._getLayout(e);var a=t.model;if(n&&n.id===a.id&&_.contains(["detail","edit"],t.type)){a.inSync=true;a.set(n);a.inSync=null}var o=this._attachLayout(t);this._cacheLayout(t);if(t.isDynamic()){if(o){o.cached=true;t.prevLayout=o}this._dynamicLayout=t}else{this._dynamicLayout=null}if(o&&o!==t){this._disposeLayout(o,{detachDelay:200})}i.push(t)},this);return i},getRecordLayout:function(){return this._getRecordLayoutContainer().layoutRef},getRootLayout:function(){return this.rootLayout.layoutRef},isDynamicLayoutLoaded:function(){return!!this._dynamicLayout},invalidateLayouts:function(e){this.layoutCache.iterate(function(t){var i;var n;var a;i=e[t.type];if(!i){return}a=_.isArray(i)?i:i.items;if(i.modules){n=_.contains(i.modules,t.module)}else if(i.modelIds){n=_.contains(i.modelIds,t.model.get("id"))}else if(a){_.each(a,function(e){n=e.module===t.module&&(!e.modelId||e.modelId===t.model.get("id"));return!n})}if(n){t.needLoadParams=i.loadParams||e.loadParams||true}})},disposeDynamicLayout:function(e){e=e||{};var t=this;function i(){if(e.disposeAll){return!!t._dynamicLayout}else{return false}}do{if(this._dynamicLayout){var n=this._dynamicLayout;var a=n.prevLayout;if(a){if(!e.skipAttachPrevious){this._attachLayout(a)}this._dynamicLayout=a.isDynamic()?a:null}else{this._dynamicLayout=null}this._disposeLayout(n,{hardDispose:true})}}while(i())},_getLayoutCacheId:function(t){if(t.controller){return t.controller.config.enableCache?t.controller._layoutId:e.utils.generateUUID()}else{var i=_.chain(t).omit(["child","appendTo","context","animateRender","dashletId"]).keys().sort().value();return JSON.stringify(_.pick(t,i))}},_getRecordLayoutContainer:function(){return e.isTablet?this.recordLayout:this.rootLayout},_checkAlerts:function(){var t=e.alert.getAll();_.each(t,function(t,i){if(!t.viewCounter)t.viewCounter=0;t.viewCounter++;if(t.viewCounter>=(e.config.maxAlertsPerLayout||2)){e.alert.dismiss(i)}})},_clean:function(e){var t=this;var i=function(e){function i(e,t){if(e.prevLayout===t){return true}else if(e.prevLayout){return i(e.prevLayout,t)}else{return false}}return t._dynamicLayout&&i(t._dynamicLayout,e)};if(e.disposeAll){this.disposeDynamicLayout({disposeAll:true});_.each(this.getLayouts(),function(e){if(e){this._disposeLayout(e,{hardDispose:true})}},this)}var n=[];this.layoutCache.iterate(function(e){if(this.getRootLayout()!==e&&this.getRecordLayout()!==e&&!i(e)){e.dispose();n.push(e)}else{if(_.isFunction(e.clean)){e.clean()}}},this);_.each(n,function(e){this.layoutCache.remove(e)},this)},_handleLayoutFullScreen:function(t,i){var n;var a;if(!e.isTablet){return}n="show-content-child";a=t.options.def.fullScreen&&this.getLayouts().length>1;if(a){$(document.body).removeClass(n);t._inFullScreen=true}else if(i&&i._inFullScreen){i._inFullScreen=false;$(document.body).addClass(n)}},_getDashboardLayoutParams:function(t,i){var n=!!t.modelId;var a=!!(t.parentModule&&t.parentModelId);var o;var r;var s;s={module:"Dashboards",name:"detail",dashletId:t.dashletId,dashboardId:t.dashboardId,parentModule:t.parentModule,parentModelId:t.parentModelId};if(a){if(t.parentDashboardId){o={name:"detail",module:"Dashboards",dashboardId:t.parentDashboardId,dashletId:t.parentDashletId}}else{o={name:"list",module:t.parentModule};if(t.linkParentModule){_.extend(o,{link:t.moduleLink,parentModule:t.linkParentModule,parentModelId:t.linkParentModelId,subType:"relationships"})}}}if(n){r={module:t.module,modelId:t.modelId,name:t.action||"detail"}}if(e.isTablet){if(n){return i?s:r}else{if(i){return a?o:s}else{return a?s:null}}}else{return i||t.root&&!n?s:r}}},Backbone.Events)})(SUGAR.App)},function(e,t){(function(e){var t={_callbacks:[],CLOSE_RECENT:"close-recent",CLOSE_ALL:"close-all",DYNAMIC_LAYOUT:"dynamic-layout",add:function(e,t,i){var n={componentId:e,closeCallback:t,context:i};this._callbacks.push(n)},remove:function(e,t,i){if(!e){this._callbacks=[];return}this._callbacks=_.reject(this._callbacks,function(n){return this._callbackMatches(n,e,t,i)},this)},close:function(e,t,i){this._callbacks=_.reject(this._callbacks,function(n){var a=this._callbackMatches(n,e,t,i);if(a){this._runCallback(n)}return a},this)},closeAll:function(){_.each(this._callbacks.slice(),function(e){this._runCallback(e,this.CLOSE_ALL)},this);this.clear()},hasActiveComponents:function(){return this._callbacks.length>0},clear:function(){this._callbacks=[]},closeRecent:function(){var e=this._callbacks.pop();if(e){this._runCallback(e,this.CLOSE_RECENT)}},_callbackMatches:function(e,t,i,n){var a=t===e.componentId;var o=!i||i===e.closeCallback;var r=!n||n===e.context;return a&&o&&r},_runCallback:function(e,t){var i=e.closeCallback;var n=e.context;n?i.call(n,t):i(t)},registerDynamicLayout:function(){e.activeComponents.add(this.DYNAMIC_LAYOUT,function(){e.controller.disposeDynamic({fromActiveComponents:true})},e.controller)},unregisterDynamicLayout:function(e){this.removeDynamicLayoutsCallbacks(e)},removeDynamicLayoutsCallbacks:function(e){function t(e){return e.componentId===this.DYNAMIC_LAYOUT}if(e&&e.disposeAll){this._callbacks=_.reject(this._callbacks,t,this)}else{var i=_.select(this._callbacks,t,this);var n=_.last(i);this._callbacks.splice(this._callbacks.indexOf(n),1)}}};e.augment("activeComponents",t,false)})(SUGAR.App)},function(e,t){(function(e){var t=e.data.sync;var i=e.data.createBeanCollection;var n=e.data.createMixedBeanCollection;_.extend(e.data,{sync:function(i,n,a){var o;var r;a.apiOptions=a.apiOptions||{};a.apiOptions.cid=n.cid;a.apiOptions.pageHash=e.navigation.history.getCurrentUrl();a.params=a.params||{};a.query=a.params.q;if(i==="read"){e.offlineEnabled&&(a.params.skipOfflineRead=n.offlineReadDisabled)}if(n instanceof e.BeanCollection&&a.query){o=n.orderBy;n.orderBy=null}if(n instanceof e.MixedBeanCollection&&!_.isEmpty(n.module_list)){delete a.fields}else if(this._isRecentsCollection(n)){a.module_list=e.metadata.getModuleNames({filter:"visible",
access:"list"});a.limit=a.max_num=e.config.fetchLimit.recents;delete a.fields}r=t.apply(this,arguments);if(o){n.orderBy=o}return r},_getMergedFields:function(t){return _.chain(t).map(function(t){return e.metadata.getModule(t).mergedFields}).flatten().uniq().value()},_isRecentsCollection:function(t){return t instanceof e.BeanCollection&&t.module==="Recents"},createBeanCollection:function(e,t,n){return this._createCollection(i,arguments)},createMixedBeanCollection:function(e){return this._createCollection(n,arguments)},_createCollection:function(e,t){var i=e.apply(this,t);i.cid=_.uniqueId("c");return i}})})(SUGAR.App)},function(e,t){(function(e){_.extend(e.Router.prototype,{login:function(){var t=e.controller.layoutManager.getRootLayout(),i=t&&t.name==="login";if(!i){e.controller.clean({disposeAll:true});e.controller.loadScreen({root:"Login"})}},logout:function(t){t=t==="1";e.logger.debug("Logging out: "+t);e.logout({complete:function(){e.controller.navigate("#");e.router.login()}},t)},navigate:function(t,i){e.controller.navigate(t,i)},go:function(e){},goBack:function(){e.controller.goBack()},refresh:function(){e.navigation.manager.refresh()},_routeHandler:function(t){var i=Array.prototype.slice.call(arguments,1),n=t.route;this._previousFragment=this._currentFragment;this._currentFragment=this.getFragment();t.apply(this,i);e.routing.after(n,i)},_addDefaultRoutes:function(){}});e.routing.utils={convertExternalRoute:function(t){if(_.isEmpty(t))return"";if(t==="logout"){return"logout"}if(t==="activities"){return"Activities"}var i=_.reduce(e.navigation.manager.getRoutes(),function(e,t){var i=t.route;if(_.isString(i)&&i.indexOf(":")===-1){e.push(i)}return e},[]);if(_.contains(i,t)){return t}var n=t.split("/"),a=n[0],o,r=["home","search","recents","dashboards"],s=_.contains(r,n[0].toLowerCase()),l=s?n[0]+"/":null;if(a==="bwc"){var c=n[1],d=c.split("?")[1],u=e.nomad.utils.parseQueryString(d);a=u["module"];if(!a)return"";var f=u["action"],h=u["record"];f=f.toLowerCase();if(f==="index"){o=[a]}else if(f==="detailview"&&!_.isEmpty(h)){o=[a,h]}else if(f==="editview"&&_.isEmpty(h)){if(u["parent_type"]&&u["parent_id"]){o=[u["parent_type"],u["parent_id"],"link",a.toLowerCase(),"create"]}else{o=[a,"create"]}}else{o=[a]}}else{o=n}var p=o.length;if(s){if(a==="Dashboards"){return t}else if(a==="Home"&&n.length===2){return t.replace("Home","Dashboards")}else{if(!o[1]||!_.contains(e.metadata.getModuleNames(),o[1])){return n[0].toLowerCase()==="home"?e.nomad.DEFAULT_ROUTE:n[0]}else{o.shift();a=o[0]}}}var m=o[1],g=o[2],v=o[3];function b(){var e=s?l:"";return e+_.toArray(arguments).join("/")}var x=e.metadata.getModule(a),y=(s?l:"")+o.join("/");if(s&&p===2||x&&(g==="Dashboards"||o[5]==="Dashboards")){return y}else if(a==="Offline"){var E=["TxLog","offlineStats","offlineSettings"];if(t===a||m==="TxLog"&&g||_.contains(E,m)&&o.length===2){return y}return false}else if(a==="Configure"||a.substring(0,10)==="createCall"){return y}else if(m==="offline"&&g==="TxLog"&&!_.isEmpty(v)){return y}else if(a==="error"){if(!m||m&&!g){return y}}else if(a){var L=["vcard-import","create"],S=m==="create";if(S){return b(a,"create")}else if(!_.isEmpty(m)&&!S){if(_.isEmpty(g)&&!_.contains(L,m)){return b(a,m)}else if(_.contains(["duplicate","edit"],g)&&(_.isEmpty(v)||_.isNumber(parseInt(v)))){return y}else if(g==="links"&&_.contains(["create","associate"],v)){return y}}var w=["vcard-import"];if(!_.isEmpty(m)&&_.contains(w,m)){return false}if(g==="link"){var A=o[4],R=o[5];if(!_.isEmpty(v)&&_.isEmpty(A)){return y}else if(v==="calls"&&A.split("?")[0]==="createCall"){return y}else if(A&&_.isEmpty(R)){return y}else if(A&&_.contains(["duplicate","edit"],R)){return y}else{return false}}return a}return false}}})(SUGAR.App)},function(e,t,i){var n=SUGAR.App;var a=i(268);var o=n.Controller.extend({_screenContext:{},_propagatingData:null,initialize:function(){n.plugins.attach(this,"view");this.context=n.context.getContext();if(n.isTouchCapable&&n.config.fastClickEnabled){window.FastClick.attach(document.body)}if(!_.isEmpty($.os)){$(document.body).addClass($.os.android?"android":"ios")}this.layoutManager=n.view.NomadLayoutManager.init({rootHolder:n.$contentEl,recordHolder:$("#content-child")});this._initializeNavigation();this._initializeOffline()},_duplicateRecord:function(e){var t=this,i=e.link,a;var o=this.layoutManager.loadStatic(_.extend(e,{dupe:true,action:"create"}));if(i){var r=n.data.createBean(e.parentModule,{id:e.parentModelId});a=n.data.createRelatedBean(r,e.modelId,i)}else{a=n.data.createBean(e.module,{id:e.modelId})}a.fetch({relate:!!e.link,complete:function(){var e=t.layoutManager.getRecordLayout();if(e){e.context.get("model").copy(a)}}});return o},_createCall:function(e){var t=e.callData,i=this.layoutManager.loadStatic(_.extend(e,{action:"create",layoutOptions:{isLoggingCall:t&&t.logCall}}));var a=this.layoutManager.getRecordLayout().getComponent("edit");var o=n.nomad.utils.minutesToQuarterHours(t.durationMinutes);var r=t.durationHours;if(o===60){r=t.durationHours+1;o=0}a.setCallData({direction:t.direction,date_start:t.startDate,duration_hours:String(r),duration_minutes:String(o),status:t.status});return i},loadDynamic:function(e){var t=this.layoutManager.loadDynamic(e);n.activeComponents.registerDynamicLayout();this._loadData([t]);this._afterLoad(e);return t},disposeDynamic:function(e){this.layoutManager.disposeDynamicLayout(e);n.activeComponents.unregisterDynamicLayout(e)},loadScreen:function(e){var t;this._beforeLoadStatic(e);if(e.action==="duplicate"){t=this._duplicateRecord(e)}else if(e.action==="createCall"){t=this._createCall(e)}else{if(this._propagatingData){e=_.extend({propagatingData:this._propagatingData},e)}t=this.layoutManager.loadStatic(e)}this._loadData(t);this._afterLoad(e)},getScreenContext:function(){return this._screenContext},getScreenContextRoot:function(){var e=this._screenContext.root;var t=this._screenContext;if(e==="Dashboards"){e=[e];if(t.parentDashboardId){e.push(t.parentDashboardId,t.parentDashletId)}else if(t.dashboardId){e.push(this._screenContext.dashboardId);t.dashletId&&e.push(t.dashletId)}e=e.join("/")}return e},onHeaderMenuClick:function(e){n.nomad.mainMenu.toggleMenu()},onHeaderCancelClick:function(e){n.controller.goUp()},onUserPictureChange:function(e){n.nomad.mainMenu._loadUserPicture(e.options.pictureId)},onAssociateViewSave:function(e){this._handleAfterLinkAction(e.options);n.controller.navigate({initiator:a.RELATE})},onEditViewSave:function(e){var t={};var i=e.options;var o=i.model;var r=i.parentModel;if(i.isCreate){t={list:{modules:[o.module,"Recents","Search"]}}}else{t={list:{modules:["Search"]},detail:{items:[{module:o.module,modelId:o.get("id")}],loadParams:{partialLoad:true}}}}this.layoutManager.invalidateLayouts(t);if(o.link){this._invalidateAfterLinkAction(o)}var s=n.navigation.history.getPrevStep();if(!n.acl.hasAccessToModel("view",o)){this.layoutManager.invalidateLayouts({detail:[{module:o.module,modelId:o.get("id")}]});this.navigateToDefaultView();return}else if(i.isCreate&&this._screenContext.link&&(!s||this._screenContext.parentModelId===s.screenOptions.modelId)){this._handleAfterLinkAction(i)}n.controller.navigate({contextOptions:{module:o&&o.module,modelId:o&&o.id,parentModule:r&&r.module,parentModelId:r&&r.id,isCreate:i.isCreate},initiator:a.SAVE})},_afterLoad:function(e){e=e||{};var t=e.layoutDef&&e.layoutDef.isDynamic?e:this._screenContext;n.trigger("app:view:change",_.clone(t))},_beforeLoadStatic:function(e){this._screenContext=this._createScreenContext(e);if(e.root==="Login"){n.navigation.history.clear()}this._propagatingData=null;var t=n.navigation.history.getCurrentStep();if(e.modelId&&!_.contains([a.UP,a.BACK,a.SAVE],t.initiator)){_.each(this.layoutManager.getLayouts(),function(t){var i=t?t.getDataById(e.modelId):null;if(i){this._propagatingData=i}},this)}},_createScreenContext:function(e){return n.utils.deepCopy(_.omit(e,"layouts"))},_loadData:function(e){_.each(e,function(e){var t=e.context.isDataFetched();var i=false;var o=n.navigation.history.getCurrentStep()||{};var r=!_.contains([a.UP,a.BACK],o.initiator);var s={};var l;if(!t||e.isDynamic()){i=true}else if(e.needLoadParams){if(_.isObject(e.needLoadParams)){s=e.needLoadParams}e.needLoadParams=null;s.backgroundSync=true;i=true}else{if(_.contains(["detail","edit"],e.type)){i=r}else if(e.type==="list"){if(n.config.forceListReload){i=true;l=n.offlineEnabled?{forceServerSync:true}:null}else{i=false}}}if(i){s.params=l;this._loadDataWithParams(e,s)}},this)},_loadDataWithParams:function(e,t){t.params=t.params||{};if(e.name==="detail"||e.name==="edit"){t.params.viewed=true}if(t.partialLoad){e.loadDataPartial(t)}else{e.context.resetLoadFlag();e.loadData(t)}},_initializeNavigation:function(){n.events.on("data:sync:success",function(e,t,i){var o={};var r=e==="delete";if(r){var s=this.layoutManager.getRootLayout(),l=_.without(["Recents"],s.module),c=s.context.get("parentModel"),d=s.context.get("parentModule");o={list:{modules:l}};if(t.link){this._invalidateAfterLinkAction(t)}if(!_.isEmpty(c)){this.layoutManager.invalidateLayouts({detail:[{modelId:c.id,module:d}]})}this.layoutManager.invalidateLayouts(o)}var u=this.layoutManager.getRecordLayout();if(r&&u&&u.model.id===t.id){n.controller.navigate({initiator:a.DELETE,contextOptions:{modelId:t.id}})}else{if(r){n.navigation.manager.forbidStep({modelId:t.id})}if(i.params.viewed&&this.getScreenContextRoot()!=="Recents"){this.layoutManager.invalidateLayouts({list:{modules:["Recents"]}})}}},this);n.events.on("data:sync:error",function(e,t,i,a){var o=this._screenContext;if(a&&n.error.isAccessError(a)&&o.action==="edit"&&o.modelId){n.navigation.manager.forbidStep({modelId:t.id})}},this)},_invalidateAfterLinkAction:function(e){var t={detail:[{modelId:e.link.bean.id,module:e.link.bean.module}]};this.layoutManager.invalidateLayouts(t)},_initializeOffline:function(){n.events.on("offline:data:updated",function(e){if(e.action==="delete"){this.layoutManager.invalidateLayouts({list:{modules:[e.module,"Recents"]}})}if(e.isCollection){var t=this.layoutManager.getRootLayout();if(t.type!=="list"||t.module!==e.module){this.layoutManager.invalidateLayouts({list:{modules:[e.module]}})}}},this)},_handleAfterLinkAction:function(e){var t=e.model;var i=e.parentModel;this.layoutManager.invalidateLayouts({list:{modules:[t.module,"Recents"]},detail:[{module:i.module,modelId:i.id}]})},clean:function(e){e=e||{};n.session.cutAll();n.activeComponents.closeAll();n.overlay.hideAll();if(e.disposeAll&&n.supportedFeatures.dashboards){n.nomad.dashboards.resetCollection()}this.layoutManager._clean(e)},navigate:function(e,t){if(e instanceof Handlebars.SafeString){e=e.toString()}t=_.isObject(e)?e:_.extend({url:e},t);if(document.activeElement){document.activeElement.blur()}if(!this._isHandledByDynamic(t)){n.navigation.manager.navigate(t)}},navigateToDefaultView:function(){n.controller.navigate({initiator:a.HOME})},goUp:function(e){e=e||{};e.initiator=a.UP;this.navigate(e)},go:function(){},goBack:function(e){e=e||{};e.initiator=a.BACK;this.navigate(e)},handleBackButton:function(e){e=e||{};e.initiator=a.BACK_BUTTON;this.navigate(e)},_isHandledByDynamic:function(e){var t=this.layoutManager.isDynamicLayoutLoaded();var i=n.activeComponents.hasActiveComponents();var o=n.navigation.manager.getHistoryLength()>1;var r=this.layoutManager.isDynamicLayoutLoaded()&&!this.layoutManager.layoutCache.isEmpty();var s=false;switch(e.initiator){case a.BACK:if(t){this.disposeDynamic();s=true}else if(i){n.activeComponents.closeAll()}break;case a.BACK_BUTTON:if(t){this.disposeDynamic();s=true}else if(i){n.activeComponents.closeRecent();s=true}e.initiator=a.BACK;break;case a.UP:if(t){this.disposeDynamic();s=true}break;default:if(t){this.disposeDynamic({skipAttachPrevious:true})}n.activeComponents.closeAll();break}if(t&&s&&!o&&!r){if(n.api.isAuthenticated()){n.navigation.manager.exitApp()}else{s=!_.isEmpty(n.controller.layoutManager.getLayouts())}}return s}});n.augment("NomadController",o,false);e.exports=o},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(258);var r=i(283);var s=i(274);var l=window.nomadAppEventHandlerContext={};var c=[];var d=function(e){var t=_.pluck(c,"module");var i=_.indexOf(t,e.module);if(i!==-1){c[i]=e}else{c.unshift(e)}};var u=0;function f(){if(!n.offlineEnabled){o.showAlert(n.lang.get("ERR_OFFLINE_START_FAILED_OUT_OF_SPACE"));return}var e=new Date-0;if(e-u<n.config.offline.cleanupConfirmationInterval){return}u=e;o.showConfirm(n.lang.get("ERR_OFFLINE_CLEAN_UP_CONFIRMATION"),{callback:function(e){var t="db_cleanup";n.nomad.dismissAlerts();if(e===2){n.overlay.show(t);n.alert.show(t,{level:"info",messages:n.lang.get("LBL_OFFLINE_DB_CLEANING_IN_PROGRESS"),autoClose:false,closable:false});n.offline.compactStorage({callback:function(e){n.controller.navigateToDefaultView();n.overlay.hide(t);n.alert.dismiss(t);if(e){n.alert.show(t,{level:"error",messages:n.lang.get("ERR_OFFLINE_DB_CLEANING_ERROR"),autoClose:true,closable:true})}else{n.alert.show(t,{level:"success",messages:n.lang.get("LBL_OFFLINE_DB_CLEANING_COMPLETED"),autoClose:true,closable:true})}}})}}})}n.events.on("all",function(e){var t=[];var i=arguments;_.each(n.events._events,function(i,n){var a=n.split(".");if(a.length>1&&a[0]===e){t.push(n)}});if(t.length>0){_.each(t,function(e){i[0]=e;n.events.trigger.apply(n.events,i)})}});n.events.on("app:init",function(){window.clearInterval(n.metadata._validateMDInterval);n.metadata._validateMDInterval=null;n.isBodyScrollRequired=$.os.android&&!n.isTablet;_.extend(n.metadata.fieldTypeMap,{iframe:"url",link:"url",multienum:"multienum",name:"name","double":"float",username:"text",user_name:"text"});_.extend(r.prototype.viewFallbackMap,{view:"readonly",edit:"readonly",about:"readonly",settings:"edit"});n.lang.setCurrentLanguage(n.lang.getLanguage()||"en_us");a.updateServerInfo();a.resetMeta(false,false);a.restoreUser();a.enableOffline();a.initSubpanels();n.data.declareModels();a.updateAuthStore();n.config.sugarLogic=n.config.sugarLogic||{};if(n.config.sugarLogic.enabled&&n.config.sugarLogic.isDynamic)n.loadSugarLogic();a.configureSugarLogic();if(n.isSynced){a.initializeContextMeta()}if(n.isNative&&navigator.splashscreen){_.delay(function(){navigator.splashscreen.hide()},500)}},l).on("nativeMessage",function(e){n.logger.debug("Received native message: "+JSON.stringify(e));if(e.target==="redirect"&&!_.isEmpty(e.path)){n.controller.navigate(e.path)}}).on("app:sync",function(){a._isSyncing=true;n.overlay.show("app:sync",{template:"preloader-panel",label:"LBL_LOADING"})},l).on("app:sync:complete",function(){a._isSyncing=false;a._hasAskedForSync=false;n.logger.debug("Sync complete");n.loginManager.handleSyncComplete();n.hacks.hackModuleList();a.initSubpanels();n.hacks.hackAcls();a.saveUser();a.initializeContextMeta();a.updateAuthStore();n.analytics.init();a.configureSugarLogic()},l).on("nomad:sync:complete",function(){_.delay(function(){n.overlay.hide("app:sync",true)},300);n.cache.set("app:synced","1")},l).on("app:sync:error",function(e){a._isSyncing=false;a._hasAskedForSync=false;n.logger.debug("Sync failed");if(!(e instanceof SUGAR.Api.HttpError)){var t=_.extend({version:"N/A",flavor:"N/A",minVersion:n.config.minServerVersion,supportedFlavors:n.config.supportedServerFlavors.join(", ")},e.server_info);e=n.lang.get(e.label,null,t)||(_.isString(e)?e:n.lang.get("LBL_MOBILE_META_SYNC_FAILED"));o.showAlert(e,{callback:function(){n.nomad.dismissAlerts();n.overlay.hide("app:sync",true);n.router.login()},title:n.lang.get("ERR_GENERIC_TITLE")})}else if(e.code!=="invalid_grant"){o.showConfirm(n.lang.get("LBL_MOBILE_META_SYNC_FAILED_RETRY"),{callback:function(e){n.nomad.dismissAlerts();if(e!==2){n.overlay.hide("app:sync",true);n.router.login()}else{n.nomad.syncApp()}},title:n.lang.get("ERR_GENERIC_TITLE"),buttonLabels:[n.lang.get("LBL_MOBILE_RELOGIN_BUTTON"),n.lang.get("LBL_YES")]})}else{n.overlay.hide("app:sync");n.error.handleInvalidGrantError()}},l).on("offline:prefetch:start",function(){c=[];n.overlay.hide("app:sync");n.overlay.show("app:sync",{template:"preloader-panel",label:"LBL_OFFLINE_PREFETCHING"})},l).on("offline:prefetch:complete",function(e){c=[];if(e&&e.status!==412){o.showAlert(n.lang.get("ERR_OFFLINE_PREFETCH_FAILED"))}},l).on("offline:prefetch:progress",function(e){var t=n.config.maxPreloaderPanelMessages||4;var i=[];var o={};o.module=a.getPluralModuleName(e.module);if(e.parentModule){o.parentModule=a.getPluralModuleName(e.parentModule);o.relationship=n.lang.get(e.relatedModules[e.module].label,e.parentModule);o.module=n.lang.get("LBL_OFFLINE_PREFETCHING_RELATIONSHIP",null,o)}d(_.extend(e,o));_.each(c,function(e,a){if(a+1>t){return false}if(a===0){i.push("<span class='current'>"+n.lang.get("LBL_OFFLINE_PREFETCHING_MODULE",null,e)+"</span>")}else{i.push("<span class='completed'>"+n.lang.get("LBL_OFFLINE_PREFETCHING_MODULE_COMPLETE",null,e)+"</span>")}});n.overlay.hide("app:sync");n.overlay.show("app:sync",{template:"preloader-panel",message:i.join("<br />")})},l).on("offline:encryption:start",function(){n.alert.show("offline_encryption",{level:"info",messages:n.lang.get("LBL_OFFLINE_ENCRYPTION_IN_PROGRESS"),autoClose:false,closable:false})},l).on("offline:encryption:complete",function(e){if(e){n.alert.dismiss("offline_encryption");n.alert.show("offline_error",{level:"error",messages:e.localizedMessage(),autoClose:true})}else{n.alert.show("offline_encryption",{level:"success",messages:n.lang.get("LBL_OFFLINE_ENCRYPTION_SUCCESS"),autoClose:true})}},l).on("app:login:success",function(){n.loginManager.handleLoginSuccess();a.syncApp()},l).on("app:logout",function(){n.alert.dismiss("logout");a.resetMeta(false,true);s.toggleTouchIdOnLogin(false);n.data.declareModels();n.activeComponents.closeAll();n.controller.clean({disposeAll:true});_.each(n.additionalComponents,function(e){e.unbindGlobalEvents()})}).on("app:start",function(){n.started=true},l).on("offline:failure",function(e){if(e===n.offline.Error.StorageUnavailableError){o.showAlert(e.localizedMessage()+"\n"+n.lang.get("LBL_OFFLINE_DISABLED"))}if(e===n.offline.Error.OfflineDisabledError){}else if(e===n.offline.Error.OutOfSpaceError){f()}else{n.alert.show("offline_error",{level:"error",messages:e.localizedMessage(),autoClose:true})}},l).on("app:dashboards:changed",function(){if(!n.api.isAuthenticated()){return}var e=n.lang.get("LBL_DASHBOARDS_CHANGED_PROMPT");n.nomad.dashboards.verifyDefaultView();o.showConfirm(e,{callback:function(e){if(e===2){n.nomad.dismissAlerts();n.controller.navigateToDefaultView();n.controller.clean();n.nomad.mainMenu.render()}}})},l).on("app:locale:change",function(){n.nomad.setHTMLDirection()},l)},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=n.view.NomadField=a.extendField(n.view.Field,"MobileText",{events:{"focusin.base-field input":"_onFocus","touchstart.base-field select":"_onFocus"},initialize:function(e){if(e.view.name==="view"){e.viewName="readonly"}this._super(e);if(e.view.name==="edit"&&(Boolean(this.def.calculated)&&Boolean(this.def.enforced)||Boolean(this.def.readonly))){e.viewName="readonly"}},_onFocus:function(){var e={animate:false};n.alert.dismissAll(false,e)},delegateEvents:function(e){if(_.isFunction(e||this.events)){Backbone.View.prototype.delegateEvents.call(this,e)}else{this._super(e)}},handleValidationError:function(e){this._displayValidationMessage(e)},_displayValidationMessage:function(e){var t;var i=[];var a=this.$(".control-group");a.children(".field__error-message").remove();a.removeClass("error");if(e){this.$(".control-group").addClass("error");_.each(e,function(e,t){i.push(n.error.getErrorString(t,e))});t=n.template.get("edit-field-error");a.append(t(i))}n.analytics.trackEvent("validation",this.name)},_render:function(){this.onBeforeRender();n.view.Field.prototype._render.call(this);this.onAfterRender();this.hasAccess=this.getAccess();return this},_getFallbackTemplate:function(e){if(e==="disabled"){return"readonly"}else{return n.view.Field.prototype._getFallbackTemplate.apply(this,arguments)}},getAccess:function(){var e=this.options.def.view||this.options.viewName||(this.view.meta&&this.view.meta.type?this.view.meta.type:this.view.name);var t=e!==this.view.action?this.view.action:e;return n.acl.hasAccessToModel(t,this.model,this.name)},onBeforeRender:function(){if(this.view.name==="edit"&&this.getAccess()&&!this.isDisabled()){this.action="edit"}},onAfterRender:function(){},format:function r(e){return this._super(e)},unformat:function s(e){return _.isString(e)?e.trim():e},isReadOnly:function(){return this.tplName==="readonly"},bindDomChange:function(){if(!(this.model instanceof Backbone.Model))return;var e=this.$el.find(this.fieldTag);e.on("change",_.bind(this.onFieldChange,this));this._$fieldEl=e},onFieldChange:function(){this.model.set(this.name,this.unformat(this._$fieldEl.val()))},bindDataChange:function(){if(this.model){this.model.on("change:"+this.name,function(e,t,i){if(i&&i.disableRenderForContext===this.view){return false}this.render()},this)}},setRequired:function(e){this.def=n.utils.deepCopy(this.def);this.def.required=e;this.render()},isRequired:function(){return this.def.required},_loadTemplate:function(){this.action=void 0;this._super()}},{getOverridableMethods:function l(){return["initialize","onBeforeRender","onAfterRender","format","unformat","isRequired","isReadOnly","onFieldChange"]}});e.exports=o},function(e,t){(function(e){var t=1024*1024;var i={set:function r(e,t,i){e[t]=i},push:function s(e,t,i){if(!e[t]){e[t]=[]}e[t].push(i)},pushDocField:function l(e,t,i){e.docFields[i.name]=i}};var n={byType:{name:{dataName:"nameField",action:i.set},fullname:{dataName:"fullNameField",action:i.set},image:{dataName:"imageField",action:i.pushDocField},phone:{dataName:"phoneFields",action:i.push},url:{dataName:"urlFields",action:i.push},email:{ignore:false,dataName:"emailFields",action:i.push},file:{dataName:"docFields",action:i.pushDocField},fieldset:{action:function(e,t,a){var o=true;_.each(a.fields,function(t){var i=n.byType[t.type];if(i){i.action(e,i.dataName,a);o=false}});if(o)i.push(e,"otherFields",a)}},emailbody:{dataName:"emailbodyFields",action:i.push}},byNameRegEx:{"^(?=.*address)((?!email).)*$":{dataName:"addressFields",action:i.push}},"default":{dataName:"otherFields",action:i.push}};var a=function(e){var t=null;_.each(n.byNameRegEx,function(i,n){var a=new RegExp(n);if(a.test(e.name)){t=i}});return t};var o=e.data.beanModel;e.NomadBean=e.data.beanModel.extend({initialize:function(){this.addValidationTask("nomadValidation",_.bind(this._nomadValidator,this));o.prototype.initialize.apply(this,arguments)},_nomadValidator:function(t,i,n){var a=e.metadata.getModule(this.module).fields;_.each(t,function(e,t){var n=a[t];if(n&&n.type==="image"){if(this._imageRequiredValidator(n,t,this)){i[t]=i[t]||{};i[t].required=true}}},this);n(null,t,i)},_imageRequiredValidator:function(t,i,n){if(!e.supportedFeatures.fileUpload){return}var a=false;if(t.required){a=_.isEmpty(n.get(i))}return a},getContextMetaData:function(t,i){var o=n;var r=this;var s={otherFields:[],phoneFields:[],urlFields:[],emailFields:[],addressFields:[],additionalListFields:[],docFields:{},emailbodyFields:[]};_.each(t,function(t,n){var r=o.byType[t.type]||a(t)||(s[o.default.dataName].length<i?o["default"]:null);if(r&&!r.ignore){r.action(s,r.dataName,t)}if(n>0&&n<=e.config.numberOfAdditionalListFields){s.additionalListFields.push(t)}});s.headerField=s.fullNameField||s.nameField;s.subpanels=e.nomad.getSubpanels(this.module);s.hasLinkableSubpanels=e.nomad.hasLinkableSubpanels(s.subpanels);s.hasCreatableSubpanels=e.nomad.hasCreatableSubpanels(s.subpanels);s.listItemTitleField=t[0];s.avatarField=_.find(t,function(t){return t.type==="image"&&t.name==="picture"&&_.contains(e.config.modulesWithAvatars,r.module)});s.addressFieldsGroups=_.groupBy(s.addressFields,function(e){if(e.type==="address"){return e.name}return r.fields[e.name].group});s.actions=this.getAvailableActions(s);return s},getAvailableActions:function c(e){var t={};var i=this._canHaveFiles(e.docFields)||this._canHavePDFs()||this.canHaveAttachments();var n=e.phoneFields.length;var a=[n&&"phone",n&&"message",e.urlFields.length&&"url",_.keys(e.addressFieldsGroups).length&&"map",i&&"doc",e.emailFields.length&&"email",e.emailbodyFields.length&&"emailbody"];_.each(a,function(e){if(e){t[e]=!!e}});return t},getAddresses:function(t){var i;var n;var a;var o=this;return _.chain(t).map(function(t,r){if(r.lastIndexOf("_c")===r.length-2){r=r.replace("_c","")}a={};_.each(t,function(t,n){var s=o.get(t.name);if(s){i=t.name;i=i.replace(r+"_","");if(i.lastIndexOf("_c")===i.length-2)i=i.replace("_c","");if(t.type==="enum"){var l=e.metadata.getModule(o.module).fields[t.name];var c=e.lang.getAppListStrings(l.options)||{};s=c[s]||s}a[i]=s}});if(_.keys(a).length){n={};var s=e.lang.get("LBL_"+r.toUpperCase(),o.module);n[s]=a;return n}}).compact().value()},getDocuments:function(t,i){var n=this;this.docsLoading=true;t=_.filter(t,function(t){return e.acl.hasAccessToModel("read",this,t.name)},this);if(this.canHaveAttachments()){var a=this.get("attachment_list");this._createDocData(a,t)}else if(this._canHaveFiles(t)){var o=[];var r=this.get("doc_url");if(_.has(this.fields,"doc_url")&&!_.isEmpty(r)){var s=this.get("filename");if(_.has(this.fields,"doc_type"))s+=" ("+this.get("doc_type")+")";o=this._createDocData([{name:s,uri:r,openExternally:true,nonSugarURL:true}],t,null,{silent:true})}if(i){n._createDocData(i,t,o)}else{this.getFiles({success:function(e){n._createDocData(e,t,o)},error:function(t){e.logger.debug("Error creating file url for "+n.module+" : "+t);n.docsLoading=false;n.trigger("docs:ready",o)}},{iframe:false,deleteIfFails:false})}}else if(this._canHavePDFs()){this._createDocData([{name:this.module+".pdf",uri:e.api.serverUrl+"/"+this.module+"/"+this.id+"/pdf",file_mime_type:"application/pdf",filename:this.get("name")+".pdf",oauth:true}],t)}else{this.docsLoading=false;this.trigger("docs:ready",[])}},_createDocData:function(i,n,a,o){var r=this;var s=_.pluck(n,"name");this.docsLoading=false;o=o||{};a=a||[];function l(t){if(!_.isString(t)||r.module==="Documents")return false;return!e.acl.hasAccessToModel("read",r,t)||!_.contains(s,t)}_.each(i,function(i,o){var s;var c;var d;var u;var f=i.uri||i.file_uri;var h=i["content-length"];var p=i.name||i.document_revision_filename;if(!f||l(o)){return}c=_.find(n,function(e){return e.name===o});d=c?e.lang.get(c.label,r.module):p;if(p&&h){d+=" ("+r._fileSizeFormat(i["content-length"])+")";if(h>t)i.openExternally=true}if(p&&!i.nonSugarURL){u=f.split(/rest\/v\d*\//)[1];f=e.api.serverUrl+"/"+u+"?platform="+e.config.platform;if(e.nomad.isDownloadTokenSupported()){if(!i.oauth){f+="&download_token={download_token}"}}else{f+="&oauth_token={oauth_token}"}}s={};s[d]={url:f,openExternally:i.openExternally||false,isImage:c&&c.type==="image",file_mime_type:i.file_mime_type||this.get("file_mime_type")||i["content-type"]||"",filename:i.filename||this.get("filename")||i.name||"",oauth:i.oauth};a.push(s)},this);if(!o.silent)this.trigger("docs:ready",a);return a},_fileSizeFormat:function(t){return t<=0?"0":""+e.nomad.utils.humanFileSize(t)},_canHaveFiles:function(t){var i=e.config.modulesWithFiles||[];return!_.isEmpty(t)||_.contains(i,this.module)||_.has(this.fields,"doc_url")},_canHavePDFs:function(){var t=e.config.modulesWithPDFs||[];return _.contains(t,this.module)},getFieldsDataArray:function(t,i){var n;var a;var o;var r;var s=[];var l=this;var c;var d;_.each(t,function(t){r={};a=l.get(t.name);d=t.name;o=e.metadata.getModule(l.module).fields[d];if(a&&(_.isUndefined(i)||a.match(i))){c=t.label||o.label||o.vname||d;n=e.lang.get(c,l.module);r[n]=a;s.push(r)}});return s},getAccessibleFields:function(t,i){i=i||"read";var n=this;t=_.filter(t,function(t){return e.acl.hasAccessToModel(i,n,t.name)});return t||[]},getAccessibleFieldsGroups:function(e,t){var i={};var n=this;_.each(e,function(e,a){e=n.getAccessibleFields(e,t);if(e.length){i[a]=e}});return i},isDataDefined:function(e,t){return _.any(e,function(e){var i=this.get(e.name);return t?_.isString(i)&&i.match(t):i},this)},hasActiveEmail:function(e){return _.any(e,function(e){return _.any(this.get(e.name),function(e){return!Number(e.invalid_email)&&!Number(e.opt_out)})},this)},hasDeleteAccess:function(){if(e.acl.hasAccessToModel("delete",this)&&!_.contains(e.config.nonDeletableModules,this.module)){return!(e.serverInfo.isSevenUp&&(this.get("closed_revenue_line_items")||_.find(e.config.nonDeletableSalesStages,function(e){return e===this.get("sales_status")||e===this.get("sales_stage")},this)))}},hasUnlinkAccess:function(t,i){if(i.relationship_type==="many-to-many"){return true}if(!_.isEmpty(t)){return!_.find(t,function(t){return!e.acl.hasAccessToModel("edit",this,t.name)},this)}else if(i.via_parent_id){return e.acl.hasAccessToModel("edit",this,i.relationship_role_column)}else{return true}},changeCurrencyId:function(t,i){i=i||{};var n=this.get("currency_id")||t;var a={};var o=i.silentField||{};_.each(this.fields,function(i,o){if(i.type!=="currency")return;var r=this.get(o);if(!!r){var s=e.currency.convertAmount(r,n,t);this.set(o,s,{silent:true})}a[o]=true},this);this.set("currency_id",t,{silent:true});if(!i.silent){_.each(a,function(e,t){if(o===t){return false}this.trigger("change:"+t)},this)}},getChangeDiff:function(e,t){var i={};e=e||{};t=t||[];_.each(this.attributes,function(n,a){if(_.contains(t,a))return;var o=e[a];if(!_.isEqual(o,n)){i[a]=o}});return i},save:function(e,t){t=t||{};t.lastModified=this.get("date_modified");return o.prototype.save.call(this,e,t)},uploadFile:function(t,i,n,a){n=n||{};a=a||{};a.iframe=false;var o=this;a.deleteIfFails=!!a.isCreate;return e.api.file("create",{id:this.id,module:this.module,field:t},i,{success:function(e,i,a){var r=e[t];if(r){o._onFileChange(e,t);if(n.success){n.success(e)}}else{var s=new SUGAR.Api.HttpError({xhr:a});s.responseText=e.xhr?e.xhr.message:s.responseText;if(n.error)n.error(s)}},error:function(e){e.isFileUploadError=true;n.error.call(this,e)}},a)},deleteFile:function(t,i,n,a){var o=this;var r;a=a||{};r={success:function(e){o._onFileChange(e,t);if(n.success){n.success(e)}},error:function(e){e.isFileUploadError=true;if(n.error){n.error(e)}}};return e.api.file("delete",{module:this.module,id:this.id,field:t},null,r,a)},_onFileChange:function(e,t){this.set(t,e[t].name);if(e.record){this.set("date_modified",e.record.date_modified)}else{this._docsUpdated=true}},isCloseActionAvailable:function(){var t=this.get("status");var i=e.nomad.utils.getClosedStatusValue(this.module);var n=i===t;return i&&!n&&e.acl.hasAccessToModel("edit",this,"status")&&!_.contains(e.config.nonEditableModules,this.module)},copy:function(e,t,i){_.each(this._defaults,function(e,t){this.set(t,"")},this);o.prototype.copy.call(this,e,t,i);this._unsetByDef();this._unsetByACL()},_unsetByDef:function(){var t=this.get("email1");function i(e){if(_.isString(e)){this.unset(e)}else{_.each(this.attributes,function(t,i){if(e.test(i)){this.unset(i)}},this)}}_.each(e.NomadBean._getDoNotCopyFields(this.module),function(e){i.call(this,e)},this);var n=e.metadata.getModule(this.module);var a=n?n.fields:null;var o=_.chain(a).filter(function(t){return _.contains(e.NomadBean._doNotCopyFieldTypes,t.type)}).pluck("name").value();_.each(o,function(e){i.call(this,e)},this);if(t){this.set("email1",t)}},_unsetByACL:function(){var t=_.getNested(e.metadata.getView(this.module,"edit"),"panels.0.fields");var i=e.metadata.getModule(this.module).fields||{};_.each(this.toJSON(),function(n,a){var o;var r;_.find(t,function(e){if(e.name===a){o=e}else if(e.fields){o=_.findWhere(e.fields,{name:a})}return o},this);r=o&&!_.isUndefined(o.readonly)?o.readonly:i[a].readonly;if(!e.acl.hasAccessToModel("edit",this,a)||r){this.unset(a)}},this)}},{_doNotCopyFieldNames:{All:["created_by","created_by_name","modified_by_name","modified_user_id","date_entered","date_modified","my_favorite","deleted",/^email([^_]|_(?!c$|reminder))+$/],Employees:["user_name","user_hash","system_generated_password","pwd_last_changed","authenticate_id","sugar_login","is_admin","picture","status"],Calls:["status"],
Contacts:["portal_active","portal_app","portal_name","portal_password","portal_password1"],Notes:["contact_email","contact_phone","file_mime_type","file_url"],Tasks:["contact_email","contact_phone","status"],Meetings:["status"],RevenueLineItems:["quote_id","quote_name"],Opportunities:["closed_revenue_line_items"]},_doNotCopyFieldTypes:["file","password","image"],_getDoNotCopyFields:function(){var t=null;e.events.on("app:sync:complete",function(){t=null});var i={"7.0":{"ENT, ULT":{Opportunities:["amount","date_closed"]}}};function n(t,n){var a=_.find(i,function(i,a){if(!e.utils.versionCompare(n,a,">="))return false;var o=_.find(i,function(e,i){var n=i.split(/,\s*/);return _.contains(n,t)});return o});return a&&_.values(a)[0]}function a(){if(t!==null){return t}var i=e.metadata.getServerInfo();var a=i.flavor;var o=i.version;var r=e.NomadBean._doNotCopyFieldNames;var s=n(a,o);t=e.nomad.utils.merge(r,s,function(e,t){return _.union(e,t)});return t}return function(e){var t=a();var i=t.All;var n=t[e];if(n){i=_.union(i,n)}return i}}()});e.data.beanModel=e.NomadBean})(SUGAR.App)},function(e,t){var i=SUGAR.App;var n={};var a={preventAnyAlert:false,init:function(){this.$alerts=$(i.config.alertsEl||"#alerts");this.klass=i.view[i.utils.capitalize(i.config.appId)+"AlertView"]||i.view.views[i.utils.capitalize(i.config.platform)+"AlertView"]||i.view.views.BaseAlertView||i.view[i.utils.capitalize(i.config.platform)+"AlertView"]||i.view.AlertView},show:function(e,t){if(!this.$alerts||this.$alerts.length===0)return null;if(this.preventAnyAlert)return null;t=_.extend({level:"info",autoClose:false},t||{});if(t.level==="confirmation"){this.dismissAll();this.preventAnyAlert=true}if(_.isUndefined(t.closeable)){t.closeable=t.level!=="info"}if(t.messages){t.messages=_.isString(t.messages)?[t.messages]:t.messages}var a=n[e];if(!a){a=this._create(e,t);n[e]=a}a.level=t.level;if(!!t.autoClose)this._setAutoCloseTimer(a,t.onAutoClose,t.autoCloseDelay);a.render(t);if(t.closeable){var o=a.getCloseSelector();o.off("click");o.on("click",_.bind(function(){this.dismiss(e)},this));if(i.accessibility){i.accessibility.run(o,"click")}}return a},_create:function(e,t){var i=new this.klass(t);i.key=e;i.$el.prependTo(this.$alerts);return i},_setAutoCloseTimer:function(e,t,n){if(e.timerId)clearTimeout(e.timerId);e.timerId=setTimeout(_.bind(function(){if(_.isFunction(t)){t(e.key)}this.dismiss(e.key)},this),n||i.config.alertAutoCloseDelay||9e3)},dismiss:function(e,t){this.preventAnyAlert=false;var i=n[e];if(!i)return;if(i.timerId)clearTimeout(i.timerId);i.close(t);delete n[e]},dismissAll:function(e,t){_.each(n,function(i,n){if(!e||i.level===e){this.dismiss(n,t)}},this)},get:function(e){return n[e]},getAll:function(){return n}};i.augment("alert",a,false);i.view.AlertView=i.view.View.extend({className:"alert",tpl:"alert",close:function(){this.getCloseSelector().off("click");this.$el.remove()},getCloseSelector:function(){return this.$(".close")},render:function(e){e=e||{};if(e.closeable){this.$el.addClass("closeable")}this.$el.addClass("alert-"+e.level);var t=i.template.get(e.tpl||this.tpl)||i.template.empty;this.$el.html(t(e))}})},function(e,t){(function(e){var t=[];var i=function(e){return _.find(t,function(t){return t.key===e})};var n={maxCount:3,has:function(e){return _.isUndefined(this.get(e))?false:true},get:function(e){var t=i(e);return t?t.val:undefined},set:function(e,n){if(this.has(e)){var a=i(e);a.val=n}else{if(this.maxCount<=t.length){t.shift()}t.push({key:e,val:n})}},cut:function(e){var i=null;if(_.find(t,function(t,n){var a=t.key===e;if(a){i=n}return a})){t.splice(i,1)}},cutAll:function(){t=[]}};e.augment("session",n)})(SUGAR.App)},function(e,t){(function(e){var t=e.alert.show;var i={};e.events.on("offline:status:update",function(e){if(!e.noConnection){i={}}});e.events.on("app:view:change",function(e){if(e.layoutDef&&e.layoutDef.isDynamic)return;var t=!!(e.dashboardId&&e.dashletId&&!e.modelId);$(document.body).toggleClass("has-pagination",t)});e.alert.show=function(n,a){a=a||{};if(a.pageHash&&a.pageHash!==window.location.hash){return}if(a.uid&&e.offlineEnabled){var o=a.requestOptions?a.requestOptions.params:{};if(!o.skipOfflineRead&&i[a.uid]){return}i[a.uid]=1}return t.apply(this,arguments)}})(SUGAR.App)},function(e,t){var i=SUGAR.App;var n={};var a={triggerViewSync:function(e,t,i,a){_.each(n,function(n){if(this.shouldSync(n,e)){n.receiveSyncData(t,i,a)}},this)},shouldSync:function(e,t){return e!==t},registerView:function(e){n[e.cid]=e},unregisterView:function(e){delete n[e.cid]},_getSyncableViews:function(){return n},_reset:function(){n={}}};e.exports=i.syncableViewsManager=a},function(e,t){var i=SUGAR.App;e.exports=i.nomad.dashboards={_started:false,_cacheKey:"dashboards",_dashletTypeRegistry:{},isStarted:function(){return this._started},reset:function(){this._started=false},resetCollection:function(){if(this.collection){this.collection.reset()}},start:function(){this._started=true;this.cacheDashletStore=i.nomad.stores.dashlets;this.initCollection()},initCollection:function(){var e=this.getCachedDashboards()||[];this.collection=this.collection||i.data.createBeanCollection("Dashboards");this.collection.reset(e,{silent:true})},fetchDashboards:function(e,t){var n=this;async.waterfall([_.bind(n._fetchDashboards,n),_.bind(n._fetchDashboardMeta,n)],function(a,o){if(a){i.logger.debug("Error while fetching dashboards"+a)}else{n._processFetchResults(o,e)}t&&t(a)})},_fetchDashboards:function(e){var t=this;var n=_.map(i.metadata.getModuleNames(),function(e){return i.nomad.buildBulkRequest({module:"Dashboards/"+e,params:{max_num:-1,view_name:"record"}})});n.push(i.nomad.buildBulkRequest({module:"Dashboards"}));i.api.bulk({requests:n},{success:function(i){e(null,t._getSuccessfullResponses(i))},error:e})},_fetchDashboardMeta:function(e,t){var n=this;var a=_.map(e,function(e){return i.nomad.buildBulkRequest({module:"Dashboards",attributes:{id:e.id}})});i.api.bulk({requests:a},{success:function(e){t(null,n._getSuccessfullResponses(e))},error:t})},_processFetchResults:function(e,t){var n=this.collection.toJSON();t=t||{};e=_.filter(e,function(e){var t=e.metadata;this.adjustDashboardMetadata(t);return!_.isEmpty(t.dashlets)},this);this._cacheDashboards(e);this.cleanUnusedDashletsCache();this.collection.reset(e,{silent:true});if(t.notifyIfChanged&&this._isAnyDashboardChanged(n,e)){i.events.trigger("app:dashboards:changed")}},getDashboards:function(e){var t;if(!this._started){return[]}t=this.collection.models;if(e){switch(e.type){case"home":t=_.filter(t,function(e){return e.get("dashboard_module")==="Home"});break;case"detail":t=_.filter(t,function(e){return e.get("dashboard_module")!=="Home"});break}if(e.module){t=_.filter(t,function(t){return t.get("dashboard_module")===e.module})}}return t},getDashboard:function(e){return this.collection.get(e)},adjustDashboardMetadata:function(e){var t=this;e.dashlets=[];_.each(e.components,function(n){_.each(n.rows,function(n){_.each(n,function(n){var a=n.view;var o;if(!a){return}o=_.values(a).join("");n.id=String(Math.abs(i.nomad.utils.getHashCode(o)));e.dashlets.push(n);t._normalizeDashletMeta(n)})})});e.components=null;this.cleanDashlets(e.dashlets)},cleanDashlets:function(e){var t;var i=[];for(t=e.length-1;t>-1;t--){if(!_.contains(i,e[t].id)&&this.canCreateDashlet(e[t])){i.push(e[t].id)}else{e.splice(t,1)}}},canCreateDashlet:function(e){var t=false;var n=this._getDashletType(e);if(this.isDashletSupported(e)){if(n==="tabbed-dashlet"){var a=i.metadata.getView(null,e.view.type);t=Boolean(a)&&_.any(a.tabs,function(e){return i.nomad.utils.isAccessibleModule(e.module,"list")})}else if(n==="dashablelist"){t=i.nomad.utils.isAccessibleModule(e.view.module,"list")}else if(n==="casessummary"){t=i.nomad.utils.isAccessibleModule("Cases","list")}else{t=true}}return t},isDashletSupported:function(e){var t=this._getDashletType(e);var n=i.config.dashboards.dashlets[t];var a=this._dashletTypeRegistry[t];return a||n&&n.enabled&&i.utils.versionCompare(i.serverInfo.version,n.minServerVersion,">=")},_normalizeDashletMeta:function(e){var t=e.view;if(!t.module&&e.context&&e.context.module){t.module=e.context.module}if(!t.type&&t.name){t.type=t.name}},getDashboardDashlets:function(e){var t=this.getDashboard(e);return t.get("metadata").dashlets},isDashletAvailable:function(e,t){return _.chain(this.getDashboardDashlets(e)).pluck("id").contains(t).value()},getDashletTitle:function(e){var t=e||{};var n=e.type;var a;var o=_.isFunction(e.type)?e.type:this._dashletTypeRegistry[e.type];if(o){a=o.prototype.getTitle(e)}else{a=e.label}var r=e.module;if(n==="dashablelist"){t={module:i.lang.getAppListStrings("moduleList")[r]||r}}else if(n==="bubblechart"&&!r){r=i.nomad.utils.getForecastModule()}return i.lang.get(a,r,t)},getDashletConfig:function(e,t){var i=_.find(this.getDashboardDashlets(e)||[],function(e){return e.id.toString()===t});return i},_cacheDashboards:function(e){i.cache.set(this._cacheKey,e)},getCachedDashboards:function(){return i.cache.get(this._cacheKey)},verifyDefaultView:function(){var e=i.loginManager.getSetting("default_view");if(!e){return}var t=e.split(":");var n=t[0]==="Dashboards"&&t[1];var a;var o;var r=true;if(n){o=!!this.getDashboard(n);a=t[2];r=o&&(a?this.isDashletAvailable(n,a):true);if(!r){i.loginManager.removeSetting("default_view")}}},cleanDashboardsCache:function n(e){i.cache.cut(this._cacheKey)},cleanDashletsCache:function a(e){e=e||function(){};this.cacheDashletStore.cutAll(e)},cleanUnusedDashletsCache:function o(e){var t=this;this.cacheDashletStore.getAll(function i(n,a){if(n){return e(n)}var o=[];var r=[];t.collection.each(function(e){var t=e.get("metadata");_.each(t.dashlets,function(e){if(!_.contains(o,e.id)){o.push(e.id)}})});_.each(a,function(e,i){if(!_.contains(o,i)){r.push(function(e){t.cacheDashletStore.cut(i,e)})}});async.parallel(r,e)})},_getDashletType:function(e){var t=i.metadata.getView(null,e.view.type);return t&&t.tabs?"tabbed-dashlet":e.view.type},_isAnyDashboardChanged:function(e,t){t=t||[];return e.length!==t.length||_.any(e,function(e){return!_.any(t,function(t){return e.id===t.id&&e.date_modified===t.date_modified},this)},this)},_getSuccessfullResponses:function(e){var t=[];_.each(e,function(e){if(e.status===200){if(e.contents.records){t.push.apply(t,e.contents.records)}else if(e.contents&&e.contents.metadata){t.push(e.contents)}}});return t},registerDashlet:function(e,t){this._dashletTypeRegistry[e]=t},getDashletTypeRegistry:function(){return this._dashletTypeRegistry}}},function(e,t,i){(function(e){var t=i(258);var n={INTERNET_UNAVAILABLE:-1,CONNECTION_FAILED:-2,CONNECTION_TIMEOUT:-3,INVALID_CREDENTIALS:-4};function a(){e.router.login()}var o=e.error.handleStatusCodesFallback;var r=e.error.enableOnError;var s=e.error.handleUnhandledError;e.error.statusCodes["200"]=e.error.statusCodes["0"];e.error=_.extend(e.error,{enableOnError:function(){if(e.config.raven&&e.config.raven.enabled){return true}return r.apply(this,arguments)},_alertUnauthorized:function(){e.alert.show("auth_error",{level:"error",messages:e.lang.get("ERR_MOBILE_NOT_AUTHORIZED"),autoClose:true})},_alertSystemError:function(t){var i=t.status||t.status===0?t.status.toString():"N/A";var n;if(t instanceof e.offline.Error){n=t.localizedMessage()}else{n=e.lang.get("ERR_MOBILE_INTERNAL").replace("{{{code}}}",i)}e.alert.show("system_error",{level:"error",messages:n,autoClose:true,uid:"ERR_MOBILE_INTERNAL_"+i,pageHash:t.request?t.request.params.pageHash:null})},handleNeedLoginError:function(){e.alert.show("auth_error",{level:"error",messages:e.lang.get("ERR_MOBILE_INVALID_CREDS"),autoClose:true});a();this._sendAnalytics(n.INVALID_CREDENTIALS)},handleInvalidGrantError:function(){e.alert.show("auth_error",{level:"error",messages:e.lang.get("ERR_MOBILE_SESSION_EXPIRED"),autoClose:true});a()},handleUnhandledError:function(t,i,n){try{this.logFatalError(t,{url:i,line:n,version:e.nomad.getProductVersion(),serverVersion:e.nomad.getServerVersion(),serverUrl:e.nomad.getServerUrl(),clientInfo:e.clientInfo})}catch(a){}},logFatalError:function(t,i){try{var n=e.config.env==="prod";t=t||"Unknown error";e.logger.fatal(JSON.stringify(i));t=n?e.lang.get("ERR_INTERNAL_ERR_MSG"):"FATAL: "+t;e.alert.show("system_error",{level:"error",messages:t,autoClose:true});e.analytics.trackEvent("device","exception")}catch(a){}},handleUnauthorizedError:function(){this._alertUnauthorized();a()},handleForbiddenError:function(e){this._alertUnauthorized();this._sendAnalytics(e.status)},handleNotFoundError:function(t){e.alert.show("not_found_error",{level:"error",messages:this._adjustErrorMessage("ERR_MOBILE_NOT_FOUND",t),autoClose:true});this._sendAnalytics(t.status)},handleTimeoutError:function(t){e.alert.show("system_error",{level:"error",messages:this._adjustErrorMessage("ERR_MOBILE_TIMEOUT",t),autoClose:true,uid:"ERR_MOBILE_TIMEOUT",pageHash:t.request.params.pageHash});this._sendAnalytics(n.CONNECTION_TIMEOUT)},handleMethodConflictError:function(e){this._sendAnalytics(e.status)},handleStatusCodesFallback:function(i,r,s){var l;var c=i.status;e.alert.dismissAll({animate:false});if(_.isUndefined(i.status)){if(i===e.offline.Error.OutOfSpaceError){e.alert.show("offline_error",{level:"error",messages:i.localizedMessage(),autoClose:true})}return}var d;if(i.status=="0"&&(i.textStatus==="error"||i.textStatus==="abort")&&_.isEmpty(i.errorThrown)){if(!e.nomad.isOnline()){l="Device is offline";c=n.INTERNET_UNAVAILABLE}else{l="Server is unreachable. "+(navigator.connection?"Connection: "+navigator.connection.type:"");c=n.CONNECTION_FAILED}e.alert.show("network_error",this.prepareNetworkAlertParams(i,s))}else if(i.status=="412"){if(e.nomad._isSyncing||e.nomad._hasAskedForSync)return;e.nomad._hasAskedForSync=true;t.showConfirm(e.lang.get("ERR_MOBILE_METADATA_CHANGED_RELOAD"),{callback:function(t){e.nomad.dismissAlerts();if(t===2){if(document.activeElement)document.activeElement.blur();e.controller.clean({disposeAll:true});e.nomad.syncApp()}else{e.nomad._hasAskedForSync=false;e.alert.show("meta_error",{level:"error",messages:e.lang.get("ERR_MOBILE_METADATA_CHANGED"),autoClose:true})}}})}else if(i.status=="422"&&i.message&&(d=i.message.match(/^(.*) is an invalid email address$/))){e.alert.show("meta_error",{level:"error",messages:e.lang.get("ERROR_EMAIL",null,{email:d[1]}),autoClose:false})}else if(i.status=="433"){if(e.config.scheme==="rebrand"){e.alert.show("incompatible_client",{level:"error",messages:e.lang.get("ERR_MOBILE_INCOMPATIBLE_REBRAND_CLIENT_VERSION",null,{brandName:e.config.brandName}),autoClose:false})}else{t.showConfirm(e.lang.get("ERR_MOBILE_INCOMPATIBLE_CLIENT_VERSION",null,{brandName:e.config.brandName}),{callback:function(t){e.nomad.dismissAlerts();if(t===2){e.nomad.openAppStore()}a()}})}}else{this._alertSystemError(i);if(i.status=="400")a()}var u=!_.contains([0,433,412],i.status);if(u||!u&&e.logger.levels[e.config.logger.level].value<=e.logger.levels.DEBUG.value){if(l)e.logger.error(l);o(i);this._logRequestUrl(i)}this._sendAnalytics(c)},handleNotSupportedPlatform:function(){window.location.replace("error-not-supported-platform.html?desktop_url="+e.nomad.getDesktopUrl())},handleExternalLoginNotAvailable:function(){e.alert.show("sso_error",{level:"error",messages:e.lang.get("ERR_MOBILE_SSO_NOT_CONFIGURED"),autoClose:true})},isAccessError:function(e){return _.contains([403,404],e.status)},prepareNetworkAlertParams:function(t,i){var n;var a=e.nomad.isOnline()?this._adjustErrorMessage("ERR_MOBILE_CONNECTION_FAILED",t):e.lang.get("ERR_MOBILE_INTERNET_UNAVAILABLE");n={level:"error",messages:a,autoClose:true,pageHash:t.request.params.pageHash,requestOptions:i};if(!t.isFileUploadError){n.uid="ERR_MOBILE_CONNECTION_FAILED"}return n},_sendAnalytics:function(t){t=t||"unknown";e.analytics.trackEvent("api-error",t)},_adjustErrorMessage:function(t,i){var n=i&&i.request&&i.request.params?e.api.isLoginRequest(i.request.params.url):false;if(n)t+="_LOGIN";return e.lang.get(t,null,{brandName:e.config.brandName,minVersion:e.config.minServerVersion,supportedFlavors:e.config.supportedServerFlavors.join(", ")})},_logRequestUrl:function(t){if(t.request&&t.request.params&&t.request.params.url)e.logger.error("URL of failed request: "+t.request.params.url)}});e.error.statusCodes["422"]=e.error.handleStatusCodesFallback})(SUGAR.App)},function(e,t){(function(t){var i={DIMENSIONS:{offlineMode:1,connection:2,sugarInstance:3},METRICS:{},initialized:false,trackEventSplitter:/^(.*):([\-\w]+)\.?(\S+)?$/,currentViewId:"",loginProcessed:true,init:function(){if(t.config.analytics.enabled){t.nomad.loadAnalytics()}if(t.config.analytics.enabled&&typeof Analytics!=="undefined"&&Analytics){if(this.initialized)return;this.initialize();this._attachAnalytics();var e=t.config.analytics.id;e=_.isObject(e)?t.isNative?e.native:e.web:e;analytics.start(e,t.config.analytics);t.logger.debug("Analytics enabled - "+e)}else{t.events.off(null,null,this);this.initialized=false;t.logger.debug("Analytics disabled")}},processConfig:function(e){var i={};if(e.analytics&&!t.isNative){i.analytics=_.extend({},t.config.analytics,{enabled:Boolean(e.analytics.enabled)})}return i},initialize:function(){t.events.on("app:view:change",function(e){var t={module:"",layoutType:"",track:"",link:e.link};if(e.action){this._handleGAForActions(e,t)}else if(e.parentModelId){this._handleGAForParentModule(e,t)}else if(e.root){this._handleGAForRootModules(e,t)}else if(e.layoutDef){this._handleGAForLayout(e,t)}else{t.layoutType=e.modelId?"detail":"list";t.module=e.module||e.parentModule||e.root}this._buildViewIdAndTrack(t)},this).on("app:start",function(){if(t.api.isAuthenticated()){this._trackServerInstance(t.config.siteUrl)}},this).on("app:login:success",function(){if(!_.isEmpty(t.serverInfo.version)){t.analytics.trackEvent("login",t.serverInfo.version);t.analytics.loginProcessed=true}else{t.analytics.loginProcessed=false}t.analytics.trackEvent("useHttps",t.loginManager.getSetting("useHttps")?"enabled":"disabled");this._trackServerInstance(t.config.siteUrl)},this).on("app:sync:complete",function(){if(!t.analytics.loginProcessed){t.analytics.trackEvent("login",t.serverInfo.version);t.analytics.loginProcessed=true}},this).on("app:logout",function(){t.analytics.loginProcessed=false},this).on("offline:enabled",function(e){t.analytics.setDimension(t.analytics.DIMENSIONS.offlineMode,e?"enabled":"disabled")},this).on("offline:failure",function(e){t.analytics.trackEvent("offline-failure",e.code)},this).on("offline:encryption:complete",function(e){t.analytics.trackEvent("storage-encryption",e?"failed":"success")},this).on("offline:tx:create",function(e){t.analytics.trackEvent("tx-create",t.offline.utils.actionToSymbol(e.txOptions))},this).on("offline:tx:success",function(e){t.analytics.trackEvent("tx-success",t.offline.utils.actionToSymbol(e.tx),t.offline.utils.getTxAge(e.tx))},this).on("offline:tx:error",function(e){t.analytics.trackEvent("tx-error",e.errorCode||"unknown",t.offline.utils.getTxAge(e.tx),t.offline.utils.actionToSymbol(e.tx))},this).on("offline:tx:rollback",function(e){t.analytics.trackEvent("tx-rollback",t.offline.utils.actionToSymbol(e.tx),t.offline.utils.getTxAge(e.tx))},this).on("offline:wins:completed",function(e){t.analytics.trackEvent("offline:wins","synced",e.syncedRecords,"numRecords")},this);this.initialized=true},onAppPause:function(e){t.analytics.trackEvent("device","pause")},onAppResume:function(){this.trackEvent("device","resume")},_handleGAForParentModule:function(e,t){t.module=e.parentModule;if(e.modelId){t.layoutType="details"}else if(e.dashletId){this._handleGAForDashlets(e,t)}else{t.layoutType="relationships"}},_handleGAForRootModules:function(e,i){switch(e.root){case"Login":i.layoutType=e.root.toLowerCase();i.module=e.root;i.track="create";break;case"About":case"Settings":i.layoutType=e.root.toLowerCase();i.module=t.utils.capitalize(e.root);i.track="create";break;case"Offline":switch(e.module){case"TxLog":i.layoutType=e.modelId?"detail":"list";i.module=e.module;break;case"offlineStats":i.layoutType=e.module;i.module=e.root;i.track="create";break;default:i.layoutType=e.root.toLowerCase();i.module=e.root;i.track="create";break}break;case"Search":case"Recents":if(e.module&&e.modelId){i.layoutType="detail";i.module=e.module}else{i.layoutType="list";i.module=e.root}break;case"Dashboards":if(e.dashletId){this._handleGAForDashlets(e,i)}else{i.layoutType="dashboard"}break}},_handleGAForActions:function(e,i){switch(e.action){case"duplicate":i.layoutType="edit";i.track="duplicate";break;case"associate":i.layoutType=e.action;i.module=t.data.getRelatedModule(e.parentModule,e.link);i.track=e.parentModule;break;default:i.layoutType=e.action?e.action:"detail";break}if(e.action==="create"&&e.parentModelId){i.layoutType="edit";i.module=e.parentModule;i.track=e.link;i.link="create"}if(!i.module){i.module=e.module||e.parentModule}},_handleGAForLayout:function(e,i){var n=e.layoutDef.gaTrack;if(n==="teamset"){i.layoutType="multienum";i.module=t.controller.getScreenContext().module;i.track="teamset"}else if(n==="textarea"){i.layoutType=n;i.module=e.layoutDef.context.get("parentModel")?e.layoutDef.context.get("parentModel").module:null}else{i.layoutType=n;i.module=t.controller.getScreenContext().module;if(n==="relate"||n==="parent-list"){i.track=e.layoutDef.context.attributes.module}else if(n==="about"){i.module="Login"}}},_handleGAForDashlets:function(e,i){var n=t.nomad.dashboards.getDashletConfig(e.dashboardId,e.dashletId).view;var a=e.root==="Dashboards";i.layoutType=a?"dashlet":"record-dashlet";if(n.template==="tabbed-dashlet"){i.layoutType="";i.module=""}else if(n.type==="dashablelist"){i.module=a?"list":e.parentModule;i.track=a?n.module:"list";i.link=a?i.link:n.module}else{i.module=a?n.type:e.parentModule;i.track=a?"":n.type}},_buildViewIdAndTrack:function(e){var t=_.compact([e.layoutType,e.module,e.track,e.link]).join("/");if(!_.isEmpty(t)){this.setActiveView(t)}},setActiveView:function(e,t){this.currentViewId=e;if(!t){this.trackPageView(e)}},trackPageView:function(e){if(!this.initialized)return;t.logger.debug("GAN-page: "+e);if(t.offlineEnabled){this.setDimension(this.DIMENSIONS.connection,t.offline.status.noConnection?"offline":"online")}analytics.trackPageView(e)},trackEvent:function(e,i,n,a){if(!this.initialized)return;i=""+(i||"[unknown]");a=""+(a||this.currentViewId);t.logger.debug("GAN-event: "+e+":"+i+"("+n+")"+" for "+a);analytics.trackEvent({category:e,action:i,label:a,value:n})},startSession:function(){if(!this.initialized)return;analytics.startSession()},setDimension:function(e,t){if(!this.initialized)return;analytics.setDimension({index:e,value:t})},setMetric:function(e,t){if(!this.initialized)return;analytics.setMetric({index:e,value:t})},_attachAnalytics:function(){document.addEventListener("click",this._trackListener,true);document.addEventListener("swipeLeft",this._trackListener,true);document.addEventListener("swipeRight",this._trackListener,true)},_detachAnalytics:function(){document.removeEventListener("click",this._trackListener,true);document.removeEventListener("swipeLeft",this._trackListener,true);document.removeEventListener("swipeRight",this._trackListener,true)},_trackListener:function(e){var i;if(e.path){i=e.path}else{i=$(e.target).parents();i.push(e.target)}_.each(i,function(i){var n=$(i);var a=n.attr("track");if(!a)return;var o=a.match(t.analytics.trackEventSplitter);var r=o[1].indexOf(e.type)+1;if(!r)return;var s=o[2]||i.id;var l=o[3]||"";t.analytics.trackEvent(e.type,s,l&&n.hasClass(l)?1:0)})},_trackServerInstance:function(e){if(t.config.analytics.instanceTracking){t.analytics.setDimension(t.analytics.DIMENSIONS.sugarInstance,this._instanceKeyFromUrlWhitelist(e))}},_instanceKeyFromUrlWhitelist:function(e){var i=_.find(t.config.analytics.serverUrlWhiteList||[],function(t){var i=new RegExp(t,"i");return i.test(e)});if(t.config.analytics.instanceUrlTracking){i=t.loginManager.getSetting("loginUrl")}return i?i:"others"},dispose:function(){t.events.off(null,null,i);this.initialized=false}};t.augment("analytics",i,false);e.exports=i})(SUGAR.App)},function(e,t,i){(function(e){var t=i(258);var n=i(263);e.events.on("nativeMessage",function(e){if(e.target==="telephony"){a.callStateChanged(e.calls)}});var a={CALL_STATE:{IDLE:"IDLE",DIALING:"DIALING",CONNECTED:"CONNECTED"},_callModule:"Calls",getCallLog:function(){return e.nomad.getSetting("callLog")},setCallLog:function(t){if(t&&t.recordId&&t.recordName){e.nomad.setSetting("callLog",t)}else{e.nomad.removeSetting("callLog")}},clearCallLog:function(){e.nomad.removeSetting("callLog")},callPhone:function(t,i){var a={phone:t,module:i.module,recordId:i.recordId,recordName:i.recordName};this.setCallLog(a);if(!e.isNative){this.bindCallEnd()}if(!$.os.phone){a.started=true;a.startedOn=(new Date).getTime()}e.logger.debug("Initiating a phone call to "+t);n._callPhone(t)},callStateChanged:function(t){var i=this.getCallLog();if(t.length===0){if(i){i.endedOn=(new Date).getTime();e.logger.debug("End call: "+i.id+":"+i.state);this.setCallLog(i);this.onAppResume()}return}e.logger.debug("Call state changed: "+t.length);var n=t[0];e.logger.debug("First call: "+n.id+":"+n.state);if(i){if(n.state===this.CALL_STATE.DIALING){i.id=n.id;i.state=n.state;i.direction="Outbound";i.startedOn=(new Date).getTime();i.started=true;this.setCallLog(i)}else if(n.state===this.CALL_STATE.IDLE){i.id=n.id;i.state=n.state;i.endedOn=(new Date).getTime();this.setCallLog(i)}else if(n.state===this.CALL_STATE.CONNECTED){i.state=n.state;this.setCallLog(i)}}},onAppPause:function(){},onAppResume:function(){if(!e.isSynced)return;var i=this.getCallLog();if(_.isEmpty(i))return;if($.os.android&&i.state!==this.CALL_STATE.IDLE&&e.isNative)return;if(!i.started){this.clearCallLog();return}i.endedOn=i.endedOn||(new Date).getTime();var n=this;if(this._canLogCall(i)){t.showConfirm(e.lang.get("LBL_MOBILE_LOG_CALL_CONFIRM"),{callback:function(e){if(e===2)n.logCall(i)}})}this.clearCallLog()},logCall:function(t){var i=t.endedOn-t.startedOn;var n=i/1e3;var a=1;var o=0;if(n>60){a=n/60;if(a>60){o=a/60;a=a%60}}var r=e.nomad.getRelationshipLink(t.module,this._callModule);var s=t.direction==="Outbound"&&r?e.nomad.buildLinkRoute(t.module,t.recordId,r,null,"createCall"):"createCall";s+="?direction="+t.direction+"&start_date="+new Date(t.startedOn).toISOString()+"&duration_hours="+o+"&duration_minutes="+a+"&status=Held"+"&log_call=true";e.controller.navigate(s)},_canLogCall:function(t){var i=["Employees","Calls"];var n=!_.contains(i,t.module);var a=e.metadata.getModule(this._callModule);var o=a&&e.acl.hasAccess("create",this._callModule);var r=t.module==="Users"&&t.recordId===e.user.get("id");return o&&a&&n&&!r},bindCallEnd:function(){var t;var i=[{state:this.CALL_STATE.DIALING}];this.callStateChanged(i);if($.os.android){t=_.bind(function(){if(this._pageIsVisible()){e.logger.debug("bindCallEnd return handler called");document.removeEventListener("webkitvisibilitychange",t);this.onAppResume()}},this);document.addEventListener("webkitvisibilitychange",t,false)}else if($.os.ios){t=_.bind(function(){window.removeEventListener("pageshow",t);this.onAppResume()},this);window.addEventListener("pageshow",t,false)}},_pageIsVisible:function(){return!document.webkitHidden}};e.augment("telephony",a,false)})(SUGAR.App)},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(258);var r=i(274);var s=i(273);var l={_loginConfigs:{},_currentConfigId:null,kLoginConfig:"loginManager:loginConfigs",kCurrentConfig:"loginManager:currentConfigId",kTempConfig:"loginManager:tempConfig",_reconfigDefaults:{ssoVisibilityOption:null,showUrl:true,useHttps:true},init:function(){n.api.handleExternalLogin=this.handleExternalLogin;this._initializeLoginSettings()},_initializeLoginSettings:function(){this._fetchLoginConfig();if(!n.isNative){if(this._loginConfigs["default"].siteUrl!==n.config.siteUrl){this._resetLoginSettings();this._fetchLoginConfig()}}this.applyLoginSettings()},_resetLoginSettings:function(){this._resetTempSetting();this._currentConfigId=null;a.removeSetting(this.kCurrentConfig);this._loginConfigs={};a.removeSetting(this.kLoginConfig)},verifyExternalLogin:function(e){n.api.ping(null,{complete:function(){if(e){e()}},error:function(e){if(e.status===401){n.error.handleExternalLoginNotAvailable()}else{n.error.handleHttpError(e)}}})},handleLoginSuccess:function(){var e=this.getSetting();this._commitTempSetting();this._resetUserSettings(e)},handleSyncComplete:function(){this._commitTempSetting();if(n.api.isExternalLogin()){this.setSetting({loginName:n.user.get("user_name")})}},handleAppUpgrade:function(){this._readDefaultConfig();var e=["setupBuddy"];_.each(_.keys(this._loginConfigs),function(t){this._loginConfigs[t]=_.omit(this._loginConfigs[t],e)},this);a.setSetting(this.kLoginConfig,this._loginConfigs);var t=this.getTempSetting();this.applyLoginSettings(t)},handleLogoutRoute:function(e){var t=this;e=e==="1";n.logout({success:function(e){if(n.api.isExternalLogin()&&e&&e.url){t.handleExternalLogout(e.url)}},complete:function(){n.controller.navigate("#");n.router.login()}},e,{timeout:n.config.logoutTimeout})},applyLoginSettings:function(e){e=e||this.getSetting();n.config.siteUrl=e.siteUrl||"http://localhost:8888";n.api.serverUrl=a.getServerUrl();n.api.setExternalLogin(e.isSSO);n.logger.debug("Applying login config");n.logger.debug("Site URL: "+n.config.siteUrl);n.logger.debug("Server URL: "+n.api.serverUrl)},getSetting:function(e){var t=this._loginConfigs[this._currentConfigId]||{};return e?t[e]:t},setSetting:function(e,t){if(_.isObject(e)){_.extend(this._loginConfigs[this._currentConfigId],e)}else{this._loginConfigs[this._currentConfigId][e]=t}a.setSetting(this.kLoginConfig,this._loginConfigs)},removeSetting:function(e){delete this._loginConfigs[this._currentConfigId][e];a.setSetting(this.kLoginConfig,this._loginConfigs)},getTempSetting:function(){var e=a.getSetting(this.kTempConfig);e=_.extend({},this.getSetting(),e);var t=["loginName","loginUrl","isSSO","ssoVisibilityOption","showUrl","useHttps","siteUrl"];_.each(e,function(i,n){if(!_.contains(t,n)){delete e[n]}});return this._buildLoginConfig(e)},setTempSetting:function(e){var t=this.getTempSetting();t=this._buildLoginConfig(_.extend(t,e));a.setSetting(this.kTempConfig,t);return t},_commitTempSetting:function(){var e=a.getSetting(this.kTempConfig);if(e){this._resetTempSetting();e.loginTS=_.now();e=this._buildLoginConfig(e);this._currentConfigId=this._addToSettings(e);a.setSetting(this.kCurrentConfig,this._currentConfigId);this.applyLoginSettings()}},_resetTempSetting:function(){a.removeSetting(this.kTempConfig)},reconfigure:function(e,t){var i=this._getOptionValue(e.loginName,"");var a=this._getOptionValue(e.serverUrl,"");var r=this._getOptionBoolValue(e.ssoOption,this._reconfigDefaults.ssoVisibilityOption);var s=this._getOptionBoolValue(e.showUrl,this._reconfigDefaults.showUrl);var l=this._getOptionBoolValue(e.useHttps,this._reconfigDefaults.useHttps);var c={loginName:i,loginUrl:a,ssoVisibilityOption:n.config.externalLoginEnabled?r:false,showUrl:s,useHttps:l};n.logger.debug("Reconfiguring the client with "+JSON.stringify(c));if(!this._isUrlWhitelisted(a)){n.logger.warn("Configured server URL "+a+" is not whitelisted.");t();return}this._resetTempSetting();var d=this.getSetting();c=this._buildLoginConfig(c);var u=this.setTempSetting(c);var f=d.id!==u.id;if(n.api.isAuthenticated()){if(f){var h=this;o.showActionSheet([n.lang.get("LBL_MOBILE_RELOGIN_BUTTON"),n.lang.get("LBL_LATER")],{title:n.lang.get("LBL_RECONFIGURE_LOGIN_SETTINGS_CONFIRM"),onSelectCb:function m(e,i){if(i=="0"){n.logout({complete:function(){p(t)}},true)}else{t()}},onCancelCb:function g(){h._resetTempSetting();t()}})}else{t()}}else{p(t)}function p(e){var t=n.controller.layoutManager.getRootLayout();if(t&&t.name==="login"){var i=t.model;if(i){i.set("password","")}t.render();if(e){e()}}else{n.router.login();_.delay(function(){if(e){e()}},1e3)}}},_readDefaultConfig:function(){var e=this._buildLoginConfig({id:"default",loginName:"",loginUrl:this._getOptionValue(n.config.defaultServerUrl,""),siteUrl:n.config.siteUrl,ssoVisibilityOption:n.config.externalLoginEnabled?null:false,
showUrl:!n.config.hideLoginUrl,useHttps:n.config.useHttps});return this._addToSettings(e)},_fetchLoginConfig:function(){this._currentConfigId=a.getSetting(this.kCurrentConfig);this._loginConfigs=a.getSetting(this.kLoginConfig)||{};if(!this._currentConfigId){this._currentConfigId=this._readDefaultConfig();a.setSetting(this.kCurrentConfig,this._currentConfigId);var e=n.config.useHttps;var t=a.getSetting("siteUrl")||n.config.siteUrl;if(/^https?:\/\//.test(t)){e=/^https:\/\//.test(t)}var i={loginName:a.getSetting("loginName")||"",loginUrl:a.getSetting("loginUrl")||"",siteUrl:n.config.siteUrl,useHttps:e,isSSO:n.config.externalLoginEnabled&&a.getSetting("externalLogin"),fontSize:a.getSetting("fontSize")};this.setTempSetting(i);a.removeSetting("loginName");a.removeSetting("loginUrl");a.removeSetting("siteUrl");a.removeSetting("useHttps");a.removeSetting("fontSize");a.removeSetting("externalLogin");a.removeSetting("setupBuddyDone")}},_buildSettingsId:function(e){var t=[e.siteUrl||"",!e.isSSO?e.loginName||"":""];return String(Math.abs(a.utils.getHashCode(t.join(":"))))},_addToSettings:function(e){this._loginConfigs[e.id]=_.extend(this._loginConfigs[e.id]||{},e);if(_.size(this._loginConfigs)-1>n.config.loginSettingsLimit){this._loginConfigs=_.pick(this._loginConfigs,_.chain(this._loginConfigs).omit("default").sortBy(function(e){return e.loginTS}).last(n.config.loginSettingsLimit).pluck("id").value(),"default")}a.setSetting(this.kLoginConfig,this._loginConfigs);return e.id},_buildLoginConfig:function(e){var t=this._loginConfigs["default"]||{};var i=_.extend({},t,e);if(e.loginUrl&&n.isNative){i.siteUrl=this._normalizeUrl(e.loginUrl,e.useHttps)}if(!n.isNative){i.showUrl=false;i.loginUrl=""}if(e.id!=="default"){i.id=this._buildSettingsId(i)}return i},_resetUserSettings:function(e){var t=n.cache.get(a.SETTINGS_CACHE_KEY);var i=this.getSetting();var o=e.id!==i.id||e.loginName!==i.loginName&&i.isSSO;if(o){s.resetPref();a.removeLastState();var l=[this.kLoginConfig,this.kCurrentConfig];_.each(t,function(e,i){if(!_.contains(l,i)){delete t[i]}});n.cache.set(a.SETTINGS_CACHE_KEY,t);n.cache.cut("lang");n.user.clear();a.saveUser();a.cleanStores();a.dashboards.cleanDashboardsCache();r.resetCredentials();a.setFontSize(i.fontSize)}a.enableOffline(o);if(t.default_view==="Recents"){a.removeSetting("default_view")}},_getOptionBoolValue:function(e,t){var i=this._getOptionValue(e,t);return i===t?i:i==="1"?true:i==="0"?false:t},_getOptionValue:function(e,t){var i=t;if(!_.isUndefined(e)){e=String(e);i=_.isEmpty(e)?t:e}return i},_isUrlWhitelisted:function(e){return _.isEmpty(n.config.configUrlWhiteList)||Boolean(_.find(n.config.configUrlWhiteList||[],function(t){return new RegExp(t).test(e)}))},_normalizeUrl:function(e,t){e=e.trim();var i=/^no-ssl:\/\//.test(e);if(!i&&!/^https?:\/\//.test(e)){e="http://"+e}if(t&&!i&&e.indexOf("http://")===0){e="https:"+e.substr(5)}if(e.indexOf("no-ssl://")===0){e="http://"+e.substr(9)}return e.replace(/\/+$/,"")}};n.augment("loginManager",l,false);e.exports=l},function(e,t){(function(e){var t=e.view.declareComponent;e.view.declareComponent=function(e,i){if(_.isFunction(i)){return i}else{return t.apply(this,arguments)}};SUGAR.forms.FlashField=function(){};SUGAR.forms.markField=SUGAR.forms.unmarkField=function(){};e.metadata.copy=function(t,i){i=i||{};if(i.bean instanceof e.Bean){return e.utils.deepCopy(t)}else{return t}};e.data.getEditableFields=function(t,i){var n={};_.each(i,function(i){if(e.acl.hasAccessToModel("edit",t,i)){n[i]=t.get(i)}});n["id"]=t.get("id");return n};var i=SUGAR.expressions.SidecarExpressionContext.prototype.setValue;SUGAR.expressions.SidecarExpressionContext.prototype.setValue=function(e,t){i.apply(this,arguments);var n=this.getField(e);if(n&&n.type==="enum"&&n.def.visibility_grid){n.render()}};SUGAR.expressions.SidecarExpressionContext.prototype.setFieldRequired=function(e,t){t=SUGAR.expressions.Expression.isTruthy(t);var i=this.view.getField(e,this.model);if(i){i.setRequired(t)}};_.extend(SUGAR.expressions.SidecarExpressionContext.prototype,{addClass:function(e,t){var i=this.view.getField(e,this.model);if(i){i.$el.addClass(t)}},removeClass:function(e,t){var i=this.view.getField(e,this.model);if(i){i.$el.removeClass(t)}}});e.error.errorName2Keys.email="ERR_MOBILE_EMAIL";e.MixedBeanCollection.prototype.fetch=function(t){var i=e.metadata.getModuleNames({filter:"visible",access:"list"});t=t||{};t.module_list=this.module_list=t.module_list||this.module_list||i;if(t.module_list!==i){t.module_list=_.filter(t.module_list,function(e){return _.contains(i,e)})}if(!t.module_list.length)return;var n=!_.isUndefined(t.myItems)?t.myItems:this.myItems;if(n){var a=_.select(t.module_list,function(t){return e.nomad.supportsMyItems(t)});t=_.extend({},t,{module_list:a})}return e.BeanCollection.prototype.fetch.call(this,t)};e.augment("hacks",{hackModuleList:function(){var t=e.user.get("module_list"),i=e.metadata.getModules();for(var n=0;n<t.length;++n){if(!i[t[n]])t.splice(n--,1)}},hackAcls:function(){var t=e.user.getAcls(),i=t.Users;if(_.isEmpty(t)){return}i["delete"]="no";if(_.isArray(i.fields)){i.fields={}}i.fields.status={create:"no",write:"no"};_.each(_.keys(t),function(i){if(!e.metadata.getModule(i)&&!_.contains(e.user.get("module_list"),i)){delete t[i]}});e.user.set("acl",t)}});delete e.validation.validators.datetime;delete e.validation.validators.primaryEmail;var n=$.param;$.param=function(e){if(e instanceof ArrayBuffer){return e}else return n.apply(this,arguments)};var a=$.ajax;$.ajax=function(e){if(e.files&&e.files.length>0){return o(e)}else{return a.apply($,arguments)}};function o(t){var i=t.files,n=t.files.fieldName,a=i.fileData.name||"newfile",o=i.fileData.type||"application/octet-stream",r=i.fileData.binary,s={"OAuth-Token":e.api.getOAuthToken()};function l(e){function t(e){return e.charCodeAt(0)&255}var i=Array.prototype.map.call(e,t);var n=new Uint8Array(i);return n.buffer}var c="xxxxxx",d="\r\n",u="";u+="--"+c+d;u+="Content-Disposition: form-data;";u+='name="'+n+'"; filename="'+a+'"'+d;u+="Content-Type: "+o+d+d;u+=r+d;u+="--"+c+"--";return $.ajax({complete:t.complete,error:t.error,success:t.success,type:"POST",url:t.url,data:l(u),processData:false,contentType:"multipart/form-data; boundary="+c,headers:s,dataType:"json"})}var r=e.metadata.sync;e.metadata.sync=function(t,i){if(e.lang.getLanguage()&&e.user.get("preferences")&&e.lang.getLanguage()!==e.user.get("preferences").language||!e.config.cacheMeta){i=i||{};i.forceRefresh=true;e.logger.debug("Forcing meta refresh as user language has changed")}r.call(this,t,i)};e.accessibility={run:function(){}};e.logger.ServerWriter.write=function(){};e.cache.clean=function(){};e.events.on("app:init",function(){var t=e.api.records;e.api.records=function(i,n,a,o,r,s){var l;s=s||{};if(o.recents){delete o.recents;n="recent";if(r.success){l=r.success;r.success=function(e){e.next_offset=-1;l.apply(this,arguments)}}}return t.apply(e.api,arguments)};var i=e.api.search;e.api.search=function(n,a,o){var r=e.serverInfo.isSevenUp&&_.contains(["Users","Employees"],n.module_list);if(r){n=_.extend({},n,{filter:[{$or:[{first_name:{$contains:n.q}},{last_name:{$contains:n.q}}]}],q:null});return t.call(this,"read",n.module_list,null,n,a,o)}else{return i.apply(this,arguments)}};function n(){var t=0;var i=false;$(window.document).on({ajaxSuccess:function n(a,o,r){var s,l,c;if(i||r.type.toUpperCase()!=="GET"){return}s=o.getResponseHeader("cache-control")||"";l=/max-age=(\d+)/i.exec(s)||[];l=+l[1]||0;if(l>e.config.maxHttpCacheAge){l=e.config.maxHttpCacheAge}c=new Date;c=c.setSeconds(c.getSeconds()+l);if(c>t){t=c}},ajaxError:function(){i=t>(new Date).getTime()},ajaxBeforeSend:function a(n,o,r){var s=(new Date).getTime();if(r.type==="GET"){if(i&&t>s){r.url+=(r.url.indexOf("?")===-1?"?":"&")+"nomad_timestamp="+s}else{i=false}}else if(r.url!==e.api.buildURL("bulk")){i=t>s}}})}n();var a=e.api.buildURL;e.api.buildURL=function(e,t,i,n){var o=a.apply(this,arguments);if(t==="favorite"||t==="unfavorite"){var r={fields:"my_favorite,following"};if(t==="favorite"){r.viewed=1}o+="?"+$.param(r)}return o}})})(SUGAR.App)},function(e,t){(function(e){e.baseMetadata={_hash:"_base_",modules:{Dashboards:{_hash:"DashboardsHash",fields:{_hash:"DashboardsFieldsHash",id:{name:"id",type:"id"},name:{name:"name",type:"varchar",unified_search:true},dashboard_type:{name:"dashboard_type",type:"varchar"},date_modified:{name:"date_modified",type:"datetime"},url:{name:"url",type:"varchar"},metadata:{name:"metadata",type:"metadata"}},layouts:{detail:{meta:{components:[{view:"dashboard"}]}}},views:{detail:{meta:{panels:[{fields:[]}]}}}},Comments:{_hash:"CommentsHash",layouts:{},fields:{name:{name:"name",type:"varchar"},date_entered:{name:"date_entered",type:"datetime"},date_modified:{name:"date_modified",type:"datetime"},created_by:{name:"created_by",type:"id"},created_by_name:{name:"created_by_name",type:"relate",link:"created_by_link"},activities:{name:"activities",type:"link",relationship:"comments",module:"Activities"},parent_id:{name:"parent_id",type:"id"},data:{name:"data",type:"json"},_hash:"CommentsFieldsHash"}},Activities:{_hash:"ActivitiesHash",layouts:{},fields:{_hash:"ActivitiesFieldsHash",name:{name:"name",type:"varchar"},date_entered:{name:"date_entered",type:"datetime"},date_modified:{name:"date_modified",type:"datetime"},parent_id:{name:"parent_id",type:"id"},parent_type:{name:"parent_type",type:"varchar"},activity_type:{name:"activity_type",type:"varchar"},data:{name:"data",type:"json"},comment_count:{name:"comment_count",type:"int"},last_comment:{name:"last_comment",type:"json"},created_by:{name:"created_by",type:"id"},comments:{module:"Comments",name:"comments",relationship:"comments",type:"link"}},mergedFields:[],filters:{_hash:"ActivitiesFiltersHash",activity:{meta:{create:false,default_filter:"all_records",quicksearch_field:[],quicksearch_priority:2,filters:[{id:"all_records",name:"LBL_LISTVIEW_FILTER_ALL",filter_definition:[],editable:false},{id:"messages_for_create",name:"LBL_ACTIVITY_CREATE",filter_definition:{$or:[{activity_type:"create"},{activity_type:"attach"}]},editable:false},{id:"messages_for_update",name:"LBL_ACTIVITY_UPDATE",filter_definition:{activity_type:"update"},editable:false},{id:"messages_for_link",name:"LBL_ACTIVITY_LINK",filter_definition:{activity_type:"link"},editable:false},{id:"messages_for_unlink",name:"LBL_ACTIVITY_UNLINK",filter_definition:{activity_type:"unlink"},editable:false},{id:"messages_for_post",name:"LBL_ACTIVITY_POST",filter_definition:{activity_type:"post"},editable:false}]}}},views:{list:{meta:{panels:[{fields:[]}]}},"activitystream-dashlet":{meta:{panels:[{fields:[]}],view:{auto_refresh:0,currentFilterId:"all_records",module:"Activities",type:"activitystream-dashlet"}}}}},Filters:{_hash:"FiltersHash",fields:{_hash:"FiltersFieldsHash"},layouts:{}},Teams:{_hash:"TeamsHash",favoritesEnabled:false,ftsEnabled:false,mergedFields:["id","name","name_2"],fields:{_hash:"TeamsFieldsHash",id:{name:"id",type:"id"},name:{name:"name",type:"varchar",unified_search:true},name_2:{name:"name_2",type:"varchar",unified_search:true},primary:{name:"primary",type:"boolean"}},views:{list:{meta:{panels:[{fields:[{name:"name",type:"text"},{name:"name_2",type:"varchar"}]}]}}},layouts:{list:{meta:{type:"list",components:[{view:"list"}]}}}},Login:{_hash:"LoginHash",fields:{_hash:"LoginFieldsHash",username:{name:"username",type:"username",required:true},password:{name:"password",type:"password",required:true},url:{name:"url",type:"url",required:true}},views:{login:{meta:{panels:[{label:"Login",fields:[{name:"username",label:"Username"},{name:"password",label:"Password"},{name:"url",label:"URL"}]}]}}},layouts:{login:{meta:{type:"login",components:[{view:"login"}]}}}},About:{_hash:"AboutHash",fields:{_hash:"AboutFieldsHash",app_version:{name:"app_version",type:"varchar"},sdk_version:{name:"sdk_version",type:"varchar"},server_version:{name:"server_version",type:"varchar"},server_url:{name:"server_url",type:"url"},support_email:{name:"support_email",type:"url"},support_website:{name:"support_website",type:"url"}},views:{about:{meta:{panels:[{label:"LNK_ABOUT",fields:[{name:"app_version",label:"LBL_MOBILE_APP_VERSION",view:"readonly"},{name:"sdk_version",label:"LBL_MOBILE_SDK_VERSION",view:"readonly"},{name:"server_version",label:"LBL_MOBILE_SERVER_VERSION",view:"readonly"},{name:"server_url",label:"LBL_MOBILE_SERVER_URL",css_class:"server_url"},{name:"support_email",label:"LBL_MOBILE_FEEDBACK",css_class:"support_email hide"},{name:"support_website",label:"LBL_MOBILE_SUPPORT",css_class:"support_website"}]}]}}},layouts:{about:{meta:{type:"about",components:[{view:"about"}]}}}},Error:{_hash:"Error",fields:{_hash:"ErrorHash",message:{name:"message",type:"varchar"}},layouts:{error:{meta:{type:"error",components:[{view:"error"}]}}},views:{error:{meta:{panels:[{fields:[]}]}}}},Settings:{_hash:"SettingsHash",fields:{_hash:"SettingsFieldsHash",language:{name:"language",type:"enum","default":"en_us"},logging:{name:"logging",type:"enum"},fontSize:{name:"fontSize",type:"enum","default":"normal"}},views:{settings:{meta:{panels:[{label:"LNK_SETTINGS",fields:[{name:"language",label:"LBL_LANGUAGE",options:"available_language_dom",view:"edit","default":"en_us"},{name:"logging",label:"LBL_LOG_LEVEL",options:["TRACE","DEBUG","INFO","WARN","ERROR","FATAL"],view:"edit"},{name:"fontSize",label:"LBL_SET_FONTSIZE",view:"edit","default":"normal"}]}]}}},layouts:{settings:{meta:{type:"settings",components:[{view:"settings"}]}}}},TxLog:{_hash:"txLogHash",fields:{_hash:"TxLogFieldsHash",_tx_action:{name:"_tx_action"},_tx_bean_module:{name:"_tx_bean_module"},_tx_updated_fields:{name:"_tx_updated_fields"},_tx_error_count:{name:"_tx_error_count"}},views:{list:{meta:{panels:[{label:"XXX",fields:[{name:"_tx_action"},{name:"_tx_bean_module"}]}]}},detail:{meta:{panels:[{label:"XXX",fields:[{name:"_tx_action"},{name:"_tx_bean_module"}]}]}}},layouts:{list:{meta:{type:"list",components:[{view:"list"}]}},detail:{meta:{type:"detail",components:[{view:"detail"}]}}}},Offline:{_hash:"OfflineHash",fields:{_hash:"OfflineFieldsHash"},views:{offline:{meta:{panels:[{label:"LNK_SETTINGS",fields:[]}]}}},layouts:{offline:{meta:{type:"offline",components:[{view:"offline"}]}},offlineSettings:{meta:{type:"offline",components:[{view:"offline-settings"}]}},offlineStats:{meta:{type:"offline",components:[{view:"offline-stats"}]}}}},Recents:{_hash:"RecentsHash",fields:{_hash:"RecentsFieldsHash"},views:{},layouts:{}},Search:{_hash:"SearchHash",fields:{_hash:"SearchFieldsHash",assigned_user_id:{name:"assigned_user_id"}},views:{list:{meta:{panels:[{fields:[]}]}}},layouts:{list:{meta:{type:"list"}}},favoritesEnabled:true},ErrorEmulation:{_hash:"ErrorEmulationHash",fields:{_hash:"ErrorEmulationHash",language:{name:"language",type:"enum","default":"en_us"}},views:{errors:{meta:{panels:[{label:"LNK_SETTINGS",fields:[]}]}}},layouts:{erroremulation:{meta:{type:"errors",components:[{view:"error-emulation"}]}}}},ProductTypes:{_hash:"ProductTypesHash",fields:{_hash:"ProductTypesFieldsHash",id:{name:"id",type:"id"},name:{name:"name",type:"varchar",vname:"LBL_NAME"}},views:{list:{meta:{panels:[{fields:[{name:"name"}]}]}}},layouts:{list:{meta:{type:"list",components:[{view:"list"}]}}},mergedFields:["name"],ftsEnabled:false,favoritesEnabled:false,_patched:true},ProductCategories:{_hash:"ProductCategoriesHash",fields:{_hash:"ProductCategoriesFieldsHash",id:{name:"id",vname:"LBL_ID",type:"id",required:true},name:{name:"name",vname:"LBL_NAME",type:"varchar",len:50,required:true},parent_id:{name:"parent_id",type:"id",vname:"LBL_PARENT_NAME"},parent_name:{id_name:"parent_id",link:"member_categories",module:"ProductCategories",name:"parent_name",source:"non-db",type:"relate",unified_search:true,vname:"LBL_PARENT_CATEGORY"}},views:{list:{meta:{panels:[{fields:[{name:"name"},{name:"parent_name"}]}]}}},layouts:{list:{meta:{type:"list",components:[{view:"list"}]}}},mergedFields:["name","parent_name","parent_id"],ftsEnabled:false,favoritesEnabled:false,_patched:true},ProductTemplates:{_hash:"ProductTemplatesHash",fields:{_hash:"ProductTemplatesFieldsHash",id:{name:"id",vname:"LBL_ID",type:"id",required:true},deleted:{name:"deleted",vname:"LBL_DELETED",type:"bool",required:false,"default":"0"},date_entered:{name:"date_entered",vname:"LBL_DATE_ENTERED",type:"datetime"},date_modified:{name:"date_modified",vname:"LBL_DATE_MODIFIED",type:"datetime"},modified_user_id:{name:"modified_user_id",rname:"user_name",id_name:"modified_user_id",vname:"LBL_MODIFIED_ID",type:"assigned_user_name"},created_by:{name:"created_by",rname:"user_name",id_name:"modified_user_id",vname:"LBL_CREATED_ID",type:"assigned_user_name"},type_id:{name:"type_id",type:"id",required:false,vname:"LBL_TYPE_ID"},manufacturer_id:{name:"manufacturer_id",type:"id",required:false,vname:"LBL_LIST_MANUFACTURER_ID"},manufacturer_name:{name:"manufacturer_name",rname:"name",id_name:"manufacturer_id",type:"relate",vname:"LBL_MANUFACTURER_NAME",join_name:"manufacturers",link:"manufacturer_link",module:"Manufacturers"},category_id:{name:"category_id",type:"id",required:false,vname:"LBL_LIST_CATEGORY_ID"},category_name:{name:"category_name",rname:"name",id_name:"category_id",vname:"LBL_CATEGORY_NAME",join_name:"product_categories",type:"relate",link:"category_link",module:"ProductCategories",source:"non-db"},type_name:{name:"type_name",rname:"name",id_name:"type_id",vname:"LBL_TYPE",join_name:"product_types",type:"relate",link:"type_link",module:"ProductTypes",source:"non-db"},name:{name:"name",vname:"LBL_NAME",type:"varchar",len:50,required:true},mft_part_num:{name:"mft_part_num",vname:"LBL_MFT_PART_NUM",type:"varchar",len:50},vendor_part_num:{name:"vendor_part_num",vname:"LBL_VENDOR_PART_NUM",type:"varchar",len:50},date_cost_price:{name:"date_cost_price",vname:"LBL_DATE_COST_PRICE",type:"date"},cost_price:{name:"cost_price",vname:"LBL_COST_PRICE",type:"currency",required:true,len:null},discount_price:{name:"discount_price",vname:"LBL_DISCOUNT_PRICE",required:true,type:"currency",len:null},list_price:{name:"list_price",vname:"LBL_LIST_PRICE",required:true,type:"currency",len:null},cost_usdollar:{name:"cost_usdollar",vname:"LBL_COST_USDOLLAR",type:"currency",len:null},discount_usdollar:{name:"discount_usdollar",vname:"LBL_DISCOUNT_USDOLLAR",type:"currency",len:null},list_usdollar:{name:"list_usdollar",vname:"LBL_LIST_USDOLLAR",type:"currency",len:null},currency_id:{name:"currency_id",vname:"LBL_CURRENCY",type:"currency_id",required:false,"default":"-99"},currency_symbol:{name:"currency_symbol",type:"varchar",vname:"LBL_CURRENCY_SYMBOL_NAME",source:"non-db"},currency:{name:"currency",vname:"LBL_CURRENCY",type:"varchar",required:false,sortable:false},status:{name:"status",vname:"LBL_STATUS",type:"enum",options:"product_template_status_dom",len:100},tax_class:{name:"tax_class",vname:"LBL_TAX_CLASS",type:"enum",options:"tax_class_dom",len:100},date_available:{name:"date_available",vname:"LBL_DATE_AVAILABLE",type:"date"},website:{name:"website",vname:"LBL_URL",type:"varchar",len:255},weight:{name:"weight",vname:"LBL_WEIGHT",type:"decimal",len:12,precision:"2"},qty_in_stock:{name:"qty_in_stock",vname:"LBL_QUANTITY",type:"int",len:5},description:{name:"description",vname:"LBL_DESCRIPTION",type:"text"},support_name:{name:"support_name",vname:"LBL_SUPPORT_NAME",type:"varchar",len:50},support_description:{name:"support_description",vname:"LBL_SUPPORT_DESCRIPTION",type:"varchar",len:255},support_contact:{name:"support_contact",vname:"LBL_SUPPORT_CONTACT",type:"varchar",len:50},support_term:{name:"support_term",vname:"LBL_SUPPORT_TERM",type:"enum",options:"support_term_dom",len:100},pricing_formula:{name:"pricing_formula",vname:"LBL_PRICING_FORMULA",type:"varchar",len:100},pricing_factor:{name:"pricing_factor",vname:"LBL_PRICING_FACTOR",type:"decimal",len:8,precision:"2"},created_by_link:{name:"created_by_link",type:"link",relationship:"product_templates_created_by",vname:"LBL_CREATED_BY_USER",link_type:"one",module:"Users",source:"non-db"},modified_user_link:{name:"modified_user_link",type:"link",relationship:"product_templates_modified_user",vname:"LBL_MODIFIED_BY_USER",link_type:"one",module:"Users",source:"non-db"},category_link:{name:"category_link",type:"link",relationship:"product_templates_product_categories",vname:"LBL_PRODUCT_CATEGORIES",link_type:"one",module:"ProductCategories",source:"non-db"},type_link:{name:"type_link",type:"link",relationship:"product_templates_product_types",vname:"LBL_PRODUCT_TYPES",link_type:"one",module:"ProductTypes",source:"non-db"},manufacturer_link:{name:"manufacturer_link",type:"link",relationship:"product_templates_manufacturers",vname:"LBL_MANUFACTURERS",link_type:"one",module:"Manufacturers",source:"non-db"}},views:{list:{meta:{panels:[{fields:[{name:"name",label:"LBL_NAME"},{name:"category_name",label:"LBL_CATEGORY_NAME"}]}]}}},layouts:{list:{meta:{type:"list",components:[{view:"list"}]}}},mergedFields:["currency_id","category_id","category_name","cost_price","cost_usdollar","discount_price,","discount_usdollar","list_price","list_usdollar","mft_part_num","name","tax_class","weight"],ftsEnabled:false,favoritesEnabled:false,_patched:true},Forecasts:{_hash:"ForecastsHash",config:{sales_stage_won:["Closed Won"],sales_stage_lost:["Closed Lost"]}},Manufacturers:{_hash:"ManufacturersHash",fields:{_hash:"ManufacturersFieldsHash",id:{name:"id",type:"id"},name:{name:"name",type:"name",unified_search:true}},views:{list:{meta:{panels:[{fields:[{name:"name",label:"LBL_NAME","default":true,enabled:true,type:"name"}]}]}}},layouts:{list:{meta:{type:"list",components:[{view:"list"}]}}},mergedFields:["name"],ftsEnabled:false,favoritesEnabled:false},Home:{_hash:"HomeHash",layouts:{},fields:{_hash:"HomeFieldsHash"},mergedFields:[],views:{casessummary:{meta:{dashlets:[{description:"LBL_CASE_SUMMARY_CHART_DESC",label:"LBL_CASE_SUMMARY_CHART"}],tabs:[{filters:{status:{$in:["New"]}},status:"New",link:"cases",module:"Cases"},{filters:{status:{$in:["Pending Input"]}},status:"Pending Input",link:"cases",module:"Cases",favoritesEnabled:false,ftsEnabled:false},{filters:{status:{$in:["Assigned"]}},status:"Assigned",link:"cases",module:"Cases",favoritesEnabled:false,ftsEnabled:false}]}}}}},views:{"activitystream-dashlet":{meta:{}}},relationships:{comments:{lhs_key:"id",lhs_module:"Activities",lhs_table:"activities",name:"comments",relationship_type:"one-to-many",rhs_key:"parent_id",rhs_module:"Comments",rhs_table:"comments"},product_templates_product_types:{lhs_key:"id",lhs_module:"ProductTypes",lhs_table:"product_types",name:"product_templates_product_types",relationship_type:"one-to-many",rhs_key:"type_id",rhs_module:"ProductTemplates",rhs_table:"product_templates"},product_templates_product_categories:{lhs_key:"id",lhs_module:"ProductCategories",lhs_table:"product_categories",name:"product_templates_product_categories",relationship_type:"one-to-many",rhs_key:"category_id",rhs_module:"ProductTemplates",rhs_table:"product_templates"}},app_strings:{LBL_TRY_AGAIN:"Try again",LBL_NEW_RECORDS:"Recently Created",LBL_ASSIGNED_TO_ME:"My {{module}}",LBL_LISTVIEW_FILTER_ALL:"All {{module}}",LBL_UNFAVORITE:"Unfavorite",LBL_ACTIVITY_CREATE:"Created {{{record}}} {{{module}}}",LBL_ACTIVITY_UPDATE:"Updated {{{changes}}} on {{{record}}} {{{module}}}",LBL_ACTIVITY_LINK:"Linked {{{relatedRecord}}} to {{{record}}} {{{module}}}",LBL_ACTIVITY_UNLINK:"Unlinked {{{relatedRecord}}} from {{{record}}} {{{module}}}",LBL_OFFLINE_PREFETCHING_RELATIONSHIP:"{{relationship}} for {{parentModule}}",LBL_OFFLINE_PREFETCH_RELATED_ACTION:"Download related records...",ERR_OFFLINE_NO_CONNECTION_ENABLE_ERROR:"Failed to enable offline mode. Unable to reach the server.",LBL_SHOWING_CACHED_DATA:"Unable to reach the server. Showing latest available data ({{lastFetched}})",LBL_FUTURE:"Future",LBL_CLOSE_AND_SAVE_BUTTON:"Close {{moduleSingular}} and save",LBL_DASHBOARDS_CHANGED_PROMPT:"Your dashboard configuration has changed. Do you want to reload?",LBL_RECORDS:"Records",LBL_DASHBOARDS:"Dashboards",LBL_MOBILE_SEARCH_PLACEHOLDER:"Search {{searchCriteria}}...",LBL_MOBILE_SPECIFIC_DASHBOARD:"Specific Dashboard",LBL_MOBILE_SPECIFIC_MODULE:"Specific Module",LBL_MOBILE_DEFAULT_VIEW:"Start Screen",LBL_MOBILE_DEFAULT_MODULE:"Selected Module",LBL_MOBILE_DEFAULT_DASHBOARD:"Selected Dashboard",LBL_MOBILE_DEFAULT_DASHLET:"Selected Dashlet",LBL_ALL_DASHLETS:"All Dashlets",LBL_MOBILE_GLOBAL_SEARCH:"Global Search",LBL_MOBILE_ACTIVITYSTREAM_POST_PLACEHOLDER:"Type @ to mention a user. Type # to reference a record.",LBL_MOBILE_NEW_COMMENT:"New comment",LBL_MOBILE_TUTORIAL_HOME_MENU:"Main menu",LBL_MOBILE_TUTORIAL_HOME_PLUS:"Quick create new record",LBL_MOBILE_TUTORIAL_HOME_SWIPE:"Swipe for more options",LBL_DETAIL_RELATED:"Related",LBL_RECORD_SHARE_BUTTON:"Share",LBL_RECORD_NOT_FOUND:"Record not found.",LBL_RELATED_RECORD_NOT_FOUND:"Related record not found.",LBL_NOT_AUTHORIZED:"You are not authorized to view this record.",LBL_SET_FONTSIZE:"Font size",LBL_FONTSIZE_TINY:"Tiny",LBL_FONTSIZE_SMALL:"Small",LBL_FONTSIZE_NORMAL:"Normal (default)",LBL_FONTSIZE_LARGE:"Large",LBL_FONTSIZE_LARGER:"Larger",LBL_FONTSIZE_HUGE:"Huge",LBL_FONTSIZE_EXTRA_HUGE:"Extra huge",LBL_CLOSE_SAVE_BUTTON:"Close task and save",LBL_MOBILE_PROCESSING_FILE:"Preparing file...",ERR_MOBILE_FILE_SIZE_LIMIT_EXCEEDED:"File is too big. Maximum allowed size is {{size}}",LBL_MOBILE_TUTORIAL_DETAIL_EDIT_ACTION:"Edit record",LBL_LATER:"Later",LBL_LOADING_FILES:"Still loading document list. Please try again later",LBL_NEW_WEB_VERSION:"A new version of this application is available. Would you like to update?",LBL_MOBILE_DOWNLOAD_FAILED:"Download failed\r\n{{{this}}}",LBL_MOBILE_DETAIL_SHOW_MORE:"More...",LBL_MOBILE_DETAIL_SHOW_LESS:"...Less",LBL_OFFLINE_MODE:"Offline Mode",LBL_OFFLINE_PREFETCH_PROMPT:"Downloading your assigned, favorited, and followed records for offline access may take some time to complete. A fast connection is recommended. Would you like to proceed?",LBL_OFFLINE_PREFETCH_FIRST_PROMPT:"Do you want your assigned, favorited, and followed records to be downloaded now for offline access? A fast connection is recommended as this operation may take some time. You may download later from Main Menu > Offline.",LBL_OFFLINE_PREFETCH_SUCCESS:"Records downloaded successfully",LBL_OFFLINE_PREFETCH_ACTION:"Download your records...",LBL_OFFLINE_PREFETCH_ERROR:"Error while downloading records",LBL_OFFLINE_PREFETCHING:"Loading records...",LBL_OFFLINE_PREFETCHING_MODULE:"Loading {{module}} {{progressValue}}...",LBL_OFFLINE_PREFETCHING_EST_TIME:"Time left is about {{estimatedTime}}s...",LBL_OFFLINE_PREFETCHING_MODULE_COMPLETE:"Loading {{module}} completed",LBL_OFFLINE_DB_CLEANING_IN_PROGRESS:"Cleaning storage...",LBL_OFFLINE_DB_CLEANING_COMPLETED:"Clean-up completed",LBL_OFFLINE_ROLLBACK_PROMPT:"Do you want to rollback this change?",LBL_OFFLINE_ROLLBACK_SUCCESS:"Rollback completed",LBL_OFFLINE_ROLLBACK_FAILED:"Rollback failed",LBL_OFFLINE_CLEAR_DB:"Clear Storage...",LBL_OFFLINE_COMPACT_DB:"Compact Storage...",LBL_OFFLINE_CLEAN_UP_PROMPT:"This action will delete records you haven't accessed in a while. Proceed?",LBL_OFFLINE_CLEAR_DB_PROMPT:"Do you want to delete all records from the local storage?",LNK_OFFLINE_SETTINGS:"Offline",LBL_OFFLINE_SETTINGS:"Debug settings",LBL_OFFLINE_STATUS_NO_PENDING_TX:"No changes pending synchronization.",LBL_OFFLINE_STATUS_PENDING_TX:"Changes are pending synchronization.",LBL_OFFLINE_STATUS_ONLINE:"Device is online.",LBL_OFFLINE_STATUS_OFFLINE:"Device is offline.",LBL_OFFLINE_STATUS_BAD_NETWORK:"Unable to reach the server.",LBL_OFFLINE_STATUS_SYNC_FAILED:"Last synchronization attempt failed. Check the transaction log.",LBL_OFFLINE_SYNC_IN_PROGRESS:"Synchronization in progress...",LBL_OFFLINE_TRANSACTION_SYNCED:"Transaction synchronized.",LBL_OFFLINE_ENABLE_PROMPT:"Are you sure you want to turn on offline support?",LBL_OFFLINE_DISABLE_PROMPT:"Do you want to turn off offline support? All changes pending synchronization will be lost.",LBL_OFFLINE_ENABLED:"Offline mode enabled",LBL_OFFLINE_DISABLED:"Offline mode disabled",LBL_OFFLINE_STATS:"Storage statistics",LBL_OFFLINE_SERVER_FETCH:"Fetching from server...",LBL_OFFLINE_MERGE_DATA_CONFIRM:"Someone has edited the same record on the server. Confirm to auto-merge your changes or reject to discard them.",LBL_OFFLINE_LAST_SYNC_TS:"Last synchronization attempt: {{ts}}",LBL_ACTION_UPDATE:"UPDATE",LBL_ACTION_CREATE:"CREATE",LBL_ACTION_DELETE:"DELETE",LBL_ACTION_LINK:"LINK",LBL_ACTION_UNLINK:"UNLINK",LBL_ACTION_FAVORITE:"FAVORITE",LBL_ACTION_FOLLOW:"FOLLOW",LBL_ACTION_CREATE_EXPLANATION:'Created {{module}} "{{name}}"',LBL_ACTION_UPDATE_EXPLANATION:'Updated {{module}} "{{name}}"',LBL_ACTION_DELETE_EXPLANATION:'Deleted {{module}} "{{name}}"',LBL_ACTION_LINK_EXPLANATION:'Linked {{module}} "{{name}}" to {{relatedModule}} "{{relatedName}}"',LBL_ACTION_UNLINK_EXPLANATION:'Unlinked {{module}} "{{name}}" from {{relatedModule}} "{{relatedName}}"',LBL_ACTION_FOLLOW_EXPLANATION:'Followed {{module}} "{{name}}"',LBL_ACTION_UNFOLLOW_EXPLANATION:'Unfollowed {{module}} "{{name}}"',LBL_ACTION_FAVORITE_EXPLANATION:'Favorited {{module}} "{{name}}"',LBL_ACTION_UNFAVORITE_EXPLANATION:'Unfavorited {{module}} "{{name}}"',LBL_ACTION_CREATE_RELATED_EXPLANATION:'Created {{module}} "{{name}}" related to {{relatedModule}} "{{relatedName}}"',LBL_EMAIL_ACTION_SET_PRIMARY:"Primary",LBL_EMAIL_ACTION_SET_OPT_OUT:"Opt-out",LBL_EMAIL_ACTION_SET_OPT_IN:"Opt-in",LBL_EMAIL_ACTION_SET_VALID:"Valid",LBL_EMAIL_ACTION_SET_INVALID:"Invalid",LBL_ROLLBACK_BUTTON:"Rollback",LBL_TX_LOG:"Transaction Log",LBL_TX_LOG_DETAIL:"Transaction Detail",LBL_RECORD_DELETED:"(Record deleted)",LBL_FILE_SIZE_UNITS_B:"Bytes",LBL_FILE_SIZE_UNITS_KB:"kB",LBL_FILE_SIZE_UNITS_MB:"MB",LBL_CHOOSE_ITEMS:"Choose items",LBL_OFFLINE_DB_SIZE:"Database size",LBL_OFFLINE_DATA_ENCRYPTION_ENABLED:"Data encryption is enabled.",LBL_OFFLINE_RECORDS_PER_MODULE:"Records per module",LBL_OFFLINE_TOTAL_RECORDS_COUNT:"Total number of records",LBL_RECENTLY_VIEWED:"Recently Viewed",ERR_MOBILE_METADATA_CHANGED_RELOAD:"Server configuration has changed and reload is required. Proceed?",ERR_MOBILE_CONFLICT:"Someone has edited the same record on the server. Confirm to auto-merge your changes or reject to discard them.",ERR_MOBILE_METADATA_CHANGED:"Server configuration has changed.",ERR_MOBILE_FILE_READ:"Failed to read the file",ERR_MOBILE_FILE_NOT_FOUND:"File not found",ERR_MOBILE_FILE_NOT_READABLE:"File not readable",ERR_MOBILE_FILE_ABORTED:"Read operation was aborted",ERR_MOBILE_FILE_SECURITY:"File is locked",ERR_MOBILE_VIEW_NOT_SUPPORTED:"Mobile version does not support this functionality. Do you want to open the desktop version?",ERR_OFFLINE:"Offline error",ERR_OFFLINE_STORAGE_UNAVAILABLE:"Failed to open local storage",ERR_OFFLINE_STORAGE_CREATE:"Failed to create local storage",ERR_OFFLINE_START_FAILED_OUT_OF_SPACE:"Failed to create local storage: you've run out of space.",ERR_OFFLINE_OUT_OF_SPACE:"You've run out of space for local storage.",ERR_OFFLINE_DB_CLEANING_ERROR:"Database clean-up failed",ERR_OFFLINE_CLEAN_UP_CONFIRMATION:"You've run out of space for offline storage. Storage clean-up is recommended. Do you want to perform it now?",ERR_OFFLINE_PREFETCH_FAILED:"Failed to prefetch records from server",ERR_OFFLINE_SYNC_ERROR:"Synchronization error",ERR_OFFLINE_SYNC_CONFLICT:"Synchronization conflict",ERR_OFFLINE_SERVERTIME_UNAVAILABLE:"Failed to get server time",ERR_MOBILE_DASHBOARDS_FETCHING:"Failed to load dashboards from server",ERR_FILTERS_FETCHING:"Unable to fetch your filters",ERR_OFFLINE_ENCRYPTION_FAILED:"Failed to encrypt local storage",LBL_OFFLINE_ENCRYPTION_IN_PROGRESS:"Encrypting offline data. This may take several minutes.",LBL_OFFLINE_ENCRYPTION_SUCCESS:"Offline data encryption completed.",LBL_OK:"OK",LBL_YES:"Yes",LBL_NO:"No",LBL_CANCEL_BUTTON_LABEL:"Cancel",LBL_SKIP:"Skip",LBL_MOBILE_RELOGIN_BUTTON:"Re-login",LBL_MOBILE_META_SYNC_FAILED:"Unable to sync with server.",LBL_MOBILE_META_SYNC_FAILED_RETRY:"Unable to sync with server. Retry?",
LBL_LOADING:"Loading...",LBL_WARNING:"Warning",LBL_CONFIRM:"Confirm",LBL_ENABLE:"Enable",LNK_ABOUT:"About",LBL_MOBILE_APP_VERSION:"App Version",LBL_MOBILE_SDK_VERSION:"SDK Version",LBL_MOBILE_SERVER_VERSION:"Server Version",LBL_MOBILE_SERVER_URL:"Server URL",LBL_MOBILE_FEEDBACK:"Feedback",LBL_MOBILE_SUPPORT:"Support",LBL_LOGIN_USERNAME:"Username",LBL_LOGIN_PASSWORD:"Password",LNK_TERMS_OF_USE:"Terms of Use",LNK_PRIVACY_POLICY:"Privacy Policy",LNK_THIRD_PARTY_SOFTWARE:"Third Party Software",LBL_LOGIN_BUTTON_TITLE:"Log In",LBL_EXTERNAL_LOGIN_BUTTON_TITLE:"Single Sign-On",LBL_LOG_LEVEL:"Log Level",LBL_NOT_AVAILABLE:"N/A",LBL_USE_HTTPS:"Use secure connection",LBL_RECONFIGURE_LOGIN_SETTINGS_CONFIRM:"Login settings have been reconfigured.",LBL_TRIAL_PERIOD_EXPIRED:"Your trial period has expired.",LBL_TOUCHID:"Touch ID",LBL_ENABLE_TOUCHID:"Enable Touch ID",LBL_SETUP_TOUCHID:"Setup Touch ID",LBL_TOUCH_ID_AUTHENTICATE_SUBTITLE:"Sign in using your finger",LBL_TOUCH_ID_NOT_ENROLLED_MSG:"Oops. Touch ID is not yet set up on your device. \n\nGo to your device settings to set up Touch ID. Once set up, enable Touch ID for {{{brandName}}} in Main Menu > Settings.",LBL_TOUCH_ID_DISCLAIMER:"Using Touch ID with {{{brandName}}} will allow you to use your fingerprint instead of entering your username and password to access {{{brandName}}}. \n\nAnyone with a fingerprint registered on your device can access your data. ",LBL_TOUCH_ID_ENABLE_CONFIRM_MSG:"Would you like to proceed with Touch ID?",LBL_TOUCH_ID_ENTER_PASSWORD_TITLE:"Enter {{{brandName}}} Password to Enable Touch ID",LBL_SETUPBUDDY_HEADER_TITLE:"Setup",LBL_SETUPBUDDY_TOUCH_ID_ADDITIONAL_DISCLAIMER:"Turn off Touch ID at any time in Main Menu > Settings.",ERR_GEOLOCATION_PERMISSION_DENIED:"Please give {{{brandName}}} access to your location via your device's settings.",ERR_GEOLOCATION_POSITION_UNAVAILABLE_MSG:"Current location is not available",ERR_GEOLOCATION_POSITION_TIMEOUT_MSG:"Current location retrieval timed out. \nPlease try again.",ERR_GEOLOCATION_PLACEMARKS_UNAVAILABLE_MSG:"Location placemarks are not available",ERR_GEOLOCATION_INVALID_COORDINATES_MSG:"Location coordinates are invalid",ERR_SYNC_FAILED:"Unable to sync with server.",ERR_INTERNAL_ERR_MSG:"Internal error",ERR_MOBILE_NOT_AUTHORIZED:"Access not authorized.",ERR_MOBILE_INVALID_CREDS:"Invalid username or password.",ERR_MOBILE_INVALID_PASSWORD:"Invalid password.",ERR_MOBILE_SESSION_EXPIRED:"Your session expired.",ERR_MOBILE_SSO_NOT_CONFIGURED:"SSO login is unavailable. Ensure the instance is on Sugar 7.5 or greater and configured for SSO.",ERR_MOBILE_NOT_FOUND:"Resource not found.",ERR_MOBILE_TIMEOUT:"Server is not responding.",ERR_MOBILE_CONNECTION_FAILED:"Can't reach the server.",ERR_MOBILE_NOT_FOUND_LOGIN:"No {{{brandName}}} server found at the given URL.",ERR_MOBILE_TIMEOUT_LOGIN:"Server is not responding at the given URL.",ERR_MOBILE_CONNECTION_FAILED_LOGIN:"Server unavailable at the given URL.",ERR_MOBILE_INTERNET_UNAVAILABLE:"Internet connection unavailable.",ERR_MOBILE_INTERNAL:"Internal error ({{{code}}}). Please try again later.",ERR_MOBILE_VALIDATION:"Record is invalid",ERR_SERVER_FLAVOR_INCOMPATIBLE:"Incompatible server flavor: {{{flavor}}}. Supported flavors: {{{supportedFlavors}}}.",ERR_SERVER_VERSION_INCOMPATIBLE:"Incompatible server version: {{{version}}}. Minimum required version: {{{minVersion}}}.",ERR_MOBILE_INCOMPATIBLE_REBRAND_CLIENT_VERSION:"Your app is outdated and is no longer compatible with the {{{brandName}}} instance you are connecting to.",ERR_MOBILE_INCOMPATIBLE_CLIENT_VERSION:"Your app is outdated and is no longer compatible with the {{{brandName}}} instance you are connecting to. Do you want to download the new version from App Store?",ERR_GENERIC_TITLE:"Error",LBL_MOBILE_BY:"By",LBL_MOBILE_FILTER_IS_NOT_AVAILABLE:"This filter is not available in offline"}};e._mod_strings=["LBL_MODULE_NAME","LBL_MODULE_NAME_SINGULAR","LBL_RELATED_RECORD_DEFAULT_NAME","LBL_RELATED_MODULE","LBL_CREATE_RELATED","LBL_CREATE_MODULE","LBL_RELATED_MODULE","LBL_EDIT_RELATED","LBL_EDIT","LBL_ASSOC_EXISTING","LBL_ASSOC","LBL_ASSIGN","LBL_RELATED_MODULE_PLURAL","LBL_DASHLET_FORECAST_NOT_SETUP","LBL_DASHLET_FORECAST_NOT_SETUP_ADMIN","LBL_DASHLET_FORECAST_CONFIG_LINK_TEXT","LBL_FORECASTS_MISSING_SALES_STAGE_VALUES","LBL_CLOSED","LBL_FORECAST_DETAILS_SURPLUS","LBL_FORECAST_DETAILS_EXCEED","LBL_FORECAST_DETAILS_DEFICIT","LBL_FORECAST_DETAILS_SHORT","LBL_FORECAST_DETAILS_NO_DATA","LBL_FORECAST_DETAILS_MEETING_QUOTA","LBL_SALES_STAGE","LBL_AMOUNT","LBL_PERCENT","LBL_CUMULATIVE_TOTAL","LBL_OW_PROBABILITY","LBL_QUOTA","LBL_QUOTA_ADJUSTED","LBL_DASHLET_TOP10_SALES_OPPORTUNITIES_NAME","LBL_NEW_RECORDS","LBL_ASSIGNED_TO_ME","LBL_LISTVIEW_FILTER_ALL","LBL_MY_SCHEDULED_ITEMS","LBL_MY_SCHEDULED_CALLS","LBL_MY_SCHEDULED_MEETINGS"];e._app_list_strings=["record_type_display","moduleIconList","moduleList","moduleListSingular","available_language_dom","forecasts_options_dataset","forecasts_chart_options_group","top10_opportunities_duration_options","history_filter_options","generic_timeperiod_options","opportunity_metrics_dom"];e._app_strings=_.union(_.keys(e.baseMetadata.app_strings),["LBL_TRY_AGAIN","LBL_FAVORITES_FILTER","LBL_ACTIVITY_STREAM","LBL_RECORD_NOT_FOUND","LBL_RELATED_RECORD_NOT_FOUND","LBL_NOT_AUTHORIZED","LBL_SET_FONTSIZE","LBL_LATER","LBL_ACTION_UPDATE","LBL_ACTION_CREATE","LBL_ACTION_DELETE","LBL_ACTION_LINK","LBL_ACTION_UNLINK","LBL_ACTION_FAVORITE","LBL_ACTION_FOLLOW","LBL_ROLLBACK_BUTTON","LBL_UNLINKING","LBL_DELETING","LBL_SAVING","LBL_UNLINKED","LBL_DELETED","LBL_SAVED","LBL_MOBILE_CHOOSE_RECIPIENT","LBL_MOBILE_CHOOSE_PHONE","LBL_MOBILE_CHOOSE_URL","LBL_MOBILE_DOC","LBL_MOBILE_CHOOSE_DOC","LBL_MOBILE_CHOOSE_LOCATION","LBL_MOBILE_WAIT","LBL_MOBILE_LOG_CALL_CONFIRM","LBL_MOBILE_TUTORIAL_HOME_MENU","LBL_MOBILE_TUTORIAL_HOME_PLUS","LBL_MOBILE_TUTORIAL_DETAIL_EDIT_ACTION","LBL_MOBILE_TUTORIAL_HOME_SWIPE","LBL_MOBILE_DOWNLOAD_STARTED","LBL_MOBILE_DOWNLOAD_COMPLETED","LBL_UPCOMING","LBL_MOBILE_NO_RECORDS","LBL_RECENTLY_UPDATED","LBL_RECENTLY_VIEWED","LBL_MOBILE_NO_ACTIONS_AVAILABLE","LBL_DELETE_BUTTON","LBL_SAVE_BUTTON_LABEL","LBL_HOME","LBL_ENABLE","LBL_SKIP","LBL_MOBILE_DESKTOP","LBL_LOGOUT","LBL_RECORDS","LBL_MOBILE_SEARCH_PLACEHOLDER","LBL_DONE_BUTTON_LABEL","LBL_OPTIONAL","LBL_CHOOSE_LINK","LBL_NO_ACCESS","LBL_NO_ACCESS_LOWER","LBL_CHOOSE_PARENT_TYPE","LBL_RELATED_MODULE","LBL_MOBILE_UPLOAD_IN_PROGRESS","LBL_MOBILE_UPLOAD_SUCCESS","LBL_MOBILE_PROCESSING_IMAGE","LBL_MOBILE_PROCESSING_FILE","LBL_MOBILE_DELETE_CONFIRM","LBL_DUPLICATE_BUTTON","LBL_CREATE_RELATED_RECORD","LBL_ASSOC_RELATED_RECORD","LBL_MOBILE_SELECT_TEAMS","LBL_CHOOSE_ITEMS","LBL_VIEW_BUTTON","LBL_EDIT_BUTTON","LBL_UNLINK_BUTTON","LBL_CALL_BUTTON","LBL_SMS_BUTTON","LBL_EMAIL_BUTTON","LBL_MAP_BUTTON","LBL_URL_BUTTON","LBL_FILE_BUTTON","LBL_FOLLOW","LBL_UNFOLLOW","LBL_FAVORITE","LBL_UNFAVORITE","LBL_FOLLOWING","LBL_MOBILE_SHOW_MORE_TOP","LBL_MOBILE_SHOW_MORE","LBL_MOBILE_DETAIL_SHOW_MORE","LBL_MOBILE_DETAIL_SHOW_LESS","LBL_MOBILE_PTR_RELEASE","LBL_LOADING_FILES","LBL_MOBILE_UNLINK_CONFIRM","LBL_INVITEES","LBL_SEND_INVITE","LBL_SELECT_ACTION_LABEL","LNK_SETTINGS","LBL_LANGUAGE","LBL_NAME","LBL_NONE","LBL_TIME_RELATIVE","LBL_TIME_AGO_NOW","LBL_TIME_AGO_SECONDS","LBL_TIME_AGO_MINUTE","LBL_TIME_AGO_MINUTES","LBL_TIME_AGO_HOUR","LBL_TIME_AGO_HOURS","LBL_TIME_AGO_DAY","LBL_TIME_AGO_DAYS","LBL_TIME_AGO_YEAR","LBL_TIME_UNTIL_SECONDS","LBL_TIME_UNTIL_MINUTE","LBL_TIME_UNTIL_MINUTES","LBL_TIME_UNTIL_HOUR","LBL_TIME_UNTIL_HOURS","LBL_TIME_UNTIL_DAY","LBL_TIME_UNTIL_DAYS","LBL_TIME_UNTIL_YEAR","LBL_NOT_AVAILABLE","LBL_FILE_SIZE_UNITS_B","LBL_FILE_SIZE_UNITS_KB","LBL_FILE_SIZE_UNITS_MB","LBL_USE_HTTPS","LBL_RECONFIGURE_LOGIN_SETTINGS_CONFIRM","LBL_TRIAL_PERIOD_EXPIRED","LBL_TOUCHID","LBL_ENABLE_TOUCHID","LBL_SETUP_TOUCHID","LBL_TOUCH_ID_AUTHENTICATE_SUBTITLE","LBL_TOUCH_ID_NOT_ENROLLED_MSG","LBL_TOUCH_ID_DISCLAIMER","LBL_TOUCH_ID_ENABLE_CONFIRM_MSG","LBL_TOUCH_ID_ENTER_PASSWORD_TITLE","LBL_SETUPBUDDY_HEADER_TITLE","LBL_SETUPBUDDY_TOUCH_ID_ADDITIONAL_DISCLAIMER","ERR_GEOLOCATION_PERMISSION_DENIED","ERR_GEOLOCATION_POSITION_UNAVAILABLE_MSG","ERR_GEOLOCATION_POSITION_TIMEOUT_MSG","ERR_GEOLOCATION_PLACEMARKS_UNAVAILABLE_MSG","ERR_GEOLOCATION_INVALID_COORDINATES_MSG","LBL_REMOVE","LBL_TODAY","LBL_FUTURE","LBL_CLOSE_BUTTON_TITLE","LBL_CLOSE_AND_SAVE_BUTTON","LBL_MOBILE_SPECIFIC_DASHBOARD","LBL_MOBILE_SPECIFIC_MODULE","LBL_MOBILE_DEFAULT_VIEW","LBL_MOBILE_DEFAULT_MODULE","LBL_MOBILE_DEFAULT_DASHBOARD","LBL_MOBILE_DEFAULT_DASHLET","LBL_MOBILE_GLOBAL_SEARCH","LBL_DASHBOARDS_CHANGED_PROMPT","LBL_DEFAULT_HELP_DASHBOARD_TITLE","LBL_DEFAULT_HELP_DASHLET_TITLE","LBL_LEARNING_RESOURCES_NAME","LBL_DASHLET_RECENT_TWEETS_SUGARCRM_NAME","TPL_DASHLET_MY_MODULE","LBL_DEFAULT_DASHBOARD_TITLE","LBL_ACTIVE_TASKS_DASHLET_DUE_NOW","LBL_ACTIVE_TASKS_DASHLET_UPCOMING","LBL_ACTIVE_TASKS_DASHLET_TODO","LBL_COMMENT","LBL_ACTIVITY_CREATE","LBL_ACTIVITY_UPDATE","LBL_ACTIVITY_LINK","LBL_ACTIVITY_UNLINK","LBL_MOBILE_ACTIVITYSTREAM_POST_PLACEHOLDER","LBL_SUBMIT_BUTTON_LABEL","LBL_SHOWING_CACHED_DATA","LBL_DASHLET_FORECASTS_GROUPBY","LBL_DASHLET_FORECASTS_DATASET","LBL_DASHLET_FORECASTS_CHART_NAME","LBL_LIKELY","LBL_BEST","LBL_ACTIVE_TASKS_DASHLET","LBL_INACTIVE_TASKS_DASHLET_DEFERRED","LBL_INACTIVE_TASKS_DASHLET_COMPLETED","LBL_ALL_DASHLETS","LBL_MOBILE_NEW_COMMENT","LBL_TWITTER_REPLY","LBL_TWITTER_RETWEET","LBL_TWITTER_FAVORITE","LBL_CONNECT_TEST_FAIL","LBL_ERROR_CANNOT_FIND_TWITTER","LBL_CONFIGURE_TWITTER","LBL_PLANNED_ACTIVITIES_DASHLET","LBL_HISTORY_DASHLET","LBL_DASHLET_OPPORTUNITY_NAME","LBL_DASHLET_CASES_SUMMARY_NAME","LBL_DASHLET_CASESSUMMARY_SUMMARY","LBL_DASHLET_CASESSUMMARY_OPEN_CASES","LBL_DASHLET_CASESSUMMARY_CLOSE_CASES","LBL_OFFLINE_MODE","LBL_OFFLINE_PREFETCH_PROMPT","LBL_OFFLINE_PREFETCH_FIRST_PROMPT","LBL_OFFLINE_PREFETCH_SUCCESS","LBL_OFFLINE_PREFETCH_ERROR","LBL_OFFLINE_PREFETCH_ACTION","LBL_OFFLINE_PREFETCH_RELATED_ACTION","LBL_OFFLINE_PREFETCHING","LBL_OFFLINE_PREFETCHING_MODULE","LBL_OFFLINE_PREFETCHING_EST_TIME","LBL_OFFLINE_PREFETCHING_RELATIONSHIP","LBL_OFFLINE_PREFETCHING_MODULE_COMPLETE","LBL_OFFLINE_DB_CLEANING_IN_PROGRESS","LBL_OFFLINE_DB_CLEANING_COMPLETED","LBL_OFFLINE_ROLLBACK_PROMPT","LBL_OFFLINE_ROLLBACK_FAILED","LBL_OFFLINE_ROLLBACK_SUCCESS","LNK_OFFLINE_SETTINGS","LBL_OFFLINE_ENABLE_PROMPT","LBL_OFFLINE_DISABLE_PROMPT","LBL_OFFLINE_ENABLED","LBL_OFFLINE_DISABLED","LBL_OFFLINE_CLEAR_DB","LBL_OFFLINE_COMPACT_DB","LBL_OFFLINE_CLEAN_UP_PROMPT","LBL_OFFLINE_CLEAR_DB_PROMPT","LBL_OFFLINE_SERVER_FETCH","LBL_OFFLINE_MERGE_DATA_CONFIRM","LBL_OFFLINE_LAST_SYNC_TS","LBL_OFFLINE_SYNC_IN_PROGRESS","LBL_OFFLINE_TRANSACTION_SYNCED","LBL_OFFLINE_TOTAL_RECORDS_COUNT","LBL_OFFLINE_DB_SIZE","LBL_OFFLINE_DATA_ENCRYPTION_ENABLED","LBL_OFFLINE_RECORDS_PER_MODULE","LBL_TX_LOG","LBL_TX_LOG_DETAIL","LBL_OFFLINE_SETTINGS","LBL_OFFLINE_STATS","LBL_ACTION_CREATE_EXPLANATION","LBL_ACTION_UPDATE_EXPLANATION","LBL_ACTION_DELETE_EXPLANATION","LBL_ACTION_LINK_EXPLANATION","LBL_ACTION_UNLINK_EXPLANATION","LBL_ACTION_FAVORITE_EXPLANATION","LBL_ACTION_FOLLOW_EXPLANATION","LBL_ACTION_UNFOLLOW_EXPLANATION","LBL_ACTION_UNFAVORITE_EXPLANATION","LBL_ACTION_CREATE_RELATED_EXPLANATION","LBL_EMAIL_ACTION_SET_PRIMARY","LBL_EMAIL_ACTION_SET_OPT_OUT","LBL_EMAIL_ACTION_SET_OPT_IN","LBL_EMAIL_ACTION_SET_VALID","LBL_EMAIL_ACTION_SET_INVALID","LBL_EMAIL_ADD","LBL_RECORD_DELETED","LBL_COLLECTION_PRIMARY","LBL_TEAM_SET_SELECTED","ERR_MOBILE_EMAIL","ERR_MOBILE_FILE_NOT_SUPPORTED","ERR_MOBILE_FILE_READ","ERR_MOBILE_FILE_NOT_FOUND","ERR_MOBILE_FILE_NOT_READABLE","ERR_MOBILE_FILE_ABORTED","ERR_MOBILE_FILE_SECURITY","ERR_MOBILE_FILE_SIZE_LIMIT_EXCEEDED","ERR_MOBILE_BROWSER_NOT_AUTHORIZED","ERR_MOBILE_BROWSER_FORBIDDEN","ERR_MOBILE_BROWSER_PAGE_NOT_FOUND","ERR_MOBILE_BROWSER_INTERNAL_SERVER_ERROR","ERR_MOBILE_BROWSER_SERVICE_UNAVAILABLE","ERR_MOBILE_STORAGE_UNAVAILABLE","ERR_MOBILE_GENERIC_NATIVE_ERROR","ERR_MOBILE_FILE_PROCESSING","ERR_MOBILE_METADATA_CHANGED","ERR_MOBILE_DASHBOARDS_FETCHING","ERR_FILTERS_FETCHING","ERR_NO_DOCS","ERR_MOBILE_UPLOAD","ERR_MOBILE_VALIDATION","ERR_NO_RECORDS_SELECTED","ERR_RENDER_FAILED_TITLE","ERR_RENDER_FAILED_MSG","ERR_RENDER_FIELD_FAILED_MSG","ERR_CONTACT_TECH_SUPPORT","ERR_NO_VIEW_ACCESS_TITLE","ERR_LAYOUT_RENDER_TITLE","ERR_INTERNAL_ERR_MSG","ERROR_MAXVALUE","ERROR_MINVALUE","ERROR_MAX_FIELD_LENGTH","ERROR_MIN_FIELD_LENGTH","ERROR_DATETIME","ERROR_FIELD_REQUIRED","ERROR_EMAIL","ERROR_NUMBER","ERROR_IS_BEFORE","ERROR_IS_AFTER","ERROR_IS_GREATER_THAN","ERROR_IS_LESS_THAN","ERROR_DUPLICATE_EMAIL","ERR_MOBILE_CONFLICT","ERR_MOBILE_VIEW_NOT_SUPPORTED","ERR_OFFLINE","ERR_OFFLINE_STORAGE_UNAVAILABLE","ERR_OFFLINE_STORAGE_CREATE","ERR_OFFLINE_START_FAILED_OUT_OF_SPACE","ERR_OFFLINE_OUT_OF_SPACE","ERR_OFFLINE_CLEAN_UP_CONFIRMATION","ERR_OFFLINE_PREFETCH_FAILED","ERR_OFFLINE_DB_CLEANING_ERROR","ERR_OFFLINE_SYNC_CONFLICT","ERR_OFFLINE_SYNC_ERROR","ERR_OFFLINE_SERVERTIME_UNAVAILABLE","ERR_OFFLINE_NO_CONNECTION_ENABLE_ERROR","ERR_OFFLINE_ENCRYPTION_FAILED","LBL_OFFLINE_ENCRYPTION_IN_PROGRESS","LBL_OFFLINE_ENCRYPTION_SUCCESS","LBL_RELATED_RECORD_DEFAULT_NAME","LBL_RELATED_MODULE","LBL_CREATE_RELATED","LBL_CREATE_MODULE","LBL_RELATED_MODULE","LBL_EDIT_RELATED","LBL_EDIT","LBL_ASSOC_EXISTING","LBL_ASSOC","LBL_ASSIGN","LBL_RELATED_MODULE_PLURAL","LBL_CHART_LEGEND_CLOSE","LBL_CHART_LEGEND_OPEN","LBL_CHART_NO_DATA","LBL_DASHLET_TOP10_SALES_OPPORTUNITIES_NAME","LBL_DASHLET_PIPLINE_NAME","LBL_CHART_UNDEFINED","LBL_NO_FIELD_ACCESS","LBL_RECORD_SHARE_BUTTON","TPL_RECORD_SHARE_SUBJECT","TPL_RECORD_SHARE_BODY","LBL_MOBILE_BY","LBL_MOBILE_FILTER_IS_NOT_AVAILABLE"]);e.mod_strings={}})(SUGAR.App)},function(e,t,i){var n=SUGAR.App;var a=i(274);(function o(){var e=n.metadata.set;var t=["collection"];var i=["teamset","multienum","image","file"];function o(e){var t=e.filters;if(!t||!t.basic||!t.basic.meta){return[]}return _.pluck(t.basic.meta.filters,"name")}function r(e,t,i,a){var o,r=/.*?(?:translateLabel\((?:'|")(\w+)(?:'|")\s*,\s*(?:'|")(\w*)(?:'|")\)).*?/gm,s=[/.*?(?:getDropdownValue\((?:'|")(\w+)(?:'|"))+.*?/gm,/.*?(?:getDropdownKeySet\((?:'|")(\w+)(?:'|"))+.*?/gm,/.*?(?:getDropdownValueSet\((?:'|")(\w+)(?:'|"))+.*?/gm];n.nomad.utils.execRegex(e,r,function(e){var n=e[2];if(!_.isEmpty(n)){i[n]=i[n]||{};i[n][e[1]]=true}else{t[e[1]]=true}});var l=function c(e){a[e[1]]=true};for(o=0;o<3;++o){n.nomad.utils.execRegex(e,s[o],l)}}function s(e){_.each(e,function(t,i){if(n.config.dashboards.dashlets[i]||t.meta&&t.meta.tabs){if(t.templates){t.templates=null}}else{delete e[i]}})}function l(e,t){if(t&&e){_.each(t,function(i,n){if(e[n])return;delete t[n]})}}function c(e){var t=_.chain(e.subpanels.subpanel_setup).values().sortBy(function(e){return e.order}).value();_.each(t,function(e){e.context={link:e.get_subpanel_data};e.label=e.title_key;f(e,["subpanel_name","title_key","get_subpanel_data","order"])});e.layouts=_.extend(e.layouts||{},{subpanels:{meta:{components:t}}});delete e.subpanels}function d(e,t){if(e._hash==="_base_")return;var a=null;e.modules=_.omit(e.modules,"Forecasts");_.each(e.modules,function(o,r){var s=[];_.each(o.views,function(e){if(e.meta&&e.meta.panels){var t=_.chain(e.meta.panels[0].fields).filter(function(e){return e.type!=="link"}).map(function(e){return _.isString(e)?{name:e}:e}).value();_.each(t,function(e){if(_.contains(i,e.type)){e.sortable=0}});a=new n.view.View({context:n.context.getContext(),meta:{panels:[{fields:t}]}});s=_.union(s,a.getFieldNames(r));a.dispose();if(_.contains(s,"email")){s.push("email1")}}});if(r==="Activities"){return}s=_.union(s,t?["name","my_favorite","following"]:["name"]);if(_.find(s,function(e){return o.fields[e]&&o.fields[e].type==="currency"})){s=_.union(s,["currency_id"])}if(r==="Opportunities"){s=_.union(s,["closed_revenue_line_items"])}if(r==="Documents"){s=_.union(s,["doc_url","doc_type","filename"])}if(!e.server_info.ftsEnabled||!o["ftsEnabled"]){s=_.chain(o.fields).filter(function(e){return!!e.unified_search&&e.type!=="link"}).map(function(e){return e.name}).union(s).value()}o.mergedFields=_.union(o.mergedFields||[],s);var l=/\$[a-z_]+/gi,c=[];o.fields&&_.each(o.mergedFields,function d(e){if(o.fields[e]&&o.fields[e].formula){var t=o.fields[e].formula.match(l);_.each(t,function(e){e=e.substr(1);if(o.fields[e]&&o.fields[e].type!=="link"&&!_.contains(c,e)&&!_.contains(o.mergedFields,e)){c.push(e);d(e)}})}});o.mergedFields=_.union(o.mergedFields,c)})}function u(e){var t=e.toUpperCase();if(t.substr(-2)==="_C"){t=t.substr(0,t.length-2)}return"LBL_"+t}function f(e,t){_.each(t,function(t){if(t instanceof RegExp){f(e,_.filter(_.keys(e),function(e){return t.test(e)}))}else{delete e[t]}})}n.metadata.set=function(i,h,p){var m=_.getNested(i,"modules.Opportunities.config.opps_view_by");if(i.modules_info&&i.modules_info.RevenueLineItems&&m&&m!=="RevenueLineItems"){i.modules_info.RevenueLineItems.visible=i.modules_info.RevenueLineItems.display_tab=false}if(i._override_values){_.each(i._override_values,function(e,t){if(!i[e]){delete i._override_values[t]}})}if(i.config){var g={};_.extend(g,n.analytics.processConfig(i.config));_.extend(g,a.processConfig(i.config));g.offlineEnabled=Boolean(i.config.offlineEnabled);i.config=g}var v=false;if(i.server_info){v=n.nomad.isSevenUp(i.server_info);i.server_info.isSevenUp=v}else{i.server_info={}}if(!p&&i._hash!=="_base_"){s(i.views);var b=n.metadata.getHash();if(b!==i._hash&&b!=="_base_"){if(i.modules){n.logger.debug("Metadata hash has changed. Resetting to base.");n.metadata.reset();n.metadata.set(JSON.parse(JSON.stringify(n.baseMetadata)),false,true)}else{i._hash=b}}n.nomad.initSupportedFeatures();n.nomad.updateSupportedFeatures(i);if(i.app_list_strings&&i.app_list_strings.available_language_dom)delete i.app_list_strings.available_language_dom[""];if(!i.currencies){i.currencies={}}_.each(i.currencies,function(e){e.conversion_rate=e.conversion_rate||e.rate});_.each(i.modules_info,function(e,t){if(_.contains(n.config.unsupportedModules,t)){delete i.modules_info[t]}});if(i.modules_info){_.each(n.config.hiddenModules,function(e){if(i.modules_info[e]){i.modules_info[e].visible=false}})}if(!i.mod_strings)i.mod_strings={};i.mod_strings=_.extend({},n.mod_strings,i.mod_strings);var x=n.config.unsupportedModules||[];_.each(i.modules,function(e,t){if(_.contains(x,t)){delete i.modules[t];delete i.mod_strings[t]}});var y=_.contains(["ENT","ULT"],i.server_info.flavor);var E="portal_flag";if(_.isEmpty(i.relationships))i.relationships={};var L=i.relationships.tasks_notes;if(L){L.relationship_role_column="parent_type";L.relationship_role_column_value="Tasks";L.relationship_type="one-to-many"}_.each(i.relationships,function(e,t){e=e||{};e.relationship_type=e.true_relationship_type||e.relationship_type;if(i.modules[e.lhs_module]&&i.modules[e.rhs_module]){if(e.relationship_role_column==="parent_type"||t==="contact_tasks"||t==="contact_notes"){e.via_parent_id=true}}else if(t!=="_hash"){delete i.relationships[t]}});if(i.relationships.accounts_opportunities){i.relationships.accounts_opportunities={lhs_key:"id",lhs_module:"Accounts",lhs_table:"accounts",name:"accounts_opportunities",relationship_type:"one-to-many",rhs_key:"account_id",rhs_module:"Opportunities",rhs_table:"opportunities"}}_.extend(i.relationships,n.baseMetadata.relationships);var S={};var w={};var A={};_.each(i.modules,function(e,a){if(e._patched)return;if(v)delete e.subpanels;var o=A[a]||{},s={};A[a]=o;var l=["fieldTemplates","menu"];if(a!=="Forecasts"){l.push("config")}f(e,l);if(a!=="Activities"&&e.filters){e.filters={basic:e.filters.basic,"default":e.filters.default}}if(e.layouts){f(e.layouts,_.filter(_.keys(e.layouts),function(e){return!_.contains(["list","detail","edit","subpanels"],e)}));if(e.layouts.subpanels&&e.layouts.subpanels.meta&&e.layouts.subpanels.meta.components){if(!_.isArray(e.layouts.subpanels.meta.components)){delete e.layouts.subpanels}else{_.each(e.layouts.subpanels.meta.components,function(e){o[e.label]=true})}}}if(e.views){f(e.views,_.filter(_.keys(e.views),function(e){return!_.contains(["list","detail","edit","forecast-pipeline"],e)}))}if(e.views&&e.views["forecast-pipeline"]){var d=e.views["forecast-pipeline"];_.extend(d.meta.timeperiod[0],{type:"enum",view:"edit"});delete d.meta.panels;delete d.templates}if(!y){delete e.fields[E]}if(a==="RevenueLineItems"||a==="Products"){if(e.fields.opportunity_name&&e.fields.opportunity_id&&e.fields.opportunity_id.required){e.fields.opportunity_name.required=true}}_.each(e.fields,function(i,n){if(_.contains(t,i.type)){delete e.fields[n];return}if(n!=="_hash"&&_.isEmpty(i.name)){delete e.fields[n];return}f(i,["comment","dbType","isnull","table","reportable","audited","join_name","merge_filter","duplicate_merge","bean_name","cols","rows","function","importable","massupdate","studio","bean_filter_field","link_class","link_file","rhs_key_override","enable_range_search","duplicate_merge_dom_value","help","no_default","comments","custom_module","db_concat_fields","sort_on","subquery","query_type","operator","db_field","custom_type"]);o[i.vname]=true;if(i.type==="id")delete i.len;if(i.name==="name"||i.type==="name")i.unified_search=true;if(i.formula)r(i.formula,S,A,w);if(i.options)w[i.options]=true;var a=["id","assigned_user_id","modified_user_id","create_by"];if(_.contains(a,i.name))i.unified_search=false;if(i.type==="relate"||i.type==="parent")delete i.len;if(i["link-type"]&&!i.link_type)i.link_type=i["link-type"];if(i.relationship_fields){s[i.name]=true;_.each(i.relationship_fields,function(t){s[t]=true;var i=e.fields[t];if(i){o[i.vname]=true;if(i.options)w[i.options]=true}})}if(i.required&&e.fields.email&&i.name==="email1"){e.fields.email.required=true}});var h=e.fields.team_name;if(h){delete h.len;h.type="teamset"}h=e.fields.name;if(h){h.type="name"}if(a==="Meetings"){h=e.fields.date_start;if(h&&h.validation){delete h.validation.compareto}}else if(a==="Activities"){e.views=n.baseMetadata.modules.Activities.views;e.views["activitystream-dashlet"].meta.view.limit=n.config.fetchLimit.activities}if(e.views){delete e.views.listview;delete e.views.search;if(e.views.edit&&e.views.edit.meta&&e.views.edit.meta.panels){_.each(e.views.edit.meta.panels[0].fields,function(e){if(_.isObject(e)&&(e.name==="reminder"||e.name==="email_reminder")){_.each(["fields","related_fields"],function(t){_.find(e[t],function(i,n){if((i.name||i)===e.name+"_checked"){e[t].splice(n,1);return true}})})}})}}var p;if(i.mod_strings&&i.mod_strings[a]){if(i.mod_strings[a].LBL_EMAIL)p="LBL_EMAIL";else if(i.mod_strings[a].LBL_EMAIL_ADDRESS)p="LBL_EMAIL_ADDRESS"}var m=/^(?=.*address)((?!email).)*$/;var g=_.find(e.fields,function(e){return e.type==="file"});if(a!=="Forecasts"){_.each(e.views,function(t,i){if(t.meta){delete t.meta.templateMeta;if(t.meta.panels){if(t.meta.panels.length)t.meta.panels.length=1;if(t.meta.panels[0]){var r=[];var l=t.meta.panels[0].fields;var c=-1;delete t.meta.panels[0].label;l=_.reject(l,function(t){var o=_.isString(t)?t:t.name;var r=_.isEmpty(e.fields[o])&&t.type!=="fieldset";if(r)n.logger.error(a+"."+i+"."+o+" field is missing vardef");return r});if(i==="list"){l=_.filter(l,function(e){return!!e["default"]})}t.meta.panels[0].fields=l;_.each(l,function(t,n){var a=_.isObject(t),d=a?t.name:t,h=e.fields[d],g;if(t.options)w[t.options]=true;s[d]=true;o[t.label||h.vname]=true;if(h){if(h.options)w[h.options]=true;if(h.type==="relate"){s[h.id_name]=true;s[h.link]=true}else if(h.type==="parent"){s["parent_id"]=true;s["parent_type"]=true}}if(t.type==="fieldset"){_.each(t.fields,function(t){s[t.name]=true;if(t["default"])o[t["default"]]=true;else o[t.label||e.fields[t.name].vname]=true;if(t.options)w[t.options]=true})}if(!y&&d===E){c=n}if(a){f(t,["default","enabled","link","width","wireless_edit_only","customCode"]);if(m.test(t.name)&&h){if(i==="edit"||i==="detail"){g=_.extend(t,{index:n});if(!g.group){g.group=h.group}if(g.group)r.push(g)}else if(t.group||h.group){o[u(t.group||h.group)]=true}}if(t.name==="email1"){l[n]={name:"email",type:"email",label:t.label||p,required:h.required};o[t.label||p]=true;s.email=true}}else{if(m.test(d)&&h){if((i==="edit"||i==="detail")&&h.group){r.push({name:d,group:h.group,index:n})}else if(h.group){o[u(h.group)]=true}}if(t==="email1"){l[n]={name:"email",type:"email",label:p,required:h.required};o[p]=true;s.email=true}}});if(c!==-1){l.splice(c,1)}var d={};if(r.length>0){d=_.groupBy(r,"group");var h=0;_.each(d,function(e,t){var i=e[0].index-h;_.each(e,function(e){l.splice(i,1)});var n={name:t,fields:_.pluck(e,"name"),type:"address",label:u(t)};l.splice(i,0,n);h+=e.length-1;o[n.label]=true})}if(i==="edit"&&(a==="Meetings"||a==="Calls")){l.push({name:"send_invites",type:"bool",label:"LBL_SEND_INVITE"});l.push({name:"invitees",type:"invitees",label:"LBL_INVITEES"})}}}var v=_.map(t.meta.panels[0].fields,function(e){return e.name||e});if(g&&!_.contains(v,g.name)&&i==="edit"&&a!=="Notes"){t.meta.panels[0].fields.push(g.name)}}})}var b=[];var L=[];var R=function(e,t,a){b.push(t);t=e[t];if(t){var r=1e3;_.each(t.collection_list,function(t,s){if(!e[s]&&!t.generate_select&&!_.contains(L,t.module)&&!_.contains(x,t.module)){t.title_key="LBL_"+t.get_subpanel_data.toUpperCase()+"_SUBPANEL_TITLE";t.order=-r++;t.creatable=!_.contains(n.config.nonCreatableModules,t.module);t.linkable=false;e[s]=t;var l=i.mod_strings[a];if(l&&!l[t.title_key]){l[t.title_key]=t.module}o[t.title_key]=true;L.push(t.module)}})}};if(_.isObject(e.subpanels)&&!_.isArray(e.subpanels)&&!_.isEmpty(e.subpanels.subpanel_setup)){_.each(e.subpanels.subpanel_setup,function(t,r){if(!t)return;if(r!=="activities"&&r!=="history"){if((a==="Meetings"||a==="Calls")&&_.contains(["Users","Leads","Contacts"],t.module)){t.linkable=true;t.creatable=t.module!=="Users";o[t.title_key]=true}else{if(t.panel_definition){if(t.module!=="Users"){t.creatable=!_.contains(n.config.nonCreatableModules,t.module)&&!_.isEmpty(_.find(t.top_buttons,function(e){return!e.widget_class||e.widget_class.indexOf("Create")>-1}));t.linkable=!_.contains(n.config.nonLinkableModules,t.module)&&!_.isEmpty(_.find(t.top_buttons,function(e){return!e.widget_class||e.widget_class.indexOf("Select")>-1}));o[t.title_key]=true}else{b.push(r)}}else{t.creatable=(_.isUndefined(t.canCreate)?true:t.canCreate)&&!_.contains(n.config.nonCreatableModules,t.module);t.linkable=(_.isUndefined(t.canLink)?true:t.canLink)&&!_.contains(n.config.nonLinkableModules,t.module);o[t.title_key]=true}}if(t.panel_definition)t.order=-t.order;if(t.get_subpanel_data&&t.get_subpanel_data.indexOf("function:")===0)t.get_subpanel_data=t.set_subpanel_data;var s=e.fields[t.get_subpanel_data];if(!s||!i.relationships[s.relationship]){b.push(r);delete o[t.title_key];if(i.modules[t.module])n.logger.error("Invalid "+a+"."+r+" subpanel")}}f(t,["add_subpanel_data","set_subpanel_data","top_buttons","panel_definition","sort_by","sort_order","subpanel_name"])});R(e.subpanels.subpanel_setup,"activities",a);R(e.subpanels.subpanel_setup,"history",a);_.each(b,function(t){delete e.subpanels.subpanel_setup[t]});c(e)}else{delete e.subpanels}});i.views&&_.each(n.baseMetadata.views,function(e,t){if(!i.views[t]){i.views[t]=e}});if(!n.config.skipStringCleanup){if(_.isEmpty(i.modules)&&!_.isEmpty(n.metadata.getModules())){l(n.metadata.getStrings("app_strings"),i.app_strings);l(n.metadata.getStrings("app_list_strings"),i.app_list_strings);if(!_.isEmpty(i.mod_strings)){var R=n.metadata.getStrings("mod_strings");_.each(R,function(e,t){l(e,i.mod_strings[t])})}}else{if(i.mod_strings&&!i.mod_strings._patched){i.mod_strings=_.pick(i.mod_strings,_.union(_.keys(i.modules),[m]));_.each(i.mod_strings,function(e,t){_.each(e,function(e,a){var r=i.modules[t];var s=A[t]||{};var l=[];if(r){l=o(r)}if(!s[a]&&!_.contains(_.union(n._mod_strings,l),a)){delete i.mod_strings[t][a]}_.each(s,function(e,t){if(!i.mod_strings[t])S[t]=true})})});i.mod_strings._patched=true}if(i.app_list_strings&&!i.app_list_strings._patched){_.each(i.app_list_strings,function(e,t){if(!w[t]&&!_.contains(n._app_list_strings,t)){delete i.app_list_strings[t]}});i.app_list_strings._patched=true}if(i.app_strings&&!i.app_strings._patched){_.each(n._app_strings,function(e){S[e]=true});_.each(i.app_strings,function(e,t){if(!S[t]){delete i.app_strings[t]}});i.app_strings._patched=true}}}if(i.app_list_strings.reminder_time_options){if(!_.isArray(i.app_list_strings.reminder_time_options)){var C=[],T=_.keys(i.app_list_strings.reminder_time_options).sort(function(e,t){return e-t});_.each(T,function(e){C.push([e,i.app_list_strings.reminder_time_options[e]])});i.app_list_strings.reminder_time_options=C}var I=_.find(i.app_list_strings.reminder_time_options,function(e){return e[0]==-1});if(!I){i.app_list_strings.reminder_time_options.unshift([-1,i.app_strings.LBL_NONE])}}}if(i.views&&i.views["forecastdetails"]){i.views["forecastdetails"].meta.timeperiod[0].type="enum"}if(i.views&&i.views["bubblechart"]){_.extend(i.views["bubblechart"].meta.filter_duration[0],{type:"enum",view:"edit"})}e.apply(this,arguments);d(i,v)}})();(function r(){var e={base:1,bool:1,currency:1,date:1,datetimecombo:1,email:1,emailbody:1,"enum":1,"float":1,file:1,image:1,"int":1,multienum:1,name:1,parent:1,password:1,phone:1,radioenum:1,relate:1,address:1,invitees:1,send_invites:1,teamset:1,text:1,textarea:1,url:1,tag:1};var t={image:function(){return n.supportedFeatures["fileUpload"]?undefined:["edit"]},password:["edit"],emailbody:["list"],html:[],encrypt:[],currency_id:[]},a={currency_symbol:[]};var o=n.metadata._patchMetadata;n.metadata._patchMetadata=function(n,r){if(!r||r._patched===true){return r}o.apply(this,arguments);_.each(r.views,function(n,o){if(n.meta){_.each(n.meta.panels,function(n){var s=[];_.each(n.fields,function(n,l){var c=t[n.type];if(_.isFunction(c)){c=c()}if(c&&(c.length===0||_.contains(c,o))){s.push(l)}var d=a[n.name];if(d&&(d.length===0||_.contains(d,o))){s.push(l)}if(o==="edit"&&!(e[n.type]||_.contains(i(297).getCustomFields(),n.type))){n.view="readonly"}if(o==="edit"&&n.name==="date_modified"){n.view="readonly"}if(o==="edit"&&n.name==="date_entered"){n.view="readonly"}if(o==="edit"&&n.type==="url"&&r.fields[n.name]){var u=r.fields[n.name].gen,f=!isNaN(parseInt(u,10))?!!parseInt(u,10):!!u;if(f){n.view="readonly"}}});_.each(s,function(e,t){n.fields.splice(e-t,1)})},this)}},this);return r}})()},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(269);var r=i(267);var s=i(298);var l=i(262);var c=i(283);var d=i(303);var u=[];var f=[];var h=[];var p=function(e){n.logger.warn("Attempt to override the private method '"+e+"'")};e.exports={LAYOUTS:{VERTICAL_LAYOUT:{name:"vertical_layout"}},registerView:function m(e,t,i){if(!e.type){throw new Error("'type' property must be provided during View registration")}var n=e.parent||l;var o=_.pick(e,"type","module");return a.extendView(n,o,t,i,p)},registerField:function g(e,t,i){if(!e.type){throw new Error("'type' property must be provided during Field registration")}var n=e.parent||c;u.push(e.type);return a.extendField(n,_.pick(e,"type","module"),t,i,p)},registerLayout:function(e,t,o){o=o||{};var r;e.viewportType=e.viewportType||this.LAYOUTS.VERTICAL_LAYOUT;if(e.viewportType===this.LAYOUTS.VERTICAL_LAYOUT){r=i(304)}else{throw new Error("Unsupported layout type")}_.extend(o,{config:e,_layoutId:n.utils.generateUUID()});return a.extendLayout(e.parent||r,_.pick(e,"type","module"),t||{},o,p)},registerDashlet:function(e,t,i){var n=e.parent||s;var o=a.extendView(n,e.type,t,i,p);a.dashboards.registerDashlet(e.type,o);var r=Object.create({},{iconKey:{value:e.iconKey,writable:false},title:{value:e.title,writable:false}});Object.defineProperty(o.prototype,"defaults",{value:r,writeable:false});return o},registerRecordAction:function v(e){e.custom=true;f.push(e)},registerRoutes:function(e,t){if(r.started){o.addRoutes(e)}else{n.events.once("app:init",function(){o.addRoutes(e,t)})}},getCustomActions:function b(){return f},getCustomFields:function x(){return u},registerMainMenuItem:function y(e){if(!e.route){e.route=n.utils.generateUUID()}h.push(e)},getCustomMainMenuItems:function E(){return _.select(h,function(e){
return _.isFunction(e.isVisible)?e.isVisible():true})},registerListItemDataProvider:function(e){d.add(e)}}},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(262);var r=i(299);e.exports=a.extendView(r,"BaseDashlet",{events:{"click .visibility-switcher":"changeVisibility"},initialize:function(e){var t=e.meta.view.type;var i=this._getDefaultSettings(t);e.meta=n.utils.deepCopy(e.meta);if(i){e.meta.view=_.defaults(e.meta.view,i)}if(n.offlineEnabled){this.cacheStorage=n.nomad.dashboards.cacheDashletStore}this.dashletParams=n.metadata.getView("Home",t)||{};var a=_.defaults({type:this.name,module:this.module},e.meta.view);this.title=n.nomad.dashboards.getDashletTitle(a);this.activeRequests=[];this._super(e);this.initDashletOptions()},getTitle:function(e){return _.getNested(this,"defaults.title")||e.label},_getDefaultSettings:function s(e){var t={"active-tasks":{visibility:"user"},"inactive-tasks":{visibility:"user"},history:{filter:7,visibility:"user"},"planned-activities":{date:"today",visibility:"user"}};return t[e]},dismissNetworkAlerts:function(){n.alert.dismiss("network_error",{animate:false})},applyViewState:function(e){if(!_.isEmpty(e.filters)){this.viewState.filters.set(e.filters,{silent:true})}if(e.visibility){this.viewState.visibility=e.visibility;this.viewState.myItemsOnly=e.visibility==="user";this.previousVisibilityState=this.viewState.visibility}this.viewState.filtersDef=e.filtersDef;this.render()},initDashletOptions:function(){var e=this.getState(this.options.dashboardId,this.meta.id)||{};this.viewState={visibility:e.visibility||this.meta.view.visibility};this.viewState.myItemsOnly=this.viewState.visibility==="user";this.dashletOptionsTemplate=n.template.get("dashlet-options");this.initFilters(e);this.enableOptionsToolbar()},enableOptionsToolbar:function(){if(this.dashletOptionsEnabled()){this.$el.addClass("has-dashlet-options")}},abortActiveRequests:function(){var e=this._super();if(_.isEmpty(this.activeRequests)){return e}_.each(this.activeRequests,function(e){n.api.abortRequest(e.uid)});this.activeRequests=[];this.loaded=false;return true},onBeforeHide:function(){n.alert.dismissAll()},onInvokedFromDashboard:function(){},_render:function(){this._super();if(this.dashletOptionsEnabled()){this.$el.prepend(this.dashletOptionsTemplate(this));this.$switcher=this.$(".visibility-switcher");this.$switcherBtns=this.$switcher.find(".btn");if(!_.isEmpty(this.fields)){this._renderFields()}}},_dispose:function(){var e=this.getViewContainer();if(e){e.remove()}this.$switcher=this.$switcherBtns=null;this._super()},changeVisibility:function(e){e.preventDefault();e.stopPropagation();var t=$(e.target);var i=t.hasClass("btn")?t:t.parent();var n=i.data("value");var a="active";if(n!==this.viewState.visibility){this.$switcherBtns.removeClass(a);i.addClass(a);this.viewState.visibility=n;this.refreshData()}},initFilters:function(e){this.viewState.filtersDef={};this.viewState.filters=n.data.createBean("Filters");this.updateFiltersViewState(e);this.listenTo(this.viewState.filters,"change",function(){this.refreshData()})},updateFiltersViewState:function(){},dashletOptionsEnabled:function(){return this.viewState&&(this.viewState.visibility||!_.isEmpty(this.viewState.filtersDef))},refreshData:function(e){this.saveState();this.abortActiveRequests();this.loadData(e)},saveState:function(){var e=this.getSettingName();var t=n.nomad.getSetting(e)?JSON.parse(n.nomad.getSetting(e)):[];var i={visibility:this.viewState.visibility,filters:this.viewState.filters.toJSON(),dashboardId:this.options.dashboardId,dashletId:this.meta.id};var a;_.each(t,function(e,n){if(i.dashboardId===e.dashboardId&&i.dashletId===e.dashletId){t[n]=a=i}});if(!a){t.push(i)}n.nomad.setSetting(e,JSON.stringify(t))},getState:function(e,t){var i=this.getSettingName();var a=n.nomad.getSetting(i);var o=a&&JSON.parse(a);if(_.isEmpty(o)){return}return _.find(o,function(i){return i.dashboardId===e&&i.dashletId===t})},getSettingName:function(){return"dashlet_states"},apiCall:function(){this.activeRequests.push(n.api.call.apply(n.api,arguments))},isSwipable:function(){return true},toggleDashletSwipe:function(){this.$el.toggleClass("no-swiping",!this.isSwipable())},onDetach:function(){this.onBeforeHide();this._super()},getViewContainer:function l(){return this.$el}},{getOverridableMethods:function c(){return _.union(o.getOverridableMethods(),["apiCall","onBeforeHide","onInvokedFromDashboard","getViewContainer"])}})},function(e,t,i){"use strict";var n=SUGAR.App;var a=i(257);var o=i(262);var r=i(300);var s=i(301);var l=i(302);var c={TABS:r,DROPDOWN:s,PAGINATION:l};e.exports=a.extendView(o,"Container",{template:"container",activeIndex:0,viewSwitcher:null,omitSwitcherForOneView:true,lazyInit:true,lazyLoad:true,loadViewOnSwitch:false,loadSelfData:false,activeTabStorageKey:"",viewContainerCss:"tabs__container",switcherCss:"views__switcher",hiddenViewCss:"hide-tab",currentView:null,_viewDefs:null,_views:null,constructor:function d(e){var t=e.meta?e.meta.className:e.className;if(t!==undefined){this.className=t}this._super(e)},initialize:function u(e){var t=this;this._super(e);var i=e.meta||e;var n=["activeIndex","viewSwitcher","lazyInit","lazyLoad","loadViewOnSwitch","activeTabStorageKey","omitSwitcherForOneView","loadSelfData"];_.each(n,function(e){if(i[e]!==undefined){t[e]=i[e]}});if(this.activeTabStorageKey){this._restoreState()}if(!this.lazyLoad&&this.lazyInit){this.lazyInit=false}this._views=[];this.initViews(i.views,e);this.createSwitcher();if(!this.viewSwitcher){this.activeIndex=this.lazyInit=this.lazyLoad=false}if(!this.lazyInit){this.createViews()}},initViews:function f(e,t){this._viewDefs=e||t.views||[]},createViews:function h(){_.each(this._viewDefs,this.createView,this)},loadData:function p(e){this.loadOwnData(e);this.loadViewsData(e)},loadOwnData:function m(e){if(this.loadSelfData){o.prototype.loadData.apply(this,arguments)}},loadViewsData:function g(e){this._eachView(function(e){return e._dataObsolete=true});if(this.currentView){this.loadViewData(this.currentView,e)}if(!this.lazyLoad){this._eachView(function(t){if(t!==this.currentView){this.loadViewData(t,e)}})}},loadViewData:function v(e,t){var i=e.options;if(i.loadDataFn){if(i.getLoadParams){t=i.getLoadParams.call(e)}i.loadDataFn.call(e,t)}else{e.loadData(t)}e._dataObsolete=false},_render:function b(){this._isFirstTimeRender=true;this._super();if(!this.currentView&&_.isNumber(this.activeIndex)){this.switchView({index:this.activeIndex,skipLoad:true})}},onAfterRender:function x(){this._super();if(!this._isFirstTimeRender){return}this._isFirstTimeRender=false;this.$viewContainer=this.$el.find("."+this.viewContainerCss).first();this.renderSwitcher();if(!this.lazyInit){_.each(this._views,this._renderView,this)}},renderSwitcher:function y(){if(!this.viewSwitcher){return}this.viewSwitcher.render();this.$el.find("."+this.switcherCss).first().append(this.viewSwitcher.$el).addClass(this.viewSwitcher.parentCss)},createSwitcher:function E(){if(_.isEmpty(this._viewDefs)||this.omitSwitcherForOneView&&this._viewDefs.length===1){this.viewSwitcher=null}if(!this.viewSwitcher){return}var e=_.map(this._viewDefs,function(e,t){return{title:e.title,index:t,gaData:e.gaData}});var t=_.isFunction(this.viewSwitcher)?this.viewSwitcher:this.viewSwitcher.switcherType;var i={views:e,activeIndex:this.activeIndex};_.extend(i,this.viewSwitcher.options);this.viewSwitcher=new t(i);this.listenTo(this.viewSwitcher,"view:switch",this.onSwitchView)},onSwitchView:function L(e){this.switchView(e)},switchView:function S(e){if(!this.viewSwitcher){return}var t=e.index;var i=this.currentView;var a=this._views[t]||this._viewDefs[t];if(!a){return}if(!(a instanceof n.view.views.NomadView)){a=this.createView(t);this._renderView(a)}if(i){this._getViewEl(i).addClass(this.hiddenViewCss);i.unbindGlobalEvents();if(i.abortActiveRequests()){i._dataObsolete=true}this.stopListening(i,this.ACTION_NAME)}this.currentView=a;this.activeIndex=t;this._getViewEl(a).removeClass(this.hiddenViewCss);a.bindGlobalEvents();var o=!e.skipLoad&&(a._dataObsolete||this.loadViewOnSwitch);if(o){this.loadViewData(a,e.loadParams)}if(this.activeTabStorageKey){this._storeState()}this._syncSwitcher(e);this.listenTo(a,this.ACTION_NAME,this.propagateComponentAction);this.trigger("views:switch",a,t)},abortActiveRequests:function w(){var e=false;this._eachView(function(t){return e=t.abortActiveRequests()||e});return e},bindGlobalEvents:function A(){this._super();this._currentOrEachView(function(e){return e.bindGlobalEvents()})},unbindGlobalEvents:function R(){this._super();this._eachView(function(e){return e.unbindGlobalEvents()})},handleComponentAction:function C(e){this._currentOrEachView(function(t){return t.handleComponentAction(e)});this._super(e)},getViews:function T(){return _.compact(this._views)},getViewIndex:function I(e){return _.indexOf(this._views,e)},updateSwitcherSubtitle:function k(e,t){if(this.viewSwitcher){this.viewSwitcher.updateSubtext(e,t)}},clean:function O(){var e=this;this._eachView(function(t,i){if(t!==e.currentView){t.dispose();e._views[i]=null}})},_syncSwitcher:function D(e){if(this.viewSwitcher){this.viewSwitcher.syncActive(e)}},createView:function N(e){var t=_.isObject(e);var i=t?e:this._viewDefs[e];var a=t?_.indexOf(this._viewDefs,e):e;var o={name:i.view,module:this.module,layout:this.layout,context:this.context};e=n.view.createView(_.extend(o,i));e._dataObsolete=true;this._views[a]=e;this.trigger("views:create",e,a);return e},_renderView:function B(e){e.render();var t=this._getViewEl(e);if(this.viewSwitcher){t.addClass(this.hiddenViewCss)}this.getViewParentEl(e).append(t);return e},getViewParentEl:function F(e){return this.$viewContainer},_eachView:function U(e,t){var i=this;_.each(this._views,function(n,a){if(n){e.call(t||i,n,a)}})},_currentOrEachView:function M(e,t){if(this.currentView){e.call(t||this,this.currentView)}else if(!this.viewSwitcher){this._eachView(e,t)}},_dispose:function P(){this._super();this._disposeChildViews();this._disposeSwitcher();this.currentView=this.$viewContainer=null},_disposeChildViews:function G(){this._eachView(function(e){return e.dispose()});this._views=this._viewDefs=null},_disposeSwitcher:function V(){if(this.viewSwitcher){this.viewSwitcher.dispose();this.viewSwitcher=null}},_storeState:function $(){return n.nomad.setLastState(this.activeTabStorageKey,this.activeIndex)},_restoreState:function H(){var e=n.nomad.getLastState(this.activeTabStorageKey);if(e!==undefined){this.activeIndex=+e}},_getViewEl:function z(e){return e.getViewContainer?e.getViewContainer():e.$el},onDetach:function q(){this.unbindGlobalEvents();this.abortActiveRequests();this._eachView(function(e){return e.onDetach()});this._super("onDetach")}},{switcherTypes:c})},function(e,t,i){"use strict";var n=i(257);var a=i(261);var o=SUGAR.App;e.exports=n.extendView(a,"TabSwitcher",{template:"tab-switcher",parentCss:"tabs__bar",subtextCss:"subtitle",activeTabCss:"active-tab",events:function r(){return{"click .tab":"_onTabClick"}},initialize:function s(e){this.tabs=e.views;if(_.isString(e.subtextCss)){this.subtextCss=e.subtextCss}this._super(e)},updateSubtext:function l(e,t){this.$(".tab").eq(e).find("."+this.subtextCss).removeClass("hide").addClass("count").text(t)},syncActive:function c(e){var t=e.index;var i=this.$(".tab");i.removeClass(this.activeTabCss);$(i[t]).addClass(this.activeTabCss)},_onTabClick:function d(e){var t=$(e.target).closest(".tab").data("tab-index");var i=this.tabs[t].gaData;this.trigger("view:switch",{index:t});if(i){o.analytics.trackEvent(i.category,i.action,null,i.label)}}})},function(e,t,i){"use strict";var n=SUGAR.App;var a=i(257);var o=i(261);e.exports=a.extendView(o,"DropdownSwitcher",{template:"dropdown-switcher",parentCss:"tabs__bar",initialize:function r(e){this._super(e);var t={};var i=n.data.createBean();i.set("view_index",e.activeIndex);_.each(e.views,function(e,i){t[i]=e.title});this.ddSwitcher={name:"view_index",view:"edit",type:"enum",options:t,model:i,optional:false};this.listenTo(i,"change:view_index",this._onSelect)},updateSubtext:function s(e,t){},syncActive:function l(e){var t=e.index;this.getField("view_index").model.set("view_index",t)},_onSelect:function c(e){var t=+e.get("view_index");this.trigger("view:switch",{index:t})}})},function(e,t,i){"use strict";var n=SUGAR.App;var a=i(257);var o=i(261);e.exports=a.extendView(o,"PaginationSwitcher",{className:"pagination__bar",template:"pagination-switcher",events:function r(){return{swipeRight:"swipeRight",swipeLeft:"swipeLeft"}},onAfterRender:function s(){this._super();var e='<span class="icondefault {0}"></span>';if(this.Swiper){return}this.Swiper=new Swiper(this.options.$parentEl.find(this.options.containerSelector),_.extend({noSwipingClass:"no-swiping",pagination:this.$(".pagination").get(0),bulletClass:n.config.UI.icons.swiper.bullet,bulletActiveClass:n.config.UI.icons.swiper.bulletActive,nextButton:this.$(".next").get(0),prevButton:this.$(".prev").get(0),buttonDisabledClass:"disabled",paginationBulletRender:function t(i,a){return n.utils.formatString(e,[a])},onTouchMove:function i(e,t){if(n.activeComponents.hasActiveComponents()){e.lockSwipes()}else{n.nomad.isSwiping=true}},onTouchEnd:function a(e){n.nomad.isSwiping=false;e.unlockSwipes()},onClickNext:_.bind(function(){this._handleSwipe("next")},this),onClickPrev:_.bind(function(){this._handleSwipe("prev")},this),onSlide:_.bind(function(e){this._handleSwipe(e)},this)},this.options.settings));if(this._activeIndex){this.syncActive({index:this._activeIndex,disableAnimation:true})}},_handleSwipe:function l(e){var t=_.isString(e);if(t){e=this._activeIndex+(e==="next"?1:-1)}var i=e<0||e>=this.options.views.length;if(t&&i){return}if(e===this._activeIndex||i){this.Swiper.slideTo(e)}else{this._activeIndex=e;this.trigger("view:switch",{index:e})}},_dispose:function c(){if(this.Swiper){this.Swiper.destroy();this.Swiper=null}this._super()},update:function d(){if(this.Swiper){this.Swiper.update(true)}},syncActive:function u(e){var t=e.index;var i=e.disableAnimation;this._activeIndex=t;if(this.Swiper&&this.Swiper.activeIndex!==t){this.Swiper.slideTo(t,i?0:this.Swiper.params.speed)}},updateSubtext:function f(e,t){},swipeRight:function h(){this._handleSwipe("prev")},swipeLeft:function p(){this._handleSwipe("next")}})},function(e,t){var i=SUGAR.App;var n=i.utils.listItemDataProviders={add:function(e){this[e.name]=_.extend({},a,e)}};var a={prepareItemData:function(e,t){var n=this.prepareFields(e,t);var a=t.itemsConfig;var o=!!t.collection.query;var r=(i.acl.hasAccessToModel("view",e)?"has-access":"")+" "+(o?"search":"");var s={model:e,view:t,isMenuVisible:!t.contextMenuDisabled,isMenuGripVisible:!t.isListItemSwippable&&!t.contextMenuDisabled,moduleName:e.module,itemId:this.buildId(e),hasSearch:o,detailsCss:r,isModuleVisible:false};return _.extend(s,n,a)},buildId:function(e){return e.id},extractId:function(e){return e},prepareFields:function(e,t){var i=e.module;var n=t.modContextData[i]||{};var a=n.additionalListFields;var o=t.relationshipFields?t.relationshipFields[0]:null;if(t.collection.query){var r=e.searchInfo&&e.searchInfo.highlighted;if(r){a=_.filter(a,function(e){return!r[e.name]})}}return{titleField:n.listItemTitleField,relationshipField:o,additionalFields:_.isEmpty(a)?null:a,showLabel:t.config.displayListFieldLabel}}};n.add({name:"list-item"});n.add({name:"list-item-associate",prepareFields:function(){var e=a.prepareFields.apply(this,arguments);if(e.additionalFields){e.additionalFields=[e.additionalFields[0]]}return e}});n.add({name:"list-item-picker",prepareItemData:function(e,t){return{view:t,model:e,label:e.get("label"),value:e.get("value"),module:e.get("module"),itemId:this.buildId(e)}},buildId:function(e){return e.cid}});e.exports=n},function(e,t,i){var n=SUGAR.App;var a=i(305);e.exports=n.nomad.extendLayout(a,"SimpleContainer",{initialize:function(e){var t=this.constructor.config;e.meta={components:this._getViewDefs(t)};_.extend(e,{noHeader:!_.getNested(t,"header")});this._super(e)},getHeaderConfig:function(){var e=_.getNested(this.constructor,"config.header",{});var t=e.buttons||{};return{title:e.title,menuButton:t.menu,cancel:!!t.cancel,cancelLabel:_.getNested(t,"cancel.label"),save:!!t.save,saveLabel:_.getNested(t,"save.label")}},onAfterLayout:function(){if(this.header){this.header.setButtonVisible({save:_.getNested(this.constructor,"config.header.buttons.save")})}},_getViewDefs:function(e){return _.map(e.views,function(e,t){return{view:{name:e}}},this)}})},function(e,t,i){var n=SUGAR.App;var a=i(306);e.exports=n.view.NomadLayout=n.nomad.extendLayout(n.view.Layout,"Nomad",{initialize:function(e){e.meta=e.meta||{};e.meta.components=e.meta.components||[];if(e.name!=="login"&&!e.noHeader&&!_.find(e.meta.components,function(e){return/^header/.test(e.view)})){e.meta.components.unshift({view:this.getHeaderComponentName(e)})}this._super(e);var t=this.initComponents();this.initializeHeader();var i=this.module?"layout__"+this.module:"";var n=this.meta.type?"layout__"+this.meta.type:"";var a=!_.isEmpty(this.options.link);var o=this.options.def?this.options.def.name:"";this.$el.addClass(i+" "+n+" layout__def"+(a?" related":""));this.$el.attr("layout-name",o);_.each(t,function(e){this.listenTo(e,"component:action",function(t){this.handleComponentAction(e,t)})},this)},initializeHeader:function(){this.header=_.find(this._components,function(e){return e instanceof n.view.views.HeaderView});if(!this.header){return}this.header.config=this.getHeaderConfig();this.model.on("data:sync:complete",function(){var e=this.getHeaderConfig();this.header.config.title=e.title;this.header.config.subtitle=e.subtitle;this.header.$(".header-title").text(this.header.config.title);this.header.$(".header-subtitle").text(this.header.config.subtitle)},this)},getHeaderComponentName:function(e){var t="header";var i=t+"-"+e.name;var a=n.view.declareComponent("view",i,e.module);return a===n.view.View?t:i},getComponent:function(e){if(_.isFunction(e)){return _.find(this._components,function(t){return t instanceof e})}else{return this._super(e)}},bindGlobalEvents:function(){_.invoke(this._components,"bindGlobalEvents")},unbindGlobalEvents:function(){_.invoke(this._components,"unbindGlobalEvents")},onDetach:function o(){this.unbindGlobalEvents();_.invoke(this._components,"onDetach")},onAppResume:function(){_.invoke(this._components,"onAppResume")},onAppPause:function(){_.invoke(this._components,"onAppPause")},render:function(e){var t=this;this._prepareBodyScroll();e=e||{animation:{enabled:false}};this._handleRenderWithAnimation(function(){n.view.Layout.prototype.render.apply(t,arguments)},e)},renderFromCache:function(e){var t=this;this._prepareBodyScroll();this._handleRenderWithAnimation(function(){_.invoke(t._components,"onBeforeRender");_.each(t._components,function(e){_.each(e.fields,function(e){if(e.cacheDisabled===true||e.hasAccess!==e.getAccess()){e.render()}})});_.invoke(t._components,"onAfterRender")},e)},reloadData:function(e){},loadDataPartial:function(e){_.each(this._components,function(t){var i=t.options.meta&&t.options.meta.partialLoadEnabled;if(i){t.loadData(e)}})},onAfterShow:function(){this.bindGlobalEvents();_.invoke(this._components,"onAfterShow")},_render:function(){this.onBeforeComponentsRender();this._super();this.onAfterComponentsRender();return this},onBeforeComponentsRender:function(){},onAfterComponentsRender:function(){},onAfterLayout:function(){},getHeaderConfig:function(){var e={};_.each(this._components,function(t){if(t.getHeaderConfig){e=t.getHeaderConfig()}});e.layoutOptions=this.options.def;e.offlineEnabled=n.offlineEnabled;return e},isDynamic:function(){return this.options.def&&this.options.def.isDynamic},getDefinition:function(){return this.options.def},getOverlay$El:function(){var e=this.getDefinition().appendTo.el.find(".background");return e.length?e:null},getDataById:function(e){if(this.model.id===e){return this.model.toJSON()}else if(this.collection&&this.collection.get(e)){return this.collection.get(e).toJSON()}else return null},_handleRenderWithAnimation:function(e,t){var i=this.getOverlay$El();if(t.animation.enabled&&i){i.show();e();_.delay(function(){i.animate({opacity:0},{duration:t.animation.animationLength,complete:function(){i.hide();i.css("opacity",1)}})},t.animation.preAnimationDelay)}else{e();if(i){i.hide()}}},_prepareBodyScroll:function(){if(n.isBodyScrollRequired){var e=_.find(this._components,function(e){return e._bodyScroll});if(e){$("html").addClass((this.name==="login"?"loginView":"")+" bodyScroll");_.defer(function(){document.body.scrollTop=0})}else{$("html").removeClass("bodyScroll loginView");var t=$("#alerts");t.remove();_.defer(function(){document.body.scrollTop=0;$("#nomad").append(t)})}}},_dispose:function(){if(this.model){this.stopListening(this.model)}this.$el.off();n.view.Layout.prototype._dispose.call(this)},onBeforeLeave:function(e){var t=_.chain(this._components).filter(function(e){return!!e.onBeforeLeave}).map(function(e){return function(t){e.onBeforeLeave({callback:function(e){t(e&&e.cancel,e)}})}}).value();async.parallel(t,function(t){e.callback({cancel:t})})},handleComponentAction:function(e,t){var i=n.nomad.utils.buildActionHandlerName(t.name);var a=this[i];var o;if(_.isFunction(a)){o=a.call(this,t.options)}if(!o){_.each(this._components,function(n){if(n!==e){n.handleComponentAction(i,t.options)}});if(_.isFunction(n.controller[i])){n.controller[i](t)}}}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(261);var r=i(307);var s;var l=a.extendView(o,"Header",{template:"header",className:"view__header",events:{"click .menuBtn":"onMenuClick","click .create-entity":"onAddClicked","click .saveBtn":"onSaveClicked","click .cancelBtn":"onCancelClicked","click .backBtn":"onBackClicked","click .dashHomeBtn":"onDashboardHomeClicked","click h1":"onTitleClicked",swipeLeft:function(e){if(a.utils.isDirectionLTR()){this.onSwipeLeft(e)}else{this.onSwipeRight(e)}},swipeRight:function(e){if(a.utils.isDirectionLTR()){this.onSwipeRight(e)}else{this.onSwipeLeft(e)}}},buttonSelectorMap:{back:".backBtn",menu:".menuBtn",save:".saveBtn",cancel:".cancelBtn",caret:".caretBtn",dashHome:".dashHomeBtn"},_saveBtnDisabled:false,dataContainer:null,globalEvents:{"offline:status:update":function(e){var t=this.$el.find(".offline-icon, .offline-status");t.removeClass("status-success status-warning status-error status-default");t.addClass(a.utils.getOfflineStatusClass())},"app:orientation:changed":function(){if(!n.isTablet)return;window.scrollTo(0,0);if(n.controller.layoutManager.getRecordLayout()){s.addClass("show-content-child")}}},offlineStatusIconPartial:"offline-status-icon",offlineStatusClass:function(){return a.utils.getOfflineStatusClass()},initialize:function(e){this.initHeaderActions();this._super(e);this.defaults={title:n.config.productName,menuButton:true,plus:true,back:false,save:false,cancel:false};s=$(document.body);if(this.model){this.listenTo(this.model,"data:sync:error",function(e,t,i){if(_.contains([404,403],i.status)){this.$(".createBtn").hide()}})}},initHeaderActions:function(){var e={click:"click",menuClick:"menu:click",save:"save:click",cancel:"cancel:click",dashboardHome:"dashboard:home:click"};this.headerActions=e},onBeforeRender:function(){this._super();if(this.config.plus&&this.model&&!this.rightMenu){this.rightMenu=n.view.createView({name:r,layout:this.layout,model:this.model})}this.config.isMenuButtonSupported=this._isMenuButtonSupported();this.config.UI={hasEditButton:this.config.save||this.config.cancel}},onAfterRender:function(){this._super();if(this.rightMenu){if(this.rightMenu.isMoreThanOneActionAvailable()){this.rightMenu.render();this.$(".right-menu__container").html(this.rightMenu.$el)}else if(!this.rightMenu.quickAction){this.$(".createBtn").hide()}}},onTitleClicked:function(e){this._processAction(e,this.headerActions.click)},onSaveClicked:function(e){if(!this.$(".saveBtn .btn").hasClass("disabled")){this._processAction(e,this.headerActions.save)}},onCancelClicked:function(e){if(!this.$(".cancelBtn .btn").hasClass("disabled")){this._processAction(e,this.headerActions.cancel)}},onDashboardHomeClicked:function(e){this._processAction(e,this.headerActions.dashboardHome)},onBackClicked:function(e){this._processAction(e,this.headerActions.cancel)},onMenuClick:function(e){e.preventDefault();if(!this._isMenuButtonSupported()){return}this._processAction(e,this.headerActions.menuClick);a.dismissAlerts()},onSwipeLeft:function(e){if(n.nomad.mainMenu.isOpened()){this.onMenuClick(e)}else if(!this.isRightMenuOpened()&&this.rightMenu&&!this.rightMenu.quickAction){this.onAddClicked(e)}},onSwipeRight:function(e){if(a.getOrientation()==="landscape"&&n.isTablet){return}if(this.isRightMenuOpened()){this.onAddClicked(e);return}this.onMenuClick(e)},_processAction:function(e,t,i){if(e){e.preventDefault()}t="header:"+t;a.dismissAlerts();this.trigger(this.ACTION_NAME,{name:t,options:i})},onAddClicked:function(e){e.preventDefault();e.stopPropagation();a.dismissAlerts();if(this.rightMenu.isMoreThanOneActionAvailable()){this.rightMenu.toggle();n.tutorial.show("plus-menu")}else{this.rightMenu.executeAction(this.rightMenu.quickAction)}},setTitle:function(e){this.$el.find(".header-title").text(e)},setSubtitle:function(e){this.$el.find(".header-subtitle").text(e)},setButtonVisible:function(e){_.each(e,function(e,t){this.$el.find(this.buttonSelectorMap[t]).toggle(e);if(t==="save"){this.$(".save-container").toggle(e)}},this)},_isMenuButtonSupported:function(){return this.config.menuButton},setSaveBtnState:function(e){this._saveBtnDisabled=_.isEmpty(e);this.$(".saveBtn .btn").toggleClass("disabled",this._saveBtnDisabled)},_dispose:function(){if(this.rightMenu){this.rightMenu.dispose();this.rightMenu=undefined}this._super()},isRightMenuOpened:function(){return this.rightMenu&&this.rightMenu.isMoreThanOneActionAvailable()&&this.rightMenu._isRightMenuOpened}},{getOverridableMethods:function(){return _.union(o.getOverridableMethods(),["onBackClicked","onCancelClicked","onDashboardHomeClicked","onTitleClicked","onHomeClicked","onSaveClicked"])}});e.exports=l},function(e,t,i){"use strict";var n=SUGAR.App;var a=i(257);var o=i(261);var r=i(308);var s=i(317);var l=i(311);var c=a.extendView(o,"RightMenu",{template:"right-menu",RIGHT_MENU:"right_menu",events:{click:function d(){this.toggle(false)},"click .menu-item__link":"onItemClick"},quickAction:undefined,_isMoreThanOneActionAvailable:false,initialize:function u(e){this._super(e);this.$body=$(document.body);this.availableActions=this.getAvailableActions();this._isMoreThanOneActionAvailable=this.availableActions.length>1;if(!this._isMoreThanOneActionAvailable){this.quickAction=this.availableActions[0]}this._parentView=this.layout.name==="list"?this.layout.getComponent(r):this.layout.getComponent(s)},onAfterRender:function f(){this._super();this.$contentWrapper=n.$rootEl.find("#wrapper")},isMoreThanOneActionAvailable:function h(){return this._isMoreThanOneActionAvailable},getAvailableActions:function p(){return l.getRightMenuActions({model:this.model,viewType:this.layout.name,view:this._parentView})},toggle:function m(e,t,i){var o=this;var r=void 0;var s=a.utils.isDirectionLTR()?1:-1;e=_.isUndefined(e)?!this._isRightMenuOpened:e;r={show:e,disableAnimation:t,callback:i,view:this};if(e){this.$body.one("touchstart.header"+this.cid,function(e){var t=$(e.target);var i=(t.hasClass("create-entity")||t.hasClass("header-icon__plus"))&&!_.isEmpty(o.layout.header.$el.find(t));var n=!_.isEmpty(o.layout.$el.find(".right-menu").find(t));if(!(i||n)){_.delay(function(){return o.toggle(false)},100)}})}if(n.isTablet){this._isRightMenuOpened=e;this.$(".createBtn").toggleClass("active",e);n.$rootEl.find(".overlay__right-menu").toggleClass("show",e);this.$(".right-menu")[e?"fadeIn":"fadeOut"]();this.registerActiveComponent(r)}else{this.registerActiveComponent(r);var l=t||!n.supportedFeatures.menuAnimation?0:200;var c=this.$(".right-menu");var d={menuAnimation:{"-webkit-transform":e?"translate3d("+s*100+"%, 0, 0)":"translate3d("+s*100+"%, 0, 0)"},contentAnimation:{"-webkit-transform":e?"translate3d("+s*-86+"%, 0, 0)":"translate3d(0, 0, 0)"},overlayAnimation:{"-webkit-transform":e?"translate3d("+s*-86+"%, 0, 0)":"translate3d("+s*-100+"%, 0, 0)"}};var u=function f(){o.$body.toggleClass("show-right-menu",e);o._isRightMenuOpened=e;if(i){i()}};this.animateMenu({isShowing:e,data:d,$menu:c,callback:u,duration:l})}},registerActiveComponent:function g(e){var t=this;var i=this.RIGHT_MENU+this.cid;n.trigger("app:rightmenu:show",e);if(e.show){n.activeComponents.add(i,function(){t.toggle(false,e.disableAnimation,e.callback)})}else{n.activeComponents.remove(i)}},animateMenu:function v(e){var t=e.data;var i=e.isShowing;var a=e.$menu;var o=e.callback;var r=e.duration;if(i){a.animate(t.menuAnimation,0)}this.$contentWrapper.animate(t.contentAnimation,r,"ease-out",function(){if(!i){a.animate(t.menuAnimation,0)}if(t.overlayAnimation){n.$rootEl.find("#content-overlay").animate(t.overlayAnimation,0)}if(o){o()}})},onItemClick:function b(e){e.preventDefault();e.stopPropagation();var t=$(e.currentTarget).attr("action");var i=_.findWhere(this.availableActions,{name:t});this.executeAction(i)},executeAction:function x(e){if(_.isFunction(e.handler)){e.handler(this._parentView,this.model)}}});e.exports=c},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(268);var r=i(258);var s=i(309);var l=i(310);var c=i(316);function d(e,t){var i=e[t];e[t]=function(){i.apply(e,arguments);if(this._currentRecordId){this.selectCurrentRecord({modelId:this._currentRecordId})}}}var u=a.extendView(s,"List",{template:"list",events:function(){return{"click article .grip":"onGripClick","click .menu-container":"onContextMenuClick","click article":"onClickItem","swipeLeft article":"onItemSwipe","swipeRight article":"onItemSwipe","longTap article":"onItemLongTap","click.pagination .show-more-top-btn":"paginateTop","click.pagination .show-more-bottom-btn":"paginateBottom"}},plugins:[],listItemDataProvider:"list-item",listItemTpl:"list-item",multiselect:false,navigationName:o.LIST,isPaginationEnabled:true,isPtrEnabled:true,_offlineDisabled:false,_currentState:null,globalEvents:{"offline:data:updated":"_offlineRefetch"},_offlineRefetch:function(e,t){var i=this.getCurrentState();var a={};_.extend(a,i,{skipServerSync:true,serverNextOffset:e.serverNextOffset});if(this.collection.query){return}if(this.isCurrentListUpdated(e)){t=_.extend({add:true,reset:!this.collection.getOption("update"),params:a,offset:e.requestParams&&e.requestParams.offset?e.requestParams.offset:0,limit:e.requestParams&&e.requestParams.max_num?e.requestParams.max_num:n.config.maxQueryResult},t);this.collection.fetch(t)}},initialize:function(e){this._super(e);this._currentState={};this.listViewId=e.listViewId||"listing-"+this.module;this.relationshipFields=null;this.unlinkVisible=false;var t=this.context.get("link");if(t){var i=this.context.get("parentModule");var o=n.metadata.getModule(i,"fields")[t];this.relationship=n.metadata.getRelationship(o.relationship);this.relateFields=n.data.getRelateFields(i,t);this.unlinkVisible=a.canUnlinkRelated(i,t)&&_.reduce(this.relateFields,function(e,t){return e&&!t.required},true);this.initRelationshipFields(i,t)}this.modContextData=a.getContextMeta("list");this.listenTo(this.collection,"data:sync:start",function(e,t){this.onDataSyncStart(e,this.collection,t)});this.listenTo(this.collection,"sync",this.onDataSyncSuccess);this.listenTo(this.collection,"data:sync:error",this.onDataSyncError);this.initLabels();this._initNoRecFoundLabelBehavior();this._createItemsConfig(e);this.initCurrentRecordHighlighting();this.isListItemSwippable=this.module!=="Activities"&&this.layout&&this.layout.module!=="Dashboards"||this.module==="Search"||this.module==="Recents";this.initContextMenu(e);this.initPagination(e);if(this.isPtrEnabled){c({view:this,ptrAction:_.bind(this.ptrRefresh,this)})}},initContextMenu:function(e){this.contextMenuOnSwipeDisabled=this.contextMenuDisabled||e.contextMenuOnSwipeDisabled||!n.isNative&&$.os.ios;if(this.contextMenuDisabled){return}this.contextMenu=n.view.createView({
name:l,parentView:this})},initCurrentRecordHighlighting:function(){this._currentRecordId=null;this.listenTo(n,"app:view:change",function(e){if(e.layoutDef&&e.layoutDef.isDynamic){return}this.selectCurrentRecord(e)});d(this,"onAfterRender")},selectCurrentRecord:function(e){var t=e.modelId||e.parentModelId;this.$el.find(".current").removeClass("current");this._currentRecordId=t;if(t){this.getListItemEl(t).addClass("current")}},_createItemsConfig:function(e){if(e.itemsConfig){this.itemsConfig=_.extend(this.itemsConfig||{},e.itemsConfig)}this.setListItemDataProvider(e.listItemDataProvider);this.setListItemTpl(e.listItemTpl||(e.meta?e.meta.listItemTpl:null))},setListItemTpl:function(e){if(e){this.listItemTpl=e}},getListItemTpl:function(){return this.listItemTpl},setListItemDataProvider:function(e){if(e){this.listItemDataProvider=e}},getListItemDataProvider:function(){return this.listItemDataProvider},initLabels:function(){this.labelLoading=n.lang.get("LBL_LOADING");this.labelNoRecords=n.lang.get("LBL_MOBILE_NO_RECORDS");this.labelShowMoreTop=n.lang.get("LBL_MOBILE_SHOW_MORE_TOP");this.labelShowMoreBottom=n.lang.get("LBL_MOBILE_SHOW_MORE")},onBeforeRender:function(){},getViewContainer:function(){return this.$easyScrollerParent},setCurrentState:function(e){this._currentState=e},getCurrentState:function(){if(this._currentState.q){this._currentState.filter=null;this._currentState.order_by=null}return this._currentState},_applyCurrentStateParams:function(e){e=e||{};e.params=e.params||{};_.extend(e.params,this.getCurrentState());return e},ptrRefresh:function(){var e=this;var t={complete:function(){e.hidePtrLoading()}};n.analytics.trackEvent("app","ptr");if(n.offlineEnabled&&!this.collection.query){t.params={forceServerSync:true}}this.refresh(t)},getHeaderConfig:function(){var e=this.modulePlural;var t=false;if(this.context.get("link")){e=n.lang.get("LBL_RELATED_MODULE_PLURAL",this.module,this.modulePlural);t=true}return{title:e,menuButton:true,back:t,plus:true}},onHeaderClick:function f(){if(this.scroll){this.scroll.scroller.scrollTo(0,0,true)}},onItemAdded:function(e,t,i){this.$el.find(".no-records-found").hide();var a=n.view.getFieldId();var o=Handlebars.helpers.listItems([e],this,{hash:{}});if(i.addTop){this.$(".items").prepend(o.toString())}else{this.$(".items").append(o.toString())}for(var r=a+1;r<=n.view.getFieldId();++r){this._renderField(this.fields[r])}},onItemRemoved:function(e){this.getListItemEl(e).remove()},bindDataChange:function(){if(this.collection){this.collection.on("reset",this.render,this);this.collection.on("add",this.onItemAdded,this);this.collection.on("remove",this.onItemRemoved,this)}},getMaxPageSize:function(){return Math.max(n.config.fetchLimit.maxPageSize||20,n.config.maxQueryResult)},onDataSyncStart:function(e,t,i){},onDataSyncSuccess:function(e,t,i){this.onDataSyncComplete(i.method,i,null,e)},onDataSyncError:function(e,t,i){this.onDataSyncComplete(e,t,i)},onDataSyncComplete:function(e,t,i){this.hideContextMenu();if(e==="update"){return}if(i&&i.status===403){var a=n.template.get("list-not-authorized");this.$el.html(a(i))}},onContextMenuClick:function(e){return false},onGripClick:function(e){e.preventDefault();e.stopPropagation();var t=this.getModel($(e.currentTarget).closest("article").attr("data-id"));if(this.contextMenu){this.contextMenu.onGripClick(e,t)}},onClickItem:function(e){if(e.isDefaultPrevented()||e.isPropagationStopped()){return}var t=this.getModel($(e.currentTarget).attr("data-id"));this.trigger("list:item:clicked");this.navigateOnClick(e,t)},onItemSwipe:function(e){if(this.contextMenuOnSwipeDisabled){return}var t=a.utils.isDirectionLTR();var i=this.getModel($(e.currentTarget).attr("data-id"));if(e.type==="swipeLeft"&&t||e.type==="swipeRight"&&!t){this.contextMenu.onItemSwipeLeft(e,i)}else{this.contextMenu.onItemSwipeRight(e,i)}},onItemLongTap:function(e){if(this.contextMenuDisabled||this.contextMenu.isItemHasContextMenuOpened(e.currentTarget)||a.isSwiping){return}var t=this.getModel($(e.currentTarget).attr("data-id"));this.contextMenu.onItemLongTap(e,t)},navigateOnClick:function(e,t){var i;if(t&&n.acl.hasAccessToModel("view",t)){i=this._buildRecordRoute({model:t,hash:{link:this.context.get("link"),appendRoot:true}});if(i){n.controller.navigate(i,{initiator:this.navigationName})}}},getModel:function(e){var t=n.utils.listItemDataProviders[this.getListItemDataProvider()];e=t.extractId(e);return this.collection.get(e)},loadData:function(e,t){this.collection.dataFetched=false;this._super(e,t)},refresh:function(e){e=this._applyCurrentStateParams(e);if(e.isPagination){this.collection.setOption({update:true,remove:false});delete e.isPagination;this.collection.paginate(e)}else{this.collection.setOption({update:false,remove:true});this.collection.fetch(e)}},bindViewSyncListener:function(){this.listenTo(this.collection,"sync",this.publishCollectionSyncData)},unbindViewSyncListener:function(){this.stopListening(this.collection,"sync",this.publishCollectionSyncData)},publishCollectionSyncData:function(e,t,i){this.publishSyncData(e.toJSON(),null,i)},getAllSyncableCollections:function(){return[this.collection]},receiveSyncData:function(e,t,i){if(e&&e.id){_.each(this.getAllSyncableCollections(),function(n){this.processCollection(n,e,t,i)},this)}},processCollection:function(e,t,i,o){var r=e.get(t.id);if(r){if(i&&i.status===404||!i&&o.method==="delete"){e.remove(r)}else if(!i&&!a.utils.isModelSynchronized(r,t)){r.set(t);if(!n.acl.hasAccessToModel("list",r)){e.remove(r)}}}},_dispose:function(){var e=this.getViewContainer();this.stopListening(this.collection,"data:sync:start");this.stopListening(this.collection,"sync");this.stopListening(this.collection,"data:sync:error");this.stopListening(n.events,"offline:server:read");if(e){e.remove()}if(this.contextMenu){this.contextMenu.dispose()}this._super()},isCurrentListUpdated:function(e){var t=this.context.get("parentModule");var i=this.context.get("link");if(!(this.collection instanceof n.BeanCollection)){return false}return this.collection.cid===e.cid},setOfflineEnabled:function(e){this.collection.offlineReadDisabled=!e},_initNoRecFoundLabelBehavior:function(){if(n.offlineEnabled){this.listenTo(n.events,"offline:server:read",function(e){var t=this.$(".no-records-found");var i=n.offline.api.SERVER_READ_STATUS;var a;a=_.bind(function o(){t.toggle(!this.collection.length)},this);if(!this.isCurrentListUpdated(e.apiOptions)){return}switch(e.status){case i.start:t.hide();break;case i.finish:if(e.dataUpdated){this.collection.once("sync",function r(){a()},this)}else{a()}break;case i.error:a();break}},this)}else{this.listenTo(this.collection,"data:sync:start",function(){this.$(".no-records-found").hide()});this.listenTo(this.collection,"sync",function(e,t,i){if(i.method!=="update"&&this.collection.length===0){this.$(".no-records-found").show()}})}},setSortByField:function(){var e=this.getCurrentState();var t=e.order_by?e.order_by.split(":")[0]:null;this.sortBy=null;if(t&&t!=="name"&&t!=="date_modified"){var i=this.modContextData[this.module].additionalListFields;if(_.isEmpty(_.findWhere(i,{name:t}))){var a=n.metadata.getModule(this.module).fields[t];this.sortBy={name:t,type:a.type,label:a.vname}}}},abortActiveRequests:function(){var e=this.collection;var t=false;if(e.getFetchRequest()){this.context.resetLoadFlag();e.abortFetchRequest();t=true}return t},_buildRecordRoute:function(e){return Handlebars.helpers.buildRoute(e.model,{hash:e.hash})},getListItemEl:function(e){var t;var i;if(!_.isObject(e)){e=this.collection.get(e)}if(e){t=n.utils.listItemDataProviders[this.getListItemDataProvider()].buildId(e);i=n.utils.formatString('article[data-id="{0}"]',[t])}return $(this.$(i))},_deleteRecord:function(e,t){var i=n.lang.get(t?"LBL_MOBILE_UNLINK_CONFIRM":"LBL_MOBILE_DELETE_CONFIRM");this.hideContextMenu();r.showConfirm(i,{callback:function(i){if(i===2){e.destroy({relate:t,wait:true})}}});return false},onToggleFieldValue:function(e,t,i){var n=e.get(i);e[t](!n,{error:_.bind(function(){e.set(i,n);this.hideContextMenu()},this)});this.hideContextMenu()},hideContextMenu:function(){if(this.contextMenu&&this.contextMenu.isOpened()){this.contextMenu.hide()}},isActionVisible:function(e,t){return e.isVisible&&n.acl.hasAccessToModel(e.access||e.name,t)},initPagination:function(e){if(e.isPaginationEnabled!==undefined){this.isPaginationEnabled=e.isPaginationEnabled}if(this.isPaginationEnabled){this.listenTo(n,"offline:server:read",this._showPaginationMsg);this.listenTo(this.collection,"sync",this._updatePaginationElements)}},_showPaginationMsg:function(e){var t=e.status===n.offline.api.SERVER_READ_STATUS.start;if(this.collection.offlineReadDisabled||!this.isCurrentListUpdated(e.apiOptions)){return}_.extend(e,{backgroundFetch:true});if(t){n.syncAlertManager.onSyncStart("read",this.collection,e)}else{n.syncAlertManager.onSyncSuccess("read",this.collection,e)}this.scrollReflow()},_updatePaginationElements:function(){if(!this.collection){return}while(this.collection.length>this.getMaxPageSize()){this.collection.shift()}this.$(".show-more-top-btn").toggle(this.needShowMoreTopButton());this.$(".show-more-bottom-btn").toggle(this.needShowMoreBottomBtn());this.scrollReflow()},paginateTop:function(){if(!this.isPaginationEnabled){return}var e=Math.max(this.collection.offset-this.collection.length-n.config.maxQueryResult,0);this.refresh({offset:e,limit:n.config.fetchLimit.maxPageSize})},paginateBottom:function(){if(this.isPaginationEnabled){this.refresh({isPagination:true})}},needShowMoreTopButton:function h(){return this.collection.dataFetched&&Math.max(this.collection.next_offset,this.collection.offset)>this.getMaxPageSize()},needShowMoreBottomBtn:function p(){return this.collection.dataFetched&&this.collection.next_offset!==-1}});e.exports=u},function(e,t,i){var n=i(257);var a=i(288);var o=i(262);var r=n.extendView(o,"Syncable",{initialize:function(e){this._super(e);a.registerView(this);this.bindViewSyncListener()},_dispose:function(){a.unregisterView(this);this.unbindViewSyncListener();this._super()},bindViewSyncListener:function(){},unbindViewSyncListener:function(){},publishSyncData:function(e,t,i){a.triggerViewSync(this,e,t,i)},receiveSyncData:function(e,t){}});e.exports=r},function(e,t,i){"use strict";var n=SUGAR.App;var a=i(258);var o=i(311);var r=i(257);var s=i(261);e.exports=r.extendView(s,"ContextMenu",{ACTIVE_COMPONENT_ID:"list_view_context_menu",tagName:"span",events:{"click .context-menu__item:not(.disabled)":"onItemClick"},initialize:function l(e){var t=this;this._super(e);this.parentView=e.parentView;this.listenTo(n,"app:orientation:changed",function(){if(t.activeItem){t._refresh()}})},_getAvailableActions:function c(e,t){return o.getRecordActions({view:this.parentView,model:e,type:"context-menu",maxCount:t})},onGripClick:function d(e,t){var i=$(e.currentTarget).closest("article");var n=this.isItemHasContextMenuOpened(i.get(0));if(this.isOpened()){this.hide()}if(!n){this.show(i,t)}return false},onItemSwipeLeft:function u(e,t){if($.__swipeHelper.swipeOrientation!=="vertical"){var i=$(e.currentTarget).closest("article");if(this.isItemHasContextMenuOpened(i.get(0))){return false}if(this.isOpened()){this.hide()}this.show(i,t)}},onItemSwipeRight:function f(e,t){if(this.isItemHasContextMenuOpened(e.currentTarget)){this.hide()}},_getDocuments:function h(e,t,i){var n=this;var a=_.findWhere(this.contextItems,{name:"file"});t.once("docs:ready",function(i){t.docData=i;o.updateActionState({action:a,view:n.parentView,model:t});n.renderContextMenu(e,t)});t.getDocuments(i)},renderContextMenu:function p(e,t){var i={contextMenuItems:this.contextItems,isEmptyMenu:_.isEmpty(this.contextItems),following:!!t.get("following"),myFavorite:!!t.get("my_favorite")};e.find(".box__context-menu").remove();this.$el.html(n.template.get("context-menu")(i));e.append(this.$el)},_getMaxMenuItemsCount:function m(){var e=this.parentView.$el.width();var t=63;return Math.floor(e/t)},setActiveItem:function g(e,t){this.activeItem={$el:e,model:t}},show:function v(e,t){var i=this;var a=e.find(".menu-container");if(_.isEmpty(a)){return}this.setActiveItem(e,t);this._refresh();if(t){this.listenTo(t,"change",this._refresh)}a.addClass("on");this.activeItem.$el.addClass("active-list-item");n.activeComponents.add(this.ACTIVE_COMPONENT_ID,function(){return i.hide()})},hide:function b(){var e=this.isOpened();if(!e){return}var t=this.activeItem.$el;var i=this.activeItem.model;var a=t.find(".menu-container");a.removeClass("on").find(".box__context-menu").remove();t.removeClass("active-list-item");if(i){i.off("docs:ready");this.stopListening(i,"change",this._refresh)}this.activeItem=undefined;n.activeComponents.remove(this.ACTIVE_COMPONENT_ID)},_refresh:function x(){var e=this.activeItem.model;var t=this.activeItem.$el.find(".menu-container");this.contextItems=this._getAvailableActions(e,this._getMaxMenuItemsCount());var i=this.parentView.modContextData&&this.parentView.modContextData[e.module];var n=i&&i.docFields;var a=_.findWhere(this.contextItems,{name:"file"});if(a){this._getDocuments(t,e,n);o.updateActionState({action:a,view:this.parentView,model:e})}this.renderContextMenu(t,e)},isOpened:function y(){return!!this.activeItem},isItemHasContextMenuOpened:function E(e){return this.activeItem&&this.activeItem.$el.get(0)===e},onItemClick:function L(e){e.preventDefault();e.stopPropagation();var t=$(e.currentTarget).attr("action");var i=_.findWhere(this.contextItems,{name:t});if(_.isFunction(i.handler)){i.handler(this.parentView,this.activeItem.model)}if(!i.isMultipleChoice&&i.autoClose){this.hide()}},onItemLongTap:function S(e,t){if(!$.os.android){return}n.analytics.trackEvent("longTap","c-menu");if(this.isOpened()){this.hide()}this.showActionSheet(e,t)},showActionSheet:function w(e,t){var i=this;var o=$(e.currentTarget).closest("article");var r=this.parentView.modContextData&&this.parentView.modContextData[t.module];var s=[];var l=[];var c=this._getAvailableActions(t);this.setActiveItem(o,t);if(!_.isEmpty(c)){a.showActionSheet(_.map(c,function(e){return n.lang.get(e.label)}),{title:n.lang.get("LBL_SELECT_ACTION_LABEL"),onSelectCb:function d(e,a){var r=c[a];if(_.isFunction(r.handler)){r.handler(i.parentView,t)}i.onCloseActionSheet(o);if(n.isNative)return;return!r.isMultipleChoice},onCancelCb:function u(){return i.onCloseActionSheet(o)}})}t.once("docs:ready",function(e){t.docData=e});r&&t.getDocuments(r.docFields)},onCloseActionSheet:function A(e){e.removeClass("selected-item");this.activeItem=undefined}})},function(e,t,i){"use strict";var n=SUGAR.App;var a=i(297);var o=i(312);var r=i(314);var s=i(315);e.exports={getRecordActions:function l(e){var t=e.view;var i=e.model;var n=e.type;var r=e.maxCount;var s=a.getCustomActions();var l=o({view:t,model:i});var c=t.basicMenuActions||_.union(l,s);c=_.chain(this.processRecordActions({actions:c,view:t,model:i,type:n})).filter(function(e){return t&&_.isFunction(t.isActionVisible)?t.isActionVisible(e,i):e.isVisible}).value();if(r){c=c.slice(0,r)}return c},getRightMenuActions:function c(e){var t=e.view;var i=e.model;var n=e.viewType;var o=n==="list"?"right-menu-list":"right-menu-detail";var s=this.processRecordActions({actions:_.union(r({model:i,viewType:n}),a.getCustomActions()),view:t,model:i,type:o});return _.where(s,{isVisible:true})},getEditViewActions:function d(e){var t=e.view;var i=e.model;var n=this.processRecordActions({actions:_.union(s({view:t,model:i}),a.getCustomActions()),view:t,model:i,type:"edit-menu"});return _.where(n,{isVisible:true})},processRecordActions:function u(e){var t=this;var i=e.actions;var n=e.view;var a=e.model;var o=e.type;var r=[];var s=[];i=_.filter(i,function(e){return _.contains(e.types,o)&&(!e.modules||_.contains(e.modules,a.module))});_.each(i,function(e){var t=e.name;if(_.contains(s,t)){return}var n=void 0;if(!e.custom){n=_.find(i,function(e){return e.custom&&t===e.name})}r.push(_.extend({},e,n));s.push(e.name)});return _.chain(r).each(function(e){return t.updateActionState({action:e,view:n,model:a})}).sortBy("rank").value()},updateActionState:function f(e){var t=e.action;var i=e.view;var n=e.model;_.each(t.stateHandlers,function(e,a){t[a]=!!e.call(t,i,n)});_.defaults(t,{isVisible:true,isEnabled:true})}}},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(263);var r=i(313);var s={name:"phone",types:["context-menu","toolbar"],access:"list",label:"LBL_CALL_BUTTON",iconKey:"actions.call",stateHandlers:{isVisible:function c(e,t){var i=e.modContextData[t.module];if(!i.actions.phone){return false}var n=t.getAccessibleFields(i.phoneFields);return t.isDataDefined(n)},isMultipleChoice:function d(e,t){var i=t.getAccessibleFields(e.modContextData[t.module].phoneFields);var n=t.getFieldsDataArray(i);return n.length>1},isEnabled:function u(e,t){return this.stateHandlers.isVisible(e,t)}},handler:function f(e,t){var i=t.getAccessibleFields(e.modContextData[t.module].phoneFields);var n=t.getFieldsDataArray(i);o.callPhone(n,{model:t})},autoClose:true,rank:5};var l=_.extend({},s,{name:"message",types:["context-menu","toolbar"],access:"list",label:"LBL_SMS_BUTTON",iconKey:"actions.sms",handler:function h(e,t){var i=t.getAccessibleFields(e.modContextData[t.module].phoneFields);var n=t.getFieldsDataArray(i);o.sendSms(n)},rank:7});e.exports=function p(e){var t=e.view;var i=e.model;return[{name:"favorite",types:["context-menu"],label:i.get("my_favorite")?"LBL_UNFAVORITE":"LBL_FAVORITE",stateHandlers:{isVisible:function c(e,t){return n.acl.hasAccessToModel("view",t)&&!_.contains(n.config.nonEditableModules,t.module)}},isFavorite:true,handler:function(e,t){e.onToggleFieldValue(t,"favorite","my_favorite")},rank:10},{name:"view",types:["context-menu"],label:"LBL_VIEW_BUTTON",iconKey:"actions.view",stateHandlers:{isVisible:function d(e,t){return!n.acl.hasAccessToModel("edit",t)||_.contains(n.config.nonEditableModules,t.module)}},handler:function u(e,t){var i=e._buildRecordRoute({model:t,hash:{link:e.context.get("link"),appendRoot:true,action:"edit"}});n.controller.navigate(i,{initiator:e.navigationName})},rank:10},{name:"edit",types:["context-menu"],label:"LBL_EDIT_BUTTON",iconKey:"actions.edit",stateHandlers:{isVisible:function f(e,t){return n.acl.hasAccessToModel("view",t)&&!_.contains(n.config.nonEditableModules,t.module)}},handler:function h(e,t){var i=e._buildRecordRoute({model:t,hash:{link:e.context.get("link"),appendRoot:true,action:"edit"}});n.controller.navigate(i,{initiator:e.navigationName})},rank:10},{name:"email",types:["context-menu","toolbar"],access:"list",label:"LBL_EMAIL_BUTTON",iconKey:"actions.email",stateHandlers:{isVisible:function p(e,t){var i=e.modContextData[t.module];var n=false;if(i.actions.email){var a=t.getAccessibleFields(i.emailFields);n=t.hasActiveEmail(a)}return n},isEnabled:function m(e,t){return this.stateHandlers.isVisible(e,t)},isMultipleChoice:function g(e,t){var i=t.getAccessibleFields(e.modContextData[t.module].emailFields);var a=t.getFieldsDataArray(i);var o=n.nomad.utils.extractAndSortEmails(a);return o.length>1}},handler:function(e,t){var i=t.getAccessibleFields(e.modContextData[t.module].emailFields);var n=t.getFieldsDataArray(i);var r=a.utils.extractAndSortEmails(n);if(!_.isEmpty(r)){o.sendEmail(r)}},autoClose:true,rank:6},{name:"follow",types:["context-menu"],label:i.get("following")?"LBL_UNFOLLOW":"LBL_FOLLOW",stateHandlers:{isVisible:function v(e,t){return n.nomad.canFollow(t)}},isFollow:true,handler:function(e,t){e.onToggleFieldValue(t,"follow","following")},rank:10},{name:"unlink",types:["context-menu"],label:"LBL_UNLINK_BUTTON",iconKey:"actions.unlink",stateHandlers:{isVisible:function b(e,t){return e.unlinkVisible&&t.hasUnlinkAccess(e.relateFields,e.relationship)}},handler:function(e,t){return e._deleteRecord(t,true)},rank:8},{name:"delete",types:["context-menu"],label:"LBL_DELETE_BUTTON",iconKey:"actions.delete",stateHandlers:{isVisible:function x(e,t){return!t.link&&t.hasDeleteAccess()}},handler:function(e,t){return e._deleteRecord(t)},rank:10},s,l,{name:"map",types:["context-menu","toolbar"],access:"list",label:"LBL_MAP_BUTTON",iconKey:"actions.map",stateHandlers:{isVisible:function y(e,t){var i=e.modContextData[t.module];if(!i.actions.map)return false;var n=e.addressFieldsGroups||t.getAccessibleFieldsGroups(i.addressFieldsGroups);var a=t.getAddresses(n);return _.any(a)},isEnabled:function E(e,t){return this.stateHandlers.isVisible(e,t)},isMultipleChoice:function L(e,t){var i=t.getAccessibleFieldsGroups(e.modContextData[t.module].addressFieldsGroups);var n=t.getAddresses(i);return n.length>1}},handler:function S(e,t){var i=e.addressFieldsGroups||t.getAccessibleFieldsGroups(e.modContextData[t.module].addressFieldsGroups);var n=t.getAddresses(i);o.openAddress({addresses:n})},autoClose:true,rank:8},{name:"url",types:["context-menu","toolbar"],access:"list",label:"LBL_URL_BUTTON",iconKey:"actions.url",stateHandlers:{isVisible:function w(e,t){var i=e.modContextData[t.module];if(!i.actions.url)return false;var a=t.getAccessibleFields(i.urlFields);var o=n.view.fields.UrlField.prototype.regexp;return t.isDataDefined(a,o)},isEnabled:function A(e,t){return this.stateHandlers.isVisible(e,t)},isMultipleChoice:function R(e,t){var i=t.getAccessibleFields(e.modContextData[t.module].urlFields);var n=t.getFieldsDataArray(i,r.prototype.regexp);return n.length>1}},handler:function C(e,t){var i=t.getAccessibleFields(e.modContextData[t.module].urlFields);var n=t.getFieldsDataArray(i,r.prototype.regexp);o.openUrl(n,{encode:true})},autoClose:true,rank:10},{name:"file",types:["context-menu","toolbar"],access:"list",label:"LBL_FILE_BUTTON",iconKey:"actions.file",stateHandlers:{isVisible:function T(e,t){var i=t.getAccessibleFields(e.modContextData[t.module].docFields);var a=!_.isEmpty(i)||!_.isEmpty(t.docData)||t._canHaveFiles()||t.canHaveAttachments()||t._canHavePDFs();var o=n.acl.hasAccessToModel("view",t);return a&&o},isMultipleChoice:function I(e,t){return t.docData&&t.docData.length>1},isLoading:function k(e,t){return t.docsLoading},isEnabled:function O(e,t){return t.docsLoading||a.utils.docIsAvailable(t.docData)}},handler:function D(e,t){var i=t.docData;if(_.isEmpty(i)){alert(n.lang.get(t.docsLoading?"LBL_LOADING_FILES":"ERR_NO_DOCS"));return}o.openDoc(t.docData)},autoClose:true,rank:9},{name:"close",types:["context-menu"],label:"LBL_CLOSE_BUTTON_TITLE",iconKey:"actions.close",stateHandlers:{isVisible:function N(e,t){return t.isCloseActionAvailable()}},handler:function B(e,t){var i="status";t.set(i,n.nomad.utils.getClosedStatusValue(t.module||e.module));t.save(null,{fields:[i],error:function a(){t.set(i,t.previousAttributes()[i])},success:function o(){if(t.collection&&_.isArray(t.collection.filterDef)&&_.find(t.collection.filterDef,function(e){return e[i]&&e[i]["$not_in"]&&_.contains(e[i]["$not_in"],t.get(i))})){e.collection.remove(t);e.collection.next_offset!==-1&&--e.collection.next_offset;if(!e.collection.length){e.collection.fetch()}}}})},autoClose:true,rank:10}]}},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(263);var r=i(283);e.exports=a.extendField(r,"Url",{regexp:/^(https?:\/\/)?[\w-]+(\.[\w-]+)+([\w\s.,@?^=%&amp;:\/~+#-]*)?$/,events:{"click .value a":"openUrl"},unformat:function(e){var t="://";var i=e;e=$.trim(e);if(e.indexOf(t)>-1){i=e.split(t)[1];if(!i)return""}return e},openUrl:function(){o.openUrl(this.model.get(this.name),{encode:true})}})},function(e,t,i){"use strict";var n=SUGAR.App;var a=i(257);var o=i(263);e.exports=function(e){var t=e.model;var i=e.viewType;var r=t.link;var s=r?r.bean.module:t.module;var l=r&&n.data.getRelatedModule(r.bean.module,r.name);var c=n.metadata.getModuleNames({filter:"visible"});var d=function h(e,t){n.controller.loadDynamic({layoutDef:{name:"pickerlist",parentModelId:e.id,parentModule:s,action:t,create:true}})};var u=function p(e,t){var i=Handlebars.helpers.buildRoute(e,{hash:{link:r&&r.name,appendRoot:true,action:t}});n.controller.navigate(i)};var f=[{name:"create",types:["right-menu-list"],label:n.lang.get("LBL_CREATE_MODULE",s,a.getSingularModuleName(s)),iconKey:"menu.create",stateHandlers:{isVisible:function m(){if(t.link){return false}return a.canCreateModule(s)}},handler:function g(){return u(t,"create")}},{name:"duplicate",types:["right-menu-detail"],label:"LBL_DUPLICATE_BUTTON",iconKey:"menu.duplicate",stateHandlers:{isVisible:function v(){return a.canCreateModule(s)&&!_.include(n.config.nonDuplicatableModules,s)}},handler:function b(){return u(t,"duplicate")},rank:10},{name:"create-related",types:["right-menu-detail","right-menu-list"],label:r?n.lang.get("LBL_CREATE_RELATED",l,a.getSingularModuleName(l)):"LBL_CREATE_RELATED_RECORD",iconKey:"menu.createRelated",stateHandlers:{isVisible:function x(){var e=t.link;if(!e&&i==="list"||e&&i==="detail"){return false}return l?a.canCreateRelated(l,s,e.name):a.hasCreatableSubpanels(a.getSubpanels(s))}},handler:function y(){i==="list"?u(t,"create"):d(t,"create")},rank:20},{name:"link-related",types:["right-menu-detail","right-menu-list"],label:r?n.lang.get("LBL_ASSOC_EXISTING",l,a.getSingularModuleName(l)):"LBL_ASSOC_RELATED_RECORD",iconKey:"menu.linkRelated",stateHandlers:{isVisible:function E(){var e=t.link;if(!e&&i==="list"||e&&i==="detail"){return false}if(e&&i==="list"){return a.canLinkRelated(s,e.name)}else{return a.hasLinkableSubpanels(a.getSubpanels(s))}}},handler:function L(){i==="list"?u(t,"associate"):d(t,"associate")},rank:10},{name:"share",types:["right-menu-detail"],label:"LBL_RECORD_SHARE_BUTTON",iconKey:"menu.share",handler:function S(){return o.shareRecord(t)},rank:30}];_.each(c,function(e){f.push({name:"create-"+e+"-record",module:e,modules:["Search"],types:["right-menu-list"],label:n.lang.get("LBL_CREATE_MODULE",e,a.getSingularModuleName(e)),stateHandlers:{isVisible:function t(){return a.canCreateModule(e)}},handler:function i(){return n.controller.navigate("Search/"+e+"/create")},rank:40})});return f}},function(e,t,i){"use strict";var n=SUGAR.App;var a=i(257);e.exports=function o(e){var t=e.view;var i=e.model;return[{name:"close",types:["edit-menu"],label:"LBL_CLOSE_AND_SAVE_BUTTON",stateHandlers:{isVisible:function n(e,t){return t.isCloseActionAvailable()}},handler:function o(e,t){e.model.set("status",a.utils.getClosedStatusValue(e.module));e.save()},rank:10}]}},function(e,t){"use strict";var i=SUGAR.App;var n=function r(e){e._ptrAction=null;if(!e.scroll){return}if(e.$el&&e.$el.pullToRefresh){e.$el.pullToRefresh("destroy")}e.scroll.destroy();e.scroll=null};var a=function s(e){if(e.scroll){e.scroll.reflow();return}if(!e.$easyScrollerParent){e.$el.wrap('<div class="easy-scroller-parent"><div class="easy-scroller-holder"></div></div>');e.$easyScrollerParent=e.$el.closest(".easy-scroller-parent")}var t=e.$easyScrollerParent;var n=t.get(0);var a=t.find(".easy-scroller-holder").get(0);e.scroll=new window.EasyScroller(a,n,{scrollingY:true,scrollingX:false});e.$el.pullToRefresh({callback:e._ptrAction,template:i.template.get("ptr"),templateTarget:e.$easyScrollerParent,height:50,scroller:e.scroll.scroller,action:i.lang.get("LBL_MOBILE_PTR_RELEASE"),refresh:i.lang.get("LBL_LOADING")})};var o={_dispose:function l(){n(this)},onAfterRender:function c(){a(this)},hidePtrLoading:function d(){if(this.$el){this.$el.pullToRefresh("hide")}this.scrollReflow()},scrollReflow:function u(){if(this.scroll){this.scroll.reflow()}}};e.exports=function(e){var t=e.view;var r=e.ptrAction;_.each(o,function(e,i){var n=t[i];t[i]=function(){var t=void 0;for(var i=arguments.length,a=Array(i),o=0;o<i;o++){a[o]=arguments[o]}if(_.isFunction(n)){t=n.apply(this,a)}e.apply(this,a);return t}});t._ptrAction=r;t.listenTo(i,"app:rightmenu:show",function(e){if(!i.isTablet){e.show?n(this):a(this)}});t.listenTo(i,"app:orientation:changed",t.scrollReflow);t.listenTo(i,"app:keyboard:hide",t.scrollReflow)}},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(311);var r=i(318);var s=i(313);var l=a.extendView(r,"Detail",{className:"view__summary",events:{"click .box__record-action .context-menu__item:not(.disabled)":"onActionBtnClick","click .show-more":"toggleSummaryView","click a.show-edit-view":"handleLinkClick"},plugins:[],globalEvents:{"offline:data:updated":function(e){if(e.id!==this.model.id)return;if(e.action==="delete"){this.showRecordOverlay(e.data,e.status);return}this.model.fetch({params:{skipServerSync:true}})}},_afterRenderTasks:{},_docsRequestTimestamp:null,initialize:function(e){this._super(e);var t;var i=this.meta.panels[0].fields||[];var n=this.context.get("link");var o=999;if(n){var r=this.initRelationshipFields(this.context.get("parentModule"),n);if(r){i=_.union(r,i)}}if(i.length>o){i.length=o}this.modContextData=a.getContextMeta("detail");t=this.modContextData[this.model.module];this.headerField=t.headerField;this.avatarField=t.avatarField;this.hasLinkableSubpanels=t.hasLinkableSubpanels;this.hasCreatableSubpanels=t.hasCreatableSubpanels;this.phoneFields=t.phoneFields;this.emailFields=t.emailFields;this.urlFields=t.urlFields;this.docFields=t.docFields;this.emailbodyFields=t.emailbodyFields;this.displayFields=_.reject(i,function(e){return e===this.headerField||e===this.avatarField||_.has(this.docFields,e.name)},this);this.addressFieldsGroups={};_.each(t.addressFieldsGroups,function(e,t){this.addressFieldsGroups[t]=e[0].fields},this);this.actions=t.actions;if(this.actions.doc){this.actions.file=true}this.isFollowable=a.canFollow(this.model);this.model.on("docs:ready",function(e){this.model.docData=e;this._setDocLoading(false)},this)},getAddressFields:function(e){return _.map(e||[],function(e,t){return{name:t,type:"address",fields:e,label:"LBL_"+t.toUpperCase().replace(/_C$/,"")}},this)},onDataSyncComplete:function(e,t,i){this._super("onDataSyncComplete",arguments);n.session.set(this.model.id,this.model.attributes);this._renderActionButtons();this._requestDocuments()},receiveSyncData:function(e,t,i){var a=this.layout===n.controller.layoutManager.getRecordLayout();var o;var r;var s;this._super(e);i=i||{};o=i.responseData||{};r=o[i.fileFieldName];if(this._isModelUpdated){if(r){s={};s[i.fileFieldName]=r;this._afterRenderTasks.file=_.bind(this._requestDocuments,this,s)}if(a){this._renderActionButtons();this._requestDocuments()}}},isActionVisible:function(e,t){return e.custom?e.isVisible:!!this.actions[e.name]},_getAvailableActions:function c(e){return o.getRecordActions({view:this,model:this.model,type:"toolbar",maxCount:e})},_getMaxMenuItemsCount:function(){var e=this.$el.width();var t=70;return Math.floor(e/t)},_renderActionButtons:function(){var e=n.template.get("record-actions");var t=this.$(".box__record-action");var i=this._getMaxMenuItemsCount();this.actionBtns=this._getAvailableActions(i);t.html(e(this.actionBtns));this.$el.find(".bizcard").toggleClass("noactions",_.isEmpty(this.actionBtns))},_setDocLoading:function(e){if(!this.actions.doc)return;this.model.docsLoading=e;this._renderActionButtons()},getHeaderConfig:function(){var e=this.context.get("link")?n.lang.get("LBL_RELATED_MODULE",this.module,this.moduleSingular):this.moduleSingular;var t=!!this.context.get("link");var i=!n.isTablet||n.isTablet&&!t;return{title:e,menuButton:true,plus:true,back:i,hasRels:this.hasLinkableSubpanels,hasCreatableRels:this.hasCreatableSubpanels}},onActionBtnClick:function d(e){var t=$(e.currentTarget).attr("action");var i=_.findWhere(this.actionBtns,{name:t});if(_.isFunction(i.handler)){i.handler(this,this.model,e)}},onBeforeRender:function(){this._super();this.expanded=false;this.$el.removeClass("bizcard-more")},onAfterRender:function(){this._super();if($.os.ios&&window.ScrollFix){var e=new ScrollFix(this.$el.find(".card").get(0));var t=new ScrollFix(this.$el.find(".scroll").get(0))}this._renderActionButtons();this._performActionsAfterViewRendered();n.tutorial.show(this.name,this.module)},toggleSummaryView:function(){var e=this.$el.find(".show-more");if(this.expanded){this.$el.removeClass("bizcard-more")}else{this.$el.addClass("bizcard-more")}this._redrawScrollFix();this.expanded=!this.expanded;return false},_redrawScrollFix:function(){this.el.querySelector(".card").style.display="none";this.el.querySelector(".card").offsetHeight;this.el.querySelector(".card").style.display="block";

},_onFileFieldChange:function(e,t,i){this._super(e,t,i);if(i==="preparing"){this._showOverlay()}else if(i==="prepared"){this._postFile(e,t)}else if(i==="error"){this._hideOverlay();n.alert.show("file_upload_error",{level:"error",messages:arguments[1],autoClose:true,closeable:true});this.render()}},_showOverlay:function(){n.overlay.show("uploading_image",{spinner:false});n.alert.show("upload_mask",{level:"info",messages:n.lang.get("LBL_MOBILE_UPLOAD_IN_PROGRESS"),autoClose:false,closeable:false})},_hideOverlay:function(){n.overlay.hide("uploading_image");n.alert.dismiss("upload_mask")},_postFile:function(e,t){var i={success:_.bind(function(t){n.alert.show("file_upload_success",{level:"success",messages:n.lang.get("LBL_MOBILE_UPLOAD_SUCCESS"),autoClose:true,closeable:true});this.model.set(e.name,t[e.name].name);this._requestDocuments();this._hideOverlay()},this),error:_.bind(function(t){n.error.handleHttpError(t);e.render();this._hideOverlay()},this)};this.model.uploadFile(e.name,t,i,{htmlJsonFormat:false})},_performActionsAfterViewRendered:function(){_.each(this._afterRenderTasks,function(e,t){e.call(this);delete this._afterRenderTasks[t]},this)},_requestDocuments:function(e){var t=this.model.get("date_modified");this._setDocLoading(false);if(e||!this._docsRequestTimestamp||this.model._docsUpdated||this._docsRequestTimestamp<t){this._docsRequestTimestamp=t;this.model._docsUpdated=false;this._setDocLoading(true);this.model.getDocuments(this.docFields,e)}},handleLinkClick:function(e){if($(e.currentTarget).hasClass("show-edit-view")){e.preventDefault();this._openEditView()}else{this._super(e)}},_openEditView:function(){var e=Handlebars.helpers.buildRoute(this.model,{hash:{action:"edit",link:this.context.get("link"),appendRoot:true}});n.controller.navigate(e,{initiator:this.navigationName})}});e.exports=l},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(309);var r=a.extendView(o,"Record",{_statusMessageMap:{403:"LBL_NOT_AUTHORIZED",404:"LBL_RECORD_NOT_FOUND",link:"LBL_RELATED_RECORD_NOT_FOUND"},_modelEvents:{sync:"onDataSyncSuccess","data:sync:error":"onDataSyncError","data:sync:complete":"onDataSyncComplete"},_isModelUpdated:false,initialize:function(e){this._super(e);this.fileFields=_.select(this.displayFields,function(e){return _.contains(["image","file"],e.type)});this._bindModelEvents()},_listenFileFieldEvents:function(){_.each(this.fileFields,function(e){var t=this.getField(e.name,this.model);if(t){this.listenTo(t,"file:field:change",function(e,i){this._onFileFieldChange(t,e,i)});this.listenTo(t,"file:field:clear",function(){this._onFileFieldClear(t)})}},this)},_onFileFieldChange:_.noop,_onFileFieldClear:_.noop,onBeforeRender:function(){this._super();this.model.dataFetched=false},_renderFields:function(){this._super.apply(this,arguments);if(!_.isEmpty(this.fileFields)){this._listenFileFieldEvents()}},_dispose:function(){this._super();this._unbindModelEvents()},showRecordOverlay:function(e,t){if(document.activeElement){document.activeElement.blur()}t=e.link&&t===404?"link":t;var i=n.lang.get(this._statusMessageMap[t]);if(i&&!this.$el.find(".overlay-view").length){this.overlayIsShown=true;this.$el.append("<div class='overlay-view'><span class='message'>"+i+"</span></div>")}},hideRecordOverlay:function(){this.overlayIsShown=false;this.$el.find(".overlay-view").remove()},bindViewSyncListener:function(){this.listenTo(this.model,"sync",this.publishModelSyncData)},unbindViewSyncListener:function(){this.stopListening(this.model,"sync",this.publishModelSyncData)},publishModelSyncData:function(e,t,i){this.publishSyncData(e.toJSON(),null,_.extend({},i,{responseData:t}))},receiveSyncData:function(e){var t;var i=false;if(_.isArray(e)){t=_.find(e,function(e){return e.id===this.model.id},this)}else if(e&&e.id===this.model.id){t=e}if(t&&!a.utils.isModelSynchronized(this.model,t)){this.model.set(t);i=true}this._isModelUpdated=i},onDataSyncSuccess:function(e,t,i){if(this.overlayIsShown){this.hideRecordOverlay()}},onDataSyncError:function(e,t,i){if(e==="read"){this.showRecordOverlay(this.model,i.status);if(n.error.isAccessError(i)){this.publishSyncData(this.model.toJSON(),i);this._clearModel()}}},onDataSyncComplete:function(e,t,i){},_clearModel:function(){var e={};_.each(this.model.attributes,function(t,i){if(i!=="id"){e[i]=void 0}});this.model.set(e,{unset:true})},_bindModelEvents:function(){_.each(this._modelEvents,function(e,t){this.listenTo(this.model,t,this[e])},this)},_unbindModelEvents:function(){_.each(this._modelEvents,function(e,t){this.stopListening(this.model,t,this[e])},this)}});e.exports=r},function(e,t){(function(e){var t=/(?:(?:(?:(?:(?:(?:https?)|ftp|itms|itms-apps):\/\/)|skype:)[a-z0-9-\._~\:\/?#[\]@!$&'()*+,;=%]+)|(?:[a-z0-9]{1}(?:[a-z0-9-]+\.)+(?:com|net|gov|edu|us)(?:(?:\?|\/)[a-z0-9-\._~\:\/?#[\]@!$&'()*+,;=%]+)?))/gi;var i=/[.?,!]+$/;$.merge=function(){return _.union.apply(this,arguments)};_.extend(async,{retry:function(e,t,i){var n=5;var a=[];if(typeof e==="function"){i=t;t=e;e=n}e=parseInt(e,10)||n;var o=function(n,o){var r=function(e,t){return function(i){e(function(e,n){i(!e||t,{err:e,result:n})},o)}};while(e){a.push(r(t,!(e-=1)))}async.series(a,function(e,t){t=t[t.length-1];(n||i)(t.err,t.result)})};return i?o():o}});e.nomad.utils={urlHasProtocolRegExp:/^(?!javascript)[a-z-]+:/i,augmentZeptoDetect:function(e){var t=$.os;var i=$.browser;t.desktop=!e&&(i.chrome||i.safari)&&!(t.phone||t.tablet||t.ipod||t.silk||t.kindle||t.rimtabletos||t.wp||t.blackberry||t.bb10||t.playbook||t.touchpad);i.chromeMobile=i.chrome&&!e&&!t.desktop&&(t.ios||t.android&&t.phone);i.chromeWeb=i.chrome&&!e},execRegex:function(e,t,i){var n;while((n=t.exec(e))!==null){if(n.index===t.lastIndex){t.lastIndex++}i(n)}},sizePicture:function(e){var t=parseInt(e.height,10);var i=parseInt(e.width,10);var n=e.image.naturalHeight;var a=e.image.naturalWidth;if(n<a){e.sizeProp=t/n*a+"px "+t+"px"}else{e.sizeProp=i+"px "+i/a*n+"px"}},stripLastEmptyStrings:function(e){var t=e.split("\n");while(t.length>0){if(_.isEmpty(_.last(t))){t.pop()}else break}return t.join("\n")},minutesToQuarterHours:function(e){e=parseInt(e,10);if(e===0)return e;if(e<8)return 15;var t=Math.floor(e/15);var i=e%15;if(i>7)t=t+1;return t*15},pad:function(e,t,i){i=i||"0";e=String(e);return e.length>=t?e:new Array(t-e.length+1).join(i)+e},getPrimaryEmail:function(e,t){var i=_.find(e,this.isPrimaryEmail);if(t&&i){return i.email_address}return i},replaceGuid:function(e,t){var i=/([\w\d]{8}\-[\w\d]{4}-[\w\d]{4}-[\w\d]{4}-[\w\d]{12})/;return e.replace(i,t)},extractAndSortEmails:function(e){var t=_.flatten(_.map(e,_.values));t=_.reject(t,function(e){return Number(e.invalid_email)||Number(e.opt_out)});t=_.sortBy(t,function(e){return Number(e.primary_address)?0:1});t=_.pluck(t,"email_address");return t},isPrimaryEmail:function(e){var t=e.primary_address;if(!_.isBoolean(t)){t=!!parseInt(e.primary_address,10)}return t},nl2br:function(e){var t=e||"";t=String(t);return t.replace(/\n|\r|\r\n/g,"<br />")},iso2sugar:function n(t,i){if($.os.android&&(e.isNative||i.nativeSupport))return t;return t.replace(/\.?\d+?Z/,"+00:00")},getTimeZoneOffsetString:function(e){var t=e||(new Date).getTimezoneOffset();var i=t>=0?"+":"-";t=Math.abs(t);var n=Math.floor(t/60);var a=t%60;return i+this.pad(n,2)+":"+this.pad(a,2)},getHash:function(){var e=window.location.hash;if(e){e=e.split("~")[0]}return e||"#"},resolveUrl:function(e,t){var i=document,n=i.getElementsByTagName("base")[0],a=n&&n.href,o=i.head||i.getElementsByTagName("head")[0],r=n||o.appendChild(i.createElement("base")),s=i.createElement("a"),l;r.href=t;s.href=e;l=s.href;if(n)n.href=a;else o.removeChild(r);return l},merge:function(){function e(e,t){return t}return function t(i,n,a){var o;if(_.isUndefined(i))o=n;else if(_.isUndefined(n))o=i;else{var r=_.first(arguments,2);var s=_.map(r,_.keys);var l=_.intersection.apply(_,s);var c={};_.each(r,function(e,t){_.each(s[t],function(t){c[t]=e[t]})});if(_.isUndefined(a))a=e;_.each(l,function(e){c[e]=a(i[e],n[e])});return c}return _.clone(o)}}(),deepClone:function a(e){var t={};_.each(e,function(e,i){t[i]=_.isObject(e)?a(e):e});return t},getOfflineStatusClass:function(){var t=e.offline.status;if(t){if(t.state===e.offline.STATE.ERROR){return"status-error"}else if(t.state===e.offline.STATE.WARNING){return"status-warning"}}return"status-success"},humanFileSize:function(){var t=" K M G T P E Z Y".split(" ").map(function(e){return e+"B"});function i(e,i){var n=0;var a=1024;var o=i?0:1;while(e>a/10&&++n<t.length-1){e/=a}this.value=(e+.05).toFixed(o);this.units=t[n]}i.prototype._i18nUnits=function(){var t="LBL_FILE_SIZE_UNITS_"+this.units;var i=e.lang.get(t);return i===t?null:i};i.prototype.toString=function(e){var t=e&&this._i18nUnits()||this.units;return this.value+" "+t};return function(e,t){return e!==-1?new i(e,t):null}}(),isErrorEmulationEnabled:function(){return e.config.errorEmulation.enabled&&e.user.get("user_name")===e.config.errorEmulation.user.toLowerCase()},parseQueryString:function(e){function t(e,t){var i=String(e).replace(/^&/,"").replace(/&$/,"").split("&"),n=i.length,a,o,r,s,l,c,d,u,f,h,p,_,m,g,v,b=function(e){return decodeURIComponent(e.replace(/\+/g,"%20"))};if(!t){t=this.window}for(a=0;a<n;a++){h=i[a].split("=");p=b(h[0]);_=h.length<2?"":b(h[1]);while(p.charAt(0)===" "){p=p.slice(1)}if(p.indexOf("\x00")>-1){p=p.slice(0,p.indexOf("\x00"))}if(p&&p.charAt(0)!=="["){g=[];m=0;for(o=0;o<p.length;o++){if(p.charAt(o)==="["&&!m){m=o+1}else if(p.charAt(o)==="]"){if(m){if(!g.length){g.push(p.slice(0,m-1))}g.push(p.substr(m,o-m));m=0;if(p.charAt(o+1)!=="["){break}}}}if(!g.length){g=[p]}for(o=0;o<g[0].length;o++){f=g[0].charAt(o);if(f===" "||f==="."||f==="["){g[0]=g[0].substr(0,o)+"_"+g[0].substr(o+1)}if(f==="["){break}}c=t;for(o=0,v=g.length;o<v;o++){p=g[o].replace(/^['"]/,"").replace(/['"]$/,"");d=o!==g.length-1;l=c;if(p!==""&&p!==" "||o===0){if(c[p]===u){c[p]={}}c=c[p]}else{r=-1;for(s in c){if(c.hasOwnProperty(s)){if(+s>r&&s.match(/^\d+$/g)){r=+s}}}p=r+1}}l[p]=_}}}var i={};t(e,i);return i},docIsAvailable:function(t){return!_.isEmpty(t)&&(!e.offline||e.offline.isOnline())},isValidDate:function(e){return _.isDate(e)&&!isNaN(e.getTime())},isModelSynchronized:function(t,i){var n=["_last_fetched","_client_date_modified"];var a;var o;if(t.get("date_modified")!==i.date_modified){return false}o=_.omit(i,n);a=_.omit(t.toJSON(),n);return _.isEmpty(e.utils.getChangedProps(a,o,false))},getObjectPrimitives:function(e){var t={};function i(e){return!_.isObject(e)&&!_.isFunction(e)}_.each(e,function(e,n){if(i(e)){t[n]=e}});return t},waitFor:function(e,t,i){var n=false;var a=new Date-0;var o=false;i=i||2e3;var r=function(){o=new Date-0-a>i;n=e();if(!n&&!o){window.setTimeout(r,200)}else{t(o?{message:"Max wait timeout"}:null)}};window.setTimeout(r,200)},deepExtend:function(){var e=this;if(arguments.length<1||typeof arguments[0]!=="object"){return false}if(arguments.length<2)return arguments[0];var t=arguments[0];var i=Array.prototype.slice.call(arguments,1);var n;var a;var o;i.forEach(function(i){if(typeof i!=="object")return;for(var r in i){if(i[r]!==void 0){a=t[r];n=i[r];if(n===t)continue;if(typeof n!=="object"||n===null){t[r]=n;continue}if(typeof a!=="object"){o=Array.isArray(n)?[]:{};t[r]=e.deepExtend(o,n);continue}if(Array.isArray(n)){o=Array.isArray(a)?a:[]}else{o=!Array.isArray(a)?a:{}}t[r]=e.deepExtend(o,n)}}});return t},isTabletLandscapeMode:function(){return e.isTablet&&e.nomad.getOrientation()==="landscape"},isForecastConfigValid:function(){var t=true;var i=e.metadata.getModule("Forecasts","config");var n=i.sales_stage_won;var a=i.sales_stage_lost;var o=i.sales_stage_won.concat(i.sales_stage_lost);var r=e.lang.getAppListStrings("sales_stage_dom");if(n.length===0||a.length===0||_.isEmpty(r)){t=false}else{t=_.every(o,function(e){return e!==""&&_.has(r,e)},this)}return t},getForecastNotSetUpMessage:function(t){var i=t?"LBL_DASHLET_FORECAST_NOT_SETUP_ADMIN":"LBL_DASHLET_FORECAST_NOT_SETUP";var n=e.lang.get(i,"Forecasts");var a=e.config.siteUrl.indexOf("?")===-1?"?":"&";if(t){var o=e.lang.get("LBL_DASHLET_FORECAST_CONFIG_LINK_TEXT","Forecasts");n+='  <a class="lnk-non-forecast" href="'+e.config.siteUrl+a+'mobile=0#Forecasts/config">'+o+"</a>"}return n},wrapAsyncCallback:function o(e){return{success:function t(i){e(null,i)},error:e}},isAccessibleModule:function(t,i){i=i||"list";return!_.contains(e.config.unsupportedModules,t)&&_.contains(e.metadata.getModuleNames({filter:"visible",access:i}),t)},getClosedStatusValue:function(e){var t={Calls:"Held",Tasks:"Completed",Meetings:"Held"};return t[e]},isModuleVisible:function(t){var i=e.metadata.get().modules_info[t];return i&&i.visible},getForecastModule:function r(){return e.metadata.getModule("Forecasts","config").forecast_by||(this.isModuleVisible("RevenueLineItems")?"RevenueLineItems":"Opportunities")},getHashCode:function(e){var t=0;var i;var n;var a;if(e.length===0)return t;for(i=0,a=e.length;i<a;i++){n=e.charCodeAt(i);t=(t<<5)-t+n;t|=0}return t},charHtmlEntity:function(e,t){var i=e;if(t){if(e==="<"){i="&lt;"}else if(e==="'"){i="&#x27;"}else if(e===">"){i="&gt;"}else if(e==="\n"){i="<br>"}}else{if(e==="&"){i="&amp;"}else if(e==="<"){i="&lt;"}else if(e===">"){i="&gt;"}else if(e==="'"){i="&#x27;"}else if(e==='"'){i="&quot;"}else if(e==="\n"){i="<br>"}}return i},stringHtmlEntity:function s(e,t){var i="";_.each(e,function(e){i+=this.charHtmlEntity(e,t)},this);return i},escapeRegExp:function l(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},migrateKeyValueStore:function(t,i){var n=e.config.env+":"+e.config.appId+":";if(t.get(n+"store:version")!==t.version){_.chain(localStorage).keys().filter(function(e){return e.indexOf(n)===0}).each(function(i){t.set(i,e.cache.get(i));localStorage.removeItem(i)}).value();t.set(n+"store:version",t.version)}var a=i.getAll();if(!_.isEmpty(a)){_.each(a,function(e,i){t.set(i,e)});i.cutAll()}},formatLinks:function c(e){var n="";if(e&&e.length>0){n=e.replace(t,_.bind(function(e){var t=e.match(i)||"";if(t){e=e.replace(i,"")}var n=this.urlHasProtocolRegExp.test(e)?e:"http://"+e;return'<a href="'+n+'">'+e+"</a>"+t},this))}return n},isElVisible:function(e){return e&&e.get(0)&&e.get(0).offsetParent!==null},isDirectionLTR:function(){return!e.config.UI.supportedRTL||e.lang.direction===e.lang.DIRECTION_LTR},_normalizeUrl:function(t,i){if(i){t=encodeURI(t)}if(e.nomad.utils.urlHasProtocolRegExp.test(t))return t;if(/^\.\.\//.test(t)){var n=window.location.href.split("#")[0].split("index.html")[0];t=n+t;return t}return"http://"+t},buildActionHandlerName:function(t){return _.reduce(t.split(":"),function(t,i){return t+e.utils.capitalize(i)},"on")}}})(SUGAR.App)},function(e,t){(function(e){var t=function(){this.stack=[];this.hash={}};t.prototype={clear:function(){this.stack=[];this.hash={}},iterate:function(e,t){_.each(this.stack,function(t,i){e.call(this,t.item,i)},t)},remove:function(e,t){var i=[];if(!_.isFunction(e)){var n=-1;var a;for(var o=0;o<this.stack.length;o++){if(_.isString(e)?this.stack[o].uid===e:this.stack[o].item===e){n=o;a=this.stack[o];break}}if(n>-1&&a){delete this.hash[a.uid];this.stack.splice(n,1)}}else{_.each(this.stack,function(n,a){var o=e.call(t,n.item,a);if(o){i.push(n)}},this);_.each(i,function(e){this.remove(e.uid)},this)}},shift:function(){var e=this.stack.shift();delete this.hash[e.uid];return e.item},pop:function(){var e=this.stack.pop();delete this.hash[e.uid];return e.item},push:function(e,t){if(!this.hash[e]){this.stack.push({uid:e,item:t})}this.hash[e]=t},get:function(e){return this.hash[e]},getByIndex:function(e){var t=this.stack[e];return t?t.item:null},count:function(){return this.stack.length},isEmpty:function(){return!this.stack.length}};e.nomad.hashmap=t})(SUGAR.App)},function(e,t){(function(e){e.augment("overlay",{init:function(){this.overlayHash={}},show:function(t,i){if(this.overlayHash[t]){return false}i=_.extend({tint:false,spinner:true,template:false},i);var n=i.message||"";if(!n&&i.label){n=e.lang.get(i.label)}var a=$(e.template.get("overlay")());if(i.template){a.html(e.template.get(i.template)({message:n}))}else{var o=a.find("#overlay-message");a.toggleClass("tint",i.tint);a.toggleClass("spinner",i.spinner);o.text(n).show()}e.$rootEl.append(a);a.show();this.overlayHash[t]=a},hide:function(e,t){var i=this.overlayHash[e];if(i){if(t){i.animate({opacity:"0"},500,"ease",function(){i.remove()})}else{i.remove()}}delete this.overlayHash[e]},hideAll:function(){_.each(this.overlayHash,function(e,t){if(e){e.remove();delete this.overlayHash[t]}},this)},isActive:function(){return!_.isEmpty(e.overlay.overlayHash)}})})(SUGAR.App)},function(e,t,i){var n=SUGAR.App;var a=i(305);e.exports=n.nomad.extendLayout(a,"List",{className:"layout__list",isFilterEnabled:true,isSearchEnabled:true,initialize:function(e){var t=[];var i;var n="filters";var a="search-box";this.stateComponents=[];this.isFilterEnabled=this.isFiltersAvailable(e);this.isSearchEnabled=this.isSearchAvailable(e);if(this.isSearchEnabled){t.push({view:a})}if(this.isFilterEnabled){t.push({view:n})}i=this._getListName(e);t=_.union(t,this.getListComponents(e));this.options.meta={type:"list",components:t};this._super(e);this.$el.attr("layout-name",this.options.def.subType||this.options.def.name||"");this._list=this.getComponent(i);this._searchBox=this.getComponent(a);this._filter=this.getComponent(n);if(this._searchBox){this.stateComponents.push(this._searchBox);this.listenTo(this.collection,"data:sync:complete",function(e,t,i){this._searchBox.hideProgress()});this.enableSearch()}if(this._filter){this.stateComponents.push(this._filter);this.listenTo(this._filter,"filter:changed",this.filterChanged);this.listenTo(this._filter,"sort:changed",this.reloadData)}},onAfterShow:function(){this._super();n.tutorial.show(this.name,this.module)},getListComponents:function o(e){var t=this._getListName(e);var i=[];if(e.listMeta){i.push({view:{name:t,meta:_.extend({},n.metadata.getView(e.module,t),e.listMeta)}})}else{i.push({view:t})}return i},getHeaderConfig:function(){var e=this._super();e.search=this.isSearchEnabled;return e},filterChanged:function r(){this._unbindListCollectionEvents();this.getCurrentList().collection.once("data:sync:error",this._onFilterListFailed,this);this.getCurrentList().collection.once("sync",this._onFilterListSuccess,this);this.updateSearchPlaceholder();this.reloadData()},reloadData:function(){var e={relate:this.options.subType==="relationships"};this._super();this.updateListViewState();this.getCurrentList().refresh(e)},loadData:function(e,t){var i=this.getCurrentList().collection;var a=n.tutorial.hasStepToShow(this.name,this.module);e=e||{};e.params=e.params||{};if(n.config.alwaysShowMyItems)e.myItems=true;if(i.options){delete i.options.update;i.options.offset=0;i.options.page=0}if(this._filter){_.extend(e.params,this._filter.getPreparedState());this.updateListViewState()}this.context.set("collection",i);this._super(e,t);if(a){i.on("sync",this._onTutorialShow,this)}},_onTutorialShow:function s(){n.tutorial.show(this.name,this.module)},updateListViewState:function(){var e={};var t=this.getCurrentList();_.each(this.stateComponents,function(t){_.extend(e,t.getPreparedState())},this);t.setCurrentState(e);t.setSortByField()},enableSearch:function(){this.listenTo(this._searchBox,"search:toggle",this.onToggleSearch);this.listenTo(this._searchBox,"search:text",this.search)},onToggleSearch:function l(e){this.searchActivated=e;if(this._filter){this._filter.toggleSearchMode(e,this._searchBox._searchText)}this.updateSearchPlaceholder()},updateSearchPlaceholder:function c(){if(this.searchActivated){var e=this._filter?this._filter.getActiveFilter().name:this.getCurrentList().modulePlural;this._searchBox.setPlaceholder(e)}},toggleFiltersView:function d(e){if(!this._filter){return}this._filter.toggle(e);this.getCurrentList().scrollReflow();this.$el.toggleClass("filters-hidden",!e)},search:function(){this.reloadData();n.analytics.trackEvent("search",this.module,0)},_getListName:function(e){var t;var i={selector:"list-selector",associate:"list-associate",relationships:"list"};if(_.contains(n.config.readonlyModules,e.module)&&!e.editable){t="readonly-list"}else if(e.subType){t=i[e.subType]}else{t=e.name||"list"}return t},isSearchAvailable:function u(e){var t=_.isUndefined(e.isSearchEnabled)?this.isSearchEnabled:e.isSearchEnabled;t=t&&!(_.contains(n.config.readonlyModules,e.module)&&!e.editable||e.module==="Recents"||e.module==="Dashboards"||e.module==="TxLog"||e.subType==="relationships");return t},isFiltersAvailable:function f(e){var t=_.isUndefined(e.isFilterEnabled)?this.isFilterEnabled:e.isFilterEnabled;t=t&&!_.contains(["Activities","Teams","TxLog"],e.module)&&!_.contains(n.config.readonlyModules,e.module)&&n.metadata.getView(e.module,"list");return t},_onFilterListSuccess:function h(){this._unbindListCollectionEvents()},_onFilterListFailed:function p(e,t,i){this._unbindListCollectionEvents();if(n.offlineEnabled){if(t.params.skipOfflineRead){n.alert.dismiss("network_error",{animate:false});n.alert.show("network_error",{level:"error",messages:n.lang.get("LBL_MOBILE_FILTER_IS_NOT_AVAILABLE"),autoClose:true,pageHash:i.request.params.pageHash,requestOptions:t});this._filter.resetToPreviousFilter()}}else{this._filter.resetToPreviousFilter()}},_unbindListCollectionEvents:function m(){this.getCurrentList().collection.off("data:sync:error",this._onFilterListFailed);this.getCurrentList().collection.off("sync",this._onFilterListSuccess)},getCurrentList:function g(){return this._list},onDetach:function(){this._super();this.getCurrentList().abortActiveRequests();this._unbindListCollectionEvents()}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(305);var r=i(299);e.exports=n.view.layouts.DetailLayout=o.extend({initialize:function(e){var t=e.module;var i=n.supportedFeatures.activities&&n.metadata.getModule(t).activityStreamEnabled;var a=this._createDashboards(e);var o=[];if(a){o.push(a)}o.push({title:n.lang.get("LBL_DETAIL_RELATED"),name:"related-records",module:t,modelId:e.modelId,loadDataFn:function(){this.loadData()},gaData:{category:"click",action:"tab-related"}});if(i){o.push({title:n.lang.get("LBL_ACTIVITY_STREAM"),name:"activitystream-dashlet",module:"Activities",parentModel:e.context.get("model"),loadDataFn:function(){this.context.resetLoadFlag();this.loadData()},gaData:{category:"click",action:"tab-activity-stream"}})}e.meta.components=[{view:"detail"},{view:{className:"view__detail-tabs",name:"container",partialLoadEnabled:true,views:o,viewSwitcher:r.switcherTypes.TABS}}];this._super("initialize",arguments)},_createDashboards:function(e){var t=a.dashboards.getDashboards({module:e.module});var i=e.modelId;var o;if(!n.config.dashboards.recordDashboardsEnabled||_.isEmpty(t)||!n.config.dashboards.enabled){return}o=_.map(t,function(t){return{id:t.id,name:"dashboard",module:"Dashboards",title:n.lang.get(t.get("name")),parentModelId:i,parentModule:e.module,model:t}});return{title:n.lang.get("LBL_DASHBOARDS"),name:"container",views:o,viewSwitcher:r.switcherTypes.DROPDOWN,gaData:{category:"click",action:"tab-dashboard"}}}})},function(e,t,i){var n=SUGAR.App;var a=i(322);e.exports=n.nomad.extendLayout(a,{type:"list",module:"Activities"},{listName:"activitystream-dashlet",dashlet:null,initialize:function(){this._super("initialize",arguments);this.dashlet=this.getComponent(this.listName)},_getListName:function(){return this.listName},isSearchAvailable:function(){return false},loadData:function(e,t){if(this.disposed)return;this.dashlet.loadData(e,t)},getHeaderConfig:function(){return{menuButton:true,title:n.lang.getAppString("LBL_ACTIVITY_STREAM"),offlineEnabled:n.offlineEnabled}}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(322);e.exports=a.extendLayout(o,"MobileSearchList",{_listViews:[],DEFAULT_SORTING:{field:"date_modified",direction:"desc"},initialize:function(e){this._super(e);this._listViews=[];this._search=this.createView("Search");this._adjustSearchCollectionParams(this._search.collection,null);this._listViews.push(this._search);if(n.supportedFeatures.recents){this._recents=this.createView("Recents");this._recents.collection.limit=n.config.fetchLimit.recents;this._recents.active=true;this._listViews.push(this._recents)}else{this._search.active=true}_.each(this.getListViews(),function(e){this.addComponent(e)},this)},onAfterComponentsRender:function(){var e=this._filter.getPreparedState();this.toggleSearchList(!e.recents)},filterChanged:function r(e){this.toggleSearchList(!e.recents);this._super(e)},createView:function s(e){var t=e==="Search"?n.data.createMixedBeanCollection():n.data.createBeanCollection(e);return n.view.createView({name:"list",module:e,context:n.context.getContext({module:e,collection:t,model:n.data.createBean(e)})})},toggleSearchList:function l(e){if(this._search.active!==e){this._unbindListCollectionEvents()}this._search.active=e;if(this._recents){this._recents.active=!e}_.each(this.getListViews(),function(e){if(e.active){e.getViewContainer().show();e.bindGlobalEvents()}else{e.getViewContainer().hide();if(e.collection.getFetchRequest()){e.collection.abortFetchRequest()}e.unbindGlobalEvents()}},this)},search:function c(){var e=this._searchBox.getPreparedState().q;var t=!!e||!this._filter.getPreparedState().recents;if(n.supportedFeatures.recents){this.toggleSearchList(t)}this._adjustSearchCollectionParams(this._search.collection,e);this.listenTo(this._search.collection,"sync",function(e,t,i){this._searchBox.hideProgress()});this._super()},loadData:function d(e,t){var i=this.getCurrentList().collection;i.dataFetched=false;this._super(e,t)},getFieldNames:function u(e){var t=n.metadata.getModuleNames({filter:"visible",access:"list"});var i=this._super(e);_.each(t,function(e){var t=n.metadata.getModule(e).mergedFields;if(t){i=_.union(i,t)}});return i},_adjustSearchCollectionParams:function f(e,t){e.orderBy=t?null:this.DEFAULT_SORTING;delete e.limit;e.query=t;e.module_list=n.nomad.getFtsEnabledModules()},getHeaderConfig:function(){return _.defaults({title:n.lang.get("LBL_MOBILE_GLOBAL_SEARCH"),menuButton:true,plus:true},this._super())},getListComponents:function h(e){return[]},getListViews:function p(){return this._listViews},getCurrentList:function(){return _.findWhere(this._listViews,{active:true})}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(305);var r={type:"list",components:[{view:"list-picker"}]};e.exports=n.view.layouts.PickerlistLayout=o.extend({className:"layout__list list-picker",initialize:function(e){this.options.meta=r;this._super("initialize",arguments);var t=this.getComponent("list-picker");var i=this.context.get("action");var o=this.context.get("parentModule");var s=a.getSubpanels(o);var l=i==="create"?_.filter(s,function(e){return a.canCreateRelated(e.module,o,e.context.link)}):_.filter(s,function(e){return e.linkable&&n.acl.hasAccess("list",e.module)});l=_.map(l,function(e){return{value:e.module,label:n.lang.get(e.label,o),module:e.module,context:e.context}});t.setData({items:l});t.on("selection:submit",function(e){var i=a.buildLinkRoute(o,this.context.get("parentModelId"),e.get("context").link,null,this.context.get("action"));n.controller.navigate(i,{initiator:t.navigationName})},this)}})},function(e,t,i){var n=SUGAR.App;var a=i(322);e.exports=n.view.layouts.ListSelectorLayout=a.extend({initialize:function(e){this._super("initialize",[e]);var t=this.getCurrentList();var i=t.collection;var a;a=_.bind(function r(){this.header.setSaveBtnState(t.getSelectedIds())},this);a();this.listenTo(t,"selection:change",function(){var e=t.getSelectedIds();if(!_.isEmpty(e)){this._searchBox&&this._searchBox.hideSearch();this.toggleFiltersView()}a()});if(n.offlineEnabled){var o=n.offline.api.SERVER_READ_STATUS;this.listenTo(n.events,"offline:server:read",function(e){if(!t.isCurrentListUpdated(e.apiOptions)){return}if(e.status===o.finish){if(e.dataUpdated){i.once("sync",function n(){a()},this)}else{a()}}else if(e.status===o.error){a()}})}else{this.listenTo(i,"sync",a)}},onToggleSearch:function o(e){if(e){this.toggleFiltersView(true)}this._super("onToggleSearch",[e])}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(305);e.exports=a.extendLayout(o,"MobileDashboardsDetailLayout",{_isRecordDashboard:false,_prevLayoutContainer:null,initialize:function(e){var t=a.dashboards.getDashboard(e.dashboardId);var i;var o;this._isRecordDashboard=!!(e.parentModule&&e.parentModelId);if(this._isRecordDashboard){o=n.session.get(e.parentModelId);i=n.data.createBean(e.parentModule,o||{id:e.parentModelId});this.parentModel=e.parentModel=i;if(!o){this.listenTo(i,"sync",function r(){this.header.setTitle(this._getDashboardName())});i.fetch()}}e.context.set({model:t,parentModel:i});this._super("initialize",[e]);this.dashboardView=this.getComponent("dashboard");if(!this._isRecordDashboard){this.listenTo(this.dashboardView,"views:switch",this.onDashletChanged)}},_getDashboardName:function(){var e=this._isRecordDashboard?this.parentModel.get("name"):this.model.get("name");return n.lang.get(e)||null},onDashletChanged:function(e){var t;var i=this.$el.find(".dashHomeBtn");if(!e){i.hide();t=this._getDashboardName()}else{i.show();t=e.title;if(e.dataTitle){t+=e.dataTitle}}this.header.setTitle(t)},showDashboardHome:function(){n.controller.goUp()},loadData:function(){},getFieldNames:function(e){return null},getHeaderConfig:function(){var e=this._isRecordDashboard;return{subtitle:e&&a.getSingularModuleName(this.parentModel.module),dashboardHome:!e,back:true,menuButton:true,title:this._getDashboardName()||n.lang.get("LBL_LOADING"),offlineEnabled:n.offlineEnabled}},onAfterLayout:function(){var e=n.controller.layoutManager;var t=n.isTablet&&this===e.getRootLayout();var i=t&&!!e.getRecordLayout();var a=this._isRecordDashboard&&!t;var o=t&&i?"root":"record";this.dashboardView.setPaginatorVisible(o!=="root");this.header.setButtonVisible({back:a});this._prevLayoutContainer=o;this._super("onAfterLayout",arguments)},clean:function(){this.dashboardView.clean()},onHeaderDashboardHomeClick:function(){this.showDashboardHome();return true}})},function(e,t,i){var n=SUGAR.App;var a=i(305);var o=function(){};e.exports=n.view.layouts.MobileTxLogDetailLayout=a.extend({loadData:function(e){var t=this;this.model.sync=function(e,i,a){var r=a.success;async.waterfall([function(e){a.success=function(t){e(null,t)};n.offline.storage.readTransactions(a,{id:i.id})},function(e,t){if(!e){t(new o)}else{n.offline.storage.fillTxLogData([e],function(){t(null,e)})}}],function(e,i){if(!e){r(i);t.render()}else if(e instanceof o){n.controller.clean();n.controller.goBack()}})};this.model.fetch(e)}})},function(e,t,i){"use strict";var n=SUGAR.App;var a=i(257);var o=i(306);var r=i(258);var s=i(311);var l=a.extendView(o,"HeaderEdit",{events:{"click .saveBtn":"onSaveClicked","click .cancelBtn":"onCancelClicked","click .caretBtn":"onCaretClicked"},initialize:function c(e){this._super(e);this.addCancelSaveHandlers()},initHeaderActions:function d(){this._super();var e={additionalAction:"additional:action"};_.extend(this.headerActions,e)},onBeforeRender:function u(){if(this.config.save&&!this.context.get("create")&&!this.layout.isDynamic()){this.config.saveHidden=true}},addCancelSaveHandlers:function f(){var e=this;this.model.on("data:sync:start",function(t,i,n){return e.setButtonsEnabled(false)},this).on("sync",function(t,i,n,a){return e.setButtonsEnabled(true,null,n.method)},this).on("data:sync:error",function(t,i,n){return e.setButtonsEnabled(true,n,t)},this)},setButtonsEnabled:function h(e,t,i){if(e){var a=this._hasAccessToSave();if(a){this._refreshHeaderActions()}this.$(".save-container").toggle(a);if(t&&(t.status===404||t.status===403&&i==="read"||i==="read"&&(!n.offlineEnabled||t instanceof n.offline.Error))){this.$(".save-container").hide()}if(!this._saveBtnDisabled){this.$(".saveBtn .btn").removeClass("disabled")}this.$(".cancelBtn .btn").removeClass("disabled")}else{this.$(".saveBtn .btn").addClass("disabled");this.$(".cancelBtn .btn").addClass("disabled")}},_refreshHeaderActions:function p(){this.availableAdditionalActions=s.getEditViewActions({view:this,model:this.model,viewType:this.layout.name
});var e=!_.isEmpty(this.availableAdditionalActions);this.$(".caretBtn").toggle(e);this.$(".saveBtn").toggleClass("combined",e)},onBackClicked:function m(){},onDashboardHomeClicked:function g(){},onHomeClicked:function v(){},onTitleClicked:function b(){},onCaretClicked:function x(e){var t=this;e.preventDefault();e.stopPropagation();var i=_.map(this.availableAdditionalActions,function(e){return n.lang.get(e.label,null,t)});if(i.length){r.showActionSheet(i,{title:n.lang.get("LBL_SELECT_ACTION_LABEL"),onSelectCb:function a(i,n){t._processAction(e,t.headerActions.additionalAction,{action:t.availableAdditionalActions[n].handler})}})}},_hasAccessToSave:function y(){return!this.model.get("id")||n.acl.hasAccessToModel("edit",this.model)&&!_.contains(n.config.nonEditableModules,this.module)}},{getOverridableMethods:function E(){return _.difference(o.getOverridableMethods(),["onBackClicked","onDashboardHomeClicked","onHomeClicked","onTitleClicked"])}});e.exports=l},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(263);var r=i(297);var s=i(261);e.exports=a.extendView(s,"MainMenu",{events:{"click #desktop":function(e){e.preventDefault();o.openUrl(e.currentTarget.href)},"click .menu__item.disabled .menu-item__link":function(e){e.preventDefault();e.stopPropagation()},'click .menu__item:not(.disabled) .menu-item__link:not([target="_blank"])':"onMenuItemClicked",swipe:function(e){e.stopPropagation()}},globalEvents:{"app:logout":function(){this.avatar=null},"offline:status:update":function(e){var t=this.$el.find(".offline-icon");t.removeClass("status-success status-warning status-error status-default");t.addClass(a.utils.getOfflineStatusClass())},"app:view:change":function(e){if(e.layoutDef&&e.layoutDef.isDynamic){return}this.highlightActiveMenuItem(e);this.toggleMenu(false,true)},"app:orientation:changed":function(){if(!n.isTablet){return}this.toggleMenu(false,true)}},offlineStatusIconPartial:"offline-status-icon",_isOpened:false,isOpened:function(){return this._isOpened},initialize:function(e){var t=this;var i=$(document.body);this.$contentWrapper=n.$rootEl.find("#wrapper");this._super(e);i.on("click.menu swipe.menu",function(){if(t.isOpened()){t.toggleMenu(false)}});this._isOpened=i.hasClass("show-menu-left");a.mainMenu=this},start:function(){this.render();this._loadUserPicture()},onMenuItemClicked:function(e){var t=e.currentTarget;var i=t.getAttribute("href").substr(1);var a=_.findWhere(this.menuItems,{route:i});if(!n.isTablet){this.toggleMenu(false)}if(a&&_.isFunction(a.handler)){e.preventDefault();a.handler()}else{this.handleLinkClick(e)}},onBeforeRender:function(){this._super();this.buildMenu()},onAfterRender:function(){this._super();var e=n.controller.getScreenContext();this.highlightActiveMenuItem(e)},toggleMenu:function(e,t,i){var o=this;var r=t||!n.supportedFeatures.menuAnimation?0:200;var s=o.$("#moduleList");var l=$(document.body);var c=a.utils.isDirectionLTR()?1:-1;var d;i=i||function(){};if(e===undefined){e=!this.isOpened()}var u={contentAnimation:{"-webkit-transform":e?"translate3d("+c*244+"px, 0, 0)":"translate3d(0, 0, 0)"},overlayAnimation:{"-webkit-transform":e?"translate3d("+c*244+"px, 0, 0)":"translate3d("+c*-100+"%, 0, 0)"}};var f={menuAnimation:{"-webkit-transform":e?"translate3d(0, 0, 0)":"translate3d("+c*-100+"%, 0, 0)"},contentAnimation:{"-webkit-transform":e?"translate3d("+c*86+"%, 0, 0)":"translate3d(0, 0, 0)"},overlayAnimation:{"-webkit-transform":e?"translate3d("+c*86+"%, 0, 0)":"translate3d("+c*-100+"%, 0, 0)"}};d=n.isTablet?u:f;var h=function(){l.toggleClass("show-menu-left",e);o._isOpened=e;if(e){n.activeComponents.add(this.name,function(){o.toggleMenu(false,t,i)})}else{n.activeComponents.remove(this.name)}if(i){i()}};this.animateMenu({isShowing:e,data:d,$menu:s,callback:h,duration:r})},animateMenu:function(e){var t=e.data;var i=e.isShowing;if(i){$(document.body).addClass("show-menu-left");e.$menu.animate(t.menuAnimation,0)}this.$contentWrapper.animate(t.contentAnimation,e.duration,"ease-out",function(){if(!i){e.$menu.animate(t.menuAnimation,0)}if(t.overlayAnimation){n.$rootEl.find("#content-overlay").animate(t.overlayAnimation,0)}if(e.callback){e.callback()}})},_loadUserPicture:function(e){if(!n.api.isAuthenticated()){return}var t=n.api.buildFileURL({field:"picture",module:"Users",id:n.user.get("id")},a.getFileOptions());var i=new Image;var o;if(e){t+="&id="+e;o=true}if(!this.avatar){o=true}i.onload=_.bind(this._applyUserPicture,this,{img:i,url:t});if(o){i.src=t}else{this._applyUserPicture(this.avatar)}},_applyUserPicture:function(e){if(this.disposed){return}var t=this.$("#me i");var i={image:e.img,height:t.css("height"),width:t.css("width")};if(e.el){t.replaceWith(e.el);return}a.utils.sizePicture(i);t.css({backgroundSize:i.sizeProp,backgroundImage:"url("+e.url+")"}).addClass("withPicture");this.avatar={url:e.url,el:t}},highlightActiveMenuItem:function(e){var t=e.root||e.module||e.parentModule;if(t==="TxLog"){t="Offline"}else if(t==="Dashboards"){t+="/"+e.dashboardId}this.$el.find("li").removeClass("current");this.$el.find("a[href='#"+t+"']").parent("li").addClass("current")},buildMenu:function(){var e=[];_.each(a.dashboards.getDashboards({type:"home"}),function(t){var i=t.get("metadata");if(i&&i.dashlets.length){e.push({id:t.id,label:n.lang.getAppString(t.get("name"))||t.get("name")})}});this.menuItems=this._getMenuItems();_.extend(this,{items:this.menuItems,userName:n.user.get("full_name"),userId:n.user.get("id"),desktopURI:a.getDesktopUrl(),offlineEnabled:n.offlineEnabled,errorEmulationEnabled:a.utils.isErrorEmulationEnabled(),offlineStatusIconPartial:this.offlineStatusIconPartial,offlineStatusClass:a.utils.getOfflineStatusClass(),dashboards:e.length?e:undefined,dashboardsSupported:n.supportedFeatures.dashboards,activitiesSupported:n.supportedFeatures.activities})},_getMenuItems:function l(){var e=_.map(n.metadata.getModuleNames({filter:["visible","display_tab"],access:"list"}),function(e){return{route:e,label:a.getPluralModuleName(e),rank:10}});var t=r.getCustomMainMenuItems();return _.sortBy(e.concat(t),"rank")},_dispose:function(){n.events.off("app:user:picturechanged",null,this);$(document.body).off("click.menu swipe.menu");n.nomad.mainMenu=null}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(263);var r=i(261);e.exports=a.extendView(r,"About",{events:{"click .legal a":function(e){e.preventDefault();o.openUrl(e.target.href)},"click .support_email":function(e){e.preventDefault();var t=n.isNative?"\n\n\nrequest ID: "+n.clientInfo.device.uuid:"";o.sendConsoleLog({email:n.config.about.supportEmail,subject:n.config.productName+" support request",body:t})},"click .support_website":function(e){e.preventDefault();o.openUrl(n.config.about.support)},"click .server_url a":function(e){e.preventDefault();o.openUrl(this._getServerUrl())},"swipeRight .support_website":function(e){if(n.config.about.supportEmailVisible!=="concealed")return;this._feedBack=(this._feedBack||0)+1;if(this._feedBack>=3){this.getField("support_email").$el.removeClass("hide")}}},onAfterRender:function(){if(n.config.about.supportEmailVisible==="visible"){this.getField("support_email").$el.removeClass("hide")}if(!n.config.about.support){this.getField("support_website").$el.addClass("hide")}if(!n.config.about.showSdkVersion){this.getField("sdk_version").$el.addClass("hide")}},initialize:function(e){var t=n.nomad.getServerVersion();var i;this._super(e);_.extend(this,{showAttribution:n.config.about.showAttribution,fallbackFieldTemplate:"readonly",_displayTrademarks:n.config.about.displayTrademarks,_copyrightText:n.config.about.copyrightText,_trademarkText:n.config.about.trademarkText,_trademark2Text:n.config.about.trademark2Text});i=this._getServerUrl().replace(/(http:\/\/)|(https:\/\/)|(\/rest\/v10\/)/,"");this.model.set({app_version:a.getProductVersion(),sdk_version:n.config.sdkVersion,server_version:t,server_url:i,support_email:n.config.about.supportEmail,support_website:n.config.about.support,privacy:n.config.about.privacy,tos:n.config.about.tos,thirdPartySoftware:n.config.about.thirdPartySoftware})},_getServerUrl:function(){var e;var t=n.api.isAuthenticated()?n.loginManager.getSetting():n.loginManager.getTempSetting();if(n.isNative){e=t.loginUrl}else{e=t.siteUrl;if(e.indexOf("..")===0)e=n.nomad.utils.resolveUrl(e,window.location.href)}return e||""},getHeaderConfig:function(){return{title:n.lang.get("LNK_ABOUT"),menuButton:n.api.isAuthenticated()&&n.isSynced,plus:false,back:true}}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(258);var r=i(262);var s=i(274);e.exports=a.extendView(r,"Settings",{_bodyScroll:true,_defaultViewSplitter:":",_defaultViewFieldName:"default_view",events:{"click #touchid-toggle":"_enableTouchIdClicked"},initialize:function(e){this._modelBackup=null;this._showOfflineButton=n.config.offline.enabled&&(n.config.offlineEnabled||n.config.offline.debug.ignoreEnabled)&&n.supportedFeatures.offline;this._offlineEnabled=n.offlineEnabled;this._configurableFontSize=n.config.configurableFontSize;var t=new Backbone.Model(n.user.get("preferences"));var i=n.logger.levels[n.config.logger.level];if(i){t.set("logging",i.value-1)}var a=n.loginManager.getSetting("fontSize")||"normal";if(this._configurableFontSize&&a){t.set("fontSize",a)}this._showTouchIdButton=s.isTouchIdAuthenticationSupported();this._touchIdEnabled=s.isTouchIdForLoginSetup();t.set("touchIdEnabled",this._touchIdEnabled);e.layout.context.set("model",t);e.layout.model=t;this._super(e);if(this._configurableFontSize){var o=this.getFieldMeta("fontSize");o.options={};_.each([["tiny","LBL_FONTSIZE_TINY"],["small","LBL_FONTSIZE_SMALL"],["normal","LBL_FONTSIZE_NORMAL"],["large","LBL_FONTSIZE_LARGE"],["larger","LBL_FONTSIZE_LARGER"],["huge","LBL_FONTSIZE_HUGE"],["extra_huge","LBL_FONTSIZE_EXTRA_HUGE"]],function(e){o.options[e[0]]=n.lang.get(e[1])})}else{this.meta.panels[0].fields=_.filter(this.meta.panels[0].fields,function(e){return e.name!=="fontSize"})}if(n.supportedFeatures.settingsDefaultView){this._defineDefaultViewFields();this._adjustDefaultViewOptions();this.applyDefaultViewOnModel()}this.listenTo(this.model,"change",this.onSettingChange)},isEditView:function(){return true},_canSetValue:function(e,t){if(!t.dependencies.length)return true;return!!_.find(t.dependencies,function(t){var i=this.model.get(t.parentField);return!t.result||_.has(t.result(i),e)},this)},_defineDefaultViewFields:function(){var e=this.meta.panels[0].fields;this._defaultViewFields=[{name:"default_view",label:"LBL_MOBILE_DEFAULT_VIEW",options:{Modules:n.lang.get("LBL_MOBILE_SPECIFIC_MODULE")},view:"edit",type:"enum",dependencies:[]},{name:"default_module",label:"LBL_MOBILE_DEFAULT_MODULE",options:{},view:"edit",type:"enum",dependencies:[{parentField:"default_view",condition:function(e){var t=e.get(this.parentField);return t==="Modules"},result:function(){var e=n.metadata.getModuleNames({filter:"visible"});return _.object(e,_.map(e,a.getPluralModuleName))}}]},{name:"default_dashboard",label:"LBL_MOBILE_DEFAULT_DASHBOARD",options:{},view:"edit",type:"enum",dependencies:[{parentField:"default_view",condition:function(e){var t=e.get(this.parentField);return t==="Dashboards"},result:function(){var e={};_.each(a.dashboards.getDashboards({type:"home"}),function(t){e[t.id]=n.lang.get(t.get("name"))});return e}}]},{name:"default_dashlet",label:"LBL_MOBILE_DEFAULT_DASHLET",options:{},view:"edit","default":"-1",type:"enum",dependencies:[{parentField:"default_dashboard",condition:function(e){var t=e.get("default_view");return t==="Dashboards"},result:this._getDashboardDashlets}]}];_.each(this._defaultViewFields,function(t){var i=_.find(e,function(e){return e.name===t.name});if(!i){e.push(t)}},this);this._defaultViewFieldNames=_.pluck(this._defaultViewFields,"name")},resetDefaultView:function(){this.defaultView=n.config.defaultViewScheme;_.each(this._defaultViewFields,function(e){this.model.unset(e.name,{silent:true})},this);this.applyDefaultViewOnModel()},applyDefaultViewOnModel:function(){this.defaultView=this.defaultView||n.loginManager.getSetting(this._defaultViewFieldName)||n.config.defaultViewScheme;if(!this.defaultView)return;var e=this.defaultView.split(this._defaultViewSplitter);_.find(this._defaultViewFields,function(t){var i=!_.isEmpty(t.dependencies)&&t.dependencies[0].parentField;var n=this.model.get(i);var a=true;var o;if(n){a=!!_.find(t.dependencies,function(e){return e.condition(this.model)},this)}if(a){o=e.shift();if(!this._canSetValue(o,t)){this.resetDefaultView();return true}this.model.set(t.name,o,{silent:true})}return _.isEmpty(e)},this)},onSettingChange:function(e){var t=_.keys(e.changed);var i=_.intersection(this._defaultViewFieldNames,t);_.each(i,function(e){this._onDefaultViewChange(e)},this)},_adjustDefaultViewOptions:function(){var e=_.find(this.meta.panels[0].fields,function(e){return e.name===this._defaultViewFieldName},this);if(n.supportedFeatures.dashboards){var t=a.dashboards.getDashboards({type:"home"});e.options.Search=n.lang.get("LBL_MOBILE_GLOBAL_SEARCH");if(!_.isEmpty(t)){e.options.Dashboards=n.lang.get("LBL_MOBILE_SPECIFIC_DASHBOARD")}}if(n.supportedFeatures.activities){e.options.Activities=n.lang.get("LBL_ACTIVITY_STREAM")}},_getDependentFields:function(e){var t=[];_.each(this._defaultViewFields,function(i){if(_.contains(_.pluck(i.dependencies,"parentField"),e)){t.push(i)}});return t},_getDashboardDashlets:function(e){var t=a.dashboards.getDashboard(e).get("metadata");var i=t.dashlets;var o=_.chain(i).pluck("view").pluck("label").value();var r;o=_.map(o,function(e,t){var n=i[t].view;var o=_.defaults({label:e},n);return a.dashboards.getDashletTitle(o)});r=_.object(_.pluck(i,"id"),o);r[-1]=n.lang.get("LBL_ALL_DASHLETS");return r},_onDefaultViewChange:function(e,t){var i=this.getField(e);var n=i.getValue();var a=this._getDependentFields(e);_.each(a,function(e){var i=e.name;var a=this.getField(i);var o={};if(!a){return}_.each(e.dependencies,function(e){if(e.condition(this.model)){o=e.result;if(_.isFunction(o)&&!_.isUndefined(n)){o=o(n)}}},this);this._adjustSubviewGrid(a,o,t)},this)},_adjustSubviewGrid:function(e,t,i){if(_.isObject(t)){e.def.options=t;if(!i&&!_.isEmpty(this.model.changed)||_.isUndefined(this.model.get(e.name))){this.model.set(e.name,e.getDefaultValue())}e.render()}},getHeaderConfig:function(){return{title:n.lang.get("LNK_SETTINGS"),save:true,cancel:true}},onAfterRender:function(){this.backupModel();this.$pad=this.$(".pad");this.$modalFooter=this.$(".modal-footer");this.$touchidItem=this.$("#touchid-toggle");if(!n.config.showLogLevelSetting){this.getField("logging").remove()}_.each(this._defaultViewFieldNames,function(e){this.getField(e).$el.detach().appendTo(this.$pad);this._onDefaultViewChange(e,true)},this);this.$modalFooter.detach().appendTo(this.$pad);var e=n.config.UI.icons.edit.checkboxOn;var t=n.config.UI.icons.edit.checkboxOff;var i=this;$(".checkbox_custom").on("change",function(){if(this.checked){$(this).next(".checkbox-icon").removeClass(t).addClass(e)}else{$(this).next(".checkbox-icon").removeClass(e).addClass(t)}})},onHeaderSaveClick:function(){this.save()},save:function(){this.setFontSize();var e=this;var t=this.model.get("language");var i=this.$el.find("#offline-toggle").attr("checked");var o=i!==n.offlineEnabled;var r=false;var l=this.$touchidItem.attr("checked");var c=false;var d=false;var u=_.once(function m(){n.controller.clean()});var f=[function(){return e._showOfflineButton&&o},function(){return e.model.get("fontSize")!==e._modelBackup.fontSize},function(){var t=false;_.each(e._defaultViewFieldNames,function(i){if(t){return}var n=e.model.get(i);if(n){t=n!==e._modelBackup[i]}},this);return t},function(){return e.model.get("logging")!==e._modelBackup.logging},function(){var e=t!==n.user.getLanguage();if(e){d=true}return e},function(){var t=e._showOfflineButton&&o;if(t&&i){d=true}return t},function(){c=e._showTouchIdButton&&(l&&s.getTempCredential()||l!==Boolean(e._modelBackup.touchIdEnabled));return c}];var h=[function(t){e._showOfflineToggleConfirm(!n.offlineEnabled,function(e){if(e){r=e}t()})},function(t){var i=e.model?e.model.get("fontSize"):e._modelBackup.fontSize;n.loginManager.setSetting("fontSize",i);t(null)},function(t){var i=e._modelBackup.default_view;if(e.model){i=_.reduce(e._defaultViewFieldNames,function(t,i){var n=e.model.get(i);if(i==="default_dashlet"&&parseInt(n,10)===-1){return t}if(n){t.push(e.model.get(i))}return t},[]).join(e._defaultViewSplitter)}n.loginManager.setSetting(e._defaultViewFieldName,i);t(null)},function(t){var i=e.getField("logging");n.config.logger.level=i.options.def.options[i.value];n.config.debugSugarApi=i.value<=1;t(null)},function(e){u();n.lang.setLanguage(t,function(t){e(t)})},function(t){if(r){u();e.toggleOffline(!n.offlineEnabled,t)}else{t()}},function(e){if(c){if(l){s.moveTempCredentialsToStorage()}else{s.resetCredentials()}}e()}];var p;p=_.select(h,function(t,i){return f[i].call(e)});if(p.length){if(d){n.overlay.show("app:sync",{template:"preloader-panel",label:"LBL_LOADING"})}async.series(p,function(e){n.overlay.hide("app:sync");if(!e){a.mainMenu.render();n.controller.goUp()}})}else{n.controller.goUp()}},onHeaderCancelClick:function(){this.cancel()},cancel:function(){a.setFontSize(n.loginManager.getSetting("fontSize"));s.resetTempCredential();this.restoreModel()},backupModel:function(){var e=JSON.stringify(this.model.toJSON());this._modelBackup=JSON.parse(e)},restoreModel:function(){n.user.set("preferences",this._modelBackup)},toggleOffline:function(e,t){var i=this;if(e&&!a.isOnline()){this.showOfflineConnectionError(t);return false}n.logger.debug("Offline enabled: "+e);this.toggleOfflineUserSetting(e);if(e){n.events.once("offline:enabled",_.bind(this.onOfflineEnabled,this));n.events.once("offline:failure",_.bind(this.onOfflineFailure,this));n.offline.start({callback:function(){n.events.off("offline:enabled",i.onOfflineEnabled);n.events.off("offline:failure",i.onOfflineFailure);t()}})}else{a.setSetting(a.recordsPreloaderPromptKey,false);this.stopOffline(t)}},showOfflineConnectionError:function(e){e=e||function(){};var t="offline_enable_error";n.alert.show(t,{level:"error",messages:n.lang.get("ERR_OFFLINE_NO_CONNECTION_ENABLE_ERROR"),autoClose:true});e(t)},onOfflineEnabled:function(){var e=function(){_.delay(function(){n.overlay.hide("app:sync")},300)};a.startRecordsPreloader(e)},onOfflineFailure:function(e){this.toggleOfflineUserSetting(false);if(!e.err){return}if(e.err.status===0&&_.contains(["error","abort","timeout"],e.err.textStatus)){n.alert.dismiss("offline_error");this.showOfflineConnectionError()}this.stopOffline()},toggleOfflineUserSetting:function(e){n.offline.userEnabled=e;a.setSetting("offlineEnabled",e)},stopOffline:function(e){e=e||function(){};var t=[_.bind(a.dashboards.cleanDashletsCache,a.dashboards),_.bind(n.offline.disable,n.offline)];async.parallel(t,e)},_showOfflineToggleConfirm:function(e,t){var i=e?"LBL_OFFLINE_ENABLE_PROMPT":"LBL_OFFLINE_DISABLE_PROMPT";o.showConfirm(n.lang.get(i),{callback:function(e){t(e===2)}})},_enableTouchIdClicked:function(e){if(this.$touchidItem.attr("checked")){var t=this;s.performTouchIdSetup(function(e){if(!e){t.$touchidItem.prop("checked",false)}})}},setFontSize:function(){var e=this.model.get("fontSize");a.setFontSize(e)}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(262);var r=i(273);var s=i(274);e.exports=a.extendView(o,"TouchIdSetup",{_bodyScroll:true,events:{"click .sbSkipBtn":"onTouchIdSkip","click .sbEnableBtn":"onTouchIdEnableClick","click .sbOkBtn":"onTouchIdOkClick"},initialize:function(e){this._super(e);this.template=n.template.get("touchid-setup")},onAppResume:function(){this.loadData()},loadData:function(){var e=this;s.isTouchIdEnrolled(function(t){e._isTouchIdEnrolled=t;e.sbHeader=n.lang.get(t?"LBL_ENABLE_TOUCHID":"LBL_SETUP_TOUCHID");e.sbDescription=t?n.lang.get("LBL_TOUCH_ID_DISCLAIMER",null,{brandName:n.config.brandName})+n.lang.get("LBL_SETUPBUDDY_TOUCH_ID_ADDITIONAL_DISCLAIMER"):n.lang.get("LBL_TOUCH_ID_NOT_ENROLLED_MSG",null,{brandName:n.config.brandName});e.render()})},getHeaderConfig:function(){return{title:n.lang.get("LBL_SETUPBUDDY_HEADER_TITLE"),save:false,cancel:false}},onTouchIdSkip:function(e){r.setupStepCompleted()},onTouchIdOkClick:function(e){r.setupStepCompleted()},onTouchIdEnableClick:function(e){s.moveTempCredentialsToStorage();r.setupStepCompleted()}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(262);e.exports=a.extendView(o,"Offline",{_devMode:n.config.offline.debug.render,globalEvents:{"offline:status:update":"onOfflineStatusUpdated"},events:{"click #preload_records_button":"onPreloadRecordsClick","click #preload_relationships_button":"onPreloadRelationshipsClick"},offlineStatusIconPartial:"offline-status-icon",initialize:function(e){this._super(e);this.offlineDbEncrypted=n.cache.get("offline:encrypted")},render:function(e){this.offlineStatusClass=a.utils.getOfflineStatusClass();this.offlineMessage=this.getOfflineMessage();this._super(e)},onOfflineStatusUpdated:function(){var e=this.$el.find(".offline-icon");var t=this.$el.find("#offline-message");e.removeClass("status-success status-warning status-error status-default");e.addClass(a.utils.getOfflineStatusClass());t.html(this.getOfflineMessage())},onPreloadRecordsClick:function(){a.promptAndPreloadUserRecords(false)},onPreloadRelationshipsClick:function(){a.promptAndPreloadUserRecords(false,true)},getHeaderConfig:function(){return{title:n.lang.get("LNK_OFFLINE_SETTINGS"),menuButton:true,back:true}},getOfflineMessage:function(){var e=n.offline.status;var t="";var i="";var a="LBL_OFFLINE_STATUS_ONLINE";var o="LBL_OFFLINE_STATUS_NO_PENDING_TX";var r="ERR_OFFLINE_OUT_OF_SPACE";if(!e)return"...";if(e.isSyncing){i="LBL_OFFLINE_SYNC_IN_PROGRESS"}else if(e.lastSyncTs&&e.totalTransactions>0){t=n.lang.get("LBL_OFFLINE_LAST_SYNC_TS",null,{ts:e.lastSyncTs.toLocaleString()})}if(!n.offline.isOnline()){a="LBL_OFFLINE_STATUS_OFFLINE"}else if(e.noConnection){a="LBL_OFFLINE_STATUS_BAD_NETWORK"}if(e.state===n.offline.STATE.ERROR){o="LBL_OFFLINE_STATUS_SYNC_FAILED"}else if(e.state===n.offline.STATE.WARNING&&e.totalTransactions>0){o="LBL_OFFLINE_STATUS_PENDING_TX"}return n.lang.get(o)+" "+(e.isOutOfSpace?n.lang.get(r)+" ":"")+n.lang.get(a)+" "+n.lang.get(i)+" "+t}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(262);e.exports=a.extendView(o,"OfflineSettings",{events:{"touchstart .offline-property input":"onPropTouchstart"},onBeforeRender:function(){var e=n.config.offline.debug;this.configProperties={online:e.online,forceMigrate:e.forceMigrate,syncManagerEnabled:e.syncManagerEnabled,monitorStatus:e.monitorStatus,outOfSpace:e.outOfSpace}},getHeaderConfig:function(){return{title:n.lang.get("LBL_OFFLINE_SETTINGS"),menuButton:true,back:true}},onPropTouchstart:function(e){var t=$(e.target).data("key");n.config.offline.debug[t]=!n.config.offline.debug[t]}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(258);var r=i(262);e.exports=a.extendView(r,"OfflineStats",{events:{"click #compactDbButton":"onCompactDbClick","click #clearDbButton":"onClearDbClick"},initialize:function(e){this._super(e);this.getStatsAndRender()},getStatsAndRender:function(){var e=this;n.offline.storage.getStats({success:function(t){var i=[];function o(e){if(n.acl.hasAccess("access",e)){i.push({moduleName:a.getPluralModuleName(e),module:e,count:t.count[e]})}}var r=n.metadata.getModuleNames({filter:"enabled"});r=_.filter(r,function(e){return!_.contains(n.config.offline.exclude,e)});_.each(r,o);r=_.difference(_.keys(t.count),r);_.each(r,o);t.count=i;t.totalRecordsCount=_.reduce(t.count,function(e,t){if(_.isNumber(t.count))e+=t.count;return e},0);e.dbStats=t;e.render()}})},getHeaderConfig:function(){return{title:n.lang.get("LBL_OFFLINE_STATS"),menuButton:true,back:true}},onCompactDbClick:function(){var e=this;o.showConfirm(n.lang.get("LBL_OFFLINE_CLEAN_UP_PROMPT"),{callback:function(t){if(t===2){var i="db_cleanup";a.dismissAlerts();n.overlay.show(i);n.alert.show(i,{level:"info",messages:n.lang.get("LBL_OFFLINE_DB_CLEANING_IN_PROGRESS"),autoClose:false,closable:false});n.offline.compactStorage({callback:function(t){n.overlay.hide(i);n.alert.dismiss(i);if(t){n.alert.show(i,{level:"error",messages:n.lang.get("ERR_OFFLINE_DB_CLEANING_ERROR"),autoClose:true,closable:true})}else{n.alert.show(i,{level:"success",messages:n.lang.get("LBL_OFFLINE_DB_CLEANING_COMPLETED"),autoClose:true,closable:true})}n.controller.clean();e.getStatsAndRender()}})}}})},onClearDbClick:function(){var e=this;o.showConfirm(n.lang.get("LBL_OFFLINE_CLEAR_DB_PROMPT"),{callback:function(t){if(t===2){var i="db_cleanup";a.dismissAlerts();n.overlay.show(i);n.alert.show(i,{level:"info",messages:n.lang.get("LBL_OFFLINE_DB_CLEANING_IN_PROGRESS"),autoClose:false,closable:false});n.offline.clearStorage({callback:function(t){n.overlay.hide(i);n.alert.dismiss(i);if(t){n.alert.show(i,{level:"error",messages:n.lang.get("ERR_OFFLINE_DB_CLEANING_ERROR"),autoClose:true,closable:true})}else{n.alert.show(i,{level:"success",messages:n.lang.get("LBL_OFFLINE_DB_CLEANING_COMPLETED"),autoClose:true,closable:true})}n.controller.clean();e.getStatsAndRender()}})}}})}})},function(e,t,i){var n=SUGAR.App;var a=i(257);a.extendView(n.view.AlertView,"MobileAlert",{initialize:function(e){},close:function(e){var t=this._super.bind(this);e=e||{};var i=!($.os.android&&this.options.level==="load");i=!_.isUndefined(e.animate)?e.animate:i;if(i){this.$el.animate({minHeight:"0",height:"0",borderTop:"0"},500,"ease",function(){t()}.bind(this))}else{t()}},getCloseSelector:function(){return this.$el}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(299);var r=i(268);e.exports=a.extendView(o,"Dashboard",{navigationName:r.DASHBOARD,template:"dashboard",lazyInit:true,lazyLoad:true,activeIndex:null,switcherCss:"dashboard-container",hiddenViewCss:"",events:function(){return{"click .dashlets__list .dashlet__item":"_onDashletItemClick"}},globalEvents:{"app:orientation:changed":"_onOrientationChange"},_dashlets:null,_isRecordDashboard:false,_$dashboard:null,_dashletTypeMap:{"tabbed-dashlet":"tabbed-list-container-dashlet",dashablelist:"list-container-dashlet",casessummary:"cases-summary","sales-pipeline":"forecast-pipeline",twitter:"twitter-container-dashlet"},createSwitcher:function(){this.omitSwitcherForOneView=false;this.viewSwitcher={switcherType:o.switcherTypes.PAGINATION,options:{$parentEl:this.$el,containerSelector:".dashlets__slider-area",settings:{wrapperClass:"dashlets__slider",slideClass:"dashlet__b",spaceBetween:2}}};this._super()},initViews:function(e,t){var i=this.model;var a=this.model.get("metadata")||{};e=[];this._isRecordDashboard=i.get("dashboard_module")!=="Home"&&i.get("view_name")==="record";this._dashlets=[];_.each(a.dashlets,function(t,i){var a=t.view;this._dashlets.push({index:i,meta:t,title:n.nomad.dashboards.getDashletTitle(a),icon:this._getDashletIcon(a)});e.push(this._getDashletViewCfg(t))},this);this._super(e,t)},_getDashletViewCfg:function(e){var t=e.view.type;var i=n.metadata.getView(null,t);var a=this.options.parentModel||this.context.get("parentModel");var o=n.nomad.dashboards.getDashletTypeRegistry();if(i&&i.tabs){t="tabbed-dashlet"}t=o[t]||this._dashletTypeMap[t]||t;return{dashletId:e.id,name:t,meta:e,module:e.view.module,layout:this.layout,dashboardId:this.model.id,parentModel:a}},getViewParentEl:function(e){var t='.dashlet__b[data-dashlet-index="'+this.getViewIndex(e)+'"]';return this.$(".dashlets__slider").find(t)},getActiveDashletId:function(){var e=this._dashlets[this.activeIndex];return e&&e.meta.id},_checkSwiperUpdateRequired:function(){if(n.navigation.manager.hasStepChanged()){this.viewSwitcher.update()}},onAfterRender:function(){var e=this.layout.options.def.dashletId;var t=this.getActiveDashletId()===e;this._$dashboard=this._$dashboard||this.$el.parent(".layout__Dashboards");this._super();if(!e){this.home()}else{var i=!this.currentView||this.currentView.meta.id!==e;var n=this.currentView&&this.currentView._dataObsolete;this._checkSwiperUpdateRequired();if(i){var a=_.findIndex(this._dashlets,function(t){return t.meta.id===e});this.switchView({index:a,disableAnimation:t})}else if(n){this.loadViewData(this.currentView)}}},home:function(){this.setDashletsVisible(false);this.setSubtitleVisible(false);if(this.currentView){this.currentView.onBeforeHide()}this.abortActiveRequests();this._currentOrEachView(function(e){e.unbindGlobalEvents()});this.activeIndex=this.currentView=null;this.trigger("views:switch")},loadViewData:function(e,t){e.loadData()},_onDashletItemClick:function(e){var t=$(e.currentTarget).data("dashlet-index");var i=this._dashlets[t];if(i.meta.view){_.extend(i.meta.view,{invokedFromDashboard:true})}this.navigateByIndex(t)},switchView:function(e){if(this.currentView){this.currentView.onBeforeHide()}else{e.disableAnimation=true}this._super(e);var t=this._dashlets[this.activeIndex];if(t.meta.view.invokedFromDashboard){this.currentView.onInvokedFromDashboard();t.meta.view.invokedFromDashboard=false}this.setDashletsVisible(true);if(this._isRecordDashboard){this.setSubtitle(t.title);this.setSubtitleVisible(true)}},onSwitchView:function(e){if(e.index!==this.activeIndex){this.navigateByIndex(e.index)}},navigateByIndex:function(e){var t=""+this._dashlets[e].meta.id;this.navigateToDashlet(t)},navigateToDashlet:function(e){var t=this.model;var i=n.controller.getScreenContext();var a;var o;var r;if(this._isRecordDashboard){if(i.link){o=[i.parentModule,i.parentModelId,"link",i.link,i.modelId,"Dashboards",t.id,e]}else if(i.moduleLink){o=[i.linkParentModule,i.linkParentModelId,"link",i.moduleLink,i.parentModelId,"Dashboards",i.dashboardId,e]}else{a=this.options.parentModelId||this.context.get("parentModelId");o=[t.get("dashboard_module"),a,"Dashboards",t.id,e];if(i.root){o.splice(0,0,n.controller.getScreenContextRoot())}}r=o.join("/")}else{r=n.router.buildRoute(this.module,t.id,e)}n.controller.navigate(r,{initiator:this.navigationName})},_getDashletIcon:function(e){var t=n.nomad.dashboards.getDashletTypeRegistry()[e.type];var i=t&&_.getNested(t.prototype,"defaults.iconKey");if(i){return i}var a=e.template==="tabbed-dashlet";var o=a?n.config.UI.icons.dashlets["tabbed-dashlet"]:n.config.UI.icons.dashlets;var r=a?"dashlets.tabbed-dashlet":"dashlets";return o[e.type]&&r+"."+e.type||"dashlets.default"},refreshData:function(){this._currentOrEachView(function(e){e.refreshData()})},setSubtitle:function(e){this.$el.find(".dashlets__title").text(e)},setSubtitleVisible:function(e){this.$el.find(".dashlets__title").toggleClass("show",e)},setPaginatorVisible:function(e){if(!this.currentView){e=false}this._$dashboard.toggleClass("show-paginator",e)},setDashletsVisible:function(e){this._$dashboard.toggleClass("show-dashlets",e);this.setPaginatorVisible(e)},_dispose:function(){this._super();this._dashlets=this._$dashboard=null}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(263);var r=i(261);var s=i(273);var l=i(274);var c=a.extendView(r,"Login",{className:"view__login",privacyLink:n.config.about.privacy,tosLink:n.config.about.tos,useHttps:n.config.useHttps,_bodyScroll:true,events:{"click .about-link":function(){var e=n.context.getContext({module:"About",create:true,skipFetch:true}).prepare();n.controller.loadDynamic({layoutDef:{className:"no-main-menu",module:"About",name:"about",appendTo:"root",gaTrack:"about",meta:{components:[{view:"header"},{view:"about"}]},context:e}});$(document.body).removeClass("show-content-child")},"click #login_btn":function(){return this.login.apply(this,arguments)},"click #external_login_btn":function(){return this.externalLogin.apply(this,arguments)},"click .legal-link":function(e){e.preventDefault();o.openUrl(e.target.href)},"keypress input":function(e){if(e.which===13){e.srcElement.blur();this.login()}},"keyup input":"_updateBtnsState","focusout input":"_updateBtnsState","change input":"_updateBtnsState"},initialize:function(e){this._super(e);this.productVersion=n.clientInfo.app.productVersion;this.showAttribution=n.config.about.showAttribution},onAppResume:function(e){if(l.isTouchIdForLoginSetup()&&_.isEmpty(this.model.get("password"))){this.login();

}},onAfterShow:function(){_.delay(_.bind(function(){n.overlay.hideAll();if(!this.disposed){this.$el.animate({opacity:"1"},500,"ease");if(l.isTouchIdEnabledOnLogin()&&_.isEmpty(this.model.get("password"))){this.login()}l.toggleTouchIdOnLogin(true)}},this),100)},login:function(){var e=this;var t=function(){e.reEnableLogin("#login_btn","LBL_LOGIN_BUTTON_TITLE")};var i={password:e.model.get("password"),username:e.model.get("username")};async.series([function(t){if(l.isTouchIdForLoginSetup()&&_.isEmpty(e.model.get("password"))){l.performTouchId(i.username,function(n,a){if(n){e.$el.find("#password").val(a);i.password=a;e.model.set("password",a);e._updateBtnsState()}t(!n)})}else{t()}},function(n){if(!e.updateButtonAndInfo("#login_btn",i.username,false)){n(true);return}var a=e.model.fields;if(_.isEmpty(e.$("input[type=url]"))){a={username:e.model.fields.username,password:e.model.fields.password}}e.model.doValidate(a,function(e){if(!e){t()}n(!e)})},function(a){n.alert.dismiss("field_validation_error");n.logger.debug("Username: "+i.username);n.login(i,n.clientInfo,{error:function(i){if(e.disposed){return}if(i&&i.status>=400&&i.status<=403){e.model.unset("password")}t()},success:function(){if(l.isTouchIdAuthenticationSupported()&&s.isSetupBuddySupported()&&!s.isSetupBuddyItemCompleted("localsecurity")){l.setTempCredential(i.password)}_.delay(function(){t()},500)},complete:function(){a()}})}])},externalLogin:function(){if(this.updateButtonAndInfo("#external_login_btn","",true)){var e=this;n.loginManager.verifyExternalLogin(function t(){e.reEnableLogin("#external_login_btn","LBL_EXTERNAL_LOGIN_BUTTON_TITLE")})}},updateButtonAndInfo:function(e,t,i){var a=this.$(e);a.focus();if(a.is("[disabled=disabled]"))return false;n.alert.dismissAll();var o=this.model.get("url");var r=this.$el.find("#control_ssl_chkbox");var s=r.length?r.attr("checked"):n.config.useHttps;this.$el.find(".btn").attr("disabled","disabled");a.html(Handlebars.templates.spinner()+" "+n.lang.get("LBL_LOADING"));n.overlay.show("login",{spinner:false});var l={loginName:t||"",loginUrl:o||"",useHttps:s,isSSO:i};l=n.loginManager.setTempSetting(l);n.loginManager.applyLoginSettings(l);return true},reEnableLogin:function(e,t){n.overlay.hide("login");if(this.disposed)return;this.$(e).text(n.lang.get(t));this._updateBtnsState()},render:function(){var e=n.loginManager.getTempSetting();n.loginManager.applyLoginSettings(e);var t=e.loginUrl||n.config.defaultServerUrl;var i=e.ssoVisibilityOption;this.model.set({username:i?"":e.loginName,url:t===""?null:t},{silent:true});this.useHttps=e.useHttps;this._super();if(n.isNative){if(!e.showUrl){this.getField("url").hide()}}else{this.getField("url").remove();this.$el.find(".control-ssl").remove()}if(i){this.getField("username").remove();this.getField("password").remove();this.$("#login_btn").hide()}else if(i===false){this.$("#external_login_btn").hide()}this._updateBtnsState();var a=n.config.UI.icons.edit.checkboxOn;var o=n.config.UI.icons.edit.checkboxOff;var r=this;$("#control_ssl_chkbox").on("change",function(){if(this.checked){r.$("#control_ssl_chkbox + .checkbox-icon").removeClass(o).addClass(a)}else{r.$("#control_ssl_chkbox + .checkbox-icon").removeClass(a).addClass(o)}});return this},_updateBtnsState:function(){if(n.config.externalLoginEnabled)this._setSsoBtnState();this._setLoginBtnState()},_setLoginBtnState:function(){var e=["username","password"];var t=0;if(!_.isEmpty(this.$("input[type=url]"))){e.push("url")}_.each(e,function(e){if($("input[name="+e+"]").val()){++t}});if(e.length===t){this.$("#login_btn").removeAttr("disabled")}else{this.$("#login_btn").attr("disabled","disabled")}},_setSsoBtnState:function(){var e=$("input[name=url]");if(!n.isNative||e&&e.val()){this.$("#external_login_btn").removeAttr("disabled")}else{this.$("#external_login_btn").attr("disabled","disabled")}}});e.exports=c},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(262);var r=a.extendView(o,"Filters",{template:"filters",className:"view__filters",isFilterDDOpened:false,customFilters:null,sortable:true,_cacheKey:"filters",_customFiltersSynced:false,isSortingDDOpened:false,SORT_DEFAULT:"date_modified",SORT_CHANGED_EVENT:"sort:changed",FILTER_CHANGED_EVENT:"filter:changed",events:{"click .filter__item-main a":"onFilterBtnClick","click .dropdown__filter [data-filter-id]":"onFilterClick","click .dropdown__filter .filters-reload":"onFiltersReloadClick","click .filter__item-by a":"onSortingBtnClick","click .filter__item-sort a":"onSortDirectionBtnClick","click .dropdown__sortBy [data-fieldname]":"onSortableFieldClick"},modulesCustomSortConfig:{Meetings:[{field:"date_start",direction:"asc",isDefault:true}]},initialize:function s(e){this._super(e);this.$body=$(document.body);this.cacheStore=a.stores.filters;this._persistLastState=!this._isOnStatelessLayout();this._searchMode=this._isOnSearchLayout();this._initFilters();this._initSorting()},_isOnSearchLayout:function l(){return this.options.module==="Search"},_isOnStatelessLayout:function c(){return _.contains(["associate","selector"],this.layout.options.subType)},_initFilters:function d(){if(n.supportedFeatures.filters&&!this._searchMode){this.customFilters=n.data.createBeanCollection("Filters");this.listenTo(this.customFilters,"data:sync:start",this.onCustomFiltersSyncStart);this.listenTo(this.customFilters,"data:sync:error",this.onCustomFiltersSyncError);this.listenTo(this.customFilters,"sync",this.onCustomFiltersSync)}this.standardFilters=this._getStandardFilters();if(this._isFiltersAvailable()){this.filters=this._getAvailableFilters()}this._addRecentsFilter(false)},_getAvailableFilters:function u(){return _.union(this.standardFilters,this._getFiltersFromCache())},_getCompatibleFilters:function f(){var e=!this._isOnSearchLayout()?a.getPluralModuleName(this.options.module):n.lang.get("LBL_RECORDS");var t={id:"favorites",name:n.lang.get("LBL_FAVORITES_FILTER"),params:{favorites:true}};var i={id:"assigned_to_me",name:n.lang.get("LBL_ASSIGNED_TO_ME",null,{module:e}),params:{my_items:true}};var o;o=[{id:"all_records",name:n.lang.get("LBL_LISTVIEW_FILTER_ALL",null,{module:e})},t,i];return o},_getStandardFilters:function(){var e;if(n.supportedFeatures.filters&&!this._searchMode){e=this._getFiltersFromMetadata()}else{e=this._getCompatibleFilters()}return e},_getFiltersFromMetadata:function h(){var e=a.getPluralModuleName(this.options.module);var t=n.metadata.getModule(this.options.module,"filters");var i;var o;if(_.isEmpty(t)||!t.basic||!t.basic.meta){return}i=n.utils.deepCopy(t.basic.meta.filters);o=t.default?t.default.meta.default_filter:"all_records";_.each(i,function(t){if(t.id==="favorites"){t.name="LBL_FAVORITES_FILTER"}if(t.id===o){t.active=true}t.name=n.lang.get(t.name,this.options.module,{module:e});if(!_.isArray(t.filter_definition)){t.filter_definition=[t.filter_definition]}},this);return i},_getCustomFilters:function p(){var e={limit:n.config.fetchLimit.filters,params:{filter:[{created_by:n.user.get("id"),module_name:this.options.module}]}};this.customFilters.fetch(e)},_addRecentsFilter:function m(e){if(!this._isFiltersAvailable()||!n.supportedFeatures.filters||!this._isOnSearchLayout()||e){return}this.filters.push({id:"recently_viewed",name:n.lang.get("LBL_RECENTLY_VIEWED"),params:{recents:true}})},_isFiltersAvailable:function g(){return!_.isEmpty(this.standardFilters)},_initSorting:function(){var e=this.module;var t=n.metadata.getView(e,"list").panels[0].fields;var i=n.metadata.getModule(e,"fields");var a=this.modulesCustomSortConfig[e];var o;this.sortableFields=_.chain(t).filter(function(t){return n.utils.isSortable(e,t)}).map(function(t){return{label:n.lang.get(t.label,e),name:t.name}}).value();o=[this.SORT_DEFAULT];if(a){o=_.union(o,_.pluck(a,"field"))}_.each(o,function(t){if(i[t]&&!_.findWhere(this.sortableFields,{name:t})){this.sortableFields.unshift({name:t,label:n.lang.get(i[t].vname,e)})}},this);if(!this._isSortAvailable()){this.sortable=false}else{this._setDefaultSortState()}},_isSortAvailable:function v(){return!_.isEmpty(this.sortableFields)},_setDefaultSortState:function b(){var e=n.metadata.getModule(this.module);var t=this._persistLastState&&this._getLastState().sorting;var i=e.views.list.meta.orderBy;var a=_.findWhere(this.modulesCustomSortConfig[this.module],{isDefault:true});var o=n.metadata.getModule(this.module,"fields");var r={direction:"desc"};var s=[t,i,a&&_.pick(a,"field","direction"),o[this.SORT_DEFAULT]&&{field:this.SORT_DEFAULT},{field:this.sortableFields[0].name}];_.each(s,function(e){if(e&&!r.field&&_.findWhere(this.sortableFields,{name:e.field})){_.extend(r,e)}},this);this.sortState=r},onCustomFiltersSyncStart:function x(){this.$filters.preloader.addClass("show");this.$filters.fetchingErr.removeClass("show")},onCustomFiltersSyncError:function y(){this.$filters.preloader.removeClass("show");this.$filters.fetchingErr.addClass("show")},onCustomFiltersSync:function E(e,t){var i=this.getActiveFilter();var a=[];_.each(t,function(e){if(_.isEmpty(e.filter_definition)){return}a.push({id:e.id,name:e.name,filter_definition:e.filter_definition,custom:true})});this._setFiltersToCache(a);this.filters=_.union(this.standardFilters,a);_.each(this.filters,function(e){e.active=e.id===i.id});this._customFiltersSynced=true;this.render();n.analytics.trackEvent("app","custom-filter",this.customFilters.length)},onAfterRender:function L(){this._super();this.$overlay=this.$(".overlay-dropdown");if(this._isFiltersAvailable()){this.$filters={DD:this.$(".dropdown__filter"),DDItems:this.$(".dropdown__filter a"),btn:this.$(".filter__item-main a"),preloader:this.$(".filters-preloader"),fetchingErr:this.$(".filters-fetching-error")};this._setActiveFilter(this.getActiveFilter());if(this.isFilterDDOpened){this.activeUI=this.$filters}}if(this.sortable){this.$sorting={DD:this.$(".dropdown__sortBy"),DDItems:this.$(".dropdown__sortBy a"),btn:this.$(".filter__item-by a"),btnLbl:this.$(".filter__item-by .field-name"),directionBtn:this.$(".filter__item-sort .icondefault")};this._setActiveSortState();if(this.isSortingDDOpened){this.activeUI=this.$sorting}}},_setActiveSortState:function S(){this._setSortField(this.sortState.field);this._setSortDirection(this.sortState.direction)},_setSortDirection:function w(e){var t=n.config.UI.icons.sorting.asc;var i=n.config.UI.icons.sorting.desc;this.sortState.direction=e;if(e==="desc"){t=i;i=n.config.UI.icons.sorting.asc}this.$sorting.directionBtn.removeClass(i).addClass(t).attr("data-direction",e);this._setLastState()},_setSortField:function A(e){this.sortState.field=e;this.$sorting.DDItems.removeClass("active");this.$sorting.DDItems.filter("[data-fieldname="+e+"]").addClass("active");this.$sorting.btnLbl.text(_.findWhere(this.sortableFields,{name:e}).label);this._setLastState()},onFilterBtnClick:function R(e){this.toggleDD(this.$filters);e.stopPropagation();e.preventDefault()},onSortingBtnClick:function C(e){this.toggleDD(this.$sorting);e.stopPropagation();e.preventDefault()},onSortDirectionBtnClick:function T(){var e=this.$sorting.directionBtn.attr("data-direction")==="asc"?"desc":"asc";this._setSortDirection(e);this.trigger(this.SORT_CHANGED_EVENT,this.getPreparedState())},toggleDD:function I(e){var t=this.activeUI&&this.activeUI!==e;var i=this;var a;var o;if(t){this._closeActiveDD()}this.activeUI=e;a=this.activeUI===this.$filters;o=a?!this.isFilterDDOpened:!this.isSortingDDOpened;this.activeUI.DD.toggleClass("show",o);this.activeUI.btn.toggleClass("active",o);this.$overlay.toggleClass("show",o);if(o){if(a&&n.supportedFeatures.filters&&!this._customFiltersSynced&&!this._searchMode&&!this._isOnSearchLayout()){this._getCustomFilters();this.$filters.fetchingErr.removeClass("show")}this.$body.on("click.filters",function(e){if(_.isEmpty($(e.target).closest(i.activeUI.DD))){i._closeActiveDD();e.stopPropagation();e.preventDefault()}})}else{this._removeOutsideClickHandling()}if(a){this.isFilterDDOpened=!this.isFilterDDOpened}else{this.isSortingDDOpened=!this.isSortingDDOpened}},onFilterClick:function k(e){var t=$(e.currentTarget);var i=t.attr("data-filter-id");var a=this.getFilter(i);var o=this.getActiveFilter();this._closeActiveDD();if(a.id!==o.id){this._setActiveFilter(a);this.trigger(this.FILTER_CHANGED_EVENT,this.getPreparedState())}var r=a.custom?"custom":a.id;n.analytics.trackEvent("filter",r);e.preventDefault();e.stopPropagation()},onSortableFieldClick:function O(e){var t=$(e.currentTarget);var i=t.attr("data-fieldname");this._closeActiveDD();if(i!==this.sortState.field){this._setSortField(i);this.trigger(this.SORT_CHANGED_EVENT,this.getPreparedState())}n.analytics.trackEvent("sort",i);e.preventDefault();e.stopPropagation()},onFiltersReloadClick:function(e){this._getCustomFilters();e.preventDefault();e.stopPropagation()},getFilter:function D(e){return _.findWhere(this.filters,{id:e})},getActiveFilter:function N(){if(!this._isFiltersAvailable())return;var e=this._persistLastState&&this._getLastState();var t=e?e.filter:null;var i=[{id:t},{active:true},this._isOnSearchLayout()&&{id:"recently_viewed"},{id:"all_records"}];var n;_.each(i,function(e){n=n||_.findWhere(this.filters,e)},this);if(!n){n=this.filters[0]}return n},resetToPreviousFilter:function B(){var e=_.findWhere(this.filters,{previouslyActive:true});if(e){this._setActiveFilter(e)}},toggleSearchMode:function F(e,t){if(!this._isFiltersAvailable()){return}var i=e?"_getCompatibleFilters":"_getAvailableFilters";var n=this.getActiveFilter();this._searchMode=e;this.filters=this[i]();this._addRecentsFilter(e);this._persistLastState=e?false:!this._isOnStatelessLayout();this.sortable=e?false:this._isSortAvailable();this.render();if(e&&_.findWhere(this.filters,{id:n.id})){this._setActiveFilter(n)}if(!e&&!t&&this.getActiveFilter().id!==n.id){this.trigger(this.FILTER_CHANGED_EVENT,this.getPreparedState())}},getPreparedState:function U(){var e=this.getActiveFilter()||{};var t=e.params||{};var i=e.filter_definition;if(!_.isEmpty(i)){_.extend(t,{filter:i})}if(this.sortable){_.extend(t,{order_by:this.sortState.field+":"+this.sortState.direction})}return t},toggle:function M(e){this.$el.toggleClass("filters-hidden",!e)},_closeActiveDD:function P(){if(!this.activeUI){return}this.activeUI.DD.removeClass("show");this.activeUI.btn.removeClass("active");this.$overlay.removeClass("show");this._removeOutsideClickHandling();if(this.activeUI===this.$filters){this._abortPendingRequests();this.isFilterDDOpened=false}else{this.isSortingDDOpened=false}this.activeUI=null},_setActiveFilter:function G(e){this.$filters.DDItems.removeClass("active");_.each(this.filters,function(t,i){if(t.id!==e.id){t.previouslyActive=false;if(t.active){t.previouslyActive=true;t.active=false}}else{this.$filters.DDItems[i].classList.add("active");this.$filters.btn.text(t.name);this.$filters.btn.data("active-filter-id",t.id);t.active=true;this._setLastState(t.id)}},this)},_removeOutsideClickHandling:function V(){this.$body.off("click.filters")},_getStoreCacheKey:function(){return this.options.module},_getLastStateKey:function(){var e=this.layout.options.parentModule||this.options.module;var t=this.layout.options.link||"";return["filters",e,t].join(":")},_setLastState:function H(e){if(!this._persistLastState){return}var t=this._getLastState()||{};if(e){t.filter=e}if(this.sortState){t.sorting=this.sortState}a.setLastState(this._getLastStateKey(),t)},_getLastState:function z(){return a.getLastState(this._getLastStateKey())||{}},_setFiltersToCache:function q(e){e=e||[];this.cacheStore.set(this._getStoreCacheKey(),JSON.stringify(e))},_getFiltersFromCache:function W(){var e=this.cacheStore.get(this._getStoreCacheKey());e=e?JSON.parse(e):[];return e},onDetach:function Y(){this._abortPendingRequests();this._super()},_abortPendingRequests:function K(){if(this.customFilters&&this.customFilters.getFetchRequest()){this.customFilters.abortFetchRequest()}},_dispose:function j(){this.$body.off("click.filters");this._super()}});e.exports=r},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(262);var r=2;var s=30;var l=8;var c=100;var d=50;var u=n.config.searchDelay;var f="@";var h="#";var p=["name","first_name","last_name"].join();e.exports=a.extendView(o,"Taggable",{className:"view__taggable",tagListOptionTemplate:Handlebars.compile('<li><a class="taggable-listItem {{#if noAccess}}disabled{{/if}}">{{#if noAccess }}<span class="taggable-status">{{str "LBL_NO_ACCESS_LOWER"}}</span>{{/if}}<div class="label label-module-sm label-{{module}}" {{debug-attributes "attribute" "record_id" id}}>{{moduleIconLabel module}}</div>{{{htmlName}}}</a></li>'),tagShadowTemplate:Handlebars.compile('<span class="sugar_tag {{class}} label-{{module}}">{{text}}</span>'),tagTextTemplate:Handlebars.compile("@[{{module}}:{{id}}:{{name}}]"),_taggableEnabled:false,_taggableListOpen:false,_taggableModuleName:null,_taggableModuleList:null,_taggableModelId:null,_searchForTagsTimerId:null,_lastSearch:null,_prevValue:"",_tags:null,_textareaSelector:".taggable",_shadowSelector:".taggable-shadow",_dropdownSelector:".taggable-dropdown",$textarea:null,textarea:null,$shadow:null,$dropdown:null,events:{"input .taggable":"onInput","click .taggable-dropdown li":"onSearchResultClick","click .sugar_tag":function(){this.$textarea.focus()}},initialize:function m(e){this._super(e);this._tags={};this._taggableModuleList=_.filter(n.metadata.getModuleNames({filter:"visible"}),function(e){return e!=="Employees"&&e!=="Users"});if(this.model.link){this._taggableModuleName=this.model.link.bean.get("parent_type");this._taggableModelId=this.model.link.bean.get("parent_id")}else{this._taggableModuleName=this.model.module;this._taggableModelId=this.model.id}this._resetLastSearch()},_dispose:function g(){this._abortRequests(true);this._super()},getHeaderConfig:function v(){return{save:!this.options.isReadOnly,saveLabel:"LBL_COMMENT",cancel:true,btnsLong:true}},getPost:function b(){var e={};var t=this.textarea.value;var i=0;var n=t.length;var a;var o={};var r;e.value="";while(i<n){a=this._tags[i];if(a){r={id:a.model.get("id"),module:a.model.get("_module"),name:a.model.get("name")};o[r.id]=r;e.value+=this.tagTextTemplate(r);i+=a.text.length}else{e.value+=t[i];++i}}e.tags=_.values(o);return e},save:function x(){var e=this.getPost();var t=a.utils.stripLastEmptyStrings(e.value);this.model.set("tags",e.tags,{silent:true});this.model.set("value",t);this.model.trigger("save")},onHeaderSaveClick:function(){this.save()},onAfterRender:function y(){this.$shadow=this.$el.find(this._shadowSelector);this.$dropdown=this.$el.find(this._dropdownSelector);this.$textarea=this.$el.find(this._textareaSelector);this.textarea=this.$textarea[0];this.$textarea.focus().scroll(_.bind(this.onScroll,this))},onScroll:_.throttle(function E(){var e=this.$textarea.scrollTop();this.$shadow.scrollTop(e)},d),onInput:function L(){_.defer(_.bind(function e(){if(this.disposed)return;var e;var t;if(this.textarea.value!==this._prevValue){this._fixTags();this._refreshShadow();e=this._findSearchTerm();t=e.offset!==-1;if(!t&&this._taggableEnabled){this._closeDropdown();this._resetLastSearch()}this._taggableEnabled=t;this._abortRequests(!this._taggableEnabled);this._taggableEnabled&&this._searchForTags(e);this._prevValue=this.textarea.value}},this))},onSearchResultClick:function S(e){var t=$(e.target).closest("li");var i=t.closest("ul").children("li").index(t);var n=this._lastSearch.results.models[i];n.get("has_access")===false||this._insertSearchResult(n,this._lastSearch.searchTerm)},onDataFetch:function w(e,t){if(this._taggableEnabled&&_.isEqual(this._findSearchTerm(),e)){this._lastSearch.searchTerm=e;this._lastSearch.results=t;this._populateTagList(t,e)}},_isReferenceOrMention:function(e){return e===f||e===h},_refreshShadow:_.throttle(function A(){if(this.disposed)return;var e;var t=this.textarea.value;var i=0;var n=t.length;var o="";var r=a.utils.charHtmlEntity;while(i<n){e=this._tags[i];if(e){o+=e.html;i+=e.text.length}else{o+=r(t[i]);++i}}this.$shadow.html(o).trigger("scroll")},c),_findSearchTerm:function R(){var e={offset:-1,action:"",term:""};var t="";var i=0;var n=this.textarea.selectionEnd-1;var a=s;var o=this.textarea.value;if(this.textarea.selectionEnd&&this.textarea.selectionStart===this.textarea.selectionEnd){while(n>=0&&a){if(this._isReferenceOrMention(o[n])){if(i>=r){e.offset=n;e.action=o[n];e.term=t}break}else if(o[n]==="\n"){break}else if(o[n]!==" "){++i;--a}t=o[n]+t;--n}}return e},_abortRequests:function C(e){var t=false;if(this._searchForTagsTimerId){window.clearTimeout(this._searchForTagsTimerId);this._searchForTagsTimerId=null}if(this._lastSearch.referenceCollection.getFetchRequest()){this._lastSearch.referenceCollection.abortFetchRequest();t=true}if(this._lastSearch.mentionCollection.getFetchRequest()){this._lastSearch.mentionCollection.abortFetchRequest();t=true}e&&t&&n.alert.dismiss("data_syncing")},_resetLastSearch:function T(){var e={offset:-1,action:"",term:""};if(this._lastSearch){this._lastSearch.searchTerm=e;this._lastSearch.results=[]}else{this._lastSearch={searchTerm:e,results:[],referenceCollection:n.data.createMixedBeanCollection(),mentionCollection:n.data.createBeanCollection("Users")}}},_matchLastSearch:function I(e){var t=this._lastSearch.searchTerm;var i=false;if(t.action===e.action){if(t.action===e.action&&t.offset===e.offset&&(t.term.trim()===e.term.trim()||!e.term.trim().indexOf(t.term.trim())&&!this._lastSearch.results.length)){i=true}}return i},_getUserFilter:function k(e){var t=e.term.trim();var i=null;var n;var a;var o;n=t.match(/([^\s]+)(\s?)(.*)/);if(n){a=n[1].trim();o=n[3].trim();i=[{$and:[{status:{$not_equals:"Inactive"}},{$or:[{first_name:{$starts:t}},{last_name:{$starts:t}}]}]}];if(o){i[0].$and[1].$or.push({$and:[{first_name:{$starts:a}},{last_name:{$starts:o}}]});i[0].$and[1].$or.push({$and:[{first_name:{$starts:o}},{last_name:{$starts:a}}]})}}return i},_searchForTags:function O(e){this._searchForTagsTimerId=window.setTimeout(_.bind(function t(e){this._searchForTagsTimerId=null;if(this.disposed||this._matchLastSearch(e)||!a.isOnline()){return}var t=_.bind(this.onDataFetch,this,e);if(e.action===f){var i=this._getUserFilter(e);if(i){this._lastSearch.mentionCollection.offlineReadDisabled=n.offlineEnabled;this.listenTo(this._lastSearch.mentionCollection,"sync",t);this._lastSearch.mentionCollection.fetch({limit:l,filter:i,params:{has_access_module:this._taggableModuleName,has_access_record:this._taggableModelId}})}}else if(e.action===h){this._lastSearch.referenceCollection.offlineReadDisabled=n.offlineEnabled;this.listenTo(this._lastSearch.referenceCollection,"sync",t);this._lastSearch.referenceCollection.fetch({limit:l,fields:["name"],module_list:this._taggableModuleList,params:{search_fields:p,q:e.term}})}},this,e),u)},_populateTagList:function(e,t){if(!e.length){this._closeDropdown();return}this.$dropdown.empty();e.each(function(e){var i=a.utils.escapeRegExp(a.utils.stringHtmlEntity(t.term));var n=Handlebars.Utils.escapeExpression(e.get("name")).replace(new RegExp("("+i+")","ig"),function(e,t){return"<strong>"+t+"</strong>"});var o={module:e.get("_module"),id:e.get("id"),name:e.get("name"),htmlName:n,noAccess:e.get("has_access")===false};var r=$(this.tagListOptionTemplate(o));this.$dropdown.append(r)},this);if(!this._taggableListOpen){this._taggableListOpen=true;this.$el.addClass("show-dropdown");document.activeElement.blur();this.textarea.focus();this.$dropdown.show()}},_closeDropdown:function D(){if(this._taggableListOpen){this.$el.removeClass("show-dropdown");this.$dropdown.empty().hide();this._taggableListOpen=false}},_insertSearchResult:function N(e,t){var i=this.textarea.value||"";var n=i.slice(t.offset,t.offset+t.term.length+1);var a;var o=e.get("name");var r=this.textarea.selectionStart;var s=this.textarea.selectionEnd;var l;var c;var d;var u;if(n===t.action+t.term){a=i.slice(0,t.offset)+o+i.slice(t.offset+n.length);this.textarea.value=a;this._fixTags();this._prevValue=a;this.textarea.focus();if(this.textarea.setSelectionRange){l=Math.min(r,s);c=Math.max(r,s);if(l>t.offset&&l<t.offset+n.length||c>t.offset&&c<t.offset+n.length||l<=t.offset&&c>=t.offset+n.length){d=t.offset+o.length;u=d}else if(c>=t.offset+n.length){d=r-n.length+o.length;u=s-n.length+o.length}else{d=r;u=s}this.textarea.setSelectionRange(d,u)}this._addTag({model:e,offset:t.offset,text:o});this._refreshShadow()}this._closeDropdown()},_addTag:function B(e){var t={text:e.text,module:e.model.get("_module")};t.class=t.module==="Users"?"mention":"reference";this._tags[e.offset]=e;this._tags[e.offset].html=this.tagShadowTemplate(t)},_fixTags:function F(){var e=this.textarea.value;var t=e.length-this._prevValue.length;var i;var n={};if(t===-1){i=_.find(this._tags,function(t){return t.text.length>1&&e.slice(t.offset,t.offset+t.text.length)!==t.text&&e.slice(t.offset,t.offset+t.text.length-1)===t.text.slice(0,-1)});if(i){e=e.slice(0,i.offset)+e.slice(i.offset+i.text.length-1);this.textarea.value=e;this.textarea.setSelectionRange(i.offset,i.offset);t=-i.text.length}}_.each(this._tags,function(i){if(e.slice(i.offset,i.offset+i.text.length)===i.text){}else if(e.slice(i.offset+t,i.offset+i.text.length+t)===i.text){i.offset+=t}else{return}n[i.offset]=i});this._tags=n}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(262);e.exports=a.extendView(o,"SearchBox",{className:"view__search-box",touchOutsideEventName:"touchstart.outside",_toggleSearchEventName:"search:toggle",ITEM_TYPE_DELAY:n.config.searchDelay,events:{"textInput .search-query":"onKeyUp","keyup .search-query":"onKeyUp","cut   .search-query":"onChange","paste .search-query":"onChange","change .search-query":"onChange","focusin .search-query":"onFocusIn","click .searchCancelBtn":"onCancelSearch"},initialize:function(e){this._super(e);this.timerId=null;this._searchText="";this.$searchBox=null;if($.os.ios){this.$el.find(".search-query").on("textInput",this.onKeyUp,this)}},showSearch:function(){this.$(".view__search").addClass("show-search").animate({opacity:1},200);this.hideProgress();this.$searchBox.focus();this.trigger(this._toggleSearchEventName,true)},onCancelSearch:function(){this.$searchBox.val("").trigger("change");this.hideSearch()},hideSearch:function(){this.$(".view__search").animate({opacity:0},200,function(){$(this).removeClass("show-search")});this.trigger(this._toggleSearchEventName,false)},onAfterRender:function(){this._super();this.$searchBox=this.$(".search-query");if(!this.$searchBtn){this.$searchBtn=this.$el.closest(".layout__list").find(".searchBtn");this.$searchBtn.on("click.search",_.bind(this.showSearch,this))}},onAfterShow:function(){this.hideProgress();if($.os.android){var e=this;_.delay(function(){e.offsetHeight=parseInt(document.body.offsetHeight,10)},600)}},onKeyUp:function(e){this._clearTimer();var t=this;var i=t.$searchBox.val();this.timerId=window.setTimeout(function(){t.search(i);if(i===""){t.focusSearchBox()}},this.ITEM_TYPE_DELAY)},onChange:function(e){var t=this;window.setTimeout(function(){t.onKeyUp(e)},200)},onFocusIn:function(){this._bindTouchOutside();if($.os.android){var e=this;_.delay(function(){var t=window.setInterval(function(){e.trigger(e.ACTION_NAME,{name:"app:keyboard:hide"});window.clearInterval(t)},200)},600)}},resetSearch:function(){this._clearTimer()},loadData:function(){},focusSearchBox:function(){this.$searchBox.get(0).focus()},search:function(e){if(this._searchText===e){return}this._searchText=e;this.trigger("search:text");this.showProgress()},getPreparedState:function r(){var e={};if(this._searchText){e.q=this._searchText}return e},showProgress:function(){this.$el.addClass("in-progress")},hideProgress:function(){this.$el.removeClass("in-progress")},getFieldNames:function(){return[]},_clearTimer:function(){if(this.timerId){window.clearTimeout(this.timerId)}},_dispose:function(){this._clearTimer();if(this.$searchBtn){this.$searchBtn.off("click.search")}this._super()},setPlaceholder:function s(e){var t=n.lang.get("LBL_MOBILE_SEARCH_PLACEHOLDER",null,{searchCriteria:e});this.$searchBox.attr("placeholder",t)},_bindTouchOutside:function(){var e=this;var t=this.$searchBox.get(0);$(document).bind(this.touchOutsideEventName,function(i){if(i.target!==t){document.activeElement.blur();e._unbindTouchOutside()}})},_unbindTouchOutside:function(){$(document).unbind(this.touchOutsideEventName)},onDetach:function l(){if(this.$searchBtn){this.$searchBtn.off("click.search");this.$searchBtn=null}}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(263);var r=i(262);e.exports=a.extendView(r,"Error",{className:"list-layout",events:{"click #sugar_url":function(e){e.preventDefault();o.openUrl(e.target.href)}},errors:{403:"ERR_MOBILE_NOT_AUTHORIZED"},defaultErrorLabel:"ERR_GENERIC_TITLE",onBeforeRender:function(){if(this.context.get("backToSugar")){this.showSugarBackLink=true;this.sugarLink=a.getDesktopUrl()+"#"+this.context.get("sugarRoute")}this.errorCode=this.context.get("code");this.errorLabel=this.errors[this.errorCode]||this.defaultErrorLabel},getHeaderConfig:function(){return{title:n.lang.get("ERR_GENERIC_TITLE"),menuButton:true}}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(262);e.exports=a.extendView(o,"RelatedRecords",{className:"scroll",initialize:function(e){var t;this._super(e);this._requestsInProgress={};t=a.getContextMeta("detail",this.module);this.relatedList=_.chain(t.subpanels).filter(function(e){return n.acl.hasAccess("list",e.module)}).map(function(e){return _.extend({canCreate:a.canCreateRelated(e.module,this.module,e.context.link)},e)},this).value()},loadData:function(){if(n.supportedFeatures.bulkApi&&a.isOnline()){this.getRelationshipData(function(e,t){if(!e){this._prepareListData(t);this.render()}})}},getRelationshipData:function(e,t){var i=this;var o;var r;var s;t=t||this;o=_.map(this.relatedList,function(e){return a.buildBulkRequest({module:this.module,attributes:{id:this.model.id,link:e.context.link},params:{max_num:n.config.fetchLimit.bulkQueryRelatedRecords,fields:"id"}})},this);if(_.isEmpty(o)){return}r={success:function(i){e.call(t,null,i)},error:function(a){n.logger.debug("Get related records error "+i.module+" : "+a);e.call(t,a)},complete:function(){if(s){i._requestsInProgress[s.uid]=null}}};s=n.api.bulk({requests:o},r);if(s){this._requestsInProgress[s.uid]=s.uid}},_prepareListData:function(e){this.relatedList=_.map(this.relatedList,function(t,i){var a=e[i];t.recordsCount=undefined;if(a.status===200){var o=a.contents;if(_.isArray(o.records)){var r=o.records.length;var s=n.config.fetchLimit.bulkQueryRelatedRecords;t.recordsCount=r;if(o.next_offset!==-1){t.recordsCount=s+"+"}t.isEmpty=!r}}else{t.recordsCount="!";if(n.error.isAccessError(a)){this.trigger(this.ACTION_NAME,{name:"app:access:error",options:{module:t.module}})}}t.showCount=!_.isUndefined(t.recordsCount);return t},this)},_dispose:function(){_.each(this._requestsInProgress,function(e,t){n.api.abortRequest(t)});this._super()}})},function(e,t){(function(e){var t={"list~Step1":{updatedVersion:2.7,content:[{selector:".logo",text:"LBL_MOBILE_TUTORIAL_HOME_MENU"},{selector:".createBtn",text:"LBL_MOBILE_TUTORIAL_HOME_PLUS"}]},list:{updatedVersion:2.7,content:[{show:"native",selector:".list-item.has-menu:nth-child(1)",text:"LBL_MOBILE_TUTORIAL_HOME_SWIPE",fromRight:true,vertAdj:5,horizAdj:-50,customMarker:"tutorial-swipe"}]},"detail~TxLog~Dashboards":{updatedVersion:2.7,content:[{selector:".bizcard .goedit-icon",text:"LBL_MOBILE_TUTORIAL_DETAIL_EDIT_ACTION",vertAdj:2,horizAdj:-2}]}};e.tutorial=e.tutorial||{};e.tutorial.config=t})(SUGAR.App)},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=20;var r=2;var s=_.extend({instance:null,show:function(e,t){if(n.config.skipTutorial){return}else if(n.tutorial.data){this.doTutorial(e,t)}else{n.tutorial.data=this.prepareData(n.tutorial.config);this.doTutorial(e,t)}},prepareData:function(e){var t={};_.each(e,function(e,i){var a=_.filter(e.content,function(e){var t;if(e.show){t=e.show==="native"&&n.isNative||e.show==="web"&&!n.isNative}else{t=true}return t});if(a.length){t[i]=e;t[i].content=a}});return t},doTutorial:function(e,t){var i=this.getStepName(e,t);var a=n.tutorial.data[i];var o=this.getPrefs();if(a&&!n.tutorial.instance){
this.createInstance(a,i,o)}},getStepName:function(e,t){var i=this.getPrefs();var a=new RegExp("^"+e+"([~:].*)?$","i");var o=_.chain(n.tutorial.data).keys().select(function(e){return a.test(e)}).value().sort(function(e,t){return e.indexOf(":")>-1?1:e.indexOf("~")>-1&&t.indexOf(":")<0?1:-1});var r=this;var s;_.each(o,function(i){if(i.indexOf(":")>-1&&_.contains(i.split(":"),t)&&r.isNewStep(i)){s=i}else if(i.indexOf("~")>-1&&!_.contains(i.split("~"),t)&&r.isNewStep(i)){s=i}else if(i===e&&r.isNewStep(i)){s=i}});return s},isNewStep:function(e){var t=n.tutorial.getPrefs();var i=n.tutorial.data[e];var a=i?i.updatedVersion||0:0;var o=t.viewed[e]||0;return!t.viewed[e]||n.utils.versionCompare(o,a,"<")},createInstance:function(e,t,i){var n=this;var a=_.any(e.content,function(e){return n.getItem(e.selector).length});if(!a){return}this.instance=new l(_.extend(e,{tutorialName:t}));this.instance.show()},getPrefs:function(){var e=n.loginManager.getSetting("tutorialPrefs")||{};e.viewed=e.viewed||{};return e},resetPrefs:function(e){e=e||{};e.viewed={};n.loginManager.setSetting("tutorialPrefs",e)},hasStepToShow:function(e,t){if(n.config.skipTutorial){return}else if(!n.tutorial.data){return true}else{return!!this.getStepName(e,t)}},getItem:function(e){var t=n.controller.layoutManager.getRootLayout();var i=n.controller.layoutManager.getRecordLayout();var o;if(i){o=i.$el.find(e)}else{o=t.$el.find(e)}if(!a.utils.isElVisible(o)){o=[]}return o}});var l=Backbone.View.extend({events:{click:"onClose",swipe:"onClose"},name:"tutorial",initialize:function(e){this.content=e.content;this.tutorialName=e.tutorialName;this.tplContext={brandName:n.config.brandName};n.events.on("app:orientation:changed",this._onOrientationChange,this)},_onOrientationChange:function(){var e=this;this.removeHighlight();_.each(this.content,function(t){e.highlightItem(t)})},onClose:function(e){var t=this;if(e&&!_.isString(e)){e.preventDefault();e.stopPropagation()}this.setStepViewed();$(this.$el).animate({opacity:0},300,"ease",function(){t.remove()})},show:function(){var e=this;this.render();_.each(e.content,function(t){e.highlightItem(t)});$(this.$el).css({opacity:"1"});n.activeComponents.add(this.name,this.onClose,this)},setStepViewed:function(){var e=n.tutorial.getPrefs();e.viewed[this.tutorialName]=n.config.sdkVersion;n.loginManager.setSetting("tutorialPrefs",e)},highlightItem:function(e){var t=n.tutorial.getItem(e.selector);var i=this;if(_.isEmpty(t)){return}var o=document.createElementNS("http://www.w3.org/2000/svg","use");o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.customMarker?"#"+e.customMarker:"#marker");this.$marker=$(o);this.$svg.append(o);var r=e.horizAdj||0;var s=t.offset().left;var l=t.offset().top+(e.vertAdj||0);var c=t.offset().width;var d=this.$marker.width();var u;if(a.utils.isDirectionLTR()){u=s+r+(e.fromRight?c-d:0);s=u}else{u=-(s-r+(e.fromRight?d:c));s=-u-d;o.setAttributeNS(null,"transform","scale(-1, 1)")}o.setAttributeNS(null,"x",u);o.setAttributeNS(null,"y",l);this.appendItemGlow(e,s,l);this.showHighlightText(e,s,l)},appendItemMarker:function(e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg","use");n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.customMarker?"#"+e.customMarker:"#marker");this.$marker=$(n);this.$svg.append(n)},appendItemGlow:function(e,t,i){var n=a.utils.isDirectionLTR()?r:-r;if(e.customMarker){return}this.glow=document.createElementNS("http://www.w3.org/2000/svg","circle");this.glow.setAttributeNS(null,"cx",t+o+n);this.glow.setAttributeNS(null,"cy",i+o+r);this.glow.setAttributeNS(null,"r",o);this.glow.setAttributeNS(null,"fill","black");this.glow.setAttributeNS(null,"class","marker-glow");this.$glowWrap.append(this.glow)},showHighlightText:function(e,t,i){var a=n.lang.get(e.text,null,this.tplContext);var r=$('<div class="text">'+a+"</div>").appendTo(this.$textWrap);var s=this.$marker;var l=t;var c=i;var d=s.width();var u=s.height();var f=r.width();var h=r.height();var p=$(window).width();var _=$(window).height();if(l-f>0){r.css("left",t-f+d);r.css("text-align","right")}else if(l+d+f<p){r.css("left",l);r.css("text-align","left")}else{r.css("left","50%");r.css("marginLeft",-f/2);r.css("text-align","center")}if(c+u+h<_){r.css("top",c+u)}else{r.css("top",c-h-o*1.5)}},render:function(){var e=n.template.get("tutorial");$("body").append(e());this.$el=$("#tutorial__view");this.$svg=this.$el.find("#tutorial");this.$glowWrap=this.$el.find("#marker-glow");this.$textWrap=this.$el.find("#tutorial-content");this.delegateEvents();this.$el.show();return this},remove:function(){delete this.$marker;delete this.$svg;delete this.$textWrap;Backbone.View.prototype.remove.call(this);n.activeComponents.remove(this.name);n.events.off("app:orientation:changed",this._onOrientationChange,this);n.tutorial.instance=null},removeHighlight:function(){this.$textWrap.empty();this.$glowWrap.find(".marker-glow").remove();this.$svg.find("use").remove()}});n.tutorial=n.tutorial||{};n.tutorial=_.extend(n.tutorial,s);e.exports=n.tutorial},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(308);e.exports=a.extendView(o,"MobileSearchList",{template:"list",initialize:function(e){this.itemsConfig={isModuleVisible:true};this._super(e);this.modContextData=n.nomad.getContextMeta("list");this.listViewId="listing-home"},loadData:function r(){}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(258);var r=i(308);e.exports=a.extendView(r,"ListSelector",{globalEvents:{"offline:data:updated":function(e){this._offlineRefetch(e,{relate:false})}},listItemDataProvider:"list-item-associate",multiselect:true,clearOnSubmit:true,allowEmptySelection:false,contextMenuDisabled:true,_selections:null,_headerData:null,initialize:function(e){var t=e.meta||{};if(t.multiselect!==undefined){this.multiselect=t.multiselect}if(t.listItemTpl){this.listItemTpl=t.listItemTpl}if(t.listItemDataProvider){this.listItemDataProvider=t.listItemDataProvider}this._super(e);this.template=n.template.get(t.template||"list");this.meta=n.metadata.getView(this.module,"list");this.fallbackFieldTemplate="list";this._setHeaderData(e.headerData||t.headerData);this.setSelectedIds(e.selections)},onAfterRender:function(){this._super();this._syncSelectionUI()},setSelectedIds:function(e,t){this._selections=(t?_.union(this.getSelectedIds(),e):e)||[];this._syncSelectionUI()},getSelectedIds:function(){return this._selections},getSelectedModels:function(){var e=this.getSelectedIds();var t=[];_.each(e,function(e){var i=this.collection.get(e);if(i){t.push(i)}},this);return t},toggleItemSelected:function(e,t){var i=this.getSelectedIds();var n=_.indexOf(i,e);var a=n!==-1;if(t===undefined){t=!a}if(t&&!a){if(!this.multiselect&&i[0]!==e){i.pop()}i.push(e)}else if(!t&&a){i.splice(n,1)}this._syncSelectionUI()},getHeaderConfig:function(){return this._headerData},onClickItem:function(e){if(e.defaultPrevented||e.cancelBubble){return}var t=$(e.currentTarget).closest("article");var i=t.attr("data-id");this.toggleItemSelected(i);if(!this.multiselect){this.submitSelection()}else{this.trigger("selection:change")}},validateSelection:function(){var e=true;if(_.isEmpty(this.getSelectedIds())&&!this.allowEmptySelection){o.showAlert(n.lang.get("ERR_NO_RECORDS_SELECTED"));e=false}return e},submitSelection:function(){if(!this.validateSelection()){return}var e=this.getSelectedModels();if(this.clearOnSubmit){this.clearSelection()}this.trigger("selection:submit",this.multiselect?e:e[0])},clearSelection:function(){this._selections=[];this._syncSelectionUI()},_setHeaderData:function(e){var t={save:true,cancel:true,plus:false,saveLabel:"LBL_DONE_BUTTON_LABEL"};this._headerData=_.extend(t,this._headerData,e)},onHeaderSaveClick:function(){this.submitSelection()},_syncSelectionUI:function(){if(!this.multiselect){return}var e=[];var t=n.config.UI.icons.edit.checkboxOn;var i=n.config.UI.icons.edit.checkboxOff;var a=".checkbox-icon."+t.split(" ").join(".");this.$(".item-checkbox_checked").removeClass("item-checkbox_checked");this.$(a).removeClass(t).addClass(i);_.each(this.getSelectedModels(),function(n){var a=this.getListItemEl(n);a.addClass("item-checkbox_checked");a.find(".checkbox-icon").removeClass(i).addClass(t);e.push(n.id||n.cid)},this);this._selections=e},onDetach:function s(){this._super();this.clearSelection()}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(349);e.exports=a.extendView(o,"ListAssociate",{initialize:function(e){this._headerData={save:true};this._super(e);if(!this._headerData.title){this._headerData.title=n.lang.get("LBL_ASSOC",this.module,this.moduleSingular)}this.parentModule=this.context.get("parentModule");this.parentModelId=this.context.get("parentModelId");this.link=this.context.get("link");this.parentModel=this.context.get("parentModel")||n.data.createBean(this.parentModule,{id:this.parentModelId});this.multiselect=n.data.canHaveMany(this.parentModule,this.link);this.initRelationshipFields(this.parentModule,this.link);n.logger.debug("Record(s) are to be associated with "+this.parentModel+" via link "+this.link);n.logger.debug("Multiselect: "+this.multiselect)},onBeforeRender:function(){var e=this.collection.get(this.parentModelId);if(e){this.collection.remove(e,{silent:true})}this._super()},refresh:function(e){e=e||{};e.relate=false;this._super(e)},loadData:function(){this.collection.fetch({relate:false})},submitSelection:function(){if(!this.validateSelection()){return}var e=this;var t;n.syncAlertManager.pause("update",this.model);var i=async.queue(function(a,o){a.relateBean.save(null,{relate:true,fields:["id"],success:function(){o()},error:function(e){t=e;o(e)}});i.drain=function(){n.syncAlertManager.resume("update",e.model,t);if(t){return}e._super();e.trigger(e.ACTION_NAME,{name:"associate:view:save",options:{model:{module:e.module},parentModel:{id:e.parentModel.get("id"),module:e.parentModule},isCreate:true}})}},1);_.each(this.getSelectedIds(),function(t){i.push({relateBean:n.data.createRelatedBean(e.parentModel,t,e.link)})})}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(349);e.exports=a.extendView(o,"ListPicker",{listItemDataProvider:"list-item-picker",listItemTpl:"list-item-picker",multiselect:false,isPtrEnabled:false,initialize:function(e){this._headerData={title:n.lang.get("LBL_CHOOSE_LINK"),save:false};this._super(e);this.template=n.template.get("list-picker");this.options.templateOptions={}},setData:function(e){this.collection.reset(e.items)}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(262);var r=i(353);e.exports=a.extendView(o,"MobileCommentsList",{template:"comments-list",events:{"click .comments-more-btn":"_showMoreComments"},globalEvents:{"offline:data:updated":function(e){if(this.isCurrentCommentsUpdated(e)){this.collection.fetch({add:true,params:{skipServerSync:true,serverNextOffset:e.serverNextOffset}})}}},_moreCommentsCount:0,initialize:function(e){this._super(e);var t=this.options.parentModel;var i=[];if(t.get("last_comment").id){i.push(t.get("last_comment"))}this.collection=n.data.createRelatedCollection(t,"comments",i);this.listenTo(this.collection,"sync",this.onDataSyncSuccess);this.listenTo(this.collection,"data:sync:error",this.onDataSyncError);this._updateMoreCommentsCount(this.collection.length)},_updateMoreCommentsCount:function(e){this._moreCommentsCount=this.options.parentModel.get("comment_count")-e;if(this._moreCommentsCount<0){this._moreCommentsCount=0}},_showMoreComments:function(e){e.preventDefault();this.collection.paginate({relate:true,add:true})},onDataSyncSuccess:function(){this._updateMoreCommentsCount(this.collection.length);this.render()},onCreateCommentItem:function(e){var t=n.data.createRelatedBean(e,n.data.createBean("Comments"),"comments",{parent_id:e.get("id")});var i=this;r.createPost(t,{appendTo:"root",savePost:function(e){t.save(null,{relate:true,fields:["parent_id","data"],params:{skipOfflineRead:true},success:function(t){i.collection.unshift(t);i.render();e(null)},error:e})}})},isCurrentCommentsUpdated:function(e){return e.relationsData&&e.relationsData.relatedModule==="Comments"&&this.options.parentModel.id===e.relationsData.id},onDataSyncError:function(e){}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(354);var r=i(268);e.exports=a.extendView(o,"ActivitystreamDashlet",{navigationName:r.ACTIVITIES_LIST,events:function(){return{"click .panel__addpost":"onAddPost"}},getListDef:function(e,t){if(t.parentModel){t.listParams=_.extend({link:"activities"},t.listParams)}return this._super(e,t)},_getBasicMenuActions:function s(){var e=this;return[{name:"comment",types:["context-menu"],label:"LBL_COMMENT",iconKey:"actions.comment",autoClose:true,handler:function(t,i){var n=_.find(e._commentsViews,function(e){return e.options.parentModel.id===i.id});n.onCreateCommentItem(i)}}]},_getFilterDefFromMeta:function(e){var t;if(e){var i=n.metadata.getModule("Activities");if(_.isObject(i)){_.isObject(i.filters)&&_.each(i.filters,function(i){_.isObject(i.meta)&&_.each(i.meta.filters,function(i){if(i.id===e){t=i}})})}}return t},overrideListView:function(e){this._super(e);e.disableItemClick=true;e.template=n.template.get("activity-list");e.basicMenuActions=this._getBasicMenuActions();e.getListItemTpl=function(e){var t=e.get("activity_type");return t==="post"?"activity-"+t:"activity-item"};e.listenTo(e.collection,"add",_.bind(this.onItemAdded,this));e.listenTo(e.collection,"data:sync:complete",_.bind(this.initComments,this));var t=this._getFilterDefFromMeta(this.meta.view.currentFilterId);if(t){e.collection.filterDef=t.filter_definition}this.listView=e},onItemAdded:function(e,t){var i;t.each(function(t,n){if(t.id===e.id){i=n;return}});this.createCommentsView(e,i)},initComments:function(){this.resetCommentsViews();this.listView.collection.each(_.bind(this.createCommentsView,this));_.each(this._commentsViews,function(e){this.listenTo(e,"view:after:render",this.listReflowScroll,this)},this);this.listView.scrollReflow()},listReflowScroll:function(){this.listView.scrollReflow()},createCommentsView:function(e,t){this.$(".activitystream-item").eq(t).append('<div class="clip comments-container"></div>');var i=this.$(".comments-container").eq(t);var a=n.view.createView({name:"list",module:"Comments",parentModel:e,el:i,layout:this.layout});a.render();a.bindGlobalEvents();this._commentsViews.push(a)},resetCommentsViews:function(){_.each(this._commentsViews,function(e){this.stopListening(e,"view:after:render",this.listReflowScroll);e.dispose()},this);this._commentsViews=[]},onAddPost:function(){var e=n.data.createBean("Activities");var t=this.listView.context.get("parentModule");var i=["activity_type","data"];var a=this;var o;if(t){o=this.listView.options.listParams.parentModel;e.set({parent_id:o.id,parent_type:t});i.push("parent_id","parent_type")}this.constructor.createPost(e,{appendTo:"root",savePost:function(t){e.save(null,{fields:i,params:{skipOfflineRead:true},success:function(e){a.listView.collection.unshift(e);a.listView.render();t(null,e)},error:t})}})},_dispose:function(){this.resetCommentsViews();this._super()}},{createPost:function(e,t){t=t||{};var i=n.context.getContext({create:true,model:e});i.prepare();var a=n.controller.loadDynamic({layoutDef:{fullScreen:true,appendTo:t.appendTo,meta:{components:[{view:{name:"taggable",context:i}}]},context:i}});var o=function r(){e.off("save");n.controller.goBack()};e.on("save",function s(){var i=e.get("value");if(!i){o();return}var a=(new Date).getTime().toString();n.overlay.show(a);e.set("data",{value:i,tags:e.get("tags")},{silent:true});t.savePost(function r(e){n.overlay.hide(a);!e&&o()})})}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(298);var r=i(268);e.exports=a.extendView(o,"ListContainerDashlet",{navigationName:r.DASHLET_LIST,contextMenuOnSwipeDisabled:true,isManager:true,lazyInit:false,lazyLoad:false,initViews:function(e,t){e=e||[this.getListDef(t.meta.view,t)];this._super(e,t)},createView:function(e){var t=this._super(e);t.setOfflineEnabled(false);this.overrideListView(t);this.listenTo(t,this.ACTION_NAME,this.propagateAction);return t},getListDef:function(e,t){var i=["planned-activities","active-tasks","inactive-tasks","history"];var n=_.contains(i,this.meta.view.type)?"user-activity-list-item":null;this._updateLinkOption(e,t);var a=_.extend({parentModel:t.parentModel},e,t.listParams);return{name:"configurable-list",module:e.module,layout:t.layout,listParams:a,contextMenuOnSwipeDisabled:this.contextMenuOnSwipeDisabled,listItemTpl:n,loadDataFn:this._getLoadListFn(e)}},overrideListView:function(e){_.extend(e,{name:"list",action:"list",_buildRecordRoute:this._getBuildRouteFn(e),navigationName:this.navigationName})},_updateLinkOption:function(e,t){var i=_.isString(e.linked_fields)&&e.linked_fields;if(e.link||!i){return}var n=Boolean(_.isString(e.intelligent)?+e.intelligent:e.intelligent);if(n){e.link=i}},_getBuildRouteFn:function(e){function t(t){var i=this.options;var a=t.model;var o=i.parentModel;var r=n.controller.getScreenContext();var s=n.controller.layoutManager.getRootLayout()===this.layout;var l;if(r.parentDashboardId&&s){l=[n.controller.getScreenContextRoot(),a.module,a.id].join("/")}else if(i.parentModel){l=[o.module,o.id,"Dashboards",i.dashboardId,i.dashletId,a.module,a.id];if(t.hash.action){l.push(t.hash.action)}l=l.join("/")}else{l=n.view.views.ListView.prototype._buildRecordRoute.apply(e,arguments)}return l}return _.bind(t,this)},_getLoadListFn:function(e){var t=n.metadata.getModule(e.module);var i=this;return function(e){e=e||{};this.loadData(_.extend(e,{myItems:i.viewState.myItemsOnly,fields:t?t.mergedFields:null}))}},updateFiltersViewState:function(e){this._super(e);var t=this.dashletParams.filter||[];if(this.meta.view.date){t.push({name:"date",type:"radioenum",options:{today:n.utils.capitalize(n.lang.get("LBL_TODAY")),future:n.utils.capitalize(n.lang.get("LBL_FUTURE"))},gaTrack:{today:"click:today",future:"click:future"}})}_.each(t,function(t){var i=this.meta.view[t.name];if(e.filters&&e.filters[t.name]){i=e.filters[t.name]}if(_.isEmpty(t.options)){t.options=n.lang.getAppListStrings(t.options)}_.extend(t,{view:"edit"});this.viewState.filters.set(t.name,i);this.viewState.filtersDef[t.name]=t},this)},refreshData:function(){var e=this.viewState;var t=this.getFilters();var i=_.map(this.getViews(),function(i,n){return function(){var a={myItems:e.visibility==="user",params:{forceServerSync:true}};t&&t[n]&&(a.filter=t[n]);i.refresh(a)}});this.saveState();async.parallel(i,function(e){})},getFilters:function(){}},{getOverridableMethods:function s(){return _.union(o.getOverridableMethods(),["overrideListView","getFilters"])}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(308);var r=a.extendView(o,"MobileReadonlyList",{events:{},fallbackFieldTemplate:"list",contextMenuDisabled:true,initialize:function(e){e.meta=n.metadata.getView(e.module,"list");this._super(e);this.modContextData=a.getContextMeta("list")},getHeaderConfig:function(){var e=this._super();e.plus=e.save=false;return e}});e.exports=n.view.views.MobileReadonlyListView=n.view.views.MobileTeamsListView=r},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(258);var r=i(308);e.exports=a.extendView(r,"ConfigurableList",{disableItemClick:false,isLiveRelativeDateEnabled:true,initialize:function(e){this.listParams=e.listParams;var t=this.getCollection(e.listParams);e=_.extend({},e,{meta:this.calculateListMeta(e.listParams),collection:t,context:this.getContext(e,t),template:this.listParams.template||this.template});this._super(e);if(this.isLiveRelativeDateEnabled){this.listenTo(this.collection,"data:sync:start",function(){this.$("time").liverelativedate("destroy")});this.listenTo(this.collection,"data:sync:complete",function(){this.$("time").liverelativedate()})}},getContext:function(e,t){var i=this.listParams;var a=i.parentModel;var o=n.metadata.getModule(i.module);var r={fields:o&&o.mergedFields,model:n.data.createBean("Filters"),collection:t,module:i.module,limit:i.limit,link:a&&i.link,parentModule:a&&a.module};return n.context.getContext(r)},getCollection:function(e){var t={limit:e.limit};var i=e.parentModel&&e.link?n.data.createRelatedCollection(e.parentModel,e.link):n.data.createBeanCollection(e.module,null,t);this.setFilter(i,e);i.options=t;i.limit=t.limit;return i},setFilter:function(e,t){var i=t.filter;var a=t.filter_id||"assigned_to_me";if(!i){var o=n.metadata.getModule(t.module,"filters");if(o&&o.basic){i=_.find(o.basic.meta.filters,function(e){return e.id===a})}}if(i){e.filterDef=i.filter_definition||i}else{e.filterId=a}},calculateListMeta:function(e){var t=n.metadata.getModule(e.module,"fields");var i=[];_.each(e.display_columns,function(e){i.push(t[e])});return{panels:[{fields:i}]}},refresh:function(e){this.collection.resetOptions();this._super(e)},getFieldNames:function(){return this.listParams.display_columns},loadData:function(e){var t=this;this.loadUserFilter(function i(n){if(n){return}t._super(e,false)})},loadUserFilter:function s(e){var t=n.data.createBean("Filters",{id:this.collection.filterId});var i=this;if(!this.collection.filterDef&&this.collection.filterId){t.fetch({success:function a(t,n){i.collection.filterDef=n.filter_definition;e()},error:function r(t){o.showAlert(n.lang.get("ERR_MOBILE_CONNECTION_FAILED"));e(t)}})}else{e()}},onClickItem:function(e){if(!this.disableItemClick&&!$(e.target).closest("a").length){this._super(e)}return true}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(308);e.exports=a.extendView(o,"MobileRecentsList",{isPaginationEnabled:false,onBeforeRender:function(){this.collection.each(function(e){var t=e.attributes._module;e.module=t;e.fields=n.metadata.getModule(t,"fields")});this._super()},initialize:function(e){this.itemsConfig={isModuleVisible:true};this._super(e)},loadData:function r(){}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(258);var r=i(308);e.exports=a.extendView(r,"MobileTxLogList",{basicMenuActions:[{name:"delete",types:["context-menu"],label:"LBL_ROLLBACK_BUTTON",iconKey:"actions.delete",handler:function s(e,t){if(n.offline.syncManager.isSyncing()){o.showAlert(n.lang.get("LBL_OFFLINE_SYNC_IN_PROGRESS"))}else{e._rollbackTx(t)}}}],globalEvents:{"offline:tx:delete":"onTxDeleted"},listItemTpl:"list-item-tx-log",onAfterRender:function(){this._super();this.toggleNoRecLbl()},onAfterShow:function(){this._super();this.refresh()},getHeaderConfig:function(){return{title:n.lang.get("LBL_TX_LOG"),menuButton:true,back:true}},_rollbackTx:function(e){var t=this;o.showConfirm(n.lang.get("LBL_OFFLINE_ROLLBACK_PROMPT"),{callback:function(i){if(i===2){n.offline.storage.rollbackTransaction(e.attributes,{},function(i){if(!i){t.collection.remove(t.collection.get(e.id));n.alert.show("rollback_success",{level:"success",messages:n.lang.get("LBL_OFFLINE_ROLLBACK_SUCCESS"),closeable:true,autoClose:true});n.controller.clean();if(n.controller.getScreenContext().modelId){n.controller.goBack()}t.toggleNoRecLbl()}else{n.alert.show("rollback_success",{level:"error",messages:n.lang.get("LBL_OFFLINE_ROLLBACK_FAILED"),closeable:true,autoClose:true});n.logger.error(""+i)}})}}})},onTxDeleted:function(e){var t=this.collection.where({_tx_uid:e.txOptions.txId})[0];this.collection.remove(t);this.toggleNoRecLbl();this.scroll.reflow()},toggleNoRecLbl:function(){if(!this.collection.length){this.$(".no-records-found").show()}}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(258);var r=i(262);e.exports=a.extendView(r,"MobileTxLogDetail",{events:{"click .delete:not(.disabled)":"rollbackRecord"},globalEvents:{"offline:tx:delete":"onTxDeleted"},getHeaderConfig:function(){var e=n.lang.get("LBL_TX_LOG_DETAIL");return{title:e,cancel:true}},_render:function(){if(!this.model.get("_tx_action"))return;this._super()},onBeforeRender:function(){var e=this.model.get("_tx_bean_module");var t=parseInt(this.model.get("_tx_action"),10);var i=n.metadata.getModule(e);var o=i||{fields:{}};this.updatedFields=n.utils.deepCopy(this.model.get("_tx_updated_fields"));if(this.updatedFields){var r=this.updatedFields.currency_id;var s=this.updatedFields.parent_type;if(s){s=_.clone(s)}else if(this.updatedFields.parent_id){this.model.attributes.parent_type=this.model.attributes.bean.parent_type}switch(t){case n.offline.SYNC_ACTIONS.CREATE:case n.offline.SYNC_ACTIONS.UPDATE:var l=this._getViewableFields(e);this.updatedFields=l?_.pick(this.updatedFields,this._getViewableFields(e)):this.updatedFields}if(n.offline.SYNC_ACTIONS.LINK===t||n.offline.SYNC_ACTIONS.UNLINK===t){this.updatedFields.link=true}else{_.each(this.updatedFields,function(t,l){if(l==="my_favorite"){t.vname="LBL_ACTION_FAVORITE";delete t.before;t.after=""+t.after}else if(l==="following"){if(a.canFollow(this.model)){t.vname="LBL_ACTION_FOLLOW";delete t.before;t.after=""+t.after}else{delete this.updatedFields.following}}else{var c=_.contains(["assigned_user_id","deleted","currency_id"],l)||t.type==="id";if(i&&(!o.fields[l]||!n.config.offline.debug.render&&c)){delete this.updatedFields[l];return}t.vname=o.fields[l]||l;_.extend(t,o.fields[l]);var d={def:o.fields[l]||{type:"varchar",name:l},view:this,model:this.model,module:e};if(d.def.type==="email"){d.def=_.defaults({type:"varchar"},d.def);t.before=_.pluck(t.before,"email_address").join(", ");t.after=_.pluck(t.after,"email_address").join(", ")}var u=n.view.createField(d);var f=n.view.createField(d);if(t.before||t.before===0){u.model.set(l,t.before,{silent:true});if(t.type==="currency"&&r){u.model.set("currency_id",r.before,{silent:true})}else if(t.type==="parent"&&s){u.model.set("parent_type",s.before,{silent:true})}t.before=u.render()}f.model.set(l,t.after,{silent:true});if(t.type==="currency"&&r){f.model.set("currency_id",r.after,{silent:true})}else if(t.type==="parent"&&s){f.model.set("parent_type",s.after,{silent:true})}t.after=f.render()}},this)}}this.fields={};this._super()},_getViewableFields:function(e){var t=n.metadata.getView(e,"edit");if(t){return _.reduce(t.panels,function(e,t){var i=[];_.each(t.fields,function(e){if(e.fields){i.push.apply(i,_.pluck(e.fields,"name"))}else{i.push(e.name)}});return _.union(e,i)},[])}else return null},onAfterRender:function(){this._super();_.each(this.updatedFields,function(e,t){if(t==="my_favorite"||t==="following"||!e){return}if(e.before){e.before.dispose();e.before=null}if(e.after){e.after.dispose();e.after=null}},this)},_rollbackTx:function(){var e=this;o.showConfirm(n.lang.get("LBL_OFFLINE_ROLLBACK_PROMPT"),{callback:function(t){if(t===2){n.offline.storage.rollbackTransaction(e.model.attributes,{},function(t){if(!t){e.collection.remove(e.collection.get(e.model.id));n.alert.show("rollback_success",{level:"success",messages:n.lang.get("LBL_OFFLINE_ROLLBACK_SUCCESS"),closeable:true,autoClose:true});n.controller.clean();n.controller.goBack()}else{n.alert.show("rollback_success",{level:"error",messages:n.lang.get("LBL_OFFLINE_ROLLBACK_FAILED"),closeable:true,autoClose:true});n.logger.error(""+t)}})}}})},rollbackRecord:function(e,t){if(n.offline.syncManager.isSyncing()){o.showAlert(n.lang.get("LBL_OFFLINE_SYNC_IN_PROGRESS"))}else{this._rollbackTx()}},onTxDeleted:function(e){if(e.txOptions.txId===this.model.get("_tx_uid")){this.$el.find(".btn.delete").addClass("disabled").html(n.lang.get("LBL_OFFLINE_TRANSACTION_SYNCED"))}}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(265);var r=i(262);e.exports=a.extendView(r,"AddressEdit",{_bodyScroll:true,initialize:function(e){this._super(e);this.action="edit";this.fallbackFieldTemplate="edit";this.addressFields=this.context.get("addressFields");this.addressFieldsNames=_.pluck(this.addressFields,"name");this.model=this.context.get("model")},getHeaderConfig:function(){var e=this.context.get("editedFieldName");return{title:e,save:true,saveLabel:"LBL_DONE_BUTTON_LABEL",cancel:true}},save:function(){var e=this;o.showOverlay();this.model.doValidate(this.addressFieldsNames,function(t){o.hideOverlay();if(t){_.each(e.addressFields,function(t){e.context.get("parentModel").set(t.name,e.model.get(t.name))});n.controller.goBack()}})},onHeaderSaveClick:function(){this.save()}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(262);e.exports=a.extendView(o,"TextareaEdit",{editElTag:"textarea",getHeaderConfig:function(){var e=this.options.editedFieldName;return{title:e,save:!this.options.isReadOnly,saveLabel:"LBL_DONE_BUTTON_LABEL",cancel:true}},setValue:function(e){var t=this.$(this.editElTag);var i=this.context.get("isReadOnly");t.val(e);if(i){t.attr("readOnly",i)}if(e||i)return;t.attr("tabindex",1e5).attr("name","somename").get(0).focus()},getValue:function(){return this.$(this.editElTag).val()},save:function(){var e=this.getValue();var t=a.utils.stripLastEmptyStrings(e);this.context.get("parentModel").set(this.context.get("fieldName"),t);n.controller.goBack()},onHeaderSaveClick:function(){this.save()}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(263);var r=i(361);e.exports=a.extendView(r,"EmailbodyEdit",{events:{"click .email-body-content a":function(e){e.preventDefault();e.stopPropagation();var t=e.target.getAttribute("href");o.openUrl(t)}},getHeaderConfig:function(){var e=this.options.editedFieldName;return{title:e,save:false,cancel:true}}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(258);var r=i(318);var s=a.extendView(r,"Edit",{NOTHING_CHANGED_ERR:"nothing_changed",VALIDATION_ERR:"validation_error",_bodyScroll:true,events:function(){return{"click .delete":"deleteRecord"}},plugins:[],globalEvents:{"offline:data:updated":function(e){if(e.isCollection||e.id!==this.model.id)return;if(e.action==="delete"){this.showRecordOverlay(e.data,e.status);return}if(!this._modelBackup||e.date_modified===this._modelBackup.date_modified)return;var t=n.lang.get("LBL_OFFLINE_MERGE_DATA_CONFIRM");var i=_.pick(this.model.attributes,this._getChangedFields());var a=e.complete;if(!_.isEmpty(i)){o.showConfirm(t,{callback:_.bind(function(t){if(t===2){var n=this.model;e.complete=function(){n.set(i);if(a){a.apply(this,arguments)}}}this.model.fetch(_.extend(e,{params:{skipServerSync:true}}))},this)})}else{this.model.fetch({params:{skipServerSync:true}})}}},initialize:function(e){this._super(e);this._fileUploads={};this._modelBackup=null;this.relateFields=null;this.selectedItem=null;var t=this.context.get("link");if(t){var i=this.context.get("parentModule");var o=n.data.getRelateFields(i,t);this.relateFields=_.isEmpty(o)?null:_.pluck(o,"name");this.initRelationshipFields(i,t)}if(this.context.isCreate()){var r=n.metadata.getModule(this.module).fields.assigned_user_name;if(r&&r.type==="relate"){var s={};s[r.id_name]=n.user.get("id");s[r.name]=n.user.get("full_name");this.model.set(s)}var l=n.metadata.getModule(this.module).fields.team_name;if(l){var c=this.model.get(l.name)||n.user.getPreference("default_teams")||[];if(!c.length){c.push({id:1,name:"Global",primary:true})}this.model.set(l.name,c)}}this.displayFields=_.select(this.displayFields,function(e){return a.canDisplay(this,e)},this);this._updateReadOnlyStatus()},isEditView:function(){return true},_render:function(){this.action=this.context.isCreate()?"create":"edit";if(this.action==="edit"){this._updateReadOnlyStatus();this.action=this.name=this.isReadOnly?"view":"edit"}this._super()},onBeforeRender:function(){this._super();this.model.off("error:validation");this.model.on("error:validation",function(){n.alert.show("validation_error",{level:"error",messages:n.lang.get("ERR_MOBILE_VALIDATION"),autoClose:true})},this)},onAfterRender:function(){this._super();var e=n.metadata.getStrings("mod_strings")[this.module];var t=e?e.LBL_RELATED_RECORD_DEFAULT_NAME:null;var i=this.context.isCreate();var o=this.context.get("link");var r=this.context.get("parentModule");var s=this.context.get("parentModel");var l=false;var c=this;var d=s&&n.session.get(s.id);var u=t&&i&&o&&!this.context.get("duplicate")&&this.model&&_.isEmpty(this.model.get("name"));var f=i&&o&&a.isStandardModule(r)&&!s.parentInfoPopulated;if(s&&!d){d=s.dataFetched?s.toJSON():null}function h(e){if(e){t=n.lang.get("LBL_RELATED_RECORD_DEFAULT_NAME",c.module,e);var i=n.metadata.getModule(c.module);var a=i?i.fields.name:null;var o=a?a.len:null;if(o&&o<t.length){
t=t.substr(0,o-3)+"..."}c.model.set("name",t)}}if(u){if(d){h(d.full_name||d.name)}else{l=true}}if(f){if(d){this._populateParentInfo(d,r,o)}else{l=true}}if(l){if(s&&!d){s.fetch({success:function(){if(!c.model)return;if(u&&_.isEmpty(c.model.get("name"))){h(s.get("full_name")||s.get("name"))}if(f){c._populateParentInfo(s.toJSON(),r,o);s.parentInfoPopulated=true}}})}}},getField:function(e,t){var i=this._super(e,t);if(!i){_.each(this.fields,function(t){if(!i&&t.getSubfield){i=t.getSubfield(e)}})}return i},_parsePopulateList:function(e,t){var i=_.isArray(e);_.each(e,function(e,a){a=i?e:a;if(!_.isUndefined(t[a])&&_.isEmpty(this.model.get(e))&&n.acl.hasAccessToModel("edit",this.model,e)){this.model.set(e,t[a])}},this)},_populateParentInfo:function(e,t){var i=this.model.fields;var a=this.context.get("link");var o=n.data.getRelateFields(t,a);var r=n.metadata.getModule(t).fields[a];if(n.supportedFeatures.populateList){if(r&&r.populate_list){this._parsePopulateList(r.populate_list,e)}if(!_.isEmpty(o)){_.each(o,function(t){this.model.set(t.name,e[t.rname]);this.model.set(t.id_name,e.id);if(t.populate_list){this._parsePopulateList(t.populate_list,e)}},this)}}else{var s=(t==="Accounts"||e.account_id)&&!(t==="Opportunities"&&this.module==="Contacts")&&i.account_id&&i.account_name&&!(this.model.get("account_id")||this.model.get("account_name"))&&n.acl.hasAccessToModel("edit",this.model,"account_name");if(s){this.model.set({account_id:e.account_id||e.id,account_name:e.account_name||e.name})}}},_updateReadOnlyStatus:function(){this.isReadOnly=!n.acl.hasAccessToModel("edit",this.model)||n.config.nonEditableModules.indexOf(this.model.module)>=0},getHeaderConfig:function(){var e=this.onlyRelationshipEdit;var t=this.context.get("link");var i=this.context.get("create");var a;var o;o={save:true,cancel:true,menuButton:false};if(e){a=n.lang.get("LBL_MOBILE_EDIT_REL")}else{if(i){var r=this.context.get("layoutOptions")&&this.context.get("layoutOptions").isLoggingCall;a=t&&!r?n.lang.get("LBL_CREATE_RELATED",this.module,this.moduleSingular):n.lang.get("LBL_CREATE_MODULE",this.module,this.moduleSingular)}else if(this.isReadOnly){a=t?n.lang.get("LBL_RELATED_MODULE",this.module,this.moduleSingular):this.moduleSingular}else{a=t?n.lang.get("LBL_EDIT_RELATED",this.module,this.moduleSingular):n.lang.get("LBL_EDIT",this.module,this.moduleSingular)}}o.title=a;return o},onDataSyncSuccess:function(e,t,i){this._super(e,t,i);this._onDataSyncComplete(i.method,e,i)},onDataSyncError:function(e,t,i){this._super(e,t,i);var a=this;this._onDataSyncComplete(e,this.model,t,i);if(i.status===409){o.showConfirm(n.lang.get("ERR_MOBILE_CONFLICT"),{callback:function(e){var t={};var o=a.model;var r=i.payload.record;if(r){if(e===2){_.each(a._getChangedFields(),function(e){t[e]=o.get(e)});a.backupModel(r);r=n.data.beanModel.merge(r,t,a.module)}else{a.backupModel(r)}o.set(r)}}})}},_onDataSyncComplete:function(e,t,i,a){if(!this.context.isCreate()&&this.context.isDataFetched()){if(e==="read"){this.backupModel()}if(n.config.nonEditableModules.indexOf(this.model.module)===-1&&this.action!==(n.acl.hasAccessToModel("edit",this.model)?"edit":"view")){this.render()}this.$(".btn.delete").toggleClass("hide",!(this.model.hasDeleteAccess()&&!(a&&e==="read")))}},deleteRecord:function(){var e=this;o.showConfirm(n.lang.get("LBL_MOBILE_DELETE_CONFIRM"),{callback:function(t){if(t===2){e.model.destroy({wait:true})}}})},save:function(e){var t=this.context.get("create");this._removeErrorMessages();var i=this.model.get("email");if(i){i=_.filter(i,function(e){return!_.isEmpty(e.email_address)});this.model.set("email",i)}var a=this;var o=this._getSavingTasks(e);async.series(o,function(e){n.syncAlertManager.hideOverlay();if(e===a.VALIDATION_ERR){return}if(e===a.NOTHING_CHANGED_ERR){return n.controller.goBack()}if(!e){a.handleSaveSuccess()}else{a.handleSaveError(e)}n.syncAlertManager.resume("update",a.model,e)})},onHeaderSaveClick:function(){this.save()},onHeaderAdditionalAction:function(e){e.action(this,this.model)},handleSaveSuccess:function(){this.trigger(this.ACTION_NAME,{name:"edit:view:save",options:{model:this.model,parentModel:{id:this.context.get("parentModelId"),module:this.context.get("parentModule")},isCreate:this.context.get("create")}})},handleSaveError:function(e){if(e.isFileUploadError){n.error.handleHttpError(e)}},_getSavingTasks:function(e){var t;var i=this.getFieldNames(true);var a=this.context.get("duplicate")?_.keys(this.model.attributes):this._getChangedFields(i);var o=this;e=e||[];if(this._sendParentId||_.include(a,"parent_id")){e.push("parent_id","parent_type","parent_name")}a=_.isEmpty(a)?null:_.union(a,e);t=[function r(e){o._validateRecord(e,a,i)},function s(e){n.syncAlertManager.pause("update",o.model);e()},function l(e){o._saveRecord(e,o._omitFileFields(a))}];_.each(this._fileUploads,function(e){t.push(_.bind(e,this))},this);return t},onBeforeValidate:function(){n.syncAlertManager.showOverlay()},_validateRecord:function(e,t,i){var a={};var o=n.metadata.getModule(this.module).fields;var r=_.filter(i,function(e){var t={};_.each(this.fields,function(i){if(i.name===e){t=i}},this);return!!o[e]&&(!_.isEmpty(t)&&t.action!=="disabled")},this);this.onBeforeValidate();_.each(r,function(e){var t=o[e];var i=this.getField(e);if(i){t=i.def}if(t.type==="address"){_.each(t.fieldNames,function(e){a[e]=o[e]})}else if(t.required||!(t.calculated&&t.enforced)){a[t.name]=t}},this);if(this.context.get("duplicate")||!this.context.isCreate()){_.each(a,function(e,t){if(!n.acl.hasAccessToModel("edit",this.model,t)){delete a[t]}},this)}var s=this;this.model.doValidate(a,function(i){if(i){if(!_.isEmpty(t)){e(null)}else{e(s.NOTHING_CHANGED_ERR)}}else{e(s.VALIDATION_ERR)}})},_shouldUpdateNameAndFullname:function(e){var t=n.metadata.getModule(this.model.module).fields;var i=t.name;var a=t.full_name;var o="last_name";if(_.intersection(e,["first_name","last_name","salutation","title"]).length===0){return false}return i&&a&&i.group===o&&a.group===o},_saveRecord:function(e,t){if(!this.model){return}var i=n.metadata.getModule(this.module).fields.name;if(n.offlineEnabled&&_.intersection(t,i.fields).length!==0){if(this._shouldUpdateNameAndFullname(t)){var a=n.utils.formatNameModel(this.model.module,this.model.attributes);this.model.set("full_name",a);this.model.set("name",a);t.push("full_name");t.push("name")}else{var o=i.fields[0];this.model.set("name",this.model.get(o));t.push("name")}}if(!_.isEmpty(t)){this.model.save(null,{relate:!this._viaParent&&!!this.context.get("link"),fields:t,modelBackup:this._modelBackup,viewed:true,success:function(){e()},error:function(t){e(t)}})}else{e()}},_removeErrorMessages:function(){var e=this.$(".control-group");e.find(".field__error-message").remove();e.removeClass("error")},backupModel:function(e){this._modelBackup=n.utils.deepCopy(e||this.model.attributes);this.context.set("_modelBackup",this._modelBackup)},restoreModel:function(){this.model.set(this.model.getChangeDiff(this._modelBackup))},receiveSyncData:function(e){},_getChangedFields:function(){return _.keys(this.model.getChangeDiff(this._modelBackup))||[]},_omitFileFields:function(e){var t=_.filter(n.metadata.getModule(this.module).fields,function(e){return e.type==="image"||e.type==="file"}).map(function(e){return e.name});return _.difference(e,t)},_onFileFieldChange:function(e,t,i){this._super(e,t,i);var a=this;if(i==="preparing"){this._showOverlay(e.type)}else if(i==="prepared"){this._hideOverlay();this._enqueueFileHandler("create",e,t);var o=t.fileData.name;this._setFileFieldValue(e,o);a.model.doValidate([e.name],function(t){if(t){e.handleValidationError()}})}else if(i==="error"){this._hideOverlay();n.alert.show("file_upload_error",{level:"error",messages:arguments[1],autoClose:true,closeable:true});this.render()}},_setFileFieldValue:function(e,t){this.model.set(e.name,t,{silent:true});if(!_.isEmpty(e.def.fields)){_.each(e.def.fields,function(e){this.model.set(e,t,{silent:true})},this)}},_onFileFieldClear:function(e){this._super(e);this._enqueueFileHandler("delete",e);this._setFileFieldValue(e,"")},_enqueueFileHandler:function(e,t,i){var n;var a=this;n=function(n){var o=a.model.get(t.name);var r=i&&i.fileData.name||"";var s={success:function(e){a.model.trigger("change:attachment_list");a.model.trigger("sync",a.model,e,{fileFieldName:t.name});n()},error:function(e){delete a._fileUploads[t.name];a.model.set(t.name,o);n(e)}};a.model.set(t.name,r);if(e==="create"){_.defer(function(){a.model.uploadFile(t.name,i,s,{htmlJsonFormat:false,isCreate:a.context.get("create")})})}else{a.model.deleteFile(t.name,i,s,{htmlJsonFormat:false})}};this._fileUploads[t.name]=n},_showOverlay:function(e){var t=e==="image"?"LBL_MOBILE_PROCESSING_IMAGE":"LBL_MOBILE_PROCESSING_FILE";n.overlay.show("preparing_image",{spinner:false});n.alert.show("upload_mask",{level:"info",messages:n.lang.get(t),autoClose:false,closeable:false})},_hideOverlay:function(){n.alert.dismiss("upload_mask");n.overlay.hide("preparing_image")}},{getOverridableMethods:function(){return _.union(r.getOverridableMethods(),["onBeforeValidate"])}});e.exports=s},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(363);e.exports=a.extendView(o,"EditRelationship",{template:"edit",initialize:function(e){this._super(e);this.meta=n.metadata.getView(this.module,"edit");this.fallbackFieldTemplate="edit";this.onlyRelationshipEdit=true},save:function(){this.trigger(this.ACTION_NAME,{name:"edit:view:save"})}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(363);var r=a.extendView(o,"ActivityEdit",{_populateParentInfo:function(e,t,i){var a=n.acl.hasAccessToModel("edit",this.model,"parent_name");var o=n.acl.hasAccessToModel("edit",this.model,"contact_name");var r=n.metadata.getRelationship(n.metadata.getModule(t,"fields")[i].relationship)||{};if(r.via_parent_id)this._viaParent=true;if(t==="Contacts"){if(o){this.model.set({contact_id:e.id,contact_name:e.full_name||e.name});this._sendContactId=true}if(a){this.model.set({parent_id:e.account_id,parent_type:"Accounts",parent_name:e.account_name});this._sendParentId=true}}else if(a){this.model.set({parent_name:e.name,parent_id:e.id,parent_type:t});this._sendParentId=true}},save:function(e){e=e||[];if(this._sendContactId)e.push("contact_id");this._super(e)}});e.exports=n.view.views.MobileNotesEditView=n.view.views.MobileTasksEditView=r},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(365);var r=a.extendView(o,"MeetingCallEdit",{_isDateRangeMode:false,initialize:function(e){this._super(e);this._initDateRangeProperty();if(this._isDateRangeMode){this.model.addValidationTask("date_range_validation",_.bind(this._validateRange,this))}},_initDateRangeProperty:function(){var e=["date_start","date_end"];this._isDateRangeMode=_.some(this.options.meta.panels[0].fields,function(t){return t.type==="fieldset"&&_.intersection(t.related_fields,e).length===e.length})},onAfterRender:function(){if(!this.context.isCreate()){var e=this.getField("invitees");if(e)e.$el.hide()}this._super();this._setDefaultDateValues()},setCallData:function(e){this.model.set(e);if(this._isDateRangeMode){this._populateEndDateByDuration(e)}this._skipSetDefaults=true},save:function(e){e=e||[];e.push("send_invites");if(this._isDateRangeMode){if(_.intersection(this._getChangedFields(),["date_start","date_end"]).length){e.push("duration_hours","duration_minutes")}}else{this.model.unset("date_end")}this.sendInvites=this.model.get("send_invites");this._super(e)},_saveRecord:function(e,t){t=_.without(t,"invitees");this._populateDurationValues();this._super(e,t)},_validateRange:function(e,t,i){var a=this.model.get("date_start");var o=this.model.get("date_end");var r;var s;var l;if(a&&o){l=n.date.compare(a,o)<1;if(!l){r=this.getField("date_start");s=this.getField("date_end");t.date_start={isBefore:s.label};t.date_end={isAfter:r.label}}}i(null,e,t||{})},_setDefaultDateValues:function(){var e=n.date().seconds(0);if(this._skipSetDefaults||!this.context.isCreate()){return}if(e.minutes()>30){e.add("h",1).minutes(0)}else if(e.minutes()>0){e.minutes(30)}this.model.set({date_start:e.formatServer(),duration_hours:0,duration_minutes:30});if(this._isDateRangeMode){this._populateEndDateByDuration()}this.model.set({send_invites:false});this._skipSetDefaults=true},_populateEndDateByDuration:function(e){var t=this.model;var i=t.get("date_start");var a;var o;var r;if(!i){return}o=e?e.duration_hours:t.get("duration_hours");r=e?e.duration_minutes:t.get("duration_minutes");a=n.date(i).add("h",o).add("m",r).formatServer();t.set("date_end",a)},_populateDurationValues:function(){var e;var t;if(!this._isDateRangeMode){return}t=this.model;e=n.date(t.get("date_end")).diff(t.get("date_start"));t.set("duration_hours",Math.floor(n.date.duration(e).asHours()));t.set("duration_minutes",n.date.duration(e).minutes())},_getSavingTasks:function(e){var t=n.view.views.EditView.prototype._getSavingTasks.call(this,e);var i=this;var a=this.model.get("invitees");if(a){_.each(a,function(e){t.push(function(t){var a=n.data.createRelatedBean(i.model,e.id,e.link);a.save(null,{relate:true,fields:["id"],success:function(){t()},error:function(e){t(e)}})})})}if(this.sendInvites&&this.context.isCreate()){t.push(function(e){i.model.set({send_invites:true},{silent:true});i._saveRecord(e,["send_invites"])})}return t},onBeforeValidate:function(){if(this.context.isCreate()){this.model.unset("send_invites",{silent:true})}},handleSaveError:function(e){this._super(e);if(!e.isFileUploadError){if(this.model){this.model.set({send_invites:this.sendInvites},{silent:true})}}}});n.view.views.MobileCallsEditView=n.view.views.MobileMeetingsEditView=r;e.exports=r},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(363);e.exports=a.extendView(o,"MobileRevenueLineItemsEdit",{onAfterRender:function(){this._super();var e;if(this.model.link){e=this.model.link.bean.id}if(this.context.isCreate()&&_.isEmpty(this.model.get("opportunity_id"))){this.model.set("opportunity_id",e)}}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(363);e.exports=a.extendView(o,"MobileUsersEdit",{initialize:function(e){this._super(e);this.model.on("change:attachment_list",_.bind(this._onChangeAttachmentList,this))},_onChangeAttachmentList:function(){if(this.model.hasChanged("picture")){this.trigger(this.ACTION_NAME,{name:"user:picture:change",options:{pictureId:this.model.get("picture")}})}}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(298);var r=i(316);e.exports=a.extendView(o,"BaseChart",{className:"chart-wrapper",chart:null,chartData:null,isManager:false,showManagerData:false,loaded:false,responseDataAttr:"data",LATEST_AVAILABLE_WARN_KEY:"LATEST_AVAILABLE_DATA",_chartElSize:null,ERR_NO_DATA_AVAILABLE:"NO_DATA_AVAILABLE",globalEvents:{"app:orientation:changed":function(){this._updateChartElSize();this._onOrientationChange()}},initialize:function(e){this._super(e);this.isManager=n.user.get("is_manager");r({view:this,ptrAction:_.bind(this.ptrRefresh,this)})},_updateChartElSize:function(){this._maxLegendRows=a.getOrientation()==="landscape"&&!n.isTablet?1:4},_onOrientationChange:function(){if(this.chart){if(this.chart.legend){this.chart.legend.rowsCount(this._maxLegendRows)}this.dispatchChartMethod("tooltipHide");this.rerenderChart()}},onBeforeRender:function(){this.enableOptionsToolbar();this._updateChartElSize();this._super()},renderChart:function(){this.$(".nv-chart svg").remove();nv.tooltip.cleanup();return this.chartData.data.length},onAfterRender:function(){this._super();this.$chartEl=this.$(".nv-chart");this.$dataUnavailableLbl=this.$(".data-unavailable-label");this.listenTo(this.$(".nv-chart"),"click",_.bind(function(e){this.dispatchChartMethod("chartClick")},this))},loadData:function(){if(this.loaded){if(this.chart){this.dispatchChartMethod("tooltipHide");this.updateChart()}return}this.showPreloader();var e=this;var t=[_.bind(this.loadChartData,this)];if(!this._isChartInitialized&&this.loadInitData){t.unshift(_.bind(this.loadInitData,this))}async.series(t,function i(t,a){e.activeRequests=[];e.hidePtrLoading();if(t){if(!t.request.aborted){e.loadDataError(t)}return}var o=_.last(a);if(e.isDataEmpty(o,a)){e.loadDataError(e.ERR_NO_DATA_AVAILABLE);return}e.loadDataSuccess(o,function r(e){e&&n.logger.error(e+" Couldn't cache chart data")})})},showLatestAvailableDataWarn:function(e){var t=n.date(e.last_fetched).fromNow();n.alert.show(this.LATEST_AVAILABLE_WARN_KEY,{level:"warning",messages:n.lang.get("LBL_SHOWING_CACHED_DATA",null,{lastFetched:t}),autoClose:false,closable:true})},isDataEmpty:function(e,t){return _.isEmpty(e)||(this.responseDataAttr?_.isEmpty(e[this.responseDataAttr]):false)},showPreloader:function(){n.alert.show("chart-loading",{level:"load",messages:n.lang.get("LBL_LOADING"),autoClose:false,closeable:false});this.$dataUnavailableLbl.hide()},hidePreloader:function(){n.alert.dismiss("chart-loading")},refreshData:function(e){this.loaded=false;if(!e){this.showPreloader()}this._super(e)},loadDataSuccess:function(e,t){if(e.title){this.dataTitle=e.title;this.layout.onDashletChanged(this)}this.dispatchCacheStorageMethod("set",this.options.dashletId,{chartData:e,filters:this.viewState.filters,filtersDef:this.viewState.filtersDef,visibility:this.viewState.visibility,last_fetched:n.utils.getTimestamp()},t);this.loaded=true;this.hidePreloader();this.$chartEl.show();this.$dataUnavailableLbl.hide();this.processData(e)},loadDataError:function(e){this.hidePreloader();var t=this;if(e===this.ERR_NO_DATA_AVAILABLE){this.$chartEl.hide();this.$dataUnavailableLbl.show();return}n.error.handleHttpError(e,this.model);if(_.contains([403,412],e.status)){return}this.dismissNetworkAlerts();this.dispatchCacheStorageMethod("get",this.options.dashletId,function i(e,n){var a=Boolean(!e&&n);t.$chartEl.toggle(a);if(!a){t.$dataUnavailableLbl.show();return}t.showLatestAvailableDataWarn(n);t.applyViewState(n);t.hidePreloader();t.processData(n.chartData)})},dispatchCacheStorageMethod:function(e){if(!this.cacheStorage){if(e==="get"){this.$chartEl.hide();this.$dataUnavailableLbl.show()}return false}var t=_.toArray(arguments).slice(1);this.cacheStorage[e].apply(this.cacheStorage,t)},processData:function(e){this.prepareChartObject();this.renderChart();this.toggleDashletSwipe()},applyViewState:function(e){this._super(e);if(!_.isUndefined(this._isChartInitialized)){this._isChartInitialized=true}},setFilters:function(e){var t=this.getState(this.options.dashboardId,this.meta.id)||{};var i=_.isEmpty(t.filters)?e:t.filters;this.viewState.filters.set(i,{silent:true})},ptrRefresh:function(){this.refreshData(true)},getViewContainer:function(){return this.$easyScrollerParent},isSwipable:function(){return _.isEmpty(this.$chartEl.find(".nv-scroll-wrap").attr("clip-path"))},dispatchChartMethod:function(e){this.chart&&this.chart.dispatch[e]()},updateChart:function(){if(_.isFunction(this.chart.update)){this.chart.update()}else{this.renderChart()}this.toggleDashletSwipe()},rerenderChart:function(){if(_.isFunction(this.chart.render)){this.chart.render()}else if(_.isFunction(this.chart.update)){this.chart.update()}else{this.renderChart()}this.toggleDashletSwipe()},getUserCurrencyFormatter:function(){var e=n.user.getPreference("currency_id");var t=n.currency.getBaseCurrencyId();return function(i){var a=n.currency.convertAmount(i,t,e);return n.currency.formatAmountLocale(a,e,0)}},getUserCurrencyFormatterSi:function(){var e=n.currency.getBaseCurrencyId();var t=n.user.getPreference("currency_id");var i=n.currency.getCurrencySymbol(t);var a=n.user.getPreference("decimal_separator");return function(o,r){var s=r||2;var l=parseFloat(n.currency.convertAmount(o,e,t));var c=d3.format(",."+s+"s")(l);return i+c.replace(".",a)}}},{getOverridableMethods:function s(){return _.union(o.getOverridableMethods(),["isDataEmpty"])}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(354);e.exports=a.extendView(o,"TabbedListContainerDashlet",{className:"tabbed__dashlet",dashletParams:null,_defaultTabStorageKey:"dashboards:{0}:dashlets:{1}:default_tab_id",_extraFields:{"planned-activities":["assigned_user_id","assigned_user_name"],"inactive-tasks":["assigned_user_id","assigned_user_name"]},viewSwitcher:o.switcherTypes.TABS,initialize:function(e){this.activeTabStorageKey=n.utils.formatString(this._defaultTabStorageKey,[e.dashboardId,e.meta.view.type]);this._super(e)},initViews:function(e,t){this.dashletParams.tabs=_.select(this.dashletParams.tabs,function(e){return a.utils.isAccessibleModule(e.module,"list")});e=_.map(this.dashletParams.tabs,function(e){var t=_.pluck(n.metadata.getModule(e.module,"views").list.meta.panels[0].fields,"name");var i=this._extraFields[this.meta.view.type]||[];e.display_columns=_.union(t,i);e.filters=this.adjustFilters(e.filters);return this.getListDef(e,{layout:this.layout,contextMenuOnSwipeDisabled:this.contextMenuOnSwipeDisabled,parentModel:this.options.parentModel,listParams:{limit:this.meta.view.limit}})},this);this._super(e,t)},getListDef:function(e,t){var i=this._super(e,t);i.listViewId=[this.options.dashboardId,this.options.dashletId,_.indexOf(this.dashletParams.tabs,e)].join("_");i.title=n.lang.get(e.label)||a.getPluralModuleName(e.module);return i},createView:function(e){var t=this._super(e);var i=_.bind(this._updateTabInfo,this,t);t.listenTo(t.collection,"sync",i);t.listenTo(t.collection,"remove",i);return t},switchView:function(e){this._super(e);this.saveState();this._gaHandler()},refreshData:function(){this.saveState();this.loadData({forceServerSync:true,refresh:true})},_getLoadListFn:function(e){var t=_.indexOf(this.dashletParams.tabs,e);var i=n.metadata.getModule(e.module).mergedFields;var a=this;return function(n){var o;var r;var s=a.getFilters();n=n||{};if(e.order_by){o=e.order_by.split(":");this.collection.orderBy={field:o[0],direction:o[1]}}this.collection.filterDef=s[t];r=_.extend({},n,{fields:i,limit:a.meta.view.limit});if(n.refresh){delete r.refresh;this.refresh(r)}else{this.loadData(r)}}},_updateTabInfo:function(e){var t=e.collection;var i=e.collection.length;var n=this.getViewIndex(e);if(!(t.next_offset===-1||_.isUndefined(t.next_offset))){i+="+"}if(this.viewSwitcher){this.viewSwitcher.updateSubtext(n,i)}},adjustFilters:function(e){var t=new Date;t.setHours(23,59,59);t.toISOString();if(e.date_due){_.each(e.date_due,function(i,n){if(i==="today"){e.date_due[n]=t}})}return e},getFilters:function(){this._super();var e=[];_.each(this.dashletParams.tabs,function(t,i){var a=e[i]=[];Array.prototype.push.apply(a,this.getCollectionFilters(t));_.each(this.viewState.filters.attributes,function(e,t){var o={};var r;var s=parseInt(e,10);if(isNaN(s)){s=0}r=n.date().subtract("days",s).format("YYYY-MM-DD");o[this.dashletParams.tabs[i].filter_applied_to]=t==="date"&&e==="today"?{$lte:r}:{$gt:r};a.push(o)},this)},this);return e},getCollectionFilters:function(e){var t=[];_.each(e.filters,function(e,i){var n={};n[i]=e;t.push(n)});if((e.module==="Meetings"||e.module==="Calls")&&this.viewState.visibility==="user"){t.push({$or:[{assigned_user_id:n.user.id},{"users.id":n.user.id}]})}else if(this.viewState.visibility==="user"){t.push({assigned_user_id:n.user.id})}return t},_gaHandler:function(){if(!n.config.analytics.enabled){return}var e=this.activeIndex;var t=this.meta.view.type;var i;var a=this.options&&this.options.parentModel?this.options.parentModel.module:null;var o=a?["record-dashlet",a,t]:["dashlet",t];switch(t){case"casessummary":case"inactive-tasks":case"active-tasks":i=e;break;default:i=this.dashletParams.tabs[e].module;break}o.push(i);n.analytics.setActiveView(o.join("/"))}},{getOverridableMethods:function r(){return _.union(o.getOverridableMethods(),["_getCollectionFilters"])}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(369);e.exports=a.extendView(o,"ForecastChart",{initialize:function(e){this.forecastBy=n.nomad.utils.getForecastModule();this._super(e)},buildChartUrl:function r(){}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(263);var r=i(371);e.exports=a.extendView(r,"ForecastPareto",{_isChartInitialized:false,isForecastSetup:false,isForecastConfigValid:false,forecastsNotSetUpMsg:"",$groupByFilter:null,template:"forecast-pareto",events:function(){var e=n.view.views.BaseChartView.prototype.events;return _.extend({},e,{"click .lnk-non-forecast":function(e){e.preventDefault();o.openUrl(e.target.href)}})},initialize:function(e){this._super(e);this.forecastConfig=n.metadata.getModule("Forecasts","config");this.isForecastSetup=this.forecastConfig.is_setup;this.isForecastsConfigValid=a.utils.isForecastConfigValid();this.showManagerData=false;if(this.isForecastSetup){this.dashletConfig=n.metadata.getView(null,"forecast-pareto");if(_.isString(this.dashletConfig.dataset.options)&&_.isString(this.dashletConfig.group_by.options)){var t=n.lang.getAppListStrings(this.dashletConfig.dataset.options);this.dashletConfig.group_by.options=n.lang.getAppListStrings(this.dashletConfig.group_by.options);this.dashletConfig.dataset.options={};if(this.forecastConfig.show_worksheet_worst&&n.acl.hasAccess("read",this.forecastBy,n.user.get("id"),"worst_case")){this.dashletConfig.dataset.options.worst=t.worst}if(this.forecastConfig.show_worksheet_likely&&n.acl.hasAccess("read",this.forecastBy,n.user.get("id"),"likely_case")){this.dashletConfig.dataset.options.likely=t.likely}if(this.forecastConfig.show_worksheet_best&&n.acl.hasAccess("read",this.forecastBy,n.user.get("id"),"best_case")){this.dashletConfig.dataset.options.best=t.best}}}else{var i=_.isUndefined(n.user.getAcls().Forecasts.admin);this.forecastsNotSetUpMsg=a.utils.getForecastNotSetUpMessage(i)}},refreshData:function(e){if(this.previousVisibilityState!==this.viewState.visibility){this.previousVisibilityState=this.viewState.visibility;this._super(e);if(this.$groupByFilter){this.$groupByFilter.toggle()}}else if(e){this._super(e)}else if(this._serverData){this.saveState();this.renderChart()}},loadData:function s(){if(this.isForecastSetup){this._super()}else{this.hidePreloader()}},processData:function(e){this._serverData=e;if(this._serverData){this._super(e)}},loadInitData:function l(e){var t=this;function i(i){t.initForecast(i);e(null,i)}this.apiCall("GET",n.api.buildURL("Forecasts/init"),null,{success:function a(e){var n=t.options.parentModel;if(n){n.once("sync",function(){i(e)}).fetch()}else{i(e)}},error:e})},loadChartData:function c(e){var t={};var i;t.no_data=this.viewState.filters.get("no_data")===true;if(this.isManager){t.target_quota=this.viewState.filters.get("show_target_quota")?1:0}i=n.api.buildURL(this.buildChartUrl(),null,null,t);this.apiCall("read",i,{},a.utils.wrapAsyncCallback(e))},initForecast:function(e){var t={user_id:n.user.get("id"),show_target_quota:false,selectedTimePeriod:e.defaultSelections.timeperiod_id.id,timeperiod_id:e.defaultSelections.timeperiod_id.id,timeperiod_label:e.defaultSelections.timeperiod_id.label,dataset:e.defaultSelections.dataset,group_by:e.defaultSelections.group_by,ranges:_.keys(n.lang.getAppListStrings(this.forecastConfig.buckets_dom))};this._isChartInitialized=true;this.viewState.filtersDef={group_by:this.dashletConfig.group_by,dataset:this.dashletConfig.dataset};this.previousVisibilityState=this.viewState.visibility;this.setFilters(t);this.render()},prepareChartObject:function(){var e=this.getUserCurrencyFormatter();var t=this.getUserCurrencyFormatterSi();this.chartId=this.cid+"_chart";this.chart=nv.models.paretoChart().margin({top:0,right:10,bottom:0,left:10}).showTitle(false).tooltips(true).tooltipQuota(function(t,i,n,a,o){return"<p><b>"+a.key+": <b>"+e(a.val)+"</b></p>"}).tooltipLine(function(t,i,a,o,r){return"<p><b>"+n.lang.get("LBL_CUMULATIVE_TOTAL","Forecasts")+"</b></p><p>"+t+": <b>"+e(o.point.y)+"</b></p>"}).tooltipBar(_.bind(function(t,i,a,o,r){var s=n.lang.get("LBL_SALES_STAGE","Forecasts");if(this.viewState.filters.get("group_by")==="probability"){s=n.lang.get("LBL_OW_PROBABILITY","Forecasts")+" (%)"}return"<p>"+s+": <b>"+t+"</b></p>"+"<p>"+n.lang.get("LBL_AMOUNT","Forecasts")+": <b>"+e(o.value)+"</b></p>"+"<p>"+n.lang.get("LBL_PERCENT","Forecasts")+": <b>"+i+"%</b></p>"},this)).colorData("default").colorFill("default").valueFormat(function(e){return t(e,2)}).barClick(function(e,t,i,n){return}).id(this.chartId).strings({legend:{close:n.lang.getAppString("LBL_CHART_LEGEND_CLOSE"),open:n.lang.getAppString("LBL_CHART_LEGEND_OPEN")},noData:n.lang.getAppString("LBL_CHART_NO_DATA")})},renderChart:function(){if(this.isManager&&this.viewState.visibility==="group"){this.showManagerData=true;this.convertManagerDataToChartData()}else{this.showManagerData=false;this.convertUserDataToChartData()}this.generateD3Chart()},convertUserDataToChartData:function(){_.each(this._serverData.data,function(e){if(_.has(e,"likely")&&isNaN(e.likely)){e.likely=0}if(_.has(e,"best")&&isNaN(e.best)){e.best=0}if(_.has(e,"worst")&&isNaN(e.worst)){e.worst=0}});var e=this.viewState.filters.get("group_by");var t=this.viewState.filters.get("dataset");var i=this.viewState.filters.get("ranges");var a=0;var o=[];var r=this._serverData["x-axis"].map(function(e,t){return{series:a,x:t+1,y:0}});var s={key:this._serverData.labels.dataset[t],type:"line",series:a,values:[],valuesOrig:[]};var l={properties:{name:this._serverData.title,yDataType:"currency",xDataType:"string",quota:parseFloat(this._serverData.quota),quotaLabel:n.lang.get("LBL_QUOTA","Forecasts"),groupData:this._serverData["x-axis"].map(function(e,t){return{group:t,l:e.label,t:0}})},data:[]};var c=this._serverData.data;var d=!_.isEmpty(i)?c.filter(function(e){return _.contains(i,e.forecast)}):c;_.each(this._serverData.labels[e],function(i,s){var c=d.filter(function(t){return t[e]==s});if(!_.isEmpty(c)){var u=this._serverData["x-axis"].map(function(e,t){return{series:a,x:t+1,y:0,y0:0}});var f=this._serverData["x-axis"];_.each(c,function(e){for(var i=0;i<f.length;i++){if(e.date_closed_timestamp>=f[i].start_timestamp&&e.date_closed_timestamp<=f[i].end_timestamp){var n=parseFloat(e[t]);u[i].y+=n;l.properties.groupData[i].t+=n;r[i].y+=n;break}}},this);o.push({key:i,series:a,type:"bar",values:u,valuesOrig:n.utils.deepCopy(u)});a++}},this);if(!_.isEmpty(o)){var u=0;_.each(r,function(e,t,i){i[t].y+=u;u=i[t].y});s.values=r;s.valuesOrig=n.utils.deepCopy(r);o.push(s);l.data=o}this.chartData=l},convertManagerDataToChartData:function(){var e=this.viewState.filters.get("dataset");var t=this._serverData.data;var i={properties:{name:this._serverData.title,quota:parseFloat(this._serverData.quota),quotaLabel:n.lang.get(this.viewState.filters.get("show_target_quota")?"LBL_QUOTA_ADJUSTED":"LBL_QUOTA","Forecasts"),groupData:t.map(function(t,i){return{group:i,l:t.name,t:parseFloat(t[e])+parseFloat(t[e+"_adjusted"])}})},data:[]};var a=[e,e+"_adjusted"].map(function(e,i){var n=t.map(function(t,n){return{series:i,x:n+1,y:parseFloat(t[e]),y0:0}});return{key:this._serverData.labels.dataset[e],series:i,type:"bar",values:n,valuesOrig:n}},this);var o=[e,e+"_adjusted"].map(function(e,i){var n=t.map(function(t,n){return{series:i,x:n+1,y:parseFloat(t[e])}});var a=0;_.each(n,function(e,t,i){i[t].y+=a;a=i[t].y});return{key:this._serverData.labels.dataset[e],series:i,type:"line",values:n,valuesOrig:n}},this);if(this.viewState.filters.get("show_target_quota")){i.properties.targetQuota=+this._serverData.target_quota;i.properties.targetQuotaLabel=n.lang.get("LBL_QUOTA","Forecasts")}i.data=a.concat(o);this.chartData=i},generateD3Chart:function(){if(!this._super())return;this.chart.barLegend.rowsCount(this._maxLegendRows);this.chart.lineLegend.rowsCount(this._maxLegendRows);this.chart.stacked(!this.showManagerData);d3.select(this.el).select(".nv-pareto").append("svg").datum(this.chartData).call(this.chart)},_onOrientationChange:function(){if(this.chart){if(this.chart.barLegend){this.chart.barLegend.rowsCount(this._maxLegendRows)}if(this.chart.lineLegend){this.chart.lineLegend.rowsCount(this._maxLegendRows)}this.dispatchChartMethod("tooltipHide");this.rerenderChart()}},buildChartUrl:function(){var e=this.options.parentModel;var t=e&&e.get("date_closed_timestamp");var i=t||this.viewState.filters.get("timeperiod_id");var n=[this.viewState.visibility==="group"?"ForecastManagerWorksheets":"ForecastWorksheets","chart",i,this.viewState.filters.get("user_id")];

return n.join("/")},onAfterRender:function(){this._super();this.$groupByFilter=this.$(".filter.group_by");if(this.viewState.visibility==="group"){this.$groupByFilter.hide()}}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(371);e.exports=a.extendView(o,"Bubblechart",{params:null,likelyField:"",filterDuration:null,responseDataAttr:"records",template:"bubblechart",initialize:function(e){this._super(e);var t=["id","name","account_name","base_rate","currency_id","assigned_user_name","date_closed","probability","account_id","sales_stage","commit_stage"];var i;this.dashletConfig=n.metadata.getView(null,"bubblechart");this.filterDuration=this.dashletConfig.filter_duration[0];this.setFilterDurationOptions();this.viewState.filtersDef.filter_duration=this.filterDuration;this.likelyField=this.forecastBy==="Opportunities"?"amount":"likely_case";t.push(this.likelyField);i=this.likelyField+":desc";this.params={fields:t.join(","),max_num:10,order_by:i};this.tooltiptemplate=n.template.getView("bubblechart-tooltip");this.setFilters({filter_duration:_.keys(this.viewState.filtersDef.filter_duration.options)[0]})},setFilterDurationOptions:function(){if(!_.isString(this.filterDuration.options)){return false}this.filterDuration.options=n.lang.getAppListStrings(this.filterDuration.options);if(_.isEmpty(this.filterDuration.options)){this.filterDuration.options=n.lang.getAppListStrings("generic_timeperiod_options")}},loadChartData:function r(e){this.setDateRange();var t=[{date_closed:{$gte:this.dateRange.begin}},{date_closed:{$lte:this.dateRange.end}}];if(!this.isManager||this.viewState.visibility==="user"){t.push({$owner:""})}var i=_.extend({filter:t},this.params);var o=n.api.buildURL(this.forecastBy,null,null,i,this.params);this.apiCall("read",o,null,a.utils.wrapAsyncCallback(e))},processData:function(e){this.evaluateResult(e);if(!_.isEmpty(e.records)){this._super(e)}this.$chartEl.toggle(!_.isEmpty(e.records));this.$dataUnavailableLbl.toggle(_.isEmpty(e.records))},prepareChartObject:function(){var e=this;this.chart=nv.models.bubbleChart().x(function(e){return d3.time.format("%Y-%m-%d").parse(e.x)}).y(function(e){return e.y}).tooltipContent(function(t,i,n,a,o){a.point.close_date=d3.time.format("%x")(d3.time.format("%Y-%m-%d").parse(a.point.x));a.point.amount=a.point.currency_symbol+d3.format(",.2d")(a.point.base_amount);return e.tooltiptemplate(a.point).replace(/(\r\n|\n|\r)/gm,"")}).showTitle(false).tooltips(true).showLegend(true).bubbleClick(function(t){n.controller.navigate(n.router.buildRoute(e.forecastBy,t.point.id),{initiator:e.navigationName})}).colorData("class",{step:2}).groupBy(function(t){return e.isManager&&e.viewState.visibility==="user"?t.sales_stage_short:t.assigned_user_name}).filterBy(function(e){return e.probability}).strings({legend:{close:n.lang.getAppString("LBL_CHART_LEGEND_CLOSE"),open:n.lang.getAppString("LBL_CHART_LEGEND_OPEN")},noData:n.lang.getAppString("LBL_CHART_NO_DATA")})},renderChart:function(){if(!this._super())return;this.chart.legend.rowsCount(this._maxLegendRows);d3.select(this.el).select(".nv-chart-bubble").append("svg").datum(this.chartData).transition().duration(500).call(this.chart)},evaluateResult:function(e){this.total=e.records.length;var t="sales_stage_dom";var i=n.metadata.getModule(this.forecastBy,"fields");if(i){t=i.sales_stage.options||t}this.chartData={data:e.records.map(function(e){var i=n.lang.getAppListStrings(t)[e.sales_stage]||e.sales_stage;return{id:e.id,x:e.date_closed,y:Math.round(parseInt(e[this.likelyField],10)/parseFloat(e.base_rate)),shape:"circle",account_name:e.account_name,assigned_user_name:e.assigned_user_name,sales_stage:i,sales_stage_short:i,probability:parseInt(e.probability,10),base_amount:parseInt(e[this.likelyField],10),currency_symbol:n.currency.getCurrencySymbol(e.currency_id)}},this),properties:{title:n.lang.getAppString("LBL_DASHLET_TOP10_SALES_OPPORTUNITIES_NAME"),value:e.records.length,xDataType:"datetime",yDataType:"string"}}},setDateRange:function(){var e=n.date();var t=this.getDateRangeDuration();var i;var a;var o;if(t===12){i=n.date().startOf("year");a=n.date().endOf("year")}else{o=Math.floor(e.month()/3)*3;i=n.date(new Date(e.year(),o+t,1));a=n.date(new Date(i.year(),i.month()+3,0))}this.dateRange={begin:i.format("YYYY-MM-DD"),end:a.format("YYYY-MM-DD")}},getDateRangeDuration:function(){var e=parseInt(this.viewState.filters.get("filter_duration"),10);var t={current:0,next:3,year:12};if(isNaN(e)){e=t[this.viewState.filters.get("filter_duration")]}return e}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(371);e.exports=a.extendView(o,"ForecastPipeline",{_isChartInitialized:false,forecastAdmin:false,forecastConfig:null,isForecastSetup:false,isForecastsConfigValid:false,forecastsNotSetUpMsg:null,template:"forecast-pipeline",initialize:function(e){this._super(e);this.forecastConfig=n.metadata.getModule("Forecasts","config");this.isForecastSetup=this.forecastConfig.is_setup;this.isForecastsConfigValid=a.utils.isForecastConfigValid();this.forecastAdmin=_.isUndefined(n.user.getAcls().Forecasts.admin);this.salesStageLabels=n.lang.getAppListStrings("sales_stage_dom");if(!this.isForecastSetup){if(_.isEmpty(n.metadata.getModule("Forecasts").views)){this.forecastsNotSetUpMsg=a.utils.getForecastNotSetUpMessage(this.forecastAdmin)}else{this.viewState.filtersDef.timeperiod=n.utils.deepCopy(n.metadata.getModule("Forecasts").views["forecast-pipeline"].meta.timeperiod[0]);this.viewState.filtersDef.timeperiod.options=n.lang.getAppListStrings("generic_timeperiod_options");this.setFilters({selectedTimePeriod:this.viewState.filtersDef.timeperiod.options[0]});this._isChartInitialized=true}}},loadData:function r(){var e=!n.metadata.getModule("Opportunities");var t=!n.acl.hasAccess("view","Opportunities");var i=!_.contains(n.metadata.getModuleNames({filter:"visible"}),"RevenueLineItems");if(e||t&&i){this.loadDataError(this.ERR_NO_DATA_AVAILABLE)}else if(this.forecastsNotSetUpMsg){this.hidePreloader()}else{this._super()}},loadInitData:function s(e){var t=this;async.parallel({loadTimeperiodOptions:function i(e){t.apiCall("read",n.api.buildURL("Forecasts/enum/selectedTimePeriod"),null,a.utils.wrapAsyncCallback(e))},loadCurrentTimeperiod:function o(e){t.apiCall("GET",n.api.buildURL("TimePeriods/current"),null,a.utils.wrapAsyncCallback(e))}},function r(i,a){if(i){e.apply(this,arguments);return}t.viewState.filtersDef.timeperiod=n.utils.deepCopy(n.metadata.getModule("Forecasts").views["forecast-pipeline"].meta.timeperiod[0]);t.viewState.filtersDef.timeperiod.options=a.loadTimeperiodOptions;t.setFilters({selectedTimePeriod:a.loadCurrentTimeperiod.id});t._isChartInitialized=true;t.render();e(null,a)})},loadChartData:function l(e){var t=[this.forecastBy,"chart","pipeline"];var i;t.push(this.viewState.filters.get("selectedTimePeriod"));t.push(this.viewState.visibility);i=n.api.buildURL(t.join("/"));this.apiCall("GET",i,null,a.utils.wrapAsyncCallback(e))},processData:function(e){if(e&&e.data&&this.salesStageLabels){_.each(e.data,function(e){if(e&&e.key&&this.salesStageLabels[e.key]){e.key=this.salesStageLabels[e.key]}},this)}this.chartData=e;this._super(e)},prepareChartObject:function(){var e=this;var t=this.getUserCurrencyFormatter();this.chart=nv.models.funnelChart().showTitle(false).tooltips(true).wrapLabels(false).tooltipContent(function(e,i,n,a,o){return"<p>"+SUGAR.App.lang.get("LBL_SALES_STAGE","Forecasts")+": <b>"+e+"</b></p>"+"<p>"+SUGAR.App.lang.get("LBL_AMOUNT","Forecasts")+": <b>"+t(n)+"</b></p>"+"<p>"+SUGAR.App.lang.get("LBL_PERCENT","Forecasts")+": <b>"+i+"%</b></p>"}).colorData("class",{step:2}).fmtValue(function(e){var i=e.value||(isNaN(e)?0:e);return t(i)}).strings({legend:{close:n.lang.getAppString("LBL_CHART_LEGEND_CLOSE"),open:n.lang.getAppString("LBL_CHART_LEGEND_OPEN")},noData:n.lang.getAppString("LBL_CHART_NO_DATA")})},renderChart:function(){if(!this._super())return;this.chart.legend.rowsCount(this._maxLegendRows);d3.select(this.el).select(".nv-funnelChart").append("svg").datum(this.chartData).transition().duration(500).call(this.chart)}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(369);e.exports=a.extendView(o,"SavedReportsChart",{responseDataAttr:"chartData",template:"saved-reports-chart",initialize:function(e){this._super("initialize",arguments);this.chartId=Math.floor(Math.random()*1e4)},loadChartData:function r(e){var t=this.meta.view.saved_report_id;this.apiCall("create",n.api.buildURL("Reports/chart/"+t),null,a.utils.wrapAsyncCallback(e))},isDataEmpty:function(e){if(this._super(e)){return true}var t=e.chartData.properties[0].type;var i=this.getChartConfig(t);var n=this._getDataAttribute(i);return _.isEmpty(e.chartData[n])},processData:function(e){if(e&&e.chartData){this.rawChartData=e.chartData}this._super(e)},prepareChartObject:function(){var e=this.rawChartData;var t={minColumnWidth:120,show_title:true,show_legend:true,show_controls:false,show_tooltips:true,show_y_label:false,y_axis_label:"",show_x_label:false,x_axis_label:"",wrapTicks:true,staggerTicks:true,rotateTicks:true,reduceXTicks:false,overflowHandler:false,allowScroll:false,vertical:true,showValues:false,hideEmptyGroups:true,stacked:true,colorData:"default",margin:{top:10,right:10,bottom:10,left:10}};var i=e.properties[0].type;if(n.supportedFeatures.configurableSavedReportsChart){_.extend(t,this.meta.view);i=this.meta.view.chart_type}var a=this.getChartConfig(i);this.chartData=this.translateDataToD3(e,t,a);this.chart=this.getChartModel(t,a);this.chart.id(this.chartId).margin(t.margin).showTitle(t.show_title).showLegend(t.show_legend).tooltips(t.show_tooltips).tooltipContent(function(e,t,i,n,a){return"<h3>"+e+"</h3>"+"<p>"+i+"</p>"}).colorData(t.colorData).strings({legend:{close:n.lang.get("LBL_CHART_LEGEND_CLOSE"),open:n.lang.get("LBL_CHART_LEGEND_OPEN")},noData:n.lang.get("LBL_CHART_NO_DATA")});if(a.ReportModule){this.chart.legend.showAll(true)}},renderChart:function(){if(!this._super())return;this.chart.legend.rowsCount(this._maxLegendRows);d3.select(this.el).select(".nv-chart-reports").append("svg").datum(this.chartData).transition().duration(500).call(this.chart);this.$el.on("touchcancel",function(e){var t=d3.select(window);_.each(_.keys(window),function(e){var i=e.match(/^__on((?:touch|drag|select).+)$/);i&&t.on(i[1],null)})})},getChartModel:function(e,t){var i;switch(t.chartType){case"pieChart":i=nv.models.pieChart();break;case"funnelChart":i=nv.models.funnelChart();break;case"lineChart":i=nv.models.lineChart();i.useVoronoi(true).clipEdge(false).wrapTicks(e.wrapTicks).staggerTicks(e.staggerTicks).rotateTicks(e.rotateTicks);if(e.show_x_label){i.xAxis.axisLabel(e.x_axis_label)}if(e.show_y_label){i.yAxis.axisLabel(e.y_axis_label)}var n=[];var a=function(e){return e};var o=function(e){return e[0]};var r=function(e){return e[1]};if(this.chartData.data.length){if(this.chartData.properties.labels){n=this.chartData.properties.labels.map(function(e){return e.l||e})}if(this.chartData.data[0].values.length&&this.chartData.data[0].values[0]instanceof Array){if(nv.utils.isValidDate(this.chartData.data[0].values[0][0])){a=function(e){return d3.time.format("%x")(new Date(e))}}else if(n.length>0){a=function(e){return n[e]||" "}}}else{o=function(e){return e.x};r=function(e){return e.y};if(n.length>0){a=function(e){return n[e-1]||" "}}}}i.x(o).y(r);i.xAxis.tickFormat(a).highlightZero(false).reduceXTicks(false);break;case"barChart":i=nv.models.multiBarChart().vertical(t.orientation==="vertical"?true:false).stacked(t.barType==="stacked"?true:true).showControls(e.show_controls).showValues(e.showValues).wrapTicks(e.wrapTicks).staggerTicks(e.staggerTicks).rotateTicks(e.rotateTicks).reduceXTicks(e.reduceXTicks);i.yAxis.tickSize(0);if(e.show_x_label){i.xAxis.axisLabel(e.x_axis_label)}if(e.show_y_label){i.yAxis.axisLabel(e.y_axis_label)}break;default:i=nv.models.multiBarChart();break}return i},getChartConfig:function(e){var t;switch(e){case"pie chart":t={pieType:"basic",tip:"name",chartType:"pieChart"};break;case"line chart":t={lineType:"basic",tip:"name",chartType:"lineChart"};break;case"funnel chart":case"funnel chart 3D":t={lineType:"basic",tip:"name",chartType:"funnelChart"};break;case"stacked group by chart":t={orientation:"vertical",barType:"stacked",tip:"title",chartType:"barChart"};break;case"group by chart":t={orientation:"vertical",barType:"grouped",tip:"name",chartType:"barChart"};break;case"bar chart":t={orientation:"vertical",barType:"basic",tip:"label",chartType:"barChart"};break;case"horizontal group by chart":t={orientation:"horizontal",barType:"stacked",tip:"name",chartType:"barChart"};break;case"horizontal bar chart":case"horizontal":t={orientation:"horizontal",barType:"basic",tip:"label",chartType:"barChart"};break;default:t={orientation:"vertical",barType:"stacked",tip:"name",chartType:"barChart"};break}this.chartType=t.chartType;return t},translateDataToD3:function(e,t,i){var a=[];var o=0;var r=n.lang.get("LBL_CHART_UNDEFINED");var s=this._getDataAttribute(i);var l=e[s];var c;var d;function u(e){return e.reduce(function(e,t){return parseFloat(e)+parseFloat(t)},0)}function f(e){var t=[].concat(e)[0];return t?t:r}if(e.values.filter(function(e){return e.values&&e.values.length}).length){switch(i.chartType){case"barChart":d=d3.max(e.values,function(e){return e.values.length})===1;c=i.barType==="stacked"||i.barType==="grouped"?d?function(i,n){return{key:t.report_module||"Module",type:"bar",values:e.values.map(function(e,t){return{x:t+1,y:u(e.values)}})}}:function(t,i){return{key:f(t),type:"bar",values:e.values.map(function(e,t){return{x:t+1,y:parseFloat(e.values[i])||0}})}}:function(t,i){return{key:t.values.length>1?t.label:f(t.label),type:"bar",values:e.values.map(function(e,t){return{x:t+1,y:i===t?u(e.values):0}})}};break;case"pieChart":c=function(e,t){return{key:f(e.label),value:u(e.values)}};break;case"funnelChart":l=e[s].reverse();c=function(e,t){return{key:f(e.label),count:e.values.length,values:[{label:e.valuelabels[0]?e.valuelabels[0]:e.values[0],x:0,y:u(e.values)}]}};break;case"lineChart":d=d3.max(e.values,function(e){return e.values.length})===1;c=function(e,t){return{key:f(e.label),values:d?e.values.map(function(e,i){return[t,parseFloat(e)]}):e.values.map(function(e,t){return[t,parseFloat(e)]})}};break}}if(c){a=l.map(c)}return{properties:{title:this.meta.view.report_title,yDataType:e.properties[0].yDataType,groups:i.chartType==="gaugeChart"?[{group:1,total:o}]:i.chartType==="lineChart"&&e.label?e.label.map(function(e,t){return{label:f(e)}}):e.values.filter(function(e){return e.values.length}).map(function(e,t){return{label:f(e.label)}})},data:a}},_getDataAttribute:function(e){var t;switch(e.chartType){case"barChart":t=e.barType==="stacked"||e.barType==="grouped"?"label":"values";break;default:t="values";break}return t}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(371);e.exports=a.extendView(o,"Forecastdetails",{className:"chart-wrapper has-scroll",template:"forecastdetails",forecastConfig:null,isForecastSetup:false,isForecastsConfigValid:false,forecastsNotSetUpMsg:false,isAdmin:false,isTopLevelManager:false,showTargetQuota:false,spanCSS:"",detailsDataSet:null,responseDataAttr:null,initialize:function(e){this._super(e);this.forecastConfig=n.metadata.getModule("Forecasts","config");this.isForecastSetup=this.forecastConfig.is_setup;this.isForecastsConfigValid=a.utils.isForecastConfigValid();this.isAdmin=_.isUndefined(n.user.getAcls().Forecasts.admin);if(this.isForecastSetup){this.serverData=n.data.createBean("Forecasts");this.model=n.data.createBean("Forecasts");var t=this.forecastBy==="RevenueLineItems"?"likely_case":"amount";this.fieldDataAccess={likely:n.acl.hasAccess("read",this.forecastBy,n.user.get("id"),t),best:n.acl.hasAccess("read",this.forecastBy,n.user.get("id"),"best_case"),worst:n.acl.hasAccess("read",this.forecastBy,n.user.get("id"),"worst_case")};this.spanCSS=_.compact([this.forecastConfig.show_worksheet_likely,this.forecastConfig.show_worksheet_best,this.forecastConfig.show_worksheet_worst]).length;this.spanCSS=_.compact([this.forecastConfig.show_worksheet_likely,this.forecastConfig.show_worksheet_best,this.forecastConfig.show_worksheet_worst]).length;this.model.set({opportunities:0,spanCSS:this.spanCSS,isForecastSetup:this.isForecastSetup,isForecastAdmin:this.isForecastAdmin});this.isTopLevelManager=n.user.get("is_top_level_manager");this.showTargetQuota=this.isManager&&!this.isTopLevelManager;this.detailsDataSet=this.getDetailsDataSet()}else{this.forecastsNotSetUpMsg=a.utils.getForecastNotSetUpMessage(this.isAdmin)}},onAfterRender:function(){this._super();this.$chartEl=this.$(".fd__wrapper")},loadData:function r(e){if(this.isForecastSetup){this._super(e)}else{this.hidePreloader()}if(!this.loaded&&!e){this.$chartEl.hide()}},loadInitData:function s(e){var t=this;var i=this.options.parentModel;var o;if(i&&!i.inSync){i.once("sync",function(){t.loadInitData(e)}).fetch();return}o=i&&i.get("date_closed")||"current";async.parallel({loadTimeperiodOptions:function r(e){t.apiCall("read",n.api.buildURL("Forecasts/enum/selectedTimePeriod"),null,a.utils.wrapAsyncCallback(e))},loadCurrentTimeperiod:function s(e){t.apiCall("GET",n.api.buildURL("TimePeriods/"+o),null,a.utils.wrapAsyncCallback(e))}},function l(i,a){if(i){e.apply(this,arguments);return}t.viewState.filtersDef.timeperiod=n.metadata.getView(null,"forecastdetails").timeperiod[0];t.viewState.filtersDef.timeperiod.options=a.loadTimeperiodOptions;t.setFilters({timePeriods:a.loadCurrentTimeperiod.id,selectedTimePeriod:a.loadCurrentTimeperiod.id});t._isChartInitialized=true;e(null,a)})},loadChartData:function(e){var t=this.buildChartUrl();this.apiCall("read",t,null,a.utils.wrapAsyncCallback(e))},processData:function(e){e=this.adjustDashletData(e);this.calculateData(e);this.render();this.applyCSSChanges();this.hidePreloader();this.$chartEl.show()},getDetailsDataSet:function(){var e=n.metadata.getStrings("app_list_strings").forecasts_options_dataset||[];var t={};_.each(e,function(e,i){if(this.forecastConfig["show_worksheet_"+i]===1){t[i]=e}},this);return t},buildChartUrl:function(){var e=this.isManager?"progressManager":"progressRep";var t=["Forecasts",this.viewState.filters.get("selectedTimePeriod"),e,n.user.get("id")];var i={};if(this.isManager){i={target_quota:this.showTargetQuota?1:0}}return n.api.buildURL(t.join("/"),"create",null,i)},adjustDashletData:function(e){if(this.isManager){e.likely=e.likely_adjusted||e.likely_case;e.best=e.best_adjusted||e.best_case;e.worst=e.worst_adjusted||e.worst_case}else{e.likely=e.amount;e.best=e.best_case;e.worst=e.worst_case;e.closed_amount=e.won_amount;if(_.isUndefined(e.closed_amount)){delete e.closed_amount}}return e},calculateData:function(e){this.serverData.set(e);var t=_.extend({},e,this.serverData.toJSON());var i=this.forecastConfig;var a=n.user.getPreference("currency_id");this.likelyTotal=t.likely;this.bestTotal=t.best;this.worstTotal=t.worst;t.quota_amount_str=n.currency.formatAmountLocale(t.quota_amount,a);t.closed_amount_str=n.currency.formatAmountLocale(t.closed_amount,a);if(this.showTargetQuota){t.target_quota_amount_str=n.currency.formatAmountLocale(t.target_quota_amount,a)}else{this.serverData.unset("target_quota_amount_str")}t.showTargetQuota=this.showTargetQuota;t.deficit_amount=Math.abs(n.math.sub(t.quota_amount,t.closed_amount));t.deficit_amount_str=n.currency.formatAmountLocale(t.deficit_amount,a);t.is_deficit=parseFloat(t.quota_amount)>parseFloat(t.closed_amount);var o=t.is_deficit?"LBL_FORECAST_DETAILS_DEFICIT":"LBL_FORECAST_DETAILS_SURPLUS";t.deficit_label=n.lang.get(o,"Forecasts");t.detailsOpts=[];if(i.show_worksheet_worst){t.detailsOpts.push(this.getDetailsForCase("worst",this.worstTotal,t.quota_amount,t.closed_amount))}if(i.show_worksheet_likely){t.detailsOpts.push(this.getDetailsForCase("likely",this.likelyTotal,t.quota_amount,t.closed_amount))}if(i.show_worksheet_best){t.detailsOpts.push(this.getDetailsForCase("best",this.bestTotal,t.quota_amount,t.closed_amount))}if(this.isManager&&!_.isEmpty(n.user.get("reports_to_id"))){t.quota_label=n.lang.get("LBL_QUOTA_ADJUSTED","Forecasts")}else{t.quota_label=n.lang.get("LBL_QUOTA","Forecasts")}this.model.set(t,{silent:true})},getDetailsForCase:function(e,t,i,a){var o={};var r=parseFloat(n.math.add(t,a));var s=parseFloat(i);var l=0;var c=n.user.getPreference("currency_id");o.label=n.lang.get("LBL_"+e.toUpperCase(),"Forecasts");o.spanCSS=this.spanCSS;o.case=e;o.shortOrExceed="&nbsp;";o.openPipeline="&nbsp;";o.feedbackLn1="";o.feedbackLn2="";o.hasAccess=true;if(!this.isManager&&!this.fieldDataAccess[e]){o.hasAccess=false}if(o.hasAccess){if(t){o.amount=n.currency.formatAmountLocale(t,c);o.labelAmount=o.label+": "+o.amount.toString()}if(r===0&&s===0){o.amount=n.lang.get("LBL_FORECAST_DETAILS_NO_DATA","Forecasts")}else if(r!==0&&s!==0&&r===s){o.shortOrExceed=n.lang.get("LBL_FORECAST_DETAILS_MEETING_QUOTA","Forecasts")}else{if(r>s){o.shortOrExceed=n.lang.get("LBL_FORECAST_DETAILS_EXCEED","Forecasts");l=n.math.sub(r,s)}else{o.shortOrExceed=n.lang.get("LBL_FORECAST_DETAILS_SHORT","Forecasts");l=n.math.sub(s,r)}o.percent=this.getPercent(l,s);o.openPipeline="("+n.currency.formatAmountLocale(l,c)+")"}o.feedbackLn1=o.shortOrExceed;if(o.percent){o.feedbackLn1+=" "+o.percent}o.feedbackLn2=o.openPipeline}return o},applyCSSChanges:function(){this.checkPropertySetCSS("worst");this.checkPropertySetCSS("likely");this.checkPropertySetCSS("best");var e=this.model.get("is_deficit");var t="";if(e){t=this.getClassBasedOnAmount(0,1,"color")}else{t=this.getClassBasedOnAmount(1,0,"color")}if(t!==""){this.$el.find(".deficitRow").addClass(t)}},checkPropertySetCSS:function(e){if(this.forecastConfig["show_worksheet_"+e]&&(this.isManager||!this.isManager&&this.fieldDataAccess[e])){var t=this.getClassBasedOnAmount(n.math.add(this.serverData.get(e),this.serverData.get("closed_amount")),this.model.get("quota_amount"),"background-color");if(t!==""){this.$el.find(".forecast_details_"+e+"_feedback").addClass(t)}}},getClassBasedOnAmount:function(e,t,i){var n="";e=parseFloat(e);t=parseFloat(t);if(i==="color"){if(e===t){}else if(e>t){n="font-green"}else{n="font-red"}}else if(i==="background-color"){if(e===t&&e!==0){n="grayLight"}else if(e>t){n="green"}else if(e<t){n="red"}}return n},getPercent:function(e,t){var i=0;if(t>0&&e>0){i=e/t*100;if(i>1){i=Math.round(i)}else{i=Math.round(i*100)/100}}return Math.abs(i)+"%"}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(354);var r=i(378);e.exports=a.extendView(o,"TwitterContainerDashletView",{className:"twitter-wrapper",getListDef:function(e,t){var i=_.extend({parentModel:t.parentModel},e,t.listParams);return{name:r,layout:t.layout,listParams:i,skipFetch:true,contextMenuOnSwipeDisabled:true,listItemTpl:"twitter-list-item",loadDataFn:function(e){this.loadTwitterData(e)}}}})},function(e,t,i){"use strict";var n=SUGAR.App;var a=i(257);var o=i(263);var r=i(356);var s=i(379);var l=function c(e,t,i){var a=n.utils.formatString(e,[i.id]);o.openUrl(a)};e.exports=a.extendView(r,"TwitterList",{basicMenuActions:[{name:"reply",types:["context-menu"],label:"LBL_TWITTER_REPLY",iconKey:"actions.reply",handler:function d(e,t){l(e._urlTweetReply,e,t)}},{name:"retweet",types:["context-menu"],label:"LBL_TWITTER_RETWEET",iconKey:"actions.retweet",handler:function u(e,t){l(e._urlRetweet,e,t)}},{name:"favorite",types:["context-menu"],label:"LBL_TWITTER_FAVORITE",iconKey:"actions.favorite",handler:function f(e,t){l(e._urlTweetFavorite,e,t)}}],_urlTweetReply:"https://twitter.com/intent/tweet?in_reply_to={0}",_urlRetweet:"https://twitter.com/intent/retweet?tweet_id={0}",_urlTweetFavorite:"https://twitter.com/intent/favorite?tweet_id={0}",_urlTweetOpen:"https://twitter.com/{0}/status/{1}",_urlTwitterProfile:"https://twitter.com/{0}",isPaginationEnabled:false,initialize:function h(e){this.connectorCriteria=["eapm_bean","test_passed"];this._super(e)},navigateOnClick:function p(e,t){var i=n.utils.formatString(this._urlTweetOpen,[t.screen_name,t.id]);o.openUrl(i)},refresh:function m(e){this.loaded=false;this.collection.resetOptions();this.loadTwitterData(e)},loadTwitterData:function g(e){if(this.loaded){return}this.tried=false;this._checkConnector(e)},loadDataWithValidConnector:function v(e,t){var i=this;t=t||{};var a=function o(t,a,r,l){if(!i.getTwitterName()){return}var c=parseInt(i.listParams.limit||n.config.maxQueryResult);var d=n.api.buildURL("connector/twitter","",{id:i.twitter},{count:c,connectorHash:e.connectorHash});var u=l.success;var f=l.error;l.success=function(e,t){if(_.isArray(e)){_.each(e,function(e){e=_.extend(e,i.processRawTweet(e))},this)}else{e=[]}if(u)u({next_offset:-1,records:e},t)};l.error=function(e){if(u)u({next_offset:-1,records:[]},e.request);if(e.code){if(!i.tried){i.tried=true;s.getConnectors("ext_rest_twitter",_.bind(i._checkConnector,i))}else{i.handleLoadError(null)}}else{f(e)}};return n.api.call("read",d,null,l)};this.collection.fetch({endpoint:a,complete:function r(){i.loaded=true;if(_.isFunction(t.complete)){t.complete()}}})},_checkConnector:function b(e){var t=this;s.checkConnector({name:"ext_rest_twitter",criteria:this.connectorCriteria,success:function i(n){t.loadDataWithValidConnector(n,e)},error:function n(i){t.handleLoadError(i);if(e&&e.complete){e.complete()}}})},processRawTweet:function x(e){var t=n.date(e.created_at,"ddd MMM DD HH:mm:ss Z YYYY").toDate();var i=e.retweeted_status?"RT @"+e.retweeted_status.user.screen_name+": "+e.retweeted_status.text:e.text;var a=e.source;var o=e.id_str;var r=e.user.name;var s=i.split(" ");var l=e.user.screen_name;var c=n.utils.formatString(this._urlTwitterProfile,[e.user.screen_name]);var d=e.user.profile_image_url_https;var u;var f=new Date;var h=(f.getTime()-t.getTime())/(1e3*60*60*24);var p=h>1;for(u=0;u<s.length;u++){if(s[u].charAt(0)==="h"&&s[u].charAt(1)==="t"){s[u]="<a class='tw__as_content_url' href="+'"'+s[u]+'"'+" target='_blank'>"+s[u]+"</a>"}}i=s.join(" ");return{id:o,name:r,screen_name:l,tw_profile_url:c,tw_profile_image_url:d,text:i,source:a,date:t,useAbsTime:p}},handleLoadError:function y(e){var t=n.lang.get("LBL_CONFIGURE_TWITTER");if(!e&&this.twitter){t=n.lang.get("LBL_ERROR_CANNOT_FIND_TWITTER")+this.twitter}else if(e&&!e.test_passed&&e.testing_enabled){t=n.lang.get("LBL_CONNECT_TEST_FAIL")}this.$(".no-records-found").show();n.alert.show("twitter_error",{level:"error",messages:t,autoClose:true})},getTwitterName:function E(){var e=this.listParams;var t=e.parentModel;var i;var n;if(e.twitter){i=e.twitter}else if(t){n=s.getConnectorModuleFieldMapping("ext_rest_twitter",t.module)||{};i=t.get("twitter")||t.get(n.name)||t.get("name")||t.get("account_name")||t.get("full_name")}if(i){i=i.replace(/ /g,"");this.twitter=i}return i}})},function(e,t){"use strict";var i=SUGAR.App;function n(e,t){var i=void 0;var n=void 0;if(e){i=_.every(t.criteria,function(t){return t==="test_passed"?e.testing_enabled&&e.test_passed:e[t]});e._isValid=i}n=i?t.success:t.error;n(e)}e.exports={checkConnector:function a(e){var t=e.name;var a=i.session.get("connectors");var o=a&&a[t];if(o&&o._isValid){n(a[t],e)}else{this.getConnectors(function(i){return n(i[t],e)})}},getConnectorModuleFieldMapping:function o(e){var t=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];t=i.session.get("connectors")[t];var n=_.getNested(t,"field_mapping.beans",{})[e]||{};return n},getConnectors:function r(e){var t=i.api.buildURL("connectors");i.api.call("GET",t,{},{success:function n(t){var n=_.omit(t.connectors,"_hash")||{};_.each(n,function(e){e.connectorHash=t._hash;e._isValid=true});i.session.set("connectors",n);e(n)}})}}},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(263);var r=i(298);e.exports=a.extendView(r,"Webpage",{className:"dashlet-webpage",template:"webpage",events:{"click .wp__container":function(e){e.preventDefault();o.openWebPage(this.url)}},initialize:function(e){this.url=a.utils._normalizeUrl(e.meta.view.url);this.title=e.meta.view.title;this._super(e)},onInvokedFromDashboard:function(){o.openWebPage(this.url)}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(369);e.exports=a.extendView(o,"Donutchart",{template:"donutchart",initialize:function(e){this.metricsCollection=null;this.total=0;this._super(e);this._prepareChartObject()},render:function(){this._super();if(this.hasChartData()){this.renderChart();this.toggleDashletSwipe()}else{this.displayNoData(true)}},hasChartData:function(){return this.total!==0},displayNoData:function(e){if(e){this.$chartEl.hide();this.$dataUnavailableLbl.show()}else{this.$chartEl.show();this.$dataUnavailableLbl.hide()}},processData:function(e){this.evaluateResult(e);this.render()},_prepareChartObject:function(){this.chart=nv.models.pieChart().x(function(e){return e.key}).y(function(e){return e.value}).margin({top:0,right:0,bottom:5,left:0}).donut(true).donutLabelsOutside(true).donutRatio(.447).rotateDegrees(0).arcDegrees(360).maxRadius(110).hole(this.total).showTitle(false).tooltips(true).showLegend(false).colorData("data").direction(n.lang.direction).valueFormat(_.bind(function(e){return this._valueFormat(e)},this)).labelFormat(_.bind(function(e){return this._labelFormat(e)},this)).tooltipContent(function(e,t,i,n,a){return"<p><b>"+e+" "+(n.point.valueLabel?n.point.valueLabel:parseInt(i,10))+"</b></p>"}).strings({noData:n.lang.get("LBL_CHART_NO_DATA")})},renderChart:function(){if(!this._super()){this.displayNoData(true);return}this.chart.hole(this.total);d3.select(this.el).select(".nv-chart-donut").append("svg").datum(this.chartData).transition().duration(500).call(this.chart)},_valueFormat:function(e){var t=e.data?this.chart.pie.y()(e.data):e;return nv.utils.numberFormatSI(t,2,false)},_labelFormat:function(e){var t=e.data?this.chart.pie.x()(e.data):e;return t}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(381);e.exports=a.extendView(o,"OpportunityMetrics",{template:"donutchart",className:"opportunity-metrics-wrapper",initialize:function(e){this._super(e);this.parentModel=e.parentModel||{}},loadChartData:function r(e){var t=n.api.buildURL(this.parentModel.module,"opportunity_stats",{id:this.parentModel.get("id")});this.apiCall("read",t,null,a.utils.wrapAsyncCallback(e))},evaluateResult:function(e){var t=0;_.each(e,function(i,a){e[a].formattedAmount=n.currency.formatAmountLocale(i.amount_usdollar,null,0);e[a].cssClass=a==="won"?"won":a==="lost"?"lost":"active";e[a].dealLabel=a;e[a].stageLabel=n.lang.getAppListStrings("opportunity_metrics_dom")[a];t+=i.count});this.total=t;this.metricsCollection=e;this.chartData={data:_.map(this.metricsCollection,function(e,t){return{key:e.stageLabel,value:e.count,classes:t}})}},isDataEmpty:function(e,t){var i=_.isEmpty(e);var n=0;e=e||{};_.each(e,function(e,t){n+=e.count});return n===0}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(370);e.exports=a.extendView(o,"CasesSummary",{getListDef:function(e,t){var i=this._super(e,t);var a=n.metadata.getModule("Cases","fields").status.options;var o=n.lang.getAppListStrings(a);i.title=o[e.status];return i}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(283);e.exports=a.extendField(o,"Bool",{events:{"touchstart .checkbox_custom":"onTouchCheckbox"},format:function(e){return e=="1"},onBeforeRender:function(){this._super();if(this.model&&this.view.isEditView()&&!this.model.has(this.name)){this.model.set(this.name,false,{silent:true})}},unformat:function(){return!!this.$(this.fieldTag)[0].checked},onTouchCheckbox:function(e){e.stopPropagation()}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(283);e.exports=a.extendField(o,"Int",{isFloat:false,fieldType:"text",initialize:function(e){this._super(e);if($.os.ios){this.fieldType="number";this.events=_.extend({"keypress ._numeric":"onNumericKeyPress"},this.events);this.events=_.extend({"paste ._numeric":"onItemPaste"},this.events)}else if($.os.android){this.fieldType="tel"}},onItemPaste:function(e){var t=e.target;var i=$(t).val();_.delay(function(){var e=$(t).val();if(_.isEmpty(e)){$(t).val(i)}},1)},onNumericKeyPress:function(e){var t=e.keyCode||e.which;if(t===46&&this.isFloat){var i=$(e.target).val();if(i===""){$(e.target).val("0")}else if(i.indexOf(".")>-1){
e.preventDefault();return false}}else if(t<48||t>57){e.preventDefault();return false}},format:function(e){if(!e&&e!==0||_.isString(e)&&e.trim().length===0)return"";if(!isNaN(e)){var t="";if(this.action!=="edit"&&this.action!=="create"||this.tplName==="readonly"){t=this.def.disable_num_format?"":this.def.number_group_seperator||n.user.getPreference("number_grouping_separator")}e=n.utils.formatNumber(e,null,this.isFloat?this.def.precision||n.user.getPreference("decimal_precision"):0,t,this.def.decimal_seperator||n.user.getPreference("decimal_separator"));if(this.isFloat){this.model.set(this.name,this.unformat(e),{silent:true})}}return e},unformat:function(e){var t=n.utils.unformatNumberStringLocale(e.toString(),this.isFloat);return t===""||isNaN(t)?e:t}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(385);var r=i(258);e.exports=a.extendField(o,"Currency",{events:{"change select":"onCurrencySelection"},isFloat:true,initialize:function(e){this._super(e);if(this.context.isCreate()&&n.metadata.getCurrency(n.user.getPreference("currency_id")).status==="Active"){this.model.set("currency_id",n.user.getPreference("currency_id"),{silent:true})}},onBeforeRender:function(){this._super();if(_.isEmpty(this.model.get("currency_id"))){this.model.set("currency_id",n.user.getPreference("currency_id")||"-99",{silent:true})}this.availableCurrencies=this._getCurrencies()},_getCurrencies:function(){var e=this.model;var t=e.get("currency_id");var i=n.user.getPreference("currency_id");var a={};var o=n.metadata.getCurrencies();var r;_.each(o,function(e,i){var n=_.clone(e);n.id=i;if(n.status==="Active"){a[i]=n;r=n}else if(n.id===t){n.disabled=true;a[i]=n}});var s="-99";if(t&&_.has(a,t)){s=t}else if(_.has(a,i)){s=i}var l=a[s]||r;if(l){l.selected="selected"}return a},onAfterRender:function(){var e=this;this._super();if(n.supportedFeatures.enumViaActionSheet){var t=[];_.each(this.availableCurrencies,function(e){t.push(e.iso4217)});this.$ct=this.$el.find(".actionsheet-select");this.$ct.bind("click",function(){r.showActionSheet(t,{title:e.label,onSelectCb:function i(t){var i=null;_.each(e.availableCurrencies,function(e,n){if(e.iso4217===t){i=n}});e.$ct.attr("value",i);e.$ct.text(t);e.onCurrencySelection()}})})}else{this.$ct=$("select",this.$el)}if(!this.model.get("currency_id")&&this.context.isCreate()){this.model.changeCurrencyId(this.$ct.val()||this.$ct.attr("value"),{silent:true})}},format:function(e){if(!e&&e!==0||_.isString(e)&&e.trim().length===0)return"";var t=e;if(!isNaN(parseFloat(n.currency.unformatAmountLocale(e)))){var i=this.model.get("currency_id");var a=n.user.getPreference("currency_id");if(_.contains(["list","list-associate"],this.action)&&i!==a){t=n.currency.formatAmountLocale(e,i)}else if((this.action==="edit"||this.action==="create")&&this.tplName!=="readonly"){var o=n.user.getPreference("decimal_separator");var r=n.user.getPreference("decimal_precision");var s=n.currency.formatAmount(e,i,r,"",o);var l=n.currency.getCurrencySymbol(i);t=s.replace(l,"")}else{t=n.currency.formatAmountLocale(e,i)}}return t},onCurrencySelection:function(){this.model.changeCurrencyId(this.$ct.val()||this.$ct.attr("value"));var e=this.format(this.model.get(this.name));this.$("input").val(e)},onFieldChange:function(){this.model.set(this.name,this.unformat(this._$fieldEl.val()),{disableRenderForContext:this.view})}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(263);var r=i(283);var s=a.extendField(r,"Date",{events:function(){var e={"focusout input":"onBlur"};if(n.isNative&&!s.nativeSupport){e["click input"]="onClick"}var t=$.os.desktop?"click":"touchstart";e[t+" .clear-button"]="onClear";return e},validDateRE:/^\d{4}-\d{2}-\d{2}$/,ONCLICK_BLOCKER_TIMEOUT:2e3,initialize:function(e){this._super(e);if(!s._dateFormat){s.initFormat()}this.setFormatting()},onBeforeRender:function(){this._super();this.setDefaultValue();this.setClearButtonVisibility()},onAfterRender:function(){this._super();this.placeholder=this.$el.find(".placeholder").eq(0);this.setControls();this.toggleControls()},bindDomChange:function(){if(!this.model){return}this.setInputs();if(s.nativeSupport){this.dateInput.on($.browser.chromeWeb?"change":"blur",_.bind(this.handleValueChange,this))}},format:function(e){if(_.isEmpty(e)||this.isFormView()&&s.nativeSupport&&!this.isReadOnly()){if(e&&!this.validDateRE.test(e)){var t=new Date(e);e=n.date.format(t,"Y-m-d")}return e}var i=new Date(e);if(isNaN(i.getDate())){i=n.date.parse(e,"Y-m-d")}var a=$.os.android&&$.os.version&&n.utils.versionCompare("4.1",$.os.version,">=");var o=n.isNative&&a?0:i.getTimezoneOffset()*6e4;var r=new Date(i.getTime()+o);return n.date.format(r,s._dateFormat)},unformat:function(e){var t;if(_.isEmpty(e)||s.nativeSupport&&this.isFormView()){return e}t=n.date.parse(e,s._dateFormat);return t?n.date.format(t,"Y-m-d"):null},setInputs:function(){this.dateInput=this.$el.find("input");this.inputs=this.dateInput},onClick:function(e){if(this.isOnClickLocked())return;this.setOnClickBlocker();this.showDatePicker(e)},onBlur:function(){this.toggleControls()},onClear:function(e){this.setChanged();if(!s.nativeSupport&&$.os.android){this.setOnClickBlocker(500)}this.model.set(this.name,"");return false},setFormatting:function(){this.shouldFormatValues=!s.nativeSupport&&this.isFormView()},setDefaultValue:function(){if(this.context.isCreate()&&!this.getValue()&&this.def.display_default&&!this._changed){var e=n.date.parseDisplayDefault(this.def.display_default);this.model.set(this.name,this._adjustDefaultValue(e),{silent:true})}},_adjustDefaultValue:function(e){return n.date.format(e,"Y-m-d")},getDateInputValue:function(){var e=this.dateInput.val();if(e&&this.shouldFormatValues){var t=n.date.parse(e,s._dateFormat);e=n.date.format(t,"Y-m-d")}return e},setDateInputValue:function(e){if(e&&this.shouldFormatValues){var t=n.date.parse(e,"Y-m-d");e=n.date.format(t,s._dateFormat)}this.dateInput.val(e)},setClearButtonVisibility:function(){this.showClearButton=!this.def.required&&!_.isEmpty(this.getValue())},setControls:function(){this.input=this.$el.find("input");this.clearButton=this.$el.find(".clear-button")},toggleControls:function(){var e=_.isEmpty(this.getValue());this.input.toggleClass("empty",!this.def.required&&e);this.clearButton.toggle(!this.def.required&&!e);if(!this.def.required&&this.placeholder){this.placeholder.toggle(e)}},setChanged:function(){this._changed=true},getValue:function(){return this.model.get(this.name)},handleValueChange:function(e){this.setChanged();this.model.set(this.name,this.unformat(this.getDateInputValue()),{disableRenderForContext:this.view});this.toggleControls()},showDatePicker:function(e){var t=this.unformat(this.value)||"";if(s.ios7){var i=new Date;if(t){var r=n.date.parse(t,"Y-m-d");if(a.utils.isValidDate(r)){i=r}}var l={date:i,mode:"date"};this._setPopoverCoordinates(l,e);var c=n.date.format(l.date,"Y-m-d");this.setDateInputValue(c);this.model.set(this.name,c);this.toggleControls();window.datePicker.show(l,_.bind(function d(e){this.clearOnClickBlocker();if(!e)return;var t=n.date.format(e,"Y-m-d");this.model.set(this.name,t)},this));return}o.showDateTimePicker(t,{callback:_.bind(function(e){this.clearOnClickBlocker();this.model.set(this.name,e)},this)})},_setPopoverCoordinates:function(e,t){var i=t.screenX;var n=t.screenY;var a=document.body.scrollTop;if(n-a<250){n+=30}n-=a;e.x=String(i);e.y=String(n)},isFormView:function(){return _.contains(["create","edit"],this.view.action)},isOnClickLocked:function(){return s._onClickBlocker},setOnClickBlocker:function(e){s._onClickBlocker=window.setTimeout(_.bind(this.clearOnClickBlocker,this),e||this.ONCLICK_BLOCKER_TIMEOUT)},clearOnClickBlocker:function(){window.clearTimeout(s._onClickBlocker);s._onClickBlocker=false},_dispose:function(){this.clearOnClickBlocker();this.clearButton&&this.clearButton.off();this._super()}},{initFormat:function(){s._dateFormat=n.user.getPreference("datepref")},setNativeSupport:function(){this.nativeSupport=$.os.ios||$.browser.chromeWeb||!$.os.ios&&!$.os.android&&$.browser.webkit||false;this.ios7=$.os.ios&&$.os.version&&($.os.version[0]==="7"||n.utils.versionCompare($.os.version,"8",">=")&&$.os.tablet);if(this.ios7&&n.isNative&&this.iosDatePickerPlugin){this.nativeSupport=false}},iosDatePickerPlugin:true});n.events.on("app:sync:complete",function(){s.initFormat()}).on("app:init",function(){s.setNativeSupport()});e.exports=s},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(263);var r=i(387);var s=a.extendField(r,"Datetimecombo",{initialize:function(e){this._super(e);if(!s._tsFormat){s.initFormat()}},onBeforeRender:function(){this._super();this.setDefaultValue();this.calculateAndBackupInputValues();this.setClearButtonVisibility()},bindDomChange:function(){this.setInputs();if(s.nativeSupport){this.inputs.on($.browser.chromeWeb?"change":"blur",_.bind(this.handleValueChange,this))}},format:function(e){var t=_.isEmpty(e);if(t||this.view.name==="edit"&&s.nativeSupport&&!this.isReadOnly()){return e}return n.date.format(new Date(e),s._tsFormat)},unformat:function(e){return e},setInputs:function(){this.dateInput=this.$("input[data-type=date]");this.timeInput=this.$("input[data-type=time]");this.inputs=this.dateInput.add(this.timeInput)},calculateAndBackupInputValues:function(){var e="";var t="";var i=this.getValue();var a;if(i){a=new Date(i);e=n.date.format(a,"Y-m-d");t=n.date.format(a,"H:i"+":00")}this.values={date:e,time:t};this.formattedValues=null;if(i&&this.shouldFormatValues){a=new Date(i);this.formattedValues={date:n.date.format(a,s._dateFormat),time:n.date.format(a,s._timeFormat)}}this._prevValues=this.values},handleValueChange:function(e){this.setChanged();this.setDefaultInputValues();this.setModelValue(this.getDateInputValue(),this.getTimeInputValue());this.calculateAndBackupInputValues();this.toggleControls()},setDefaultInputValues:function(){var e=this.getDateInputValue();var t=this.getTimeInputValue();var i=this._prevValues.date&&!e;var a=this._prevValues.time&&!t;if(e&&!t&&!a){var o=this.def.default_current_time?n.date.format(new Date,"H:i"):"00:00";this.setTimeInputValue(o)}else if(t&&!e&&!i){var r=n.date.format(new Date,"Y-m-d");this.setDateInputValue(r)}else if(i){this.setTimeInputValue("")}else if(a){this.setDateInputValue("")}},onClick:function(e){if(this.isOnClickLocked())return false;var t=e.target.getAttribute("data-type");this.setOnClickBlocker();this.showDateTimePicker(t,e)},onBlur:function(){this.toggleControls()},getTimeInputValue:function(){var e=this.timeInput.val();if(e&&this.shouldFormatValues){var t=n.date.parse(e,s._timeFormat);e=n.date.format(t,"H:i")+":00"}return e},setTimeInputValue:function(e){if(e&&this.shouldFormatValues){var t=n.date.parse(e,"H:i");e=n.date.format(t,s._timeFormat)}this.timeInput.val(e)},setModelValue:function(e,t){var i="";var n=new Date(this.getValue());var a;var o;if(s.nativeSupport){o={disableRenderForContext:this.view}}if(e&&t){a=this._getDate(e+" "+t+":00",true);i=a.toISOString()}if(!(a&&a.getTime()===n.getTime())){this.model.set(this.name,i,o)}},showDateTimePicker:function(e,t){var i=e==="date";var r=this.getDateInputValue()||n.date.format(new Date,"Y-m-d");var l=this.getTimeInputValue()||(this.def.default_current_time?n.date.format(new Date,"H:i"):"00:00");if(s.ios7){var c=this._getDate(r+" "+l+":00",true);if(!a.utils.isValidDate(c)){c=new Date}var d={date:c,mode:i?"date":"time"};this._setPopoverCoordinates(d,t);this.setDateInputValue(r);this.setTimeInputValue(l);this.setModelValue(r,l);this.toggleControls();window.datePicker.show(d,_.bind(function(e){this.clearOnClickBlocker();if(!e)return;if(i){var t=n.date.format(e,"Y-m-d H:i")+":00";this.setDateInputValue(t)}else{this.setTimeInputValue(e)}this.setDefaultInputValues();this.setModelValue(this.getDateInputValue(),this.getTimeInputValue());this.toggleControls()},this));return}o.showDateTimePicker(i?r:l,{mode:i?"showDatePicker":"showTimePicker",callback:_.bind(function(e){this.clearOnClickBlocker();if(i){this.setDateInputValue(e)}else{this.setTimeInputValue(e)}this.setDefaultInputValues();this.setModelValue(this.getDateInputValue(),this.getTimeInputValue());this.toggleControls()},this)})},_adjustDefaultValue:function(e){return e.toISOString()},_getDate:function(e,t){var i=e.split(/[^0-9]/);var n=new Date(i[0],i[1]-1,i[2],i[3],i[4],i[5]);var a=t?0:n.getTimezoneOffset()*6e4;return new Date(n.getTime()-a)},_dispose:function(){this._super();this.inputs&&this.inputs.off()}},{initFormat:function(){s._tsFormat=n.user.getPreference("datepref")+" "+n.user.getPreference("timepref");s._dateFormat=n.user.getPreference("datepref")||"Y-m-d";s._timeFormat=n.user.getPreference("timepref")}});n.events.on("app:sync:complete",function(){s.initFormat()}).on("app:init",function(){s.setNativeSupport()});e.exports=s},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(283);e.exports=a.extendField(o,"Invitees",{cacheDisabled:true,events:{"click .secondary-btn":"onSecondaryClick","click .invitees":"onClick"},fieldTag:"invitees",onClick:function(e){if(e.defaultPrevented)return false;var t=n.context.getContext({layout:"picker-list",module:this.module,model:this.model,collection:new n.BeanCollection,skipFetch:true});t.prepare();var i=n.controller.loadDynamic({layoutDef:{className:"layout__list",gaTrack:"invitees-picker-list",meta:{components:[{view:"list-picker"}]},context:t}});var o=i.getComponent("list-picker");var r=n.metadata.getModuleNames({filter:"visible",access:"list"});if(n.acl.hasAccess("list","Users"))r.push("Users");var s=_.intersection(["Contacts","Leads","Users"],r);var l=_.map(s,function(e){return{value:e,label:a.getPluralModuleName(e),module:e}}).sort(function(e,t){return e.label>t.label?1:-1});o.setData({items:l});o.on("selection:submit",function(e){this.createListLayout(e.get("value"),this.model)},this);o.render()},createListLayout:function(e){var t=n.context.getContext({module:e});t.prepare();var i=t.get("module");var a=n.lang.get("LBL_ASSOC",i,n.lang.getAppListStrings("moduleListSingular")[i]);var o=n.controller.loadDynamic({layoutDef:{gaTrack:"invitees-list",name:"list-selector",subType:"selector",editable:true,context:t,listMeta:{multiselect:true,headerData:{title:a,save:true}}}});var r=o.getComponent("list-selector");r.on("selection:submit",function(t){t=_.map(t,function(t){var i=_.pick(t.attributes,"id","name");i.link=e.toLowerCase();return i},this);var i=_.compact(this.model.get("invitees"));var a=_.pluck(i,"id");a=_.map(a,function(e){return e.toString()});t=_.chain(t).reject(function(e){return _.include(a,e.id.toString())}).union(i).value();this.model.set("invitees",t);n.controller.disposeDynamic({disposeAll:true})},this)},onSecondaryClick:function(e){var t=this.model.get("invitees");var i=$(e.currentTarget).attr("uid");var n=_.reject(t,function(e){return e.id==i});this.model.set("invitees",n);return false}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(283);e.exports=a.extendField(o,"File",{events:{"click .input_upload":"_onInputClick","click .file-remove":"_onClearClick","change .input_upload":"_onFileSelected"},supportedTypes:$.os.android?["*/*"]:["image/*","video/*"],_fileType:null,_fileIsTooBigMessage:"9f2e903a-5bd9-4c8f-a822-83c125c43e5f",_fileErrorCodesToStrings:{1:"ERR_MOBILE_FILE_NOT_SUPPORTED",2:"ERR_MOBILE_FILE_NOT_READABLE",3:"ERR_MOBILE_FILE_ABORTED",4:"ERR_MOBILE_FILE_SECURITY"},initialize:function(e){this.inputAccept=this.supportedTypes.join(",");this._super(e)},onAfterRender:function(){this._super();this._dirty=false;this.$fileInput=this.$el.find(".input_upload");this.$fileRemoveBtn=this.$el.find(".file-remove");if(this.def.required){this.$fileRemoveBtn.addClass("hide")}var e=this.value=this.model.get(this.name);this.$el.attr("file-id",e||"")},bindDomChange:function(){return},_onInputClick:function(e){if(!n.acl.hasAccessToModel("edit",this.model,this.name)){e.preventDefault();e.stopPropagation()}},_onFileSelected:function(){if(this.$fileInput[0].files.length===0){return}var e=this.$fileInput[0].files[0].type;this._fileType=this._getFileType(e);if(e&&!this._fileType){this.trigger("file:field:change",n.lang.get("ERR_MOBILE_FILE_NOT_SUPPORTED"),"error");return}this._dirty=true;this.prepareFile()},_onClearClick:function(){this._changeFieldState();this._dirty=true;this.trigger("file:field:clear")},prepareFile:function(){this.trigger("file:field:change",this.$fileInput,"preparing");var e=[_.bind(this._readFileData,this)];if(this._fileType==="image"){e.push(_.bind(this._resizeImage,this))}async.series(e,_.bind(function t(e){if(!e){this.$fileInput.fieldName=this.name;this._changeFieldState(true);this.trigger("file:field:change",this.$fileInput,"prepared")}else{this.trigger("file:field:change",e.message||n.lang.get("ERR_MOBILE_FILE_PROCESSING"),"error")}},this))},_changeFieldState:function(e){if(e){if(!this.def.required){this.$fileRemoveBtn.removeClass("hide")}this.$el.find(".picture-icon").addClass("hide");this.$el.find(".value").text(this.$fileInput.fileData.name);this.$el.find(".placeholder").hide()}else{if(!this.def.required){this.$fileRemoveBtn.addClass("hide")}this.$el.find(".picture-icon").removeClass("hide");this.$el.find(".value").text("");this.$el.find(".placeholder").show();this._resetField()}},_readFileData:function(e){var t=this.$fileInput[0].files[0];if(t){var i=this;var o=new FileReader;var r=this._binaryToDataUri;o.onload=function(n){i.$fileInput.fileData={name:t.name,size:t.size,type:t.type,binary:n.target.result,dataURI:r(n.target.result,t.type)};if($.os.ios){i.$fileInput.fileData.name=i._getUniqFileName(t.name)}try{i._setImageOrientation(n.target.result,t.name)}catch(a){}finally{e()}};o.onerror=function(t){var a=t.target.error;e({message:n.lang.get(i._fileErrorCodesToStrings[a.code]||"ERR_MOBILE_FILE_READ")});n.logger.error("Failed to read file: ["+a.code+"]")};if(t.size>n.config.fileSizeLimit*1024*1024||t.name===i._fileIsTooBigMessage){return e({message:n.lang.get("ERR_MOBILE_FILE_SIZE_LIMIT_EXCEEDED",null,{size:a.utils.humanFileSize(n.config.fileSizeLimit*1024*1024,true)})})}o.readAsBinaryString(t)}else{e({message:"No file selected"})}},_resizeImage:function(e){var t=new Image;var i=this;var a=false;t.onload=function(){a=true;var t=i._resizeWithCanvas(this);if(t.split(",")[1].length===0){e({message:"Image resizing failed (Failed to render to canvas)"});return}function o(){i.$fileInput.fileData.type=t.split(",")[0].split(";")[0].split(":")[1];i.$fileInput.fileData.dataURI=t;i.$fileInput.fileData.binary=i._dataUriToBinary(t);e()}if(n.config.canvasTestModeOnUpload){$(i._canvas).css({position:"fixed",top:200,left:0,border:"2px red solid",zIndex:999999999}).appendTo("body").on("click",function(){$(i._canvas).remove();o()})}else{o()}};t.src=this.$fileInput.fileData.dataURI;_.delay(function o(){if(!a){e({message:"Image resizing failed (Failed to load file as image)"})}},n.config.imageResizeTimeout)},_resizeWithCanvas:function(e){var t=$.os.ios?this._iosRenderWithCanvas:this._commonRenderWithCanvas;var i=document.createElement("canvas");i.width=e.naturalWidth;i.height=e.naturalHeight;return t.call(this,e,i,{width:e.naturalWidth,height:e.naturalHeight,orientation:this.$fileInput.fileData?this.$fileInput.fileData.orientation:1})},_iosRenderWithCanvas:function r(e,t,i){var a=new MegaPixImage(e);var o={maxWidth:i.width,maxHeight:i.height,orientation:i.orientation};if(i.width*i.height>n.config.iosCanvasSizeLimit*1024*1024){_.extend(o,this._scaleImage(i))}a.render(t,o);return t.toDataURL("image/jpeg")},_scaleImage:function(e){var t=e.width/e.height;var i=n.config.iosCanvasSizeLimit*1024*1024;var a;var o;a=Math.sqrt(i/t);o=a*t;return{maxHeight:Math.floor(a),maxWidth:Math.floor(o)}},_commonRenderWithCanvas:function s(e,t,i){var n=t.getContext("2d");n.clearRect(0,0,i.width,i.height);function a(e,t,i,n){switch(n){case 5:case 6:case 7:case 8:e.width=i;e.height=t;break;default:e.width=t;e.height=i}var a=e.getContext("2d");switch(n){case 2:a.translate(t,0);a.scale(-1,1);break;case 3:a.translate(t,i);a.rotate(Math.PI);break;case 4:a.translate(0,i);a.scale(1,-1);break;case 5:a.rotate(.5*Math.PI);a.scale(1,-1);break;case 6:a.rotate(.5*Math.PI);a.translate(0,-i);break;case 7:a.rotate(.5*Math.PI);a.translate(t,-i);a.scale(-1,1);break;case 8:a.rotate(-.5*Math.PI);a.translate(-t,0);break;default:break}}if(i.orientation){a(t,i.width,i.height,i.orientation)}n.drawImage(e,0,0,i.width,i.height);return this._getJpegImage(t)},_getJpegImage:function(e){var t;if(!n.supportedFeatures.canvasJpegEncoding){var i=new JPEGEncoder;var a=e.getContext("2d");var o=a.getImageData(0,0,e.width,e.height);t=i.encode(o,n.config.jpegEncoderQuality)}else{t=e.toDataURL("image/jpeg",n.config.jpegEncoderQuality/100)}return t},_setImageOrientation:function(e,t){var i=new JpegMeta.JpegFile(e,t);var a;var o=this;if(!("tiff"in i)){a="No TIFF tags in image"}else if(!("Orientation"in i.tiff)){a='No "Orientation" tag in image'}else{o.$fileInput.fileData.orientation=parseInt(i.tiff.Orientation,10);a="Orientation tag: "+i.tiff.Orientation}if(n.config.canvasTestModeOnUpload){n.alert.show("orientation info",{level:"info",messages:a,closeable:true,autoClose:true})}},_binaryToDataUri:function(e,t){return"data:"+t+";base64,"+window.btoa(e)},_dataUriToBinary:function(e){return window.atob(e.split(",")[1])},_getFileType:function(e){var t=e.split("/");var i=_.find(this.supportedTypes,function(e){var i=e.split("/");return _.every(i,function(e,i){return e==="*"||e===t[i]})});if(i){return i.split("/")[0]}},_getUniqFileName:function(e){var t=e.match(/.*(\..+)$/i)[1];var i=e.match(/^(.+)\./i)[1];return i+"_"+ +new Date+t},_resetField:function(){this.$fileInput.replaceWith(this.$fileInput.clone());this.$fileInput=this.$(".input_upload")}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(390);e.exports=a.extendField(o,"Image",{supportedTypes:["image/jpeg","image/png","image/gif"],initialize:function(e){this._super(e);this._canvas=document.createElement("canvas")},onAfterRender:function(){this._super();if(this.value){this._showAndPositionImage()}},_setForcedRefresh:function(e){this.cacheDisabled=e},_showAndPositionImage:function(e){var t=this;var i=new Image;var o=this.$el;var r=o.find("div.avatar");var s=e||n.api.buildFileURL({field:this.name,module:this.module,id:this.model.id},a.getFileOptions())+"&_id="+this.model.get(this.name);var l;i.onload=function(){t._setForcedRefresh(false);var n={image:i,height:r.css("height"),width:r.css("width")};a.utils.sizePicture(n);l=e||t._resizeWithCanvas(i);r.css({backgroundSize:n.sizeProp,backgroundImage:"url("+l+")"})};i.onerror=function(){t._setForcedRefresh(true);var e=t.context.get("name");var i=n.utils.formatString("url(img/offline-{0}.svg)",[e]);r.css({backgroundImage:i})};i.src=s},prepareFile:function(){this.trigger("file:field:change",this.$fileInput,"preparing");async.series([_.bind(this._readFileData,this),_.bind(this._resizeImage,this),_.bind(this._applyPreview,this)],_.bind(function e(t){if(!t){this.$fileInput.fieldName=this.name;this._changeFieldState(true);this.trigger("file:field:change",this.$fileInput,"prepared")}else{this.trigger("file:field:change",t.message||n.lang.get("ERR_MOBILE_FILE_PROCESSING"),"error")}},this))},_changeFieldState:function(e){if(e){if(!this.def.required){this.$fileRemoveBtn.removeClass("hide")}this.$el.find(".picture-icon").hide();this.$el.find(".placeholder").hide()}else{if(!this.def.required){this.$fileRemoveBtn.addClass("hide")}this.$el.find(".picture-icon").show();this.$el.find("div.avatar").css({backgroundImage:"none"});this.$el.find(".placeholder").show()}},_readFileData:function(e){var t=this.$fileInput[0].files[0];if(t){var i=this;var a=new FileReader;var o=this._binaryToDataUri;a.onload=function(n){i.$fileInput.fileData={name:t.name,size:t.size,type:t.type,binary:n.target.result,dataURI:o(n.target.result,t.type)};try{i._setImageOrientation(n.target.result,t.name)}catch(a){}finally{e()}};a.onerror=function(t){var a=t.target.error;e({message:n.lang.get(i._fileErrorCodesToStrings[a.code]||"ERR_MOBILE_FILE_READ")});n.logger.error("Failed to read file: ["+a.code+"]")};a.readAsBinaryString(t)}else{e({message:"No file selected"})}},_applyPreview:function(e){this.$el.find(".user-icon").hide();this._showAndPositionImage(this.$fileInput.fileData.dataURI);e()},_resizeWithCanvas:function(e){var t=this._canvas;var i=n.config.resizeImagesOnUpload;var a=e.naturalWidth;var o=e.naturalHeight;var r=Math.max(a,o);var s=$.os.ios?this._iosRenderWithCanvas:this._commonRenderWithCanvas;if(!i)i=r;var l=r<i?1:i/r;var c=Math.round(a*l);var d=Math.round(o*l);t.width=c;t.height=d;return s.call(this,e,t,{width:c,height:d,orientation:this.$fileInput.fileData?this.$fileInput.fileData.orientation:1})}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(385);e.exports=a.extendField(o,"Float",{isFloat:true})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(283);e.exports=a.extendField(o,"Follow",{events:{"click .follow-label":"onClick"},onClick:function(e){e.preventDefault();e.stopPropagation();this.model.follow(!this.model.get("following"),{error:_.bind(this.onError,this)})},onError:function(){this.model.set("following",!this.model.get("following"))}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(258);var r=i(283);e.exports=a.extendField(r,"Enum",{cacheDisabled:true,initialize:function(e){if(n.supportedFeatures.enumViaActionSheet){_.extend(this,{_viaActionSheet:true,fieldTag:".actionsheet-select",events:{"click .actionsheet-select":"onFocus"}})}else{_.extend(this,{_viaActionSheet:false,fieldTag:"select",events:{"focusin select":"onFocus","focusout select":"onBlur"}})}this._super(e)},_sortResults:function s(e){if(this.def.sort_alpha){return _.sortBy(e,function(e){return e[1]})}if(!_.isEmpty(this.items)||this.def.visibility_grid){return e}return this._getSortedItems(e)},_getSortedItems:function l(e){var t;var i;var n=this._getOrderedKeys();var a=this._getFilteredKeys();t=_.map(e,function(e){return e[0]});i=a||n||t;return _.map(i,function(t){return _.find(e,function(e){return e[0]===t})})},_getOrderedKeys:function(){var e=n.lang.getAppListKeys(this.def.options);if(!_.isEmpty(e)){return _.map(e,function(e){return e.toString()})}},_getFilteredKeys:function(){var e=n.metadata.getEditableDropdownFilter(this.def.options);var t=this.getValue();if(!_.isEmpty(e)){return _.chain(e).filter(function(e){return e[1]||t===e[0].toString()}).map(function(e){return e[0].toString()}).value()}},_getItemByValue:function c(e){return _.find(this.renderItems,function(t){return t[1]===e})},_getItemByKey:function d(e){return _.find(this.renderItems,function(t){return t[0]===e})},getItems:function u(){var e=this.def.options;if(!_.isEmpty(this.items)){e=this.items}else if(_.isString(this.def.options)){e=n.lang.getAppListStrings(this.def.options)}if(_.isEmpty(e)){return[]}if(!_.isArray(e)){e=_.pairs(e)}else{e=_.map(e,function(e,t){return[t.toString(),e]})}return e},setRenderItems:function(){var e=this.getItems();this.renderItems=[];if(!_.isEmpty(e)){this.renderItems=this._sortResults(e)}},onBeforeRender:function(){this._super();var e=this.getValue();this.setRenderItems();if(this.view.isEditView()||this.def.view==="edit"){if(_.isEmpty(this.renderItems)){return}if(this.model&&_.isUndefined(e)){e=this.getDefaultValue();if(e!==""){this.model.set(this.name,e,{silent:true})}}else if(e===""&&!this.hasEmptyOption()){this.renderItems.unshift(["",""])}if(this._viaActionSheet){var t=this._getItemByKey(e);this.valueText=t?t[1]:e}}},onAfterRender:function(){this._super();this.placeholder=this.$el.find(".placeholder").eq(0);this.placeholder.toggle(a.isEmptyValue(this.getValue()));this.$el.toggle(!_.isEmpty(this.renderItems))},onFocus:function(){this.placeholder.hide();if(this._viaActionSheet){var e=this;o.showActionSheet(this.getValues(this.renderItems),{onSelectCb:function t(i){var n=e._getItemByValue(i)[0];e._$fieldEl.attr("value",n);e._$fieldEl.text(i);e.onFieldChange()}})}},onBlur:function(){this.placeholder.toggle(a.isEmptyValue(this.getValue()));document.activeElement.blur()},onFieldChange:function(){var e=this.unformat(this._$fieldEl.val()||this._$fieldEl.attr("value"));this.value=e;this.model.set(this.name,e,{disableRenderForContext:this.view});this.onBlur()},getValue:function(){var e=this.model.get(this.name);return _.isNumber(e)?e.toString():e},getDefaultValue:function(){var e=this.def["default"];var t=this._getFilteredKeys()||this.getKeys();if(_.isNumber(e))e=e.toString(10);if(!_.contains(t,e)&&!_.isEmpty(t)){e=t[0]}return _.isNumber(e)?e.toString():e},hasEmptyOption:function(){var e=this.getKeys();return _.contains(e,"")},getKeys:function(){var e=[];if(_.isString(this.def.options)){e=n.lang.getAppListKeys(this.def.options)}else if(_.isObject(this.def.options)){e=_.keys(this.def.options)}return e},getValues:function(e){return _.map(e,function(e){return e[1]})},format:function(e){return _.isNumber(e)?e.toString():e}})},function(e,t,i){var n=i(263);var a=i(258);var o=SUGAR.App;var r=i(257);var s=i(283);e.exports=r.extendField(s,"Email",{_errorIcon:'<span class="icondefault error-icon {0}></span>',events:{"click .actions-btn":"showActions","click .value a":"sendEmail","click .f-email__add":"onNewEmailBtnClick",'keyup [email-id="-1"] input':"onNewEmailFieldKeyUp"},_getValue:function(){return this.model.get(this.name)},_getPrimaryEmail:function(){return _.findWhere(this._getValue(),{primary_address:true})},_render:function(){var e=this._getValue();if(e&&e.length){_.each(e,function(e){_.each(["primary_address","opt_out","invalid_email"],function(t){e[t]=!!Number(e[t])})});e=_.sortBy(e,function(e){return-Number(e.primary_address)});this.model.set(this.name,e,{silent:true})}this._super()},onAfterRender:function(){var e=this._getPrimaryEmail();if(!this.model.get("email1")&&e){this._setEmail1Value(e.email_address)}this._super()},_modelHasEmail1:function(){return!!this.model.fields.email1},_setEmail1Value:function(e){if(this._modelHasEmail1()){this.model.set("email1",e,{silent:true})}},_getEmailObject:function(e){var t=e.closest("[email-id]").attr("email-id");return t!=-1&&this._getValue()[t]||null},setPrimaryEmail:function(e){var t=this._getValue();var i=this._getPrimaryEmail();if(i){i.primary_address=false}this.$el.find(".primary-address").removeClass("primary-address");i=t[e];i.primary_address=true;this._setEmail1Value(i.email_address);this.$el.find('[email-id="'+e+'"]').addClass("primary-address")},_toggleAttr:function(e,t){var i=this._getValue()[e];var n=t.replace("_","-");var a=i[t]=!i[t];this._getEmailFieldRow(e)[a?"addClass":"removeClass"](n)},toggleOptOut:function(e){this._toggleAttr(e,"opt_out")},toggleInvalid:function(e){this._toggleAttr(e,"invalid_email")},_getEmailFieldRow:function(e){return this.$el.find('.controls-flex[email-id="'+e+'"]')},removeEmail:function(e){var t=this._getValue();var i=t.splice(e,1)[0];if(i.primary_address){var n="";if(t.length){t[0].primary_address=true;n=t[0].email_address}this._setEmail1Value(n)}this.model.trigger("change:email")},_makeEmail:function(e){var t=!this._getValue().length;if(_.isUndefined(e))e="";if(t)this._setEmail1Value(e);return{email_address:e,primary_address:t,invalid_email:false,opt_out:false}},onFieldChange:function(e){var t=$(e.currentTarget);var i=this._getEmailObject(t);var n=this.unformat(t.val());var a;if(i){i.email_address=n}else if(n){a=this._getValue();if(!a){a=[];this.model.set(this.name,a,{silent:true})}a.push(this._makeEmail(n))}this.model.trigger("change:email")},onNewEmailFieldKeyUp:function(e){var t=$(e.currentTarget);var i=this.unformat(t.val());this.$el.find(".add-btn").css({visibility:i?"visible":"hidden"})},onNewEmailBtnClick:function(e){var t=this.$el.find(".f-email__add + .controls-flex");t.show();t.find("input").focus()},_displayValidationMessage:function(e){var t;var i=[];var n=this.$(".control-group");var a=this;n.children(".field__error-message").remove();n.removeClass("error");this.$("[email-address]").removeClass("error").remove("."+o.config.UI.icons.edit.error);if(e){var r=[];n.addClass("error");_.each(this._getValue(),function(t,i){if(_.contains(e.email,t.email_address))r.push(i)});_.each(r,function(e){this.$('[email-id="'+e+'"]').addClass("error").append(o.utils.formatString(a._errorIcon,[o.config.UI.icons.edit.error]));

});_.each(e,function(e,t){i.push(o.error.getErrorString(t,e))});t=o.template.get("edit-field-error");n.append(t(i))}o.analytics.trackEvent("validation",this.name)},showActions:function(e){var t=$(e.currentTarget);t.addClass("active");var i=t.closest("[email-id]").attr("email-id");var n=this._getValue()[i];var r=[this.toggleOptOut,this.toggleInvalid,this.removeEmail];var s=[n.opt_out?"LBL_EMAIL_ACTION_SET_OPT_IN":"LBL_EMAIL_ACTION_SET_OPT_OUT",n.invalid_email?"LBL_EMAIL_ACTION_SET_VALID":"LBL_EMAIL_ACTION_SET_INVALID","LBL_REMOVE"];if(!n.primary_address){s.unshift("LBL_EMAIL_ACTION_SET_PRIMARY");r.unshift(this.setPrimaryEmail)}r=_.map(r,function(e){return _.bind(e,this,i)},this);s=_.map(s,function(e){return o.lang.get(e)});function l(){t.removeClass("active")}a.showActionSheet(s,{onSelectCb:function(e,t){r[t]();l()},onCancelCb:l});return false},sendEmail:function(e){var t=$(e.target).data("index");if(t){var i=this._getValue();if(_.isObject(i[t])){n.sendEmail([i[t].email_address])}}}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(263);var r=i(283);e.exports=a.extendField(r,"Phone",{events:{"click .value a":"callPhone"},onFieldChange:function(){var e=this.format(this.unformat(this._$fieldEl.val()))||"";var t=this.model.get(this.name);this.model.set(this.name,e);if(t===e){this.model.trigger("change:"+this.name,this.model,e)}},callPhone:function(){o.callPhone(this.value,{model:this.model})}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(283);e.exports=a.extendField(o,"Textarea",{fieldTag:"textarea",events:{"click .textarea":"onClick"},onClick:function(e){var t=this.isReadOnly();if(_.isEmpty(this.value)&&t){return}var i=this.getContext();var n=this.getLayoutDef(i);this.show(n)},getContext:function(){var e=n.context.getContext({create:true,parentModel:this.model,fieldName:this.def.name,isReadOnly:this.isReadOnly()});e.prepare();return e},getLayoutDef:function(e){return{className:"textarea",gaTrack:"textarea",meta:{components:[{view:"textarea-edit",editedFieldName:this.label}]},context:e}},show:function(e){var t=n.controller.loadDynamic({layoutDef:e});var i=t.getComponent("textarea-edit");i.setValue(this.model.get(this.name)||"")}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(397);var r=a.extendField(o,"Emailbody",{fieldTag:"textarea",events:{"click textarea":"onClick"},onClick:function(e){if(_.isEmpty(this.value)&&this.isReadOnly()){return}n.nomad.showEmailBody(this.def,this.model)},format:function(e){if(_.isEmpty(e)){e=r.getPlainTextValue(this.name,this.model)}return e}},{getPlainTextValue:function(e,t){var i=e.replace(/_html$/,"");var n=t.get(i)||"";return $.trim(n)}});e.exports=r},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(283);e.exports=a.extendField(o,"Radioenum",{events:{"click .btn-group .btn":"onClick"},onClick:function(e){this.model.set(this.name,$(e.currentTarget).data("value"))}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(283);e.exports=a.extendField(o,"Relate",{events:{"click .secondary-btn":"onSecondaryClick","click .relate":"onClick"},onBeforeRender:function(){this._super();var e=this.def.module;this.hasAccess=n.acl.hasAccess("read",e)&&!_.isEmpty(n.metadata.getModule(e));var t=this.model.get(this.def.id_name);this.link=!_.contains(n.config.readonlyModules,e)&&t&&n.acl.hasAccess("view",e)?n.router.buildRoute(e,t):null;if(!this.hasAccess&&this.view.name==="edit"){this.options.viewName="readonly"}},onClick:function(e){if(e.defaultPrevented){return false}var t=n.metadata.getModule(this.module).fields[this.name];var i=t.module;var a=n.context.getContext({module:i}).prepare();var o=n.controller.loadDynamic({layoutDef:{gaTrack:"relate",name:"list",subType:"selector",editable:true,context:a,listMeta:{multiselect:false,headerData:{title:n.lang.get("LBL_ASSIGN",a.get("module"),n.lang.getAppListStrings("moduleListSingular")[a.get("module")]),save:false}}}});var r=o.getComponent("list-selector");r.on("selection:submit",function(e){this.onRelatedItemSelected(e);n.controller.goBack()},this)},onRelatedItemSelected:function(e){var t={};var i=n.metadata.getModule(this.view.module).fields[this.name];t[i.id_name]=e.get("id");t[i.name]=e.get("name");if(i.populate_list&&i.auto_populate){_.each(i.populate_list,function(i,a){a=_.isNumber(a)?i:a;var o=e.get(a);if(!_.isUndefined(o)&&n.acl.hasAccessToModel("edit",this.model,i)){t[i]=o;if(this.view.module==="RevenueLineItems"&&a==="discount_price"){_.each(["likely_case","best_case","worst_case"],function(e){t[e]=o})}}if(a==="currency_id"&&this.model.get("currency_id")!==o){this.model.changeCurrencyId(o)}},this)}this.model.set(t)},onSecondaryClick:function(e){this.model.set(this.name,"");this.model.set(this.def.id_name,"");return false}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(283);e.exports=a.extendField(o,"Multienum",{events:{"touchstart .remove":"highlightRemoveClick","click .remove":"onRemoveClick","click .multiselect":"onClick"},onBeforeRender:function(){this._super();var e=this.model.get(this.name);if(this.view.isEditView()&&_.isArray(e)&&!this.def.required&&e.length===1&&e[0]===""){this.model.set(this.name,[],{silent:true})}},onClick:function(e){if(e.defaultPrevented||this.isReadOnly()){return false}var t=n.context.getContext({create:true});t.prepare();var i=n.controller.loadDynamic({layoutDef:{className:"layout__list multienum__list",gaTrack:"multienum",meta:{components:[{view:{name:"list-picker",meta:{multiselect:true,headerData:{title:n.lang.get("LBL_CHOOSE_ITEMS"),saveLabel:"LBL_DONE_BUTTON_LABEL",save:true}}}}]},context:t}});var a=i.getComponent("list-picker");a.setData({items:this._getItemsToShow()});a.on("selection:submit",this.onSelectionEnd,this);a.render();e.preventDefault()},_getItemsToShow:function r(){var e=this.model.fields[this.name].options;var t=n.lang.getAppListStrings(this.def.options);var i=[];if(_.isObject(e)&&!_.isEmpty(e)){t=_.pick(t,_.keys(e))}_.each(t,function(e,t){if(!_.contains(this.value,t)&&t!==""){i.push({label:e,value:t})}},this);return i},onSelectionEnd:function(e){var t=_.map(e,function(e){return e.get("value")});var i=_.compact(this.model.get(this.name));this.model.set(this.name,_.union(i,t));n.controller.disposeDynamic()},highlightRemoveClick:function(e){$(e.target).addClass("selected-item")},onRemoveClick:function(e){var t=this.model.get(this.name);var i=$(e.target).is("[item-id]")?$(e.target):$(e.target).closest("[item-id]");var n=i.attr("item-id");var a=_.without(t,n);this.model.set(this.name,a);return false}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(283);e.exports=a.extendField(o,"Favorite",{events:{"click .favorite-icon":"onClick"},onClick:function(e){e.preventDefault();e.stopPropagation();n.alert.dismissAll();var t=$(e.currentTarget);var i=!t.hasClass("color-disabled");var a=this.model;var o=function(){a.set("my_favorite",i)};a.favorite(!i,{error:o});return false}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(283);e.exports=a.extendField(o,"Fieldset",{fields:null,subfields:"",initialize:function(e){this._super(e);_.each(this.def.fields,function(e){if(e.type==="label"){var t=e.css_class.match(/label_[^\s]+/);if(t.length>0){var i=t[0].substring(6);this.model.on("change:"+i,function(){var e=this.model.get(i);if(e||e===0||e===""){this.$el.find(".label_"+i).removeClass("hide")}else{this.$el.find(".label_"+i).addClass("hide")}},this)}}},this)},_render:function(){if(this.template===n.template.empty){this._super()}},getPlaceholder:function(){var e="";var t=this;if(!this.fields){this.fields=[];_.each(this.def.fields,function(i){var a=n.view.createField({def:i,view:t.view,model:t.model});t.fields.push(a);e+=a.getPlaceholder()})}if(this.def.orientation==="horizontal"){this.subfields=new Handlebars.SafeString(e);return this._super()}else{return new Handlebars.SafeString(e)}}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(283);e.exports=a.extendField(o,"Teamset",{cacheDisabled:true,events:{"click .primary-btn":"onPrimaryClick","click .selected-btn":"onSelectedClick","click .secondary-btn":"onSecondaryClick","click .teamset":"onClick"},initialize:function(e){this._super(e);this.isTBAEnabled=a.isTeamBasedAclEnabledForModule(this.module);this.model.on("change:team_name",function(){this.$el.find("[team-id]").removeClass("active")},this)},_render:function(){var e=this.model.get(this.name);if(_.isArray(e)){e=_.sortBy(e,function(e){return e.primary!==true});this.model.set(this.name,e,{silent:true})}this._super()},onClick:function(e){if(e.defaultPrevented||this.isReadOnly()){return false}var t="Teams";var i=n.context.getContext({module:t}).prepare();var a=n.controller.loadDynamic({layoutDef:{name:"list-selector",subType:"selector",editable:true,gaTrack:"teamset",context:i,listMeta:{listItemTpl:"list-item-teamset",headerData:{title:n.lang.get("LBL_MOBILE_SELECT_TEAMS"),saveLabel:"LBL_DONE_BUTTON_LABEL"}}}});a.getComponent("list-selector").on("selection:submit",this.onSave,this)},onSave:function(e){e=_.map(e,function(e){return _.pick(e.attributes,"id","name","name_2")});var t=_.compact(this.model.get("team_name"));var i=_.pluck(t,"id");i=_.map(i,function(e){return e.toString()});var a=_.chain(e).reject(function(e){return _.include(i,e.id.toString())}).union(t).value();this.model.set("team_name",a);n.controller.goBack()},onPrimaryClick:function(e){var t=this.$el.find("[team-id].primary-btn.active").removeClass("active").attr("team-id");var i=$(e.currentTarget);i.addClass("active");var n=_.find(this.model.get("team_name"),function(e){return e.id==t});if(n){n.primary=false}var a=$(e.currentTarget).attr("team-id");var o=_.find(this.model.get("team_name"),function(e){return e.id==a});o.primary=true;return false},onSelectedClick:function(e){var t=$(e.currentTarget).attr("team-id");var i=_.find(this.model.get("team_name"),function(e){return e.id==t});if(i){i.selected=!i.selected;var a=n.config.UI.icons.edit.unlock;var o=n.config.UI.icons.edit.lock;var r=$(e.currentTarget).toggleClass("active",i.selected).find(".icondefault");if(i.selected){$(r).toggleClass(o,false);$(r).toggleClass(a,true)}else{$(r).toggleClass(a,false);$(r).toggleClass(o,true)}}return false},onSecondaryClick:function(e){var t=this.model.get("team_name");var i=$(e.currentTarget).attr("team-id");var n=_.reject(t,function(e){return e.id==i});this.model.set("team_name",n);return false}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(283);e.exports=a.extendField(o,"Parent",{events:{"click .secondary-btn":"onSecondaryClick","click .parent":"onClick"},onBeforeRender:function(){this._super();var e=this.model.get("parent_type");this.hasAccess=n.acl.hasAccess("read",e)&&!_.isEmpty(n.metadata.getModule(e));var t=this.model.get(this.def.id_name);this.link=!_.contains(n.config.readonlyModules,e)&&t&&n.acl.hasAccess("view",e)?n.router.buildRoute(e,t):null},onClick:function(e){if(e.defaultPrevented){return false}var t=n.context.getContext({model:this.model,collection:new n.BeanCollection,skipFetch:true});t.prepare();var i=n.controller.loadDynamic({layoutDef:{className:"layout__list list-picker",gaTrack:"parent-picker-list",meta:{components:[{view:{name:"list-picker",meta:{headerData:{title:n.lang.get("LBL_CHOOSE_PARENT_TYPE")}}}}]},context:t}});var a=i.getComponent("list-picker");var o=n.lang.getAppListStrings(this.def.options)||{};var r=n.metadata.getModuleNames({filter:"visible"});var s=_.intersection(_.keys(o),r);if(_.contains(["Notes","Tasks"],this.module)){s=_.without(s,"Contacts")}s=_.filter(s,function(e){return n.acl.hasAccess("read",e)},this);var l=_.map(s,function(e){return{value:e,label:o[e],module:e}}).sort(function(e,t){return e.label>t.label?1:-1});a.setData({items:l});a.on("selection:submit",function(e){this.createParentListLayout(e.get("value"),this.model)},this);a.render()},createParentListLayout:function(e,t){var i=n.context.getContext({module:e}).prepare();var a=i.get("module");var o=n.controller.loadDynamic({layoutDef:{gaTrack:"parent-list",name:"list",subType:"selector",editable:true,context:i,listMeta:{multiselect:false,headerData:{title:n.lang.get("LBL_ASSIGN",a,n.lang.getAppListStrings("moduleListSingular")[a]),save:false}}}});var r=o.getComponent("list-selector");r.on("selection:submit",function(i){t.set({parent_name:i.get("name"),parent_id:i.get("id"),parent_type:e});n.controller.disposeDynamic({disposeAll:true})},this)},onSecondaryClick:function(e){this.model.set({parent_name:"",parent_id:"",parent_type:""});return false}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(283);e.exports=a.extendField(o,"Label",{onAfterRender:function(){this._super();if(this.el){var e=this.el.className.match(/label_[^\s]+/);if(e.length>0){var t=this.model.get(e[0].substring(6));var i=!(t||t===0||t==="");$(this.el).toggleClass("hide",i)}}}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(263);var r=i(283);e.exports=a.extendField(r,"Address",{cacheDisabled:true,events:{"click .control-group":"onClick","click .value a":"openAddress"},initialize:function(e){this._super(e);this._subfieldStub={};this.model.on("error:validation",this._handleValidationError,this);this.model.on("acl:change:"+this.def.fields[0].name,this.handleAclChange,this);this.fieldNames=_.pluck(this.def.fields,"name");this.required=this.isRequired()},onClick:function(){if(this.isReadOnly()){return}var e=this;var t=new n.NomadBean;t.module=this.model.module;t.fields={};t.attributes=n.utils.deepCopy(this.model.attributes);_.each(this.def.fields,function(i){t.fields[i.name]=n.utils.deepCopy(e.model.fields[i.name]);t.attributes[i.name]=e.model.attributes[i.name]});var i=n.context.getContext({editedFieldName:this.label,addressFields:this._prepareAddressFieldDefs(),parentModel:this.model,model:t,collection:new n.BeanCollection,skipFetch:true});i.prepare();n.controller.loadDynamic({layoutDef:{className:"edit-address",gaTrack:"address",meta:{components:[{view:"address-edit"}]},context:i}})},bindDataChange:function(){if(this.model){_.each(this.def.fields,function(e){this.model.on("change:"+e.name,this.render,this)},this)}},onBeforeRender:function(){this._super();var e=[];var t=[];var i=/street/;_.each(this.def.fields,function(a){var o=this.model.get(a.name);if(o){var r=a.name;if(i.exec(r)){if(!n.serverInfo.isSevenUp){o=o.replace(/(\n(\r)?)/g," ").replace(/\s{2,}/g," ");this.model.set(r,o)}e.push(o)}else{t.push(o)}}},this);this.addressValue=(e.length>0?e.join()+"\n":"")+t.join(" ")},_checkAccessToAction:function(e){return n.acl.hasAccessToModel(e,this.model,this.def.fields[0].name)},_handleValidationError:function(e){var t;var i={};var a=[];var o=this.$(".control-group");var r=this.model.module;_.each(e,function(e,t){if(_.contains(this.fieldNames,t)){i[t]=e}},this);o.children(".field__error-message").remove();if(_.isEmpty(i))return;o.addClass("error");_.each(i,function(e,t){var i=_.find(this.def.fields,function(e){return e.name===t});var o=i?n.lang.get(i.label,r):t;_.each(e,function(e,t){a.push(o+" : "+n.error.getErrorString(t,e))})},this);t=n.template.get("edit-field-error");o.append(t(a))},openAddress:function(){var e={};e[this.name]=this.def.fields;var t=this.model.getAddresses(e);o.openAddress({addresses:t})},getSubfield:function(e){var t=_.findWhere(this.def.fields,{name:e});var i=this;if(!t){return null}if(!this._subfieldStub[e]){this._subfieldStub[e]=n.view.createField({def:t,view:this.view,model:this.model});this._subfieldStub[e].setRequired=function(e){var t=i.required;this._super(e);i.required=i.isRequired();if(t!==i.required){i.render()}}.bind(this)}return this._subfieldStub[e]},isRequired:function(){var e=this._subfieldStub||{};return _.any(this.def.fields,function(t){return e[t.name]?e[t.name].isRequired():t.required||n.metadata.getModule(this.module).fields[t.name].required},this)},_prepareAddressFieldDefs:function(){return _.map(this.def.fields,function(e){var t=this._subfieldStub[e.name];var i=e;if(t){i=_.extend({},e,{view:t.isDisabled()||t.isReadOnly()?"readonly":undefined,required:t.isRequired()})}return i},this)},_dispose:function(){this._super();this._subfieldStub=null}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(283);e.exports=a.extendField(o,"Tag",{initialize:function(e){if(e.view.name==="edit"){e.viewName="readonly"}this._super(e)}})},function(e,t){var i=function(e){var t=$(e.currentTarget);t.parent().toggleClass("not-empty",t.val())};var n=function(e){var t;var i;var n;var a;var o=$(e.currentTarget).parent().find("input");var r=o.parents(".control-group");if(!_.isEmpty(r)){i=r.parents(".wrapper__clear-field").eq(0);n=o.parents(".control-group").eq(0).parent().index();a=o.parents(".control-group").find("input").index(o)}o.val("");o.parent().removeClass("not-empty");o.trigger("change");if(!_.isEmpty(r)){t=i.children().eq(n).find("input");if(!_.isEmpty(t)){t=t.get(a);if(t){t.focus()}}}e.preventDefault();e.stopPropagation()};$(document).on("keyup.clear-field","input",i).on("focusin.clear-field","input",i).on("touchend.clear-field",".clear-button",n)},function(e,t){"use strict";var i=SUGAR.App;var n=false;function a(e){_.delay(function(){var t=$(e.target);if(!n&&!t.hasClass("inert")&&!t.hasClass("grip")){$(e.currentTarget).addClass("selected-item")}},50)}function o(e){_.delay(function(){$(e.currentTarget).removeClass("selected-item");n=false},50)}function r(e){if(!n){$(e.currentTarget).removeClass("selected-item")}n=true}$(function(){$(document.body).on({"touchstart.fast-click-highlight":a,"touchmove.fast-click-highlight":r,"touchend.fast-click-highlight":o,"touchcancel.fast-click-highlight":o},".fast-click-highlighted")})},function(e,t){"use strict";var i=SUGAR.App;function n(e){a(e);if(!i.isTablet||!$.os.android){return}var t=$(e.target);var n=t.parents(".scroll").get(0);var o=t.parents("span[sfuuid]").get(0);if(n&&o){_.delay(function(){n.scrollTop=o.offsetTop},1e3)}}function a(e){var t=$(e.target).parents(".control-group");if(t){t.toggleClass("field_onfocus")}}$(function(){$(document.body).on({"focus.focus-on-input":n,"blur.focus-on-input":a},"input").on({"focus.focus-on-input":a,"blur.focus-on-input":a},"select")})},function(e,t){(function(e){var t=e.config.raven;var i=function(){var e=[];var i=t&&t.enabled&&t.enhancedErrorReporting&&t.enhancedErrorReporting.maxLogSize;return{push:function(t){t.timestamp=(new Date).toISOString();e.push(t);if(e.length>i){e.shift()}},empty:function(){e=[]},getAll:function(){return _.clone(e).reverse()}}}();function n(e,t,i){var n=e[t];e[t]=function(){i.apply(this,arguments);return n.apply(this,arguments)};e[t]._originalMethod=n}function a(e,t){e[t]=e[t]._originalMethod}function o(e,t,i){var n={method:e,module:t.module};if(t.id){n.modelId=t.id}if(t.filterDef){n.filterDef=t.filterDef}if(i){n.options=_.pick(i,["byPtr","limit","myItems","query","offset"]);if(i.relate&&t.link&&t.link.bean){n.link=t.link.name;n.parentModule=t.link.bean.module;n.parentId=t.link.bean.id}if(i.favorite){n.action=t.get("my_favorite")?"favorite":"unfavorite"}if(i.following){n.action=t.get("following")?"follow":"unfollow"}}return n}function r(e){return{route:e}}function s(e,t,i){return{code:e.code,status:e.status}}function l(e){return{options:e}}var c=[{context:e.data,method:"sync",filter:o,label:"data-manager.sync"},{context:e.nomad,method:"login",label:"app.login"},{context:e.nomad,method:"logout",label:"app.logout"},{context:e.nomad,method:"onMemoryWarning"},{context:e.nomad,method:"onResume"},{context:e.nomad,method:"onPause"},{context:e.error,method:"handleHttpError",filter:s},{context:e.NomadController.prototype,method:"navigate",filter:r},{context:e.NomadController.prototype,method:"goBack"},{context:e.NomadController.prototype,method:"clean",label:"controller.clean"},{context:e.view.NomadLayoutManager,method:"loadStatic",filter:l},{context:e.view.NomadLayoutManager,method:"loadDynamic",filter:l}];var d={init:function(){if(!(t&&t.enabled&&t.enhancedErrorReporting)||this.initialized)return false;_.each(c,function(e){n(e.context,e.method,function(){var t={label:e.label||e.method};if(e.filter){_.extend(t,e.filter.apply(this,arguments)||{})}i.push(t)})});this.initialized=true},getLog:function(){return i.getAll()},dispose:function(){_.each(c,function(e){a(e.context,e.method)});i.empty();this.initialized=false}};e.augment("enhancedErrorReporter",d,true)})(SUGAR.App)},function(e,t,i){(function(e){var t=i(258);_.extend(e.nomad,{preInit:function(t,i){t.app.productVersion=e.config.appVersion;t.app.productBuild=e.config.appBuild;t.device=$.os;if(window.navigator.standalone){e.controller.navigateToDefaultView()}this.initAppCache();this.initAnalytics();if(!e.config.allowBrowserContextMenu&&$.browser.chromeWeb){window.addEventListener("contextmenu",function(e){e.preventDefault()})}if(e.offline&&e.config.offline)e.config.offline.storageAdapter="webSql";i()},initAppCache:function(){var i=window.applicationCache;if(!i)return;i.addEventListener("updateready",function(n){t.showConfirm(e.lang.get("LBL_NEW_WEB_VERSION"),{callback:function(){e.logger.debug("Swapping application cache and reloading page");i.swapCache();window.location.reload()}})},false)},openAppStore:function(){},initAnalytics:function(){Analytics=function(){};function e(){if(window.ga)ga.apply(window,arguments)}_.extend(Analytics.prototype,{start:function(t,i){e("create",t,"none");if(i.optOut){window["ga-disable-"+t]=true}e("set","anonymizeIp",i.anonymize)},startSession:function(){},trackPageView:function(t){e("send","pageview",t)},trackEvent:function(t){e("send","event",t.category,t.action,t.label,t.value)},setDimension:function(t){e("set","dimension"+t.index,t.value)},setMetric:function(t){e("set","metric"+t.index,t.value)}});analytics=new Analytics},loadAnalytics:function(){(function(e,t,i,n,a,o,r){e["GoogleAnalyticsObject"]=a;e[a]=e[a]||function(){(e[a].q=e[a].q||[]).push(arguments)},e[a].l=1*new Date;o=t.createElement(i),r=t.getElementsByTagName(i)[0];o.async=1;o.src=n;r.parentNode.insertBefore(o,r)})(window,document,"script","//www.google-analytics.com/analytics.js","ga")},getConnectionType:function(){return"none"},isOnline:function(){return window.navigator.onLine},openDb:function n(e){return window.openDatabase(e.name,"1.0",e.name,5)},_isPlatformSupported:function(){return $.os.ios&&$.browser.safari&&e.utils.versionCompare($.os.version,"8",">=")||$.os.android&&$.browser.chrome&&e.utils.versionCompare($.os.version,"4.1",">=")||!$.os.ios&&!$.os.android&&$.browser.webkit||e.config.env==="dev"}})})(SUGAR.App)},function(e,t){var i=SUGAR.App;_.extend(i.loginManager,{handleExternalLogin:function(e,t){window.location.href=e.payload.url},handleExternalLogout:function(e){var t=new Image;t.src=e},handleAuthTokens:function(){var e;var t;var n=i[i.config.authStore];var a=["_AuthAccessToken","_AuthRefreshToken","_DownloadToken"];_.each(a,function(i){e=window.localStorage.getItem(i);if(e){t=true;n.set(i.slice(1),e);window.localStorage.removeItem(i)}});if(t){i.api.setExternalLogin(true);i.trigger("app:login:success")}}})},function(e,t,i){var n=SUGAR.App;var a=i(257);var o=i(262);e.exports=a.extendView(o,"ErrorEmulation",{globalEvents:{"app:error:emulation:exceptions":"processExceptions"},events:{"click .error-emulation-check input":"onClick","change .error-emulation-select":"onSelectChange"},initialize:function(e){var t=["app:error:emulation:offline","app:error:emulation:http","app:error:emulation:api","app:error:emulation:crud","app:error:emulation:exceptions"];_.each(t,function(e){n.events.unregister(n,e);n.events.register(e,n)});this._super(e)},onBeforeRender:function(){var e=n.config.errorEmulation;var t=e.emulationExceptions;var i=_.findWhere(e.http,{status:true});var a=_.keys(e.api);var o;var r;if(i){o=_.contains(_.keys(t),i.name);if(t[i.name]){r=_.difference(a,t[i.name].methods)}}this.crudDisabled=o;this.offlineErrorItems={};_.each(e.offline,function(e,t){this.offlineErrorItems[t]=e.status},this);this.offlineDisabled=_.isEmpty(this.offlineErrorItems);this.httpErrorItems={};_.each(e.http,function(e){this.httpErrorItems[e.name]=e.status},this);this.apiErrorItems={};_.each(e.api,function(e,t){this.apiErrorItems[t]={status:e.status,crud:e.crud,disabled:r&&_.contains(r,t)}},this);if(!n.serverInfo.isSevenUp){delete this.apiErrorItems.follow}},onAfterRender:function(){this.$crudSelects=this.$el.find("[data-type=crud]");this.$apiBoxes=this.$el.find("[data-type=api]")},getHeaderConfig:function(){return{title:"Error Emulation",save:false,back:true}},onClick:function(e){var t=$(e.target).data("type");var i=$(e.target).data("key");var a="app:error:emulation:"+t;n.config.errorEmulation[t][i].status=!n.config.errorEmulation[t][i].status;n.trigger(a,i)},onSelectChange:function(e){var t=$(e.target).attr("data-type");var i=$(e.target).attr("data-parent-type");var a=e.target.value;var o="app:error:emulation:"+t;var r=i?n.config.errorEmulation.api[i][t]:n.config.errorEmulation[t];this.updateConfig(r,a);n.trigger(o,a)},updateConfig:function(e,t){var i=_.findWhere(e,{name:t});_.each(e,function(e){e.status=false});if(t!=="default"){i.status=true}},processExceptions:function(e){var t=this;if(e.code==="enableAll"){this.$crudSelects.prop("disabled",false);this.$apiBoxes.prop("disabled",false)}else{if(e.operation){this.$crudSelects.val(e.operation);_.each(this.$crudSelects,function(i){var a=$(i).attr("data-parent-type");var o=n.config.errorEmulation.api[a].crud;t.updateConfig(o,e.operation)});this.$crudSelects.prop("disabled","disabled")}if(e.methods){var i=_.map(e.methods,function(e){return"."+e}).join(", ");var a=this.$apiBoxes.not(i).prop("disabled","disabled").prop("checked",false);_.each(a,function(e){var t=$(e).data("key");n.config.errorEmulation.api[t].status=false})}}}})}]);